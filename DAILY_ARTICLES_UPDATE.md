# 每日文章数量更新

## 变更内容

已将每日自动生成的文章数量从 **1篇** 更新为 **12篇**，采用分布式生成策略：
- 每次生成 **3篇** 文章
- 每天执行 **4次**（上午6:00, 10:00, 下午2:00, 6:00）
- 总计每天 **12篇** 文章

## 修改的文件

### 1. `config.json`
- 将 `articles_per_day` 从 `1` 修改为 `3`（每次生成3篇）

### 2. `.github/workflows/daily-article.yml`
- 更新步骤名称从 "Generate article" 到 "Generate articles"
- 修改执行时间为每天4次（上午6:00, 10:00, 下午2:00, 6:00）
- 调整任务超时时间为 30 分钟（每次生成3篇文章）
- 减少文章生成间隔时间（从5秒减少到3秒）

### 3. `scripts/generate_article.py`
- 优化文章生成间隔时间，提高效率

## 技术细节

### 文章生成逻辑
- 脚本会循环生成指定数量的文章（每次3篇）
- 每篇文章生成后会有3秒的间隔，避免API调用过于频繁
- 所有文章都会添加到 `articles.json` 索引中
- 每篇文章都会生成对应的HTML文件
- 每天执行4次，总计12篇文章

### 文章类型分布
脚本会从以下5个分类中随机选择：
1. **品种介绍** - 各种猫咪品种的详细介绍
2. **幼猫护理** - 幼猫喂养、训练等知识
3. **用品测评** - 猫粮、猫砂、玩具等用品评测
4. **健康护理** - 猫咪疾病预防和治疗
5. **行为训练** - 猫咪行为问题的解决方法

### 避免重复
- 脚本会记录已使用的话题，避免生成重复内容
- 使用 `used_topics.json` 文件跟踪已生成的话题

## 注意事项

1. **API成本**：每天生成12篇文章会增加API调用成本
2. **执行时间**：每次执行预计需要15-20分钟（生成3篇文章）
3. **执行频率**：每天执行4次，分布更均匀
4. **存储空间**：每天会增加12个HTML文件
5. **内容质量**：建议定期检查生成的内容质量

## 监控建议

1. 定期检查 `articles.json` 文件，确保文章索引正确
2. 监控GitHub Actions的执行日志
3. 检查生成的文章内容质量
4. 关注API使用量和成本

## 回滚方案

如果需要回滚到每天1篇文章，只需修改 `config.json` 中的 `articles_per_day` 值，并将GitHub Actions的执行时间改回每天一次：

```json
{
  "articles_per_day": 1
}
```

同时将 `.github/workflows/daily-article.yml` 中的cron表达式改回：
```yaml
- cron: '0 2 * * *'  # 每天上午 10:00 (UTC+8 02:00) 运行
```

## 测试

可以使用以下命令测试配置：

```bash
python scripts/test_config.py
```

这将显示当前的配置状态和API密钥设置情况。 