const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Home-DXDvPq_e.js","assets/ArticleCard-W4_svnRl.js","assets/Home-Cq8HYn9O.css","assets/About-DfJaN7VX.js","assets/About-B4evYfQs.css","assets/Article-B-F39may.js","assets/Article-Cxux6Jrb.css","assets/Category-zCIGHnM6.js","assets/Category-CmZ87Hnq.css","assets/Upload-RaR0PwDG.js","assets/Upload-DQm6_ArX.css","assets/NotFound-BfY8IbUn.js","assets/NotFound-BR4Af-W6.css"])))=>i.map(i=>d[i]);
(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function r(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(o){if(o.ep)return;o.ep=!0;const i=r(o);fetch(o.href,i)}})();/**
* @vue/shared v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function Jl(e){const t=Object.create(null);for(const r of e.split(","))t[r]=1;return r=>r in t}const Ue={},Ni=[],Dr=()=>{},hb=()=>!1,ou=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),Yl=e=>e.startsWith("onUpdate:"),dt=Object.assign,Ql=(e,t)=>{const r=e.indexOf(t);r>-1&&e.splice(r,1)},pb=Object.prototype.hasOwnProperty,Oe=(e,t)=>pb.call(e,t),le=Array.isArray,Li=e=>su(e)==="[object Map]",sg=e=>su(e)==="[object Set]",he=e=>typeof e=="function",Ve=e=>typeof e=="string",Ln=e=>typeof e=="symbol",Be=e=>e!==null&&typeof e=="object",ag=e=>(Be(e)||he(e))&&he(e.then)&&he(e.catch),ug=Object.prototype.toString,su=e=>ug.call(e),vb=e=>su(e).slice(8,-1),cg=e=>su(e)==="[object Object]",Xl=e=>Ve(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Uo=Jl(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),au=e=>{const t=Object.create(null);return r=>t[r]||(t[r]=e(r))},gb=/-(\w)/g,Yt=au(e=>e.replace(gb,(t,r)=>r?r.toUpperCase():"")),mb=/\B([A-Z])/g,hi=au(e=>e.replace(mb,"-$1").toLowerCase()),uu=au(e=>e.charAt(0).toUpperCase()+e.slice(1)),Yu=au(e=>e?`on${uu(e)}`:""),On=(e,t)=>!Object.is(e,t),Qu=(e,...t)=>{for(let r=0;r<e.length;r++)e[r](...t)},Zc=(e,t,r,n=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:n,value:r})},yb=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let wd;const cu=()=>wd||(wd=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Zl(e){if(le(e)){const t={};for(let r=0;r<e.length;r++){const n=e[r],o=Ve(n)?Eb(n):Zl(n);if(o)for(const i in o)t[i]=o[i]}return t}else if(Ve(e)||Be(e))return e}const _b=/;(?![^(]*\))/g,bb=/:([^]+)/,wb=/\/\*[^]*?\*\//g;function Eb(e){const t={};return e.replace(wb,"").split(_b).forEach(r=>{if(r){const n=r.split(bb);n.length>1&&(t[n[0].trim()]=n[1].trim())}}),t}function yn(e){let t="";if(Ve(e))t=e;else if(le(e))for(let r=0;r<e.length;r++){const n=yn(e[r]);n&&(t+=n+" ")}else if(Be(e))for(const r in e)e[r]&&(t+=r+" ");return t.trim()}const Sb="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Ib=Jl(Sb);function lg(e){return!!e||e===""}const fg=e=>!!(e&&e.__v_isRef===!0),dg=e=>Ve(e)?e:e==null?"":le(e)||Be(e)&&(e.toString===ug||!he(e.toString))?fg(e)?dg(e.value):JSON.stringify(e,hg,2):String(e),hg=(e,t)=>fg(t)?hg(e,t.value):Li(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((r,[n,o],i)=>(r[Xu(n,i)+" =>"]=o,r),{})}:sg(t)?{[`Set(${t.size})`]:[...t.values()].map(r=>Xu(r))}:Ln(t)?Xu(t):Be(t)&&!le(t)&&!cg(t)?String(t):t,Xu=(e,t="")=>{var r;return Ln(e)?`Symbol(${(r=e.description)!=null?r:t})`:e};/**
* @vue/reactivity v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let ut;class pg{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=ut,!t&&ut&&(this.index=(ut.scopes||(ut.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,r;if(this.scopes)for(t=0,r=this.scopes.length;t<r;t++)this.scopes[t].pause();for(t=0,r=this.effects.length;t<r;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,r;if(this.scopes)for(t=0,r=this.scopes.length;t<r;t++)this.scopes[t].resume();for(t=0,r=this.effects.length;t<r;t++)this.effects[t].resume()}}run(t){if(this._active){const r=ut;try{return ut=this,t()}finally{ut=r}}}on(){++this._on===1&&(this.prevScope=ut,ut=this)}off(){this._on>0&&--this._on===0&&(ut=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let r,n;for(r=0,n=this.effects.length;r<n;r++)this.effects[r].stop();for(this.effects.length=0,r=0,n=this.cleanups.length;r<n;r++)this.cleanups[r]();if(this.cleanups.length=0,this.scopes){for(r=0,n=this.scopes.length;r<n;r++)this.scopes[r].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const o=this.parent.scopes.pop();o&&o!==this&&(this.parent.scopes[this.index]=o,o.index=this.index)}this.parent=void 0}}}function vg(e){return new pg(e)}function gg(){return ut}function Tb(e,t=!1){ut&&ut.cleanups.push(e)}let De;const Zu=new WeakSet;class mg{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,ut&&ut.active&&ut.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Zu.has(this)&&(Zu.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||_g(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Ed(this),bg(this);const t=De,r=dr;De=this,dr=!0;try{return this.fn()}finally{wg(this),De=t,dr=r,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)rf(t);this.deps=this.depsTail=void 0,Ed(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Zu.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){el(this)&&this.run()}get dirty(){return el(this)}}let yg=0,$o,Fo;function _g(e,t=!1){if(e.flags|=8,t){e.next=Fo,Fo=e;return}e.next=$o,$o=e}function ef(){yg++}function tf(){if(--yg>0)return;if(Fo){let t=Fo;for(Fo=void 0;t;){const r=t.next;t.next=void 0,t.flags&=-9,t=r}}let e;for(;$o;){let t=$o;for($o=void 0;t;){const r=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(n){e||(e=n)}t=r}}if(e)throw e}function bg(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function wg(e){let t,r=e.depsTail,n=r;for(;n;){const o=n.prevDep;n.version===-1?(n===r&&(r=o),rf(n),Ob(n)):t=n,n.dep.activeLink=n.prevActiveLink,n.prevActiveLink=void 0,n=o}e.deps=t,e.depsTail=r}function el(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(Eg(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function Eg(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===Xo)||(e.globalVersion=Xo,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!el(e))))return;e.flags|=2;const t=e.dep,r=De,n=dr;De=e,dr=!0;try{bg(e);const o=e.fn(e._value);(t.version===0||On(o,e._value))&&(e.flags|=128,e._value=o,t.version++)}catch(o){throw t.version++,o}finally{De=r,dr=n,wg(e),e.flags&=-3}}function rf(e,t=!1){const{dep:r,prevSub:n,nextSub:o}=e;if(n&&(n.nextSub=o,e.prevSub=void 0),o&&(o.prevSub=n,e.nextSub=void 0),r.subs===e&&(r.subs=n,!n&&r.computed)){r.computed.flags&=-5;for(let i=r.computed.deps;i;i=i.nextDep)rf(i,!0)}!t&&!--r.sc&&r.map&&r.map.delete(r.key)}function Ob(e){const{prevDep:t,nextDep:r}=e;t&&(t.nextDep=r,e.prevDep=void 0),r&&(r.prevDep=t,e.nextDep=void 0)}let dr=!0;const Sg=[];function tn(){Sg.push(dr),dr=!1}function rn(){const e=Sg.pop();dr=e===void 0?!0:e}function Ed(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const r=De;De=void 0;try{t()}finally{De=r}}}let Xo=0;class Ab{constructor(t,r){this.sub=t,this.dep=r,this.version=r.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class nf{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(t){if(!De||!dr||De===this.computed)return;let r=this.activeLink;if(r===void 0||r.sub!==De)r=this.activeLink=new Ab(De,this),De.deps?(r.prevDep=De.depsTail,De.depsTail.nextDep=r,De.depsTail=r):De.deps=De.depsTail=r,Ig(r);else if(r.version===-1&&(r.version=this.version,r.nextDep)){const n=r.nextDep;n.prevDep=r.prevDep,r.prevDep&&(r.prevDep.nextDep=n),r.prevDep=De.depsTail,r.nextDep=void 0,De.depsTail.nextDep=r,De.depsTail=r,De.deps===r&&(De.deps=n)}return r}trigger(t){this.version++,Xo++,this.notify(t)}notify(t){ef();try{for(let r=this.subs;r;r=r.prevSub)r.sub.notify()&&r.sub.dep.notify()}finally{tf()}}}function Ig(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let n=t.deps;n;n=n.nextDep)Ig(n)}const r=e.dep.subs;r!==e&&(e.prevSub=r,r&&(r.nextSub=e)),e.dep.subs=e}}const pa=new WeakMap,ti=Symbol(""),tl=Symbol(""),Zo=Symbol("");function ct(e,t,r){if(dr&&De){let n=pa.get(e);n||pa.set(e,n=new Map);let o=n.get(r);o||(n.set(r,o=new nf),o.map=n,o.key=r),o.track()}}function Jr(e,t,r,n,o,i){const a=pa.get(e);if(!a){Xo++;return}const u=l=>{l&&l.trigger()};if(ef(),t==="clear")a.forEach(u);else{const l=le(e),s=l&&Xl(r);if(l&&r==="length"){const c=Number(n);a.forEach((f,d)=>{(d==="length"||d===Zo||!Ln(d)&&d>=c)&&u(f)})}else switch((r!==void 0||a.has(void 0))&&u(a.get(r)),s&&u(a.get(Zo)),t){case"add":l?s&&u(a.get("length")):(u(a.get(ti)),Li(e)&&u(a.get(tl)));break;case"delete":l||(u(a.get(ti)),Li(e)&&u(a.get(tl)));break;case"set":Li(e)&&u(a.get(ti));break}}tf()}function Rb(e,t){const r=pa.get(e);return r&&r.get(t)}function gi(e){const t=Ee(e);return t===e?t:(ct(t,"iterate",Zo),Jt(e)?t:t.map(rt))}function lu(e){return ct(e=Ee(e),"iterate",Zo),e}const Cb={__proto__:null,[Symbol.iterator](){return ec(this,Symbol.iterator,rt)},concat(...e){return gi(this).concat(...e.map(t=>le(t)?gi(t):t))},entries(){return ec(this,"entries",e=>(e[1]=rt(e[1]),e))},every(e,t){return Br(this,"every",e,t,void 0,arguments)},filter(e,t){return Br(this,"filter",e,t,r=>r.map(rt),arguments)},find(e,t){return Br(this,"find",e,t,rt,arguments)},findIndex(e,t){return Br(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return Br(this,"findLast",e,t,rt,arguments)},findLastIndex(e,t){return Br(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return Br(this,"forEach",e,t,void 0,arguments)},includes(...e){return tc(this,"includes",e)},indexOf(...e){return tc(this,"indexOf",e)},join(e){return gi(this).join(e)},lastIndexOf(...e){return tc(this,"lastIndexOf",e)},map(e,t){return Br(this,"map",e,t,void 0,arguments)},pop(){return lo(this,"pop")},push(...e){return lo(this,"push",e)},reduce(e,...t){return Sd(this,"reduce",e,t)},reduceRight(e,...t){return Sd(this,"reduceRight",e,t)},shift(){return lo(this,"shift")},some(e,t){return Br(this,"some",e,t,void 0,arguments)},splice(...e){return lo(this,"splice",e)},toReversed(){return gi(this).toReversed()},toSorted(e){return gi(this).toSorted(e)},toSpliced(...e){return gi(this).toSpliced(...e)},unshift(...e){return lo(this,"unshift",e)},values(){return ec(this,"values",rt)}};function ec(e,t,r){const n=lu(e),o=n[t]();return n!==e&&!Jt(e)&&(o._next=o.next,o.next=()=>{const i=o._next();return i.value&&(i.value=r(i.value)),i}),o}const xb=Array.prototype;function Br(e,t,r,n,o,i){const a=lu(e),u=a!==e&&!Jt(e),l=a[t];if(l!==xb[t]){const f=l.apply(e,i);return u?rt(f):f}let s=r;a!==e&&(u?s=function(f,d){return r.call(this,rt(f),d,e)}:r.length>2&&(s=function(f,d){return r.call(this,f,d,e)}));const c=l.call(a,s,n);return u&&o?o(c):c}function Sd(e,t,r,n){const o=lu(e);let i=r;return o!==e&&(Jt(e)?r.length>3&&(i=function(a,u,l){return r.call(this,a,u,l,e)}):i=function(a,u,l){return r.call(this,a,rt(u),l,e)}),o[t](i,...n)}function tc(e,t,r){const n=Ee(e);ct(n,"iterate",Zo);const o=n[t](...r);return(o===-1||o===!1)&&af(r[0])?(r[0]=Ee(r[0]),n[t](...r)):o}function lo(e,t,r=[]){tn(),ef();const n=Ee(e)[t].apply(e,r);return tf(),rn(),n}const Pb=Jl("__proto__,__v_isRef,__isVue"),Tg=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Ln));function Nb(e){Ln(e)||(e=String(e));const t=Ee(this);return ct(t,"has",e),t.hasOwnProperty(e)}class Og{constructor(t=!1,r=!1){this._isReadonly=t,this._isShallow=r}get(t,r,n){if(r==="__v_skip")return t.__v_skip;const o=this._isReadonly,i=this._isShallow;if(r==="__v_isReactive")return!o;if(r==="__v_isReadonly")return o;if(r==="__v_isShallow")return i;if(r==="__v_raw")return n===(o?i?qb:xg:i?Cg:Rg).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(n)?t:void 0;const a=le(t);if(!o){let l;if(a&&(l=Cb[r]))return l;if(r==="hasOwnProperty")return Nb}const u=Reflect.get(t,r,qe(t)?t:n);return(Ln(r)?Tg.has(r):Pb(r))||(o||ct(t,"get",r),i)?u:qe(u)?a&&Xl(r)?u:u.value:Be(u)?o?Ng(u):_s(u):u}}class Ag extends Og{constructor(t=!1){super(!1,t)}set(t,r,n,o){let i=t[r];if(!this._isShallow){const l=xn(i);if(!Jt(n)&&!xn(n)&&(i=Ee(i),n=Ee(n)),!le(t)&&qe(i)&&!qe(n))return l?!1:(i.value=n,!0)}const a=le(t)&&Xl(r)?Number(r)<t.length:Oe(t,r),u=Reflect.set(t,r,n,qe(t)?t:o);return t===Ee(o)&&(a?On(n,i)&&Jr(t,"set",r,n):Jr(t,"add",r,n)),u}deleteProperty(t,r){const n=Oe(t,r);t[r];const o=Reflect.deleteProperty(t,r);return o&&n&&Jr(t,"delete",r,void 0),o}has(t,r){const n=Reflect.has(t,r);return(!Ln(r)||!Tg.has(r))&&ct(t,"has",r),n}ownKeys(t){return ct(t,"iterate",le(t)?"length":ti),Reflect.ownKeys(t)}}class Lb extends Og{constructor(t=!1){super(!0,t)}set(t,r){return!0}deleteProperty(t,r){return!0}}const Db=new Ag,Ub=new Lb,$b=new Ag(!0);const rl=e=>e,Os=e=>Reflect.getPrototypeOf(e);function Fb(e,t,r){return function(...n){const o=this.__v_raw,i=Ee(o),a=Li(i),u=e==="entries"||e===Symbol.iterator&&a,l=e==="keys"&&a,s=o[e](...n),c=r?rl:t?va:rt;return!t&&ct(i,"iterate",l?tl:ti),{next(){const{value:f,done:d}=s.next();return d?{value:f,done:d}:{value:u?[c(f[0]),c(f[1])]:c(f),done:d}},[Symbol.iterator](){return this}}}}function As(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function Mb(e,t){const r={get(o){const i=this.__v_raw,a=Ee(i),u=Ee(o);e||(On(o,u)&&ct(a,"get",o),ct(a,"get",u));const{has:l}=Os(a),s=t?rl:e?va:rt;if(l.call(a,o))return s(i.get(o));if(l.call(a,u))return s(i.get(u));i!==a&&i.get(o)},get size(){const o=this.__v_raw;return!e&&ct(Ee(o),"iterate",ti),Reflect.get(o,"size",o)},has(o){const i=this.__v_raw,a=Ee(i),u=Ee(o);return e||(On(o,u)&&ct(a,"has",o),ct(a,"has",u)),o===u?i.has(o):i.has(o)||i.has(u)},forEach(o,i){const a=this,u=a.__v_raw,l=Ee(u),s=t?rl:e?va:rt;return!e&&ct(l,"iterate",ti),u.forEach((c,f)=>o.call(i,s(c),s(f),a))}};return dt(r,e?{add:As("add"),set:As("set"),delete:As("delete"),clear:As("clear")}:{add(o){!t&&!Jt(o)&&!xn(o)&&(o=Ee(o));const i=Ee(this);return Os(i).has.call(i,o)||(i.add(o),Jr(i,"add",o,o)),this},set(o,i){!t&&!Jt(i)&&!xn(i)&&(i=Ee(i));const a=Ee(this),{has:u,get:l}=Os(a);let s=u.call(a,o);s||(o=Ee(o),s=u.call(a,o));const c=l.call(a,o);return a.set(o,i),s?On(i,c)&&Jr(a,"set",o,i):Jr(a,"add",o,i),this},delete(o){const i=Ee(this),{has:a,get:u}=Os(i);let l=a.call(i,o);l||(o=Ee(o),l=a.call(i,o)),u&&u.call(i,o);const s=i.delete(o);return l&&Jr(i,"delete",o,void 0),s},clear(){const o=Ee(this),i=o.size!==0,a=o.clear();return i&&Jr(o,"clear",void 0,void 0),a}}),["keys","values","entries",Symbol.iterator].forEach(o=>{r[o]=Fb(o,e,t)}),r}function of(e,t){const r=Mb(e,t);return(n,o,i)=>o==="__v_isReactive"?!e:o==="__v_isReadonly"?e:o==="__v_raw"?n:Reflect.get(Oe(r,o)&&o in n?r:n,o,i)}const Bb={get:of(!1,!1)},jb={get:of(!1,!0)},kb={get:of(!0,!1)};const Rg=new WeakMap,Cg=new WeakMap,xg=new WeakMap,qb=new WeakMap;function Wb(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Hb(e){return e.__v_skip||!Object.isExtensible(e)?0:Wb(vb(e))}function _s(e){return xn(e)?e:sf(e,!1,Db,Bb,Rg)}function Pg(e){return sf(e,!1,$b,jb,Cg)}function Ng(e){return sf(e,!0,Ub,kb,xg)}function sf(e,t,r,n,o){if(!Be(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const i=Hb(e);if(i===0)return e;const a=o.get(e);if(a)return a;const u=new Proxy(e,i===2?n:r);return o.set(e,u),u}function An(e){return xn(e)?An(e.__v_raw):!!(e&&e.__v_isReactive)}function xn(e){return!!(e&&e.__v_isReadonly)}function Jt(e){return!!(e&&e.__v_isShallow)}function af(e){return e?!!e.__v_raw:!1}function Ee(e){const t=e&&e.__v_raw;return t?Ee(t):e}function uf(e){return!Oe(e,"__v_skip")&&Object.isExtensible(e)&&Zc(e,"__v_skip",!0),e}const rt=e=>Be(e)?_s(e):e,va=e=>Be(e)?Ng(e):e;function qe(e){return e?e.__v_isRef===!0:!1}function Ur(e){return Lg(e,!1)}function Gb(e){return Lg(e,!0)}function Lg(e,t){return qe(e)?e:new Vb(e,t)}class Vb{constructor(t,r){this.dep=new nf,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=r?t:Ee(t),this._value=r?t:rt(t),this.__v_isShallow=r}get value(){return this.dep.track(),this._value}set value(t){const r=this._rawValue,n=this.__v_isShallow||Jt(t)||xn(t);t=n?t:Ee(t),On(t,r)&&(this._rawValue=t,this._value=n?t:rt(t),this.dep.trigger())}}function Rn(e){return qe(e)?e.value:e}const Kb={get:(e,t,r)=>t==="__v_raw"?e:Rn(Reflect.get(e,t,r)),set:(e,t,r,n)=>{const o=e[t];return qe(o)&&!qe(r)?(o.value=r,!0):Reflect.set(e,t,r,n)}};function Dg(e){return An(e)?e:new Proxy(e,Kb)}function zb(e){const t=le(e)?new Array(e.length):{};for(const r in e)t[r]=Yb(e,r);return t}class Jb{constructor(t,r,n){this._object=t,this._key=r,this._defaultValue=n,this.__v_isRef=!0,this._value=void 0}get value(){const t=this._object[this._key];return this._value=t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}get dep(){return Rb(Ee(this._object),this._key)}}function Yb(e,t,r){const n=e[t];return qe(n)?n:new Jb(e,t,r)}class Qb{constructor(t,r,n){this.fn=t,this.setter=r,this._value=void 0,this.dep=new nf(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Xo-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!r,this.isSSR=n}notify(){if(this.flags|=16,!(this.flags&8)&&De!==this)return _g(this,!0),!0}get value(){const t=this.dep.track();return Eg(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function Xb(e,t,r=!1){let n,o;return he(e)?n=e:(n=e.get,o=e.set),new Qb(n,o,r)}const Rs={},ga=new WeakMap;let Wn;function Zb(e,t=!1,r=Wn){if(r){let n=ga.get(r);n||ga.set(r,n=[]),n.push(e)}}function ew(e,t,r=Ue){const{immediate:n,deep:o,once:i,scheduler:a,augmentJob:u,call:l}=r,s=I=>o?I:Jt(I)||o===!1||o===0?_n(I,1):_n(I);let c,f,d,v,m=!1,b=!1;if(qe(e)?(f=()=>e.value,m=Jt(e)):An(e)?(f=()=>s(e),m=!0):le(e)?(b=!0,m=e.some(I=>An(I)||Jt(I)),f=()=>e.map(I=>{if(qe(I))return I.value;if(An(I))return s(I);if(he(I))return l?l(I,2):I()})):he(e)?t?f=l?()=>l(e,2):e:f=()=>{if(d){tn();try{d()}finally{rn()}}const I=Wn;Wn=c;try{return l?l(e,3,[v]):e(v)}finally{Wn=I}}:f=Dr,t&&o){const I=f,R=o===!0?1/0:o;f=()=>_n(I(),R)}const w=gg(),_=()=>{c.stop(),w&&w.active&&Ql(w.effects,c)};if(i&&t){const I=t;t=(...R)=>{I(...R),_()}}let E=b?new Array(e.length).fill(Rs):Rs;const A=I=>{if(!(!(c.flags&1)||!c.dirty&&!I))if(t){const R=c.run();if(o||m||(b?R.some((L,U)=>On(L,E[U])):On(R,E))){d&&d();const L=Wn;Wn=c;try{const U=[R,E===Rs?void 0:b&&E[0]===Rs?[]:E,v];E=R,l?l(t,3,U):t(...U)}finally{Wn=L}}}else c.run()};return u&&u(A),c=new mg(f),c.scheduler=a?()=>a(A,!1):A,v=I=>Zb(I,!1,c),d=c.onStop=()=>{const I=ga.get(c);if(I){if(l)l(I,4);else for(const R of I)R();ga.delete(c)}},t?n?A(!0):E=c.run():a?a(A.bind(null,!0),!0):c.run(),_.pause=c.pause.bind(c),_.resume=c.resume.bind(c),_.stop=_,_}function _n(e,t=1/0,r){if(t<=0||!Be(e)||e.__v_skip||(r=r||new Set,r.has(e)))return e;if(r.add(e),t--,qe(e))_n(e.value,t,r);else if(le(e))for(let n=0;n<e.length;n++)_n(e[n],t,r);else if(sg(e)||Li(e))e.forEach(n=>{_n(n,t,r)});else if(cg(e)){for(const n in e)_n(e[n],t,r);for(const n of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,n)&&_n(e[n],t,r)}return e}/**
* @vue/runtime-core v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function bs(e,t,r,n){try{return n?e(...n):e()}catch(o){fu(o,t,r)}}function $r(e,t,r,n){if(he(e)){const o=bs(e,t,r,n);return o&&ag(o)&&o.catch(i=>{fu(i,t,r)}),o}if(le(e)){const o=[];for(let i=0;i<e.length;i++)o.push($r(e[i],t,r,n));return o}}function fu(e,t,r,n=!0){const o=t?t.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:a}=t&&t.appContext.config||Ue;if(t){let u=t.parent;const l=t.proxy,s=`https://vuejs.org/error-reference/#runtime-${r}`;for(;u;){const c=u.ec;if(c){for(let f=0;f<c.length;f++)if(c[f](e,l,s)===!1)return}u=u.parent}if(i){tn(),bs(i,null,10,[e,l,s]),rn();return}}tw(e,r,o,n,a)}function tw(e,t,r,n=!0,o=!1){if(o)throw e;console.error(e)}const mt=[];let Ir=-1;const Di=[];let cn=null,Si=0;const Ug=Promise.resolve();let ma=null;function du(e){const t=ma||Ug;return e?t.then(this?e.bind(this):e):t}function rw(e){let t=Ir+1,r=mt.length;for(;t<r;){const n=t+r>>>1,o=mt[n],i=es(o);i<e||i===e&&o.flags&2?t=n+1:r=n}return t}function cf(e){if(!(e.flags&1)){const t=es(e),r=mt[mt.length-1];!r||!(e.flags&2)&&t>=es(r)?mt.push(e):mt.splice(rw(t),0,e),e.flags|=1,$g()}}function $g(){ma||(ma=Ug.then(Mg))}function nw(e){le(e)?Di.push(...e):cn&&e.id===-1?cn.splice(Si+1,0,e):e.flags&1||(Di.push(e),e.flags|=1),$g()}function Id(e,t,r=Ir+1){for(;r<mt.length;r++){const n=mt[r];if(n&&n.flags&2){if(e&&n.id!==e.uid)continue;mt.splice(r,1),r--,n.flags&4&&(n.flags&=-2),n(),n.flags&4||(n.flags&=-2)}}}function Fg(e){if(Di.length){const t=[...new Set(Di)].sort((r,n)=>es(r)-es(n));if(Di.length=0,cn){cn.push(...t);return}for(cn=t,Si=0;Si<cn.length;Si++){const r=cn[Si];r.flags&4&&(r.flags&=-2),r.flags&8||r(),r.flags&=-2}cn=null,Si=0}}const es=e=>e.id==null?e.flags&2?-1:1/0:e.id;function Mg(e){try{for(Ir=0;Ir<mt.length;Ir++){const t=mt[Ir];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),bs(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;Ir<mt.length;Ir++){const t=mt[Ir];t&&(t.flags&=-2)}Ir=-1,mt.length=0,Fg(),ma=null,(mt.length||Di.length)&&Mg()}}let cr=null,Bg=null;function ya(e){const t=cr;return cr=e,Bg=e&&e.type.__scopeId||null,t}function ar(e,t=cr,r){if(!t||e._n)return e;const n=(...o)=>{n._d&&Dd(-1);const i=ya(t);let a;try{a=e(...o)}finally{ya(i),n._d&&Dd(1)}return a};return n._n=!0,n._c=!0,n._d=!0,n}function $n(e,t,r,n){const o=e.dirs,i=t&&t.dirs;for(let a=0;a<o.length;a++){const u=o[a];i&&(u.oldValue=i[a].value);let l=u.dir[n];l&&(tn(),$r(l,r,8,[e.el,u,e,t]),rn())}}const iw=Symbol("_vte"),ow=e=>e.__isTeleport;function lf(e,t){e.shapeFlag&6&&e.component?(e.transition=t,lf(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}/*! #__NO_SIDE_EFFECTS__ */function jg(e,t){return he(e)?dt({name:e.name},t,{setup:e}):e}function kg(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}function Mo(e,t,r,n,o=!1){if(le(e)){e.forEach((m,b)=>Mo(m,t&&(le(t)?t[b]:t),r,n,o));return}if(Bo(n)&&!o){n.shapeFlag&512&&n.type.__asyncResolved&&n.component.subTree.component&&Mo(e,t,r,n.component.subTree);return}const i=n.shapeFlag&4?mf(n.component):n.el,a=o?null:i,{i:u,r:l}=e,s=t&&t.r,c=u.refs===Ue?u.refs={}:u.refs,f=u.setupState,d=Ee(f),v=f===Ue?()=>!1:m=>Oe(d,m);if(s!=null&&s!==l&&(Ve(s)?(c[s]=null,v(s)&&(f[s]=null)):qe(s)&&(s.value=null)),he(l))bs(l,u,12,[a,c]);else{const m=Ve(l),b=qe(l);if(m||b){const w=()=>{if(e.f){const _=m?v(l)?f[l]:c[l]:l.value;o?le(_)&&Ql(_,i):le(_)?_.includes(i)||_.push(i):m?(c[l]=[i],v(l)&&(f[l]=c[l])):(l.value=[i],e.k&&(c[e.k]=l.value))}else m?(c[l]=a,v(l)&&(f[l]=a)):b&&(l.value=a,e.k&&(c[e.k]=a))};a?(w.id=-1,Dt(w,r)):w()}}}cu().requestIdleCallback;cu().cancelIdleCallback;const Bo=e=>!!e.type.__asyncLoader,qg=e=>e.type.__isKeepAlive;function Wg(e,t){Gg(e,"a",t)}function Hg(e,t){Gg(e,"da",t)}function Gg(e,t,r=lt){const n=e.__wdc||(e.__wdc=()=>{let o=r;for(;o;){if(o.isDeactivated)return;o=o.parent}return e()});if(hu(t,n,r),r){let o=r.parent;for(;o&&o.parent;)qg(o.parent.vnode)&&sw(n,t,r,o),o=o.parent}}function sw(e,t,r,n){const o=hu(t,e,n,!0);zg(()=>{Ql(n[t],o)},r)}function hu(e,t,r=lt,n=!1){if(r){const o=r[e]||(r[e]=[]),i=t.__weh||(t.__weh=(...a)=>{tn();const u=ws(r),l=$r(t,r,e,a);return u(),rn(),l});return n?o.unshift(i):o.push(i),i}}const nn=e=>(t,r=lt)=>{(!rs||e==="sp")&&hu(e,(...n)=>t(...n),r)},aw=nn("bm"),Vg=nn("m"),uw=nn("bu"),cw=nn("u"),Kg=nn("bum"),zg=nn("um"),lw=nn("sp"),fw=nn("rtg"),dw=nn("rtc");function hw(e,t=lt){hu("ec",e,t)}const pw="components";function ff(e,t){return gw(pw,e,!0,t)||e}const vw=Symbol.for("v-ndc");function gw(e,t,r=!0,n=!1){const o=cr||lt;if(o){const i=o.type;{const u=oE(i,!1);if(u&&(u===t||u===Yt(t)||u===uu(Yt(t))))return i}const a=Td(o[e]||i[e],t)||Td(o.appContext[e],t);return!a&&n?i:a}}function Td(e,t){return e&&(e[t]||e[Yt(t)]||e[uu(Yt(t))])}function UM(e,t,r,n){let o;const i=r,a=le(e);if(a||Ve(e)){const u=a&&An(e);let l=!1,s=!1;u&&(l=!Jt(e),s=xn(e),e=lu(e)),o=new Array(e.length);for(let c=0,f=e.length;c<f;c++)o[c]=t(l?s?va(rt(e[c])):rt(e[c]):e[c],c,void 0,i)}else if(typeof e=="number"){o=new Array(e);for(let u=0;u<e;u++)o[u]=t(u+1,u,void 0,i)}else if(Be(e))if(e[Symbol.iterator])o=Array.from(e,(u,l)=>t(u,l,void 0,i));else{const u=Object.keys(e);o=new Array(u.length);for(let l=0,s=u.length;l<s;l++){const c=u[l];o[l]=t(e[c],c,l,i)}}else o=[];return o}const nl=e=>e?vm(e)?mf(e):nl(e.parent):null,jo=dt(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>nl(e.parent),$root:e=>nl(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>Yg(e),$forceUpdate:e=>e.f||(e.f=()=>{cf(e.update)}),$nextTick:e=>e.n||(e.n=du.bind(e.proxy)),$watch:e=>Bw.bind(e)}),rc=(e,t)=>e!==Ue&&!e.__isScriptSetup&&Oe(e,t),mw={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:r,setupState:n,data:o,props:i,accessCache:a,type:u,appContext:l}=e;let s;if(t[0]!=="$"){const v=a[t];if(v!==void 0)switch(v){case 1:return n[t];case 2:return o[t];case 4:return r[t];case 3:return i[t]}else{if(rc(n,t))return a[t]=1,n[t];if(o!==Ue&&Oe(o,t))return a[t]=2,o[t];if((s=e.propsOptions[0])&&Oe(s,t))return a[t]=3,i[t];if(r!==Ue&&Oe(r,t))return a[t]=4,r[t];il&&(a[t]=0)}}const c=jo[t];let f,d;if(c)return t==="$attrs"&&ct(e.attrs,"get",""),c(e);if((f=u.__cssModules)&&(f=f[t]))return f;if(r!==Ue&&Oe(r,t))return a[t]=4,r[t];if(d=l.config.globalProperties,Oe(d,t))return d[t]},set({_:e},t,r){const{data:n,setupState:o,ctx:i}=e;return rc(o,t)?(o[t]=r,!0):n!==Ue&&Oe(n,t)?(n[t]=r,!0):Oe(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(i[t]=r,!0)},has({_:{data:e,setupState:t,accessCache:r,ctx:n,appContext:o,propsOptions:i}},a){let u;return!!r[a]||e!==Ue&&Oe(e,a)||rc(t,a)||(u=i[0])&&Oe(u,a)||Oe(n,a)||Oe(jo,a)||Oe(o.config.globalProperties,a)},defineProperty(e,t,r){return r.get!=null?e._.accessCache[t]=0:Oe(r,"value")&&this.set(e,t,r.value,null),Reflect.defineProperty(e,t,r)}};function Od(e){return le(e)?e.reduce((t,r)=>(t[r]=null,t),{}):e}let il=!0;function yw(e){const t=Yg(e),r=e.proxy,n=e.ctx;il=!1,t.beforeCreate&&Ad(t.beforeCreate,e,"bc");const{data:o,computed:i,methods:a,watch:u,provide:l,inject:s,created:c,beforeMount:f,mounted:d,beforeUpdate:v,updated:m,activated:b,deactivated:w,beforeDestroy:_,beforeUnmount:E,destroyed:A,unmounted:I,render:R,renderTracked:L,renderTriggered:U,errorCaptured:N,serverPrefetch:D,expose:k,inheritAttrs:M,components:Q,directives:oe,filters:Y}=t;if(s&&_w(s,n,null),a)for(const K in a){const ce=a[K];he(ce)&&(n[K]=ce.bind(r))}if(o){const K=o.call(r,r);Be(K)&&(e.data=_s(K))}if(il=!0,i)for(const K in i){const ce=i[K],se=he(ce)?ce.bind(r,r):he(ce.get)?ce.get.bind(r,r):Dr,ae=!he(ce)&&he(ce.set)?ce.set.bind(r):Dr,Re=Ct({get:se,set:ae});Object.defineProperty(n,K,{enumerable:!0,configurable:!0,get:()=>Re.value,set:We=>Re.value=We})}if(u)for(const K in u)Jg(u[K],n,r,K);if(l){const K=he(l)?l.call(r):l;Reflect.ownKeys(K).forEach(ce=>{Js(ce,K[ce])})}c&&Ad(c,e,"c");function ge(K,ce){le(ce)?ce.forEach(se=>K(se.bind(r))):ce&&K(ce.bind(r))}if(ge(aw,f),ge(Vg,d),ge(uw,v),ge(cw,m),ge(Wg,b),ge(Hg,w),ge(hw,N),ge(dw,L),ge(fw,U),ge(Kg,E),ge(zg,I),ge(lw,D),le(k))if(k.length){const K=e.exposed||(e.exposed={});k.forEach(ce=>{Object.defineProperty(K,ce,{get:()=>r[ce],set:se=>r[ce]=se,enumerable:!0})})}else e.exposed||(e.exposed={});R&&e.render===Dr&&(e.render=R),M!=null&&(e.inheritAttrs=M),Q&&(e.components=Q),oe&&(e.directives=oe),D&&kg(e)}function _w(e,t,r=Dr){le(e)&&(e=ol(e));for(const n in e){const o=e[n];let i;Be(o)?"default"in o?i=jt(o.from||n,o.default,!0):i=jt(o.from||n):i=jt(o),qe(i)?Object.defineProperty(t,n,{enumerable:!0,configurable:!0,get:()=>i.value,set:a=>i.value=a}):t[n]=i}}function Ad(e,t,r){$r(le(e)?e.map(n=>n.bind(t.proxy)):e.bind(t.proxy),t,r)}function Jg(e,t,r,n){let o=n.includes(".")?um(r,n):()=>r[n];if(Ve(e)){const i=t[e];he(i)&&Ui(o,i)}else if(he(e))Ui(o,e.bind(r));else if(Be(e))if(le(e))e.forEach(i=>Jg(i,t,r,n));else{const i=he(e.handler)?e.handler.bind(r):t[e.handler];he(i)&&Ui(o,i,e)}}function Yg(e){const t=e.type,{mixins:r,extends:n}=t,{mixins:o,optionsCache:i,config:{optionMergeStrategies:a}}=e.appContext,u=i.get(t);let l;return u?l=u:!o.length&&!r&&!n?l=t:(l={},o.length&&o.forEach(s=>_a(l,s,a,!0)),_a(l,t,a)),Be(t)&&i.set(t,l),l}function _a(e,t,r,n=!1){const{mixins:o,extends:i}=t;i&&_a(e,i,r,!0),o&&o.forEach(a=>_a(e,a,r,!0));for(const a in t)if(!(n&&a==="expose")){const u=bw[a]||r&&r[a];e[a]=u?u(e[a],t[a]):t[a]}return e}const bw={data:Rd,props:Cd,emits:Cd,methods:Co,computed:Co,beforeCreate:pt,created:pt,beforeMount:pt,mounted:pt,beforeUpdate:pt,updated:pt,beforeDestroy:pt,beforeUnmount:pt,destroyed:pt,unmounted:pt,activated:pt,deactivated:pt,errorCaptured:pt,serverPrefetch:pt,components:Co,directives:Co,watch:Ew,provide:Rd,inject:ww};function Rd(e,t){return t?e?function(){return dt(he(e)?e.call(this,this):e,he(t)?t.call(this,this):t)}:t:e}function ww(e,t){return Co(ol(e),ol(t))}function ol(e){if(le(e)){const t={};for(let r=0;r<e.length;r++)t[e[r]]=e[r];return t}return e}function pt(e,t){return e?[...new Set([].concat(e,t))]:t}function Co(e,t){return e?dt(Object.create(null),e,t):t}function Cd(e,t){return e?le(e)&&le(t)?[...new Set([...e,...t])]:dt(Object.create(null),Od(e),Od(t??{})):t}function Ew(e,t){if(!e)return t;if(!t)return e;const r=dt(Object.create(null),e);for(const n in t)r[n]=pt(e[n],t[n]);return r}function Qg(){return{app:null,config:{isNativeTag:hb,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Sw=0;function Iw(e,t){return function(n,o=null){he(n)||(n=dt({},n)),o!=null&&!Be(o)&&(o=null);const i=Qg(),a=new WeakSet,u=[];let l=!1;const s=i.app={_uid:Sw++,_component:n,_props:o,_container:null,_context:i,_instance:null,version:ym,get config(){return i.config},set config(c){},use(c,...f){return a.has(c)||(c&&he(c.install)?(a.add(c),c.install(s,...f)):he(c)&&(a.add(c),c(s,...f))),s},mixin(c){return i.mixins.includes(c)||i.mixins.push(c),s},component(c,f){return f?(i.components[c]=f,s):i.components[c]},directive(c,f){return f?(i.directives[c]=f,s):i.directives[c]},mount(c,f,d){if(!l){const v=s._ceVNode||Ne(n,o);return v.appContext=i,d===!0?d="svg":d===!1&&(d=void 0),e(v,c,d),l=!0,s._container=c,c.__vue_app__=s,mf(v.component)}},onUnmount(c){u.push(c)},unmount(){l&&($r(u,s._instance,16),e(null,s._container),delete s._container.__vue_app__)},provide(c,f){return i.provides[c]=f,s},runWithContext(c){const f=ri;ri=s;try{return c()}finally{ri=f}}};return s}}let ri=null;function Js(e,t){if(lt){let r=lt.provides;const n=lt.parent&&lt.parent.provides;n===r&&(r=lt.provides=Object.create(n)),r[e]=t}}function jt(e,t,r=!1){const n=gf();if(n||ri){let o=ri?ri._context.provides:n?n.parent==null||n.ce?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides:void 0;if(o&&e in o)return o[e];if(arguments.length>1)return r&&he(t)?t.call(n&&n.proxy):t}}function Tw(){return!!(gf()||ri)}const Xg={},Zg=()=>Object.create(Xg),em=e=>Object.getPrototypeOf(e)===Xg;function Ow(e,t,r,n=!1){const o={},i=Zg();e.propsDefaults=Object.create(null),tm(e,t,o,i);for(const a in e.propsOptions[0])a in o||(o[a]=void 0);r?e.props=n?o:Pg(o):e.type.props?e.props=o:e.props=i,e.attrs=i}function Aw(e,t,r,n){const{props:o,attrs:i,vnode:{patchFlag:a}}=e,u=Ee(o),[l]=e.propsOptions;let s=!1;if((n||a>0)&&!(a&16)){if(a&8){const c=e.vnode.dynamicProps;for(let f=0;f<c.length;f++){let d=c[f];if(pu(e.emitsOptions,d))continue;const v=t[d];if(l)if(Oe(i,d))v!==i[d]&&(i[d]=v,s=!0);else{const m=Yt(d);o[m]=sl(l,u,m,v,e,!1)}else v!==i[d]&&(i[d]=v,s=!0)}}}else{tm(e,t,o,i)&&(s=!0);let c;for(const f in u)(!t||!Oe(t,f)&&((c=hi(f))===f||!Oe(t,c)))&&(l?r&&(r[f]!==void 0||r[c]!==void 0)&&(o[f]=sl(l,u,f,void 0,e,!0)):delete o[f]);if(i!==u)for(const f in i)(!t||!Oe(t,f))&&(delete i[f],s=!0)}s&&Jr(e.attrs,"set","")}function tm(e,t,r,n){const[o,i]=e.propsOptions;let a=!1,u;if(t)for(let l in t){if(Uo(l))continue;const s=t[l];let c;o&&Oe(o,c=Yt(l))?!i||!i.includes(c)?r[c]=s:(u||(u={}))[c]=s:pu(e.emitsOptions,l)||(!(l in n)||s!==n[l])&&(n[l]=s,a=!0)}if(i){const l=Ee(r),s=u||Ue;for(let c=0;c<i.length;c++){const f=i[c];r[f]=sl(o,l,f,s[f],e,!Oe(s,f))}}return a}function sl(e,t,r,n,o,i){const a=e[r];if(a!=null){const u=Oe(a,"default");if(u&&n===void 0){const l=a.default;if(a.type!==Function&&!a.skipFactory&&he(l)){const{propsDefaults:s}=o;if(r in s)n=s[r];else{const c=ws(o);n=s[r]=l.call(null,t),c()}}else n=l;o.ce&&o.ce._setProp(r,n)}a[0]&&(i&&!u?n=!1:a[1]&&(n===""||n===hi(r))&&(n=!0))}return n}const Rw=new WeakMap;function rm(e,t,r=!1){const n=r?Rw:t.propsCache,o=n.get(e);if(o)return o;const i=e.props,a={},u=[];let l=!1;if(!he(e)){const c=f=>{l=!0;const[d,v]=rm(f,t,!0);dt(a,d),v&&u.push(...v)};!r&&t.mixins.length&&t.mixins.forEach(c),e.extends&&c(e.extends),e.mixins&&e.mixins.forEach(c)}if(!i&&!l)return Be(e)&&n.set(e,Ni),Ni;if(le(i))for(let c=0;c<i.length;c++){const f=Yt(i[c]);xd(f)&&(a[f]=Ue)}else if(i)for(const c in i){const f=Yt(c);if(xd(f)){const d=i[c],v=a[f]=le(d)||he(d)?{type:d}:dt({},d),m=v.type;let b=!1,w=!0;if(le(m))for(let _=0;_<m.length;++_){const E=m[_],A=he(E)&&E.name;if(A==="Boolean"){b=!0;break}else A==="String"&&(w=!1)}else b=he(m)&&m.name==="Boolean";v[0]=b,v[1]=w,(b||Oe(v,"default"))&&u.push(f)}}const s=[a,u];return Be(e)&&n.set(e,s),s}function xd(e){return e[0]!=="$"&&!Uo(e)}const df=e=>e==="_"||e==="__"||e==="_ctx"||e==="$stable",hf=e=>le(e)?e.map(Rr):[Rr(e)],Cw=(e,t,r)=>{if(t._n)return t;const n=ar((...o)=>hf(t(...o)),r);return n._c=!1,n},nm=(e,t,r)=>{const n=e._ctx;for(const o in e){if(df(o))continue;const i=e[o];if(he(i))t[o]=Cw(o,i,n);else if(i!=null){const a=hf(i);t[o]=()=>a}}},im=(e,t)=>{const r=hf(t);e.slots.default=()=>r},om=(e,t,r)=>{for(const n in t)(r||!df(n))&&(e[n]=t[n])},xw=(e,t,r)=>{const n=e.slots=Zg();if(e.vnode.shapeFlag&32){const o=t.__;o&&Zc(n,"__",o,!0);const i=t._;i?(om(n,t,r),r&&Zc(n,"_",i,!0)):nm(t,n)}else t&&im(e,t)},Pw=(e,t,r)=>{const{vnode:n,slots:o}=e;let i=!0,a=Ue;if(n.shapeFlag&32){const u=t._;u?r&&u===1?i=!1:om(o,t,r):(i=!t.$stable,nm(t,o)),a=t}else t&&(im(e,t),a={default:1});if(i)for(const u in o)!df(u)&&a[u]==null&&delete o[u]},Dt=Vw;function Nw(e){return Lw(e)}function Lw(e,t){const r=cu();r.__VUE__=!0;const{insert:n,remove:o,patchProp:i,createElement:a,createText:u,createComment:l,setText:s,setElementText:c,parentNode:f,nextSibling:d,setScopeId:v=Dr,insertStaticContent:m}=e,b=(S,O,P,g=null,h=null,p=null,y=void 0,T=null,x=!!O.dynamicChildren)=>{if(S===O)return;S&&!fo(S,O)&&(g=$(S),We(S,h,p,!0),S=null),O.patchFlag===-2&&(x=!1,O.dynamicChildren=null);const{type:C,ref:q,shapeFlag:F}=O;switch(C){case vu:w(S,O,P,g);break;case Pn:_(S,O,P,g);break;case Ys:S==null&&E(O,P,g,y);break;case Kr:Q(S,O,P,g,h,p,y,T,x);break;default:F&1?R(S,O,P,g,h,p,y,T,x):F&6?oe(S,O,P,g,h,p,y,T,x):(F&64||F&128)&&C.process(S,O,P,g,h,p,y,T,x,V)}q!=null&&h?Mo(q,S&&S.ref,p,O||S,!O):q==null&&S&&S.ref!=null&&Mo(S.ref,null,p,S,!0)},w=(S,O,P,g)=>{if(S==null)n(O.el=u(O.children),P,g);else{const h=O.el=S.el;O.children!==S.children&&s(h,O.children)}},_=(S,O,P,g)=>{S==null?n(O.el=l(O.children||""),P,g):O.el=S.el},E=(S,O,P,g)=>{[S.el,S.anchor]=m(S.children,O,P,g,S.el,S.anchor)},A=({el:S,anchor:O},P,g)=>{let h;for(;S&&S!==O;)h=d(S),n(S,P,g),S=h;n(O,P,g)},I=({el:S,anchor:O})=>{let P;for(;S&&S!==O;)P=d(S),o(S),S=P;o(O)},R=(S,O,P,g,h,p,y,T,x)=>{O.type==="svg"?y="svg":O.type==="math"&&(y="mathml"),S==null?L(O,P,g,h,p,y,T,x):D(S,O,h,p,y,T,x)},L=(S,O,P,g,h,p,y,T)=>{let x,C;const{props:q,shapeFlag:F,transition:G,dirs:X}=S;if(x=S.el=a(S.type,p,q&&q.is,q),F&8?c(x,S.children):F&16&&N(S.children,x,null,g,h,nc(S,p),y,T),X&&$n(S,null,g,"created"),U(x,S,S.scopeId,y,g),q){for(const Se in q)Se!=="value"&&!Uo(Se)&&i(x,Se,null,q[Se],p,g);"value"in q&&i(x,"value",null,q.value,p),(C=q.onVnodeBeforeMount)&&_r(C,g,S)}X&&$n(S,null,g,"beforeMount");const ee=Dw(h,G);ee&&G.beforeEnter(x),n(x,O,P),((C=q&&q.onVnodeMounted)||ee||X)&&Dt(()=>{C&&_r(C,g,S),ee&&G.enter(x),X&&$n(S,null,g,"mounted")},h)},U=(S,O,P,g,h)=>{if(P&&v(S,P),g)for(let p=0;p<g.length;p++)v(S,g[p]);if(h){let p=h.subTree;if(O===p||lm(p.type)&&(p.ssContent===O||p.ssFallback===O)){const y=h.vnode;U(S,y,y.scopeId,y.slotScopeIds,h.parent)}}},N=(S,O,P,g,h,p,y,T,x=0)=>{for(let C=x;C<S.length;C++){const q=S[C]=T?ln(S[C]):Rr(S[C]);b(null,q,O,P,g,h,p,y,T)}},D=(S,O,P,g,h,p,y)=>{const T=O.el=S.el;let{patchFlag:x,dynamicChildren:C,dirs:q}=O;x|=S.patchFlag&16;const F=S.props||Ue,G=O.props||Ue;let X;if(P&&Fn(P,!1),(X=G.onVnodeBeforeUpdate)&&_r(X,P,O,S),q&&$n(O,S,P,"beforeUpdate"),P&&Fn(P,!0),(F.innerHTML&&G.innerHTML==null||F.textContent&&G.textContent==null)&&c(T,""),C?k(S.dynamicChildren,C,T,P,g,nc(O,h),p):y||ce(S,O,T,null,P,g,nc(O,h),p,!1),x>0){if(x&16)M(T,F,G,P,h);else if(x&2&&F.class!==G.class&&i(T,"class",null,G.class,h),x&4&&i(T,"style",F.style,G.style,h),x&8){const ee=O.dynamicProps;for(let Se=0;Se<ee.length;Se++){const be=ee[Se],et=F[be],_t=G[be];(_t!==et||be==="value")&&i(T,be,et,_t,h,P)}}x&1&&S.children!==O.children&&c(T,O.children)}else!y&&C==null&&M(T,F,G,P,h);((X=G.onVnodeUpdated)||q)&&Dt(()=>{X&&_r(X,P,O,S),q&&$n(O,S,P,"updated")},g)},k=(S,O,P,g,h,p,y)=>{for(let T=0;T<O.length;T++){const x=S[T],C=O[T],q=x.el&&(x.type===Kr||!fo(x,C)||x.shapeFlag&198)?f(x.el):P;b(x,C,q,null,g,h,p,y,!0)}},M=(S,O,P,g,h)=>{if(O!==P){if(O!==Ue)for(const p in O)!Uo(p)&&!(p in P)&&i(S,p,O[p],null,h,g);for(const p in P){if(Uo(p))continue;const y=P[p],T=O[p];y!==T&&p!=="value"&&i(S,p,T,y,h,g)}"value"in P&&i(S,"value",O.value,P.value,h)}},Q=(S,O,P,g,h,p,y,T,x)=>{const C=O.el=S?S.el:u(""),q=O.anchor=S?S.anchor:u("");let{patchFlag:F,dynamicChildren:G,slotScopeIds:X}=O;X&&(T=T?T.concat(X):X),S==null?(n(C,P,g),n(q,P,g),N(O.children||[],P,q,h,p,y,T,x)):F>0&&F&64&&G&&S.dynamicChildren?(k(S.dynamicChildren,G,P,h,p,y,T),(O.key!=null||h&&O===h.subTree)&&sm(S,O,!0)):ce(S,O,P,q,h,p,y,T,x)},oe=(S,O,P,g,h,p,y,T,x)=>{O.slotScopeIds=T,S==null?O.shapeFlag&512?h.ctx.activate(O,P,g,y,x):Y(O,P,g,h,p,y,x):Ae(S,O,x)},Y=(S,O,P,g,h,p,y)=>{const T=S.component=eE(S,g,h);if(qg(S)&&(T.ctx.renderer=V),tE(T,!1,y),T.asyncDep){if(h&&h.registerDep(T,ge,y),!S.el){const x=T.subTree=Ne(Pn);_(null,x,O,P),S.placeholder=x.el}}else ge(T,S,O,P,h,p,y)},Ae=(S,O,P)=>{const g=O.component=S.component;if(Hw(S,O,P))if(g.asyncDep&&!g.asyncResolved){K(g,O,P);return}else g.next=O,g.update();else O.el=S.el,g.vnode=O},ge=(S,O,P,g,h,p,y)=>{const T=()=>{if(S.isMounted){let{next:F,bu:G,u:X,parent:ee,vnode:Se}=S;{const mr=am(S);if(mr){F&&(F.el=Se.el,K(S,F,y)),mr.asyncDep.then(()=>{S.isUnmounted||T()});return}}let be=F,et;Fn(S,!1),F?(F.el=Se.el,K(S,F,y)):F=Se,G&&Qu(G),(et=F.props&&F.props.onVnodeBeforeUpdate)&&_r(et,ee,F,Se),Fn(S,!0);const _t=Nd(S),gr=S.subTree;S.subTree=_t,b(gr,_t,f(gr.el),$(gr),S,h,p),F.el=_t.el,be===null&&Gw(S,_t.el),X&&Dt(X,h),(et=F.props&&F.props.onVnodeUpdated)&&Dt(()=>_r(et,ee,F,Se),h)}else{let F;const{el:G,props:X}=O,{bm:ee,m:Se,parent:be,root:et,type:_t}=S,gr=Bo(O);Fn(S,!1),ee&&Qu(ee),!gr&&(F=X&&X.onVnodeBeforeMount)&&_r(F,be,O),Fn(S,!0);{et.ce&&et.ce._def.shadowRoot!==!1&&et.ce._injectChildStyle(_t);const mr=S.subTree=Nd(S);b(null,mr,P,g,S,h,p),O.el=mr.el}if(Se&&Dt(Se,h),!gr&&(F=X&&X.onVnodeMounted)){const mr=O;Dt(()=>_r(F,be,mr),h)}(O.shapeFlag&256||be&&Bo(be.vnode)&&be.vnode.shapeFlag&256)&&S.a&&Dt(S.a,h),S.isMounted=!0,O=P=g=null}};S.scope.on();const x=S.effect=new mg(T);S.scope.off();const C=S.update=x.run.bind(x),q=S.job=x.runIfDirty.bind(x);q.i=S,q.id=S.uid,x.scheduler=()=>cf(q),Fn(S,!0),C()},K=(S,O,P)=>{O.component=S;const g=S.vnode.props;S.vnode=O,S.next=null,Aw(S,O.props,g,P),Pw(S,O.children,P),tn(),Id(S),rn()},ce=(S,O,P,g,h,p,y,T,x=!1)=>{const C=S&&S.children,q=S?S.shapeFlag:0,F=O.children,{patchFlag:G,shapeFlag:X}=O;if(G>0){if(G&128){ae(C,F,P,g,h,p,y,T,x);return}else if(G&256){se(C,F,P,g,h,p,y,T,x);return}}X&8?(q&16&&ne(C,h,p),F!==C&&c(P,F)):q&16?X&16?ae(C,F,P,g,h,p,y,T,x):ne(C,h,p,!0):(q&8&&c(P,""),X&16&&N(F,P,g,h,p,y,T,x))},se=(S,O,P,g,h,p,y,T,x)=>{S=S||Ni,O=O||Ni;const C=S.length,q=O.length,F=Math.min(C,q);let G;for(G=0;G<F;G++){const X=O[G]=x?ln(O[G]):Rr(O[G]);b(S[G],X,P,null,h,p,y,T,x)}C>q?ne(S,h,p,!0,!1,F):N(O,P,g,h,p,y,T,x,F)},ae=(S,O,P,g,h,p,y,T,x)=>{let C=0;const q=O.length;let F=S.length-1,G=q-1;for(;C<=F&&C<=G;){const X=S[C],ee=O[C]=x?ln(O[C]):Rr(O[C]);if(fo(X,ee))b(X,ee,P,null,h,p,y,T,x);else break;C++}for(;C<=F&&C<=G;){const X=S[F],ee=O[G]=x?ln(O[G]):Rr(O[G]);if(fo(X,ee))b(X,ee,P,null,h,p,y,T,x);else break;F--,G--}if(C>F){if(C<=G){const X=G+1,ee=X<q?O[X].el:g;for(;C<=G;)b(null,O[C]=x?ln(O[C]):Rr(O[C]),P,ee,h,p,y,T,x),C++}}else if(C>G)for(;C<=F;)We(S[C],h,p,!0),C++;else{const X=C,ee=C,Se=new Map;for(C=ee;C<=G;C++){const Nt=O[C]=x?ln(O[C]):Rr(O[C]);Nt.key!=null&&Se.set(Nt.key,C)}let be,et=0;const _t=G-ee+1;let gr=!1,mr=0;const co=new Array(_t);for(C=0;C<_t;C++)co[C]=0;for(C=X;C<=F;C++){const Nt=S[C];if(et>=_t){We(Nt,h,p,!0);continue}let yr;if(Nt.key!=null)yr=Se.get(Nt.key);else for(be=ee;be<=G;be++)if(co[be-ee]===0&&fo(Nt,O[be])){yr=be;break}yr===void 0?We(Nt,h,p,!0):(co[yr-ee]=C+1,yr>=mr?mr=yr:gr=!0,b(Nt,O[yr],P,null,h,p,y,T,x),et++)}const yd=gr?Uw(co):Ni;for(be=yd.length-1,C=_t-1;C>=0;C--){const Nt=ee+C,yr=O[Nt],_d=O[Nt+1],bd=Nt+1<q?_d.el||_d.placeholder:g;co[C]===0?b(null,yr,P,bd,h,p,y,T,x):gr&&(be<0||C!==yd[be]?Re(yr,P,bd,2):be--)}}},Re=(S,O,P,g,h=null)=>{const{el:p,type:y,transition:T,children:x,shapeFlag:C}=S;if(C&6){Re(S.component.subTree,O,P,g);return}if(C&128){S.suspense.move(O,P,g);return}if(C&64){y.move(S,O,P,V);return}if(y===Kr){n(p,O,P);for(let F=0;F<x.length;F++)Re(x[F],O,P,g);n(S.anchor,O,P);return}if(y===Ys){A(S,O,P);return}if(g!==2&&C&1&&T)if(g===0)T.beforeEnter(p),n(p,O,P),Dt(()=>T.enter(p),h);else{const{leave:F,delayLeave:G,afterLeave:X}=T,ee=()=>{S.ctx.isUnmounted?o(p):n(p,O,P)},Se=()=>{F(p,()=>{ee(),X&&X()})};G?G(p,ee,Se):Se()}else n(p,O,P)},We=(S,O,P,g=!1,h=!1)=>{const{type:p,props:y,ref:T,children:x,dynamicChildren:C,shapeFlag:q,patchFlag:F,dirs:G,cacheIndex:X}=S;if(F===-2&&(h=!1),T!=null&&(tn(),Mo(T,null,P,S,!0),rn()),X!=null&&(O.renderCache[X]=void 0),q&256){O.ctx.deactivate(S);return}const ee=q&1&&G,Se=!Bo(S);let be;if(Se&&(be=y&&y.onVnodeBeforeUnmount)&&_r(be,O,S),q&6)Ke(S.component,P,g);else{if(q&128){S.suspense.unmount(P,g);return}ee&&$n(S,null,O,"beforeUnmount"),q&64?S.type.remove(S,O,P,V,g):C&&!C.hasOnce&&(p!==Kr||F>0&&F&64)?ne(C,O,P,!1,!0):(p===Kr&&F&384||!h&&q&16)&&ne(x,O,P),g&&Wt(S)}(Se&&(be=y&&y.onVnodeUnmounted)||ee)&&Dt(()=>{be&&_r(be,O,S),ee&&$n(S,null,O,"unmounted")},P)},Wt=S=>{const{type:O,el:P,anchor:g,transition:h}=S;if(O===Kr){rr(P,g);return}if(O===Ys){I(S);return}const p=()=>{o(P),h&&!h.persisted&&h.afterLeave&&h.afterLeave()};if(S.shapeFlag&1&&h&&!h.persisted){const{leave:y,delayLeave:T}=h,x=()=>y(P,p);T?T(S.el,p,x):x()}else p()},rr=(S,O)=>{let P;for(;S!==O;)P=d(S),o(S),S=P;o(O)},Ke=(S,O,P)=>{const{bum:g,scope:h,job:p,subTree:y,um:T,m:x,a:C,parent:q,slots:{__:F}}=S;Pd(x),Pd(C),g&&Qu(g),q&&le(F)&&F.forEach(G=>{q.renderCache[G]=void 0}),h.stop(),p&&(p.flags|=8,We(y,S,O,P)),T&&Dt(T,O),Dt(()=>{S.isUnmounted=!0},O),O&&O.pendingBranch&&!O.isUnmounted&&S.asyncDep&&!S.asyncResolved&&S.suspenseId===O.pendingId&&(O.deps--,O.deps===0&&O.resolve())},ne=(S,O,P,g=!1,h=!1,p=0)=>{for(let y=p;y<S.length;y++)We(S[y],O,P,g,h)},$=S=>{if(S.shapeFlag&6)return $(S.component.subTree);if(S.shapeFlag&128)return S.suspense.next();const O=d(S.anchor||S.el),P=O&&O[iw];return P?d(P):O};let W=!1;const j=(S,O,P)=>{S==null?O._vnode&&We(O._vnode,null,null,!0):b(O._vnode||null,S,O,null,null,null,P),O._vnode=S,W||(W=!0,Id(),Fg(),W=!1)},V={p:b,um:We,m:Re,r:Wt,mt:Y,mc:N,pc:ce,pbc:k,n:$,o:e};return{render:j,hydrate:void 0,createApp:Iw(j)}}function nc({type:e,props:t},r){return r==="svg"&&e==="foreignObject"||r==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:r}function Fn({effect:e,job:t},r){r?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function Dw(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function sm(e,t,r=!1){const n=e.children,o=t.children;if(le(n)&&le(o))for(let i=0;i<n.length;i++){const a=n[i];let u=o[i];u.shapeFlag&1&&!u.dynamicChildren&&((u.patchFlag<=0||u.patchFlag===32)&&(u=o[i]=ln(o[i]),u.el=a.el),!r&&u.patchFlag!==-2&&sm(a,u)),u.type===vu&&(u.el=a.el),u.type===Pn&&!u.el&&(u.el=a.el)}}function Uw(e){const t=e.slice(),r=[0];let n,o,i,a,u;const l=e.length;for(n=0;n<l;n++){const s=e[n];if(s!==0){if(o=r[r.length-1],e[o]<s){t[n]=o,r.push(n);continue}for(i=0,a=r.length-1;i<a;)u=i+a>>1,e[r[u]]<s?i=u+1:a=u;s<e[r[i]]&&(i>0&&(t[n]=r[i-1]),r[i]=n)}}for(i=r.length,a=r[i-1];i-- >0;)r[i]=a,a=t[a];return r}function am(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:am(t)}function Pd(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const $w=Symbol.for("v-scx"),Fw=()=>jt($w);function Mw(e,t){return pf(e,null,t)}function Ui(e,t,r){return pf(e,t,r)}function pf(e,t,r=Ue){const{immediate:n,deep:o,flush:i,once:a}=r,u=dt({},r),l=t&&n||!t&&i!=="post";let s;if(rs){if(i==="sync"){const v=Fw();s=v.__watcherHandles||(v.__watcherHandles=[])}else if(!l){const v=()=>{};return v.stop=Dr,v.resume=Dr,v.pause=Dr,v}}const c=lt;u.call=(v,m,b)=>$r(v,c,m,b);let f=!1;i==="post"?u.scheduler=v=>{Dt(v,c&&c.suspense)}:i!=="sync"&&(f=!0,u.scheduler=(v,m)=>{m?v():cf(v)}),u.augmentJob=v=>{t&&(v.flags|=4),f&&(v.flags|=2,c&&(v.id=c.uid,v.i=c))};const d=ew(e,t,u);return rs&&(s?s.push(d):l&&d()),d}function Bw(e,t,r){const n=this.proxy,o=Ve(e)?e.includes(".")?um(n,e):()=>n[e]:e.bind(n,n);let i;he(t)?i=t:(i=t.handler,r=t);const a=ws(this),u=pf(o,i.bind(n),r);return a(),u}function um(e,t){const r=t.split(".");return()=>{let n=e;for(let o=0;o<r.length&&n;o++)n=n[r[o]];return n}}const jw=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${Yt(t)}Modifiers`]||e[`${hi(t)}Modifiers`];function kw(e,t,...r){if(e.isUnmounted)return;const n=e.vnode.props||Ue;let o=r;const i=t.startsWith("update:"),a=i&&jw(n,t.slice(7));a&&(a.trim&&(o=r.map(c=>Ve(c)?c.trim():c)),a.number&&(o=r.map(yb)));let u,l=n[u=Yu(t)]||n[u=Yu(Yt(t))];!l&&i&&(l=n[u=Yu(hi(t))]),l&&$r(l,e,6,o);const s=n[u+"Once"];if(s){if(!e.emitted)e.emitted={};else if(e.emitted[u])return;e.emitted[u]=!0,$r(s,e,6,o)}}function cm(e,t,r=!1){const n=t.emitsCache,o=n.get(e);if(o!==void 0)return o;const i=e.emits;let a={},u=!1;if(!he(e)){const l=s=>{const c=cm(s,t,!0);c&&(u=!0,dt(a,c))};!r&&t.mixins.length&&t.mixins.forEach(l),e.extends&&l(e.extends),e.mixins&&e.mixins.forEach(l)}return!i&&!u?(Be(e)&&n.set(e,null),null):(le(i)?i.forEach(l=>a[l]=null):dt(a,i),Be(e)&&n.set(e,a),a)}function pu(e,t){return!e||!ou(t)?!1:(t=t.slice(2).replace(/Once$/,""),Oe(e,t[0].toLowerCase()+t.slice(1))||Oe(e,hi(t))||Oe(e,t))}function Nd(e){const{type:t,vnode:r,proxy:n,withProxy:o,propsOptions:[i],slots:a,attrs:u,emit:l,render:s,renderCache:c,props:f,data:d,setupState:v,ctx:m,inheritAttrs:b}=e,w=ya(e);let _,E;try{if(r.shapeFlag&4){const I=o||n,R=I;_=Rr(s.call(R,I,c,f,v,d,m)),E=u}else{const I=t;_=Rr(I.length>1?I(f,{attrs:u,slots:a,emit:l}):I(f,null)),E=t.props?u:qw(u)}}catch(I){ko.length=0,fu(I,e,1),_=Ne(Pn)}let A=_;if(E&&b!==!1){const I=Object.keys(E),{shapeFlag:R}=A;I.length&&R&7&&(i&&I.some(Yl)&&(E=Ww(E,i)),A=Hi(A,E,!1,!0))}return r.dirs&&(A=Hi(A,null,!1,!0),A.dirs=A.dirs?A.dirs.concat(r.dirs):r.dirs),r.transition&&lf(A,r.transition),_=A,ya(w),_}const qw=e=>{let t;for(const r in e)(r==="class"||r==="style"||ou(r))&&((t||(t={}))[r]=e[r]);return t},Ww=(e,t)=>{const r={};for(const n in e)(!Yl(n)||!(n.slice(9)in t))&&(r[n]=e[n]);return r};function Hw(e,t,r){const{props:n,children:o,component:i}=e,{props:a,children:u,patchFlag:l}=t,s=i.emitsOptions;if(t.dirs||t.transition)return!0;if(r&&l>=0){if(l&1024)return!0;if(l&16)return n?Ld(n,a,s):!!a;if(l&8){const c=t.dynamicProps;for(let f=0;f<c.length;f++){const d=c[f];if(a[d]!==n[d]&&!pu(s,d))return!0}}}else return(o||u)&&(!u||!u.$stable)?!0:n===a?!1:n?a?Ld(n,a,s):!0:!!a;return!1}function Ld(e,t,r){const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!0;for(let o=0;o<n.length;o++){const i=n[o];if(t[i]!==e[i]&&!pu(r,i))return!0}return!1}function Gw({vnode:e,parent:t},r){for(;t;){const n=t.subTree;if(n.suspense&&n.suspense.activeBranch===e&&(n.el=e.el),n===e)(e=t.vnode).el=r,t=t.parent;else break}}const lm=e=>e.__isSuspense;function Vw(e,t){t&&t.pendingBranch?le(e)?t.effects.push(...e):t.effects.push(e):nw(e)}const Kr=Symbol.for("v-fgt"),vu=Symbol.for("v-txt"),Pn=Symbol.for("v-cmt"),Ys=Symbol.for("v-stc"),ko=[];let Mt=null;function Wi(e=!1){ko.push(Mt=e?null:[])}function Kw(){ko.pop(),Mt=ko[ko.length-1]||null}let ts=1;function Dd(e,t=!1){ts+=e,e<0&&Mt&&t&&(Mt.hasOnce=!0)}function fm(e){return e.dynamicChildren=ts>0?Mt||Ni:null,Kw(),ts>0&&Mt&&Mt.push(e),e}function gu(e,t,r,n,o,i){return fm(pe(e,t,r,n,o,i,!0))}function dm(e,t,r,n,o){return fm(Ne(e,t,r,n,o,!0))}function ba(e){return e?e.__v_isVNode===!0:!1}function fo(e,t){return e.type===t.type&&e.key===t.key}const hm=({key:e})=>e??null,Qs=({ref:e,ref_key:t,ref_for:r})=>(typeof e=="number"&&(e=""+e),e!=null?Ve(e)||qe(e)||he(e)?{i:cr,r:e,k:t,f:!!r}:e:null);function pe(e,t=null,r=null,n=0,o=null,i=e===Kr?0:1,a=!1,u=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&hm(t),ref:t&&Qs(t),scopeId:Bg,slotScopeIds:null,children:r,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:n,dynamicProps:o,dynamicChildren:null,appContext:null,ctx:cr};return u?(vf(l,r),i&128&&e.normalize(l)):r&&(l.shapeFlag|=Ve(r)?8:16),ts>0&&!a&&Mt&&(l.patchFlag>0||i&6)&&l.patchFlag!==32&&Mt.push(l),l}const Ne=zw;function zw(e,t=null,r=null,n=0,o=null,i=!1){if((!e||e===vw)&&(e=Pn),ba(e)){const u=Hi(e,t,!0);return r&&vf(u,r),ts>0&&!i&&Mt&&(u.shapeFlag&6?Mt[Mt.indexOf(e)]=u:Mt.push(u)),u.patchFlag=-2,u}if(sE(e)&&(e=e.__vccOpts),t){t=Jw(t);let{class:u,style:l}=t;u&&!Ve(u)&&(t.class=yn(u)),Be(l)&&(af(l)&&!le(l)&&(l=dt({},l)),t.style=Zl(l))}const a=Ve(e)?1:lm(e)?128:ow(e)?64:Be(e)?4:he(e)?2:0;return pe(e,t,r,n,o,a,i,!0)}function Jw(e){return e?af(e)||em(e)?dt({},e):e:null}function Hi(e,t,r=!1,n=!1){const{props:o,ref:i,patchFlag:a,children:u,transition:l}=e,s=t?Qw(o||{},t):o,c={__v_isVNode:!0,__v_skip:!0,type:e.type,props:s,key:s&&hm(s),ref:t&&t.ref?r&&i?le(i)?i.concat(Qs(t)):[i,Qs(t)]:Qs(t):i,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:u,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Kr?a===-1?16:a|16:a,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:l,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Hi(e.ssContent),ssFallback:e.ssFallback&&Hi(e.ssFallback),placeholder:e.placeholder,el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return l&&n&&lf(c,l.clone(c)),c}function Tr(e=" ",t=0){return Ne(vu,null,e,t)}function pm(e,t){const r=Ne(Ys,null,e);return r.staticCount=t,r}function Yw(e="",t=!1){return t?(Wi(),dm(Pn,null,e)):Ne(Pn,null,e)}function Rr(e){return e==null||typeof e=="boolean"?Ne(Pn):le(e)?Ne(Kr,null,e.slice()):ba(e)?ln(e):Ne(vu,null,String(e))}function ln(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:Hi(e)}function vf(e,t){let r=0;const{shapeFlag:n}=e;if(t==null)t=null;else if(le(t))r=16;else if(typeof t=="object")if(n&65){const o=t.default;o&&(o._c&&(o._d=!1),vf(e,o()),o._c&&(o._d=!0));return}else{r=32;const o=t._;!o&&!em(t)?t._ctx=cr:o===3&&cr&&(cr.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else he(t)?(t={default:t,_ctx:cr},r=32):(t=String(t),n&64?(r=16,t=[Tr(t)]):r=8);e.children=t,e.shapeFlag|=r}function Qw(...e){const t={};for(let r=0;r<e.length;r++){const n=e[r];for(const o in n)if(o==="class")t.class!==n.class&&(t.class=yn([t.class,n.class]));else if(o==="style")t.style=Zl([t.style,n.style]);else if(ou(o)){const i=t[o],a=n[o];a&&i!==a&&!(le(i)&&i.includes(a))&&(t[o]=i?[].concat(i,a):a)}else o!==""&&(t[o]=n[o])}return t}function _r(e,t,r,n=null){$r(e,t,7,[r,n])}const Xw=Qg();let Zw=0;function eE(e,t,r){const n=e.type,o=(t?t.appContext:e.appContext)||Xw,i={uid:Zw++,vnode:e,type:n,parent:t,appContext:o,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new pg(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(o.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:rm(n,o),emitsOptions:cm(n,o),emit:null,emitted:null,propsDefaults:Ue,inheritAttrs:n.inheritAttrs,ctx:Ue,data:Ue,props:Ue,attrs:Ue,slots:Ue,refs:Ue,setupState:Ue,setupContext:null,suspense:r,suspenseId:r?r.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=t?t.root:i,i.emit=kw.bind(null,i),e.ce&&e.ce(i),i}let lt=null;const gf=()=>lt||cr;let wa,al;{const e=cu(),t=(r,n)=>{let o;return(o=e[r])||(o=e[r]=[]),o.push(n),i=>{o.length>1?o.forEach(a=>a(i)):o[0](i)}};wa=t("__VUE_INSTANCE_SETTERS__",r=>lt=r),al=t("__VUE_SSR_SETTERS__",r=>rs=r)}const ws=e=>{const t=lt;return wa(e),e.scope.on(),()=>{e.scope.off(),wa(t)}},Ud=()=>{lt&&lt.scope.off(),wa(null)};function vm(e){return e.vnode.shapeFlag&4}let rs=!1;function tE(e,t=!1,r=!1){t&&al(t);const{props:n,children:o}=e.vnode,i=vm(e);Ow(e,n,i,t),xw(e,o,r||t);const a=i?rE(e,t):void 0;return t&&al(!1),a}function rE(e,t){const r=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,mw);const{setup:n}=r;if(n){tn();const o=e.setupContext=n.length>1?iE(e):null,i=ws(e),a=bs(n,e,0,[e.props,o]),u=ag(a);if(rn(),i(),(u||e.sp)&&!Bo(e)&&kg(e),u){if(a.then(Ud,Ud),t)return a.then(l=>{$d(e,l)}).catch(l=>{fu(l,e,0)});e.asyncDep=a}else $d(e,a)}else gm(e)}function $d(e,t,r){he(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Be(t)&&(e.setupState=Dg(t)),gm(e)}function gm(e,t,r){const n=e.type;e.render||(e.render=n.render||Dr);{const o=ws(e);tn();try{yw(e)}finally{rn(),o()}}}const nE={get(e,t){return ct(e,"get",""),e[t]}};function iE(e){const t=r=>{e.exposed=r||{}};return{attrs:new Proxy(e.attrs,nE),slots:e.slots,emit:e.emit,expose:t}}function mf(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(Dg(uf(e.exposed)),{get(t,r){if(r in t)return t[r];if(r in jo)return jo[r](e)},has(t,r){return r in t||r in jo}})):e.proxy}function oE(e,t=!0){return he(e)?e.displayName||e.name:e.name||t&&e.__name}function sE(e){return he(e)&&"__vccOpts"in e}const Ct=(e,t)=>Xb(e,t,rs);function mm(e,t,r){const n=arguments.length;return n===2?Be(t)&&!le(t)?ba(t)?Ne(e,null,[t]):Ne(e,t):Ne(e,null,t):(n>3?r=Array.prototype.slice.call(arguments,2):n===3&&ba(r)&&(r=[r]),Ne(e,t,r))}const ym="3.5.18";/**
* @vue/runtime-dom v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let ul;const Fd=typeof window<"u"&&window.trustedTypes;if(Fd)try{ul=Fd.createPolicy("vue",{createHTML:e=>e})}catch{}const _m=ul?e=>ul.createHTML(e):e=>e,aE="http://www.w3.org/2000/svg",uE="http://www.w3.org/1998/Math/MathML",Vr=typeof document<"u"?document:null,Md=Vr&&Vr.createElement("template"),cE={insert:(e,t,r)=>{t.insertBefore(e,r||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,r,n)=>{const o=t==="svg"?Vr.createElementNS(aE,e):t==="mathml"?Vr.createElementNS(uE,e):r?Vr.createElement(e,{is:r}):Vr.createElement(e);return e==="select"&&n&&n.multiple!=null&&o.setAttribute("multiple",n.multiple),o},createText:e=>Vr.createTextNode(e),createComment:e=>Vr.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Vr.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,r,n,o,i){const a=r?r.previousSibling:t.lastChild;if(o&&(o===i||o.nextSibling))for(;t.insertBefore(o.cloneNode(!0),r),!(o===i||!(o=o.nextSibling)););else{Md.innerHTML=_m(n==="svg"?`<svg>${e}</svg>`:n==="mathml"?`<math>${e}</math>`:e);const u=Md.content;if(n==="svg"||n==="mathml"){const l=u.firstChild;for(;l.firstChild;)u.appendChild(l.firstChild);u.removeChild(l)}t.insertBefore(u,r)}return[a?a.nextSibling:t.firstChild,r?r.previousSibling:t.lastChild]}},lE=Symbol("_vtc");function fE(e,t,r){const n=e[lE];n&&(t=(t?[t,...n]:[...n]).join(" ")),t==null?e.removeAttribute("class"):r?e.setAttribute("class",t):e.className=t}const Bd=Symbol("_vod"),dE=Symbol("_vsh"),hE=Symbol(""),pE=/(^|;)\s*display\s*:/;function vE(e,t,r){const n=e.style,o=Ve(r);let i=!1;if(r&&!o){if(t)if(Ve(t))for(const a of t.split(";")){const u=a.slice(0,a.indexOf(":")).trim();r[u]==null&&Xs(n,u,"")}else for(const a in t)r[a]==null&&Xs(n,a,"");for(const a in r)a==="display"&&(i=!0),Xs(n,a,r[a])}else if(o){if(t!==r){const a=n[hE];a&&(r+=";"+a),n.cssText=r,i=pE.test(r)}}else t&&e.removeAttribute("style");Bd in e&&(e[Bd]=i?n.display:"",e[dE]&&(n.display="none"))}const jd=/\s*!important$/;function Xs(e,t,r){if(le(r))r.forEach(n=>Xs(e,t,n));else if(r==null&&(r=""),t.startsWith("--"))e.setProperty(t,r);else{const n=gE(e,t);jd.test(r)?e.setProperty(hi(n),r.replace(jd,""),"important"):e[n]=r}}const kd=["Webkit","Moz","ms"],ic={};function gE(e,t){const r=ic[t];if(r)return r;let n=Yt(t);if(n!=="filter"&&n in e)return ic[t]=n;n=uu(n);for(let o=0;o<kd.length;o++){const i=kd[o]+n;if(i in e)return ic[t]=i}return t}const qd="http://www.w3.org/1999/xlink";function Wd(e,t,r,n,o,i=Ib(t)){n&&t.startsWith("xlink:")?r==null?e.removeAttributeNS(qd,t.slice(6,t.length)):e.setAttributeNS(qd,t,r):r==null||i&&!lg(r)?e.removeAttribute(t):e.setAttribute(t,i?"":Ln(r)?String(r):r)}function Hd(e,t,r,n,o){if(t==="innerHTML"||t==="textContent"){r!=null&&(e[t]=t==="innerHTML"?_m(r):r);return}const i=e.tagName;if(t==="value"&&i!=="PROGRESS"&&!i.includes("-")){const u=i==="OPTION"?e.getAttribute("value")||"":e.value,l=r==null?e.type==="checkbox"?"on":"":String(r);(u!==l||!("_value"in e))&&(e.value=l),r==null&&e.removeAttribute(t),e._value=r;return}let a=!1;if(r===""||r==null){const u=typeof e[t];u==="boolean"?r=lg(r):r==null&&u==="string"?(r="",a=!0):u==="number"&&(r=0,a=!0)}try{e[t]=r}catch{}a&&e.removeAttribute(o||t)}function mE(e,t,r,n){e.addEventListener(t,r,n)}function yE(e,t,r,n){e.removeEventListener(t,r,n)}const Gd=Symbol("_vei");function _E(e,t,r,n,o=null){const i=e[Gd]||(e[Gd]={}),a=i[t];if(n&&a)a.value=n;else{const[u,l]=bE(t);if(n){const s=i[t]=SE(n,o);mE(e,u,s,l)}else a&&(yE(e,u,a,l),i[t]=void 0)}}const Vd=/(?:Once|Passive|Capture)$/;function bE(e){let t;if(Vd.test(e)){t={};let n;for(;n=e.match(Vd);)e=e.slice(0,e.length-n[0].length),t[n[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):hi(e.slice(2)),t]}let oc=0;const wE=Promise.resolve(),EE=()=>oc||(wE.then(()=>oc=0),oc=Date.now());function SE(e,t){const r=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=r.attached)return;$r(IE(n,r.value),t,5,[n])};return r.value=e,r.attached=EE(),r}function IE(e,t){if(le(t)){const r=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{r.call(e),e._stopped=!0},t.map(n=>o=>!o._stopped&&n&&n(o))}else return t}const Kd=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,TE=(e,t,r,n,o,i)=>{const a=o==="svg";t==="class"?fE(e,n,a):t==="style"?vE(e,r,n):ou(t)?Yl(t)||_E(e,t,r,n,i):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):OE(e,t,n,a))?(Hd(e,t,n),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&Wd(e,t,n,a,i,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!Ve(n))?Hd(e,Yt(t),n,i,t):(t==="true-value"?e._trueValue=n:t==="false-value"&&(e._falseValue=n),Wd(e,t,n,a))};function OE(e,t,r,n){if(n)return!!(t==="innerHTML"||t==="textContent"||t in e&&Kd(t)&&he(r));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const o=e.tagName;if(o==="IMG"||o==="VIDEO"||o==="CANVAS"||o==="SOURCE")return!1}return Kd(t)&&Ve(r)?!1:t in e}const AE=["ctrl","shift","alt","meta"],RE={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>AE.some(r=>e[`${r}Key`]&&!t.includes(r))},$M=(e,t)=>{const r=e._withMods||(e._withMods={}),n=t.join(".");return r[n]||(r[n]=(o,...i)=>{for(let a=0;a<t.length;a++){const u=RE[t[a]];if(u&&u(o,t))return}return e(o,...i)})},CE=dt({patchProp:TE},cE);let zd;function xE(){return zd||(zd=Nw(CE))}const PE=(...e)=>{const t=xE().createApp(...e),{mount:r}=t;return t.mount=n=>{const o=LE(n);if(!o)return;const i=t._component;!he(i)&&!i.render&&!i.template&&(i.template=o.innerHTML),o.nodeType===1&&(o.textContent="");const a=r(o,!1,NE(o));return o instanceof Element&&(o.removeAttribute("v-cloak"),o.setAttribute("data-v-app","")),a},t};function NE(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function LE(e){return Ve(e)?document.querySelector(e):e}/*!
 * pinia v2.3.1
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let bm;const mu=e=>bm=e,wm=Symbol();function cl(e){return e&&typeof e=="object"&&Object.prototype.toString.call(e)==="[object Object]"&&typeof e.toJSON!="function"}var qo;(function(e){e.direct="direct",e.patchObject="patch object",e.patchFunction="patch function"})(qo||(qo={}));function DE(){const e=vg(!0),t=e.run(()=>Ur({}));let r=[],n=[];const o=uf({install(i){mu(o),o._a=i,i.provide(wm,o),i.config.globalProperties.$pinia=o,n.forEach(a=>r.push(a)),n=[]},use(i){return this._a?r.push(i):n.push(i),this},_p:r,_a:null,_e:e,_s:new Map,state:t});return o}const Em=()=>{};function Jd(e,t,r,n=Em){e.push(t);const o=()=>{const i=e.indexOf(t);i>-1&&(e.splice(i,1),n())};return!r&&gg()&&Tb(o),o}function mi(e,...t){e.slice().forEach(r=>{r(...t)})}const UE=e=>e(),Yd=Symbol(),sc=Symbol();function ll(e,t){e instanceof Map&&t instanceof Map?t.forEach((r,n)=>e.set(n,r)):e instanceof Set&&t instanceof Set&&t.forEach(e.add,e);for(const r in t){if(!t.hasOwnProperty(r))continue;const n=t[r],o=e[r];cl(o)&&cl(n)&&e.hasOwnProperty(r)&&!qe(n)&&!An(n)?e[r]=ll(o,n):e[r]=n}return e}const $E=Symbol();function FE(e){return!cl(e)||!e.hasOwnProperty($E)}const{assign:an}=Object;function ME(e){return!!(qe(e)&&e.effect)}function BE(e,t,r,n){const{state:o,actions:i,getters:a}=t,u=r.state.value[e];let l;function s(){u||(r.state.value[e]=o?o():{});const c=zb(r.state.value[e]);return an(c,i,Object.keys(a||{}).reduce((f,d)=>(f[d]=uf(Ct(()=>{mu(r);const v=r._s.get(e);return a[d].call(v,v)})),f),{}))}return l=Sm(e,s,t,r,n,!0),l}function Sm(e,t,r={},n,o,i){let a;const u=an({actions:{}},r),l={deep:!0};let s,c,f=[],d=[],v;const m=n.state.value[e];!i&&!m&&(n.state.value[e]={}),Ur({});let b;function w(N){let D;s=c=!1,typeof N=="function"?(N(n.state.value[e]),D={type:qo.patchFunction,storeId:e,events:v}):(ll(n.state.value[e],N),D={type:qo.patchObject,payload:N,storeId:e,events:v});const k=b=Symbol();du().then(()=>{b===k&&(s=!0)}),c=!0,mi(f,D,n.state.value[e])}const _=i?function(){const{state:D}=r,k=D?D():{};this.$patch(M=>{an(M,k)})}:Em;function E(){a.stop(),f=[],d=[],n._s.delete(e)}const A=(N,D="")=>{if(Yd in N)return N[sc]=D,N;const k=function(){mu(n);const M=Array.from(arguments),Q=[],oe=[];function Y(K){Q.push(K)}function Ae(K){oe.push(K)}mi(d,{args:M,name:k[sc],store:R,after:Y,onError:Ae});let ge;try{ge=N.apply(this&&this.$id===e?this:R,M)}catch(K){throw mi(oe,K),K}return ge instanceof Promise?ge.then(K=>(mi(Q,K),K)).catch(K=>(mi(oe,K),Promise.reject(K))):(mi(Q,ge),ge)};return k[Yd]=!0,k[sc]=D,k},I={_p:n,$id:e,$onAction:Jd.bind(null,d),$patch:w,$reset:_,$subscribe(N,D={}){const k=Jd(f,N,D.detached,()=>M()),M=a.run(()=>Ui(()=>n.state.value[e],Q=>{(D.flush==="sync"?c:s)&&N({storeId:e,type:qo.direct,events:v},Q)},an({},l,D)));return k},$dispose:E},R=_s(I);n._s.set(e,R);const U=(n._a&&n._a.runWithContext||UE)(()=>n._e.run(()=>(a=vg()).run(()=>t({action:A}))));for(const N in U){const D=U[N];if(qe(D)&&!ME(D)||An(D))i||(m&&FE(D)&&(qe(D)?D.value=m[N]:ll(D,m[N])),n.state.value[e][N]=D);else if(typeof D=="function"){const k=A(D,N);U[N]=k,u.actions[N]=D}}return an(R,U),an(Ee(R),U),Object.defineProperty(R,"$state",{get:()=>n.state.value[e],set:N=>{w(D=>{an(D,N)})}}),n._p.forEach(N=>{an(R,a.run(()=>N({store:R,app:n._a,pinia:n,options:u})))}),m&&i&&r.hydrate&&r.hydrate(R.$state,m),s=!0,c=!0,R}/*! #__NO_SIDE_EFFECTS__ */function jE(e,t,r){let n,o;const i=typeof t=="function";typeof e=="string"?(n=e,o=i?r:t):(o=e,n=e.id);function a(u,l){const s=Tw();return u=u||(s?jt(wm,null):null),u&&mu(u),u=bm,u._s.has(n)||(i?Sm(n,t,o,u):BE(n,o,u)),u._s.get(n)}return a.$id=n,a}const kE=new Set(["title","titleTemplate","script","style","noscript"]),Zs=new Set(["base","meta","link","style","script","noscript"]),qE=new Set(["title","titleTemplate","templateParams","base","htmlAttrs","bodyAttrs","meta","link","style","script","noscript"]),WE=new Set(["base","title","titleTemplate","bodyAttrs","htmlAttrs","templateParams"]),Im=new Set(["tagPosition","tagPriority","tagDuplicateStrategy","children","innerHTML","textContent","processTemplateParams"]),HE=typeof window<"u";function Ea(e){let t=9;for(let r=0;r<e.length;)t=Math.imul(t^e.charCodeAt(r++),9**9);return((t^t>>>9)+65536).toString(16).substring(1,8).toLowerCase()}function fl(e){if(e._h)return e._h;if(e._d)return Ea(e._d);let t=`${e.tag}:${e.textContent||e.innerHTML||""}:`;for(const r in e.props)t+=`${r}:${String(e.props[r])},`;return Ea(t)}function GE(e,t){return e instanceof Promise?e.then(t):t(e)}function dl(e,t,r,n){const o=n||Om(typeof t=="object"&&typeof t!="function"&&!(t instanceof Promise)?{...t}:{[e==="script"||e==="noscript"||e==="style"?"innerHTML":"textContent"]:t},e==="templateParams"||e==="titleTemplate");if(o instanceof Promise)return o.then(a=>dl(e,t,r,a));const i={tag:e,props:o};for(const a of Im){const u=i.props[a]!==void 0?i.props[a]:r[a];u!==void 0&&((!(a==="innerHTML"||a==="textContent"||a==="children")||kE.has(i.tag))&&(i[a==="children"?"innerHTML":a]=u),delete i.props[a])}return i.props.body&&(i.tagPosition="bodyClose",delete i.props.body),i.tag==="script"&&typeof i.innerHTML=="object"&&(i.innerHTML=JSON.stringify(i.innerHTML),i.props.type=i.props.type||"application/json"),Array.isArray(i.props.content)?i.props.content.map(a=>({...i,props:{...i.props,content:a}})):i}function VE(e,t){var n;const r=e==="class"?" ":";";return t&&typeof t=="object"&&!Array.isArray(t)&&(t=Object.entries(t).filter(([,o])=>o).map(([o,i])=>e==="style"?`${o}:${i}`:o)),(n=String(Array.isArray(t)?t.join(r):t))==null?void 0:n.split(r).filter(o=>!!o.trim()).join(r)}function Tm(e,t,r,n){for(let o=n;o<r.length;o+=1){const i=r[o];if(i==="class"||i==="style"){e[i]=VE(i,e[i]);continue}if(e[i]instanceof Promise)return e[i].then(a=>(e[i]=a,Tm(e,t,r,o)));if(!t&&!Im.has(i)){const a=String(e[i]),u=i.startsWith("data-");a==="true"||a===""?e[i]=u?"true":!0:e[i]||(u&&a==="false"?e[i]="false":delete e[i])}}}function Om(e,t=!1){const r=Tm(e,t,Object.keys(e),0);return r instanceof Promise?r.then(()=>e):e}const KE=10;function Am(e,t,r){for(let n=r;n<t.length;n+=1){const o=t[n];if(o instanceof Promise)return o.then(i=>(t[n]=i,Am(e,t,n)));Array.isArray(o)?e.push(...o):e.push(o)}}function zE(e){const t=[],r=e.resolvedInput;for(const o in r){if(!Object.prototype.hasOwnProperty.call(r,o))continue;const i=r[o];if(!(i===void 0||!qE.has(o))){if(Array.isArray(i)){for(const a of i)t.push(dl(o,a,e));continue}t.push(dl(o,i,e))}}if(t.length===0)return[];const n=[];return GE(Am(n,t,0),()=>n.map((o,i)=>(o._e=e._i,e.mode&&(o._m=e.mode),o._p=(e._i<<KE)+i,o)))}const Qd=new Set(["onload","onerror","onabort","onprogress","onloadstart"]),Xd={base:-10,title:10},Zd={critical:-80,high:-10,low:20};function Sa(e){const t=e.tagPriority;if(typeof t=="number")return t;let r=100;return e.tag==="meta"?e.props["http-equiv"]==="content-security-policy"?r=-30:e.props.charset?r=-20:e.props.name==="viewport"&&(r=-15):e.tag==="link"&&e.props.rel==="preconnect"?r=20:e.tag in Xd&&(r=Xd[e.tag]),t&&t in Zd?r+Zd[t]:r}const JE=[{prefix:"before:",offset:-1},{prefix:"after:",offset:1}],YE=["name","property","http-equiv"];function Rm(e){const{props:t,tag:r}=e;if(WE.has(r))return r;if(r==="link"&&t.rel==="canonical")return"canonical";if(t.charset)return"charset";if(t.id)return`${r}:id:${t.id}`;for(const n of YE)if(t[n]!==void 0)return`${r}:${n}:${t[n]}`;return!1}const fn="%separator";function QE(e,t,r=!1){var o;let n;if(t==="s"||t==="pageTitle")n=e.pageTitle;else if(t.includes(".")){const i=t.indexOf(".");n=(o=e[t.substring(0,i)])==null?void 0:o[t.substring(i+1)]}else n=e[t];if(n!==void 0)return r?(n||"").replace(/"/g,'\\"'):n||""}const XE=new RegExp(`${fn}(?:\\s*${fn})*`,"g");function Cs(e,t,r,n=!1){if(typeof e!="string"||!e.includes("%"))return e;let o=e;try{o=decodeURI(e)}catch{}const i=o.match(/%\w+(?:\.\w+)?/g);if(!i)return e;const a=e.includes(fn);return e=e.replace(/%\w+(?:\.\w+)?/g,u=>{if(u===fn||!i.includes(u))return u;const l=QE(t,u.slice(1),n);return l!==void 0?l:u}).trim(),a&&(e.endsWith(fn)&&(e=e.slice(0,-fn.length)),e.startsWith(fn)&&(e=e.slice(fn.length)),e=e.replace(XE,r).trim()),e}function eh(e,t){return e==null?t||null:typeof e=="function"?e(t):e}async function ZE(e,t={}){const r=t.document||e.resolvedOptions.document;if(!r||!e.dirty)return;const n={shouldRender:!0,tags:[]};if(await e.hooks.callHook("dom:beforeRender",n),!!n.shouldRender)return e._domUpdatePromise||(e._domUpdatePromise=new Promise(async o=>{var f;const i=(await e.resolveTags()).map(d=>({tag:d,id:Zs.has(d.tag)?fl(d):d.tag,shouldRender:!0}));let a=e._dom;if(!a){a={elMap:{htmlAttrs:r.documentElement,bodyAttrs:r.body}};const d=new Set;for(const v of["body","head"]){const m=(f=r[v])==null?void 0:f.children;for(const b of m){const w=b.tagName.toLowerCase();if(!Zs.has(w))continue;const _={tag:w,props:await Om(b.getAttributeNames().reduce((R,L)=>({...R,[L]:b.getAttribute(L)}),{})),innerHTML:b.innerHTML},E=Rm(_);let A=E,I=1;for(;A&&d.has(A);)A=`${E}:${I++}`;A&&(_._d=A,d.add(A)),a.elMap[b.getAttribute("data-hid")||fl(_)]=b}}}a.pendingSideEffects={...a.sideEffects},a.sideEffects={};function u(d,v,m){const b=`${d}:${v}`;a.sideEffects[b]=m,delete a.pendingSideEffects[b]}function l({id:d,$el:v,tag:m}){const b=m.tag.endsWith("Attrs");if(a.elMap[d]=v,b||(m.textContent&&m.textContent!==v.textContent&&(v.textContent=m.textContent),m.innerHTML&&m.innerHTML!==v.innerHTML&&(v.innerHTML=m.innerHTML),u(d,"el",()=>{var w;(w=a.elMap[d])==null||w.remove(),delete a.elMap[d]})),m._eventHandlers)for(const w in m._eventHandlers)Object.prototype.hasOwnProperty.call(m._eventHandlers,w)&&v.getAttribute(`data-${w}`)!==""&&((m.tag==="bodyAttrs"?r.defaultView:v).addEventListener(w.substring(2),m._eventHandlers[w].bind(v)),v.setAttribute(`data-${w}`,""));for(const w in m.props){if(!Object.prototype.hasOwnProperty.call(m.props,w))continue;const _=m.props[w],E=`attr:${w}`;if(w==="class"){if(!_)continue;for(const A of _.split(" "))b&&u(d,`${E}:${A}`,()=>v.classList.remove(A)),!v.classList.contains(A)&&v.classList.add(A)}else if(w==="style"){if(!_)continue;for(const A of _.split(";")){const I=A.indexOf(":"),R=A.substring(0,I).trim(),L=A.substring(I+1).trim();u(d,`${E}:${R}`,()=>{v.style.removeProperty(R)}),v.style.setProperty(R,L)}}else v.getAttribute(w)!==_&&v.setAttribute(w,_===!0?"":String(_)),b&&u(d,E,()=>v.removeAttribute(w))}}const s=[],c={bodyClose:void 0,bodyOpen:void 0,head:void 0};for(const d of i){const{tag:v,shouldRender:m,id:b}=d;if(m){if(v.tag==="title"){r.title=v.textContent;continue}d.$el=d.$el||a.elMap[b],d.$el?l(d):Zs.has(v.tag)&&s.push(d)}}for(const d of s){const v=d.tag.tagPosition||"head";d.$el=r.createElement(d.tag.tag),l(d),c[v]=c[v]||r.createDocumentFragment(),c[v].appendChild(d.$el)}for(const d of i)await e.hooks.callHook("dom:renderTag",d,r,u);c.head&&r.head.appendChild(c.head),c.bodyOpen&&r.body.insertBefore(c.bodyOpen,r.body.firstChild),c.bodyClose&&r.body.appendChild(c.bodyClose);for(const d in a.pendingSideEffects)a.pendingSideEffects[d]();e._dom=a,await e.hooks.callHook("dom:rendered",{renders:i}),o()}).finally(()=>{e._domUpdatePromise=void 0,e.dirty=!1})),e._domUpdatePromise}function e1(e,t={}){const r=t.delayFn||(n=>setTimeout(n,10));return e._domDebouncedUpdatePromise=e._domDebouncedUpdatePromise||new Promise(n=>r(()=>ZE(e,t).then(()=>{delete e._domDebouncedUpdatePromise,n()})))}function t1(e){return t=>{var n,o;const r=((o=(n=t.resolvedOptions.document)==null?void 0:n.head.querySelector('script[id="unhead:payload"]'))==null?void 0:o.innerHTML)||!1;return r&&t.push(JSON.parse(r)),{mode:"client",hooks:{"entries:updated":i=>{e1(i,e)}}}}}function hl(e,t={},r){for(const n in e){const o=e[n],i=r?`${r}:${n}`:n;typeof o=="object"&&o!==null?hl(o,t,i):typeof o=="function"&&(t[i]=o)}return t}const r1={run:e=>e()},n1=()=>r1,Cm=typeof console.createTask<"u"?console.createTask:n1;function i1(e,t){const r=t.shift(),n=Cm(r);return e.reduce((o,i)=>o.then(()=>n.run(()=>i(...t))),Promise.resolve())}function o1(e,t){const r=t.shift(),n=Cm(r);return Promise.all(e.map(o=>n.run(()=>o(...t))))}function ac(e,t){for(const r of[...e])r(t)}class s1{constructor(){this._hooks={},this._before=void 0,this._after=void 0,this._deprecatedMessages=void 0,this._deprecatedHooks={},this.hook=this.hook.bind(this),this.callHook=this.callHook.bind(this),this.callHookWith=this.callHookWith.bind(this)}hook(t,r,n={}){if(!t||typeof r!="function")return()=>{};const o=t;let i;for(;this._deprecatedHooks[t];)i=this._deprecatedHooks[t],t=i.to;if(i&&!n.allowDeprecated){let a=i.message;a||(a=`${o} hook has been deprecated`+(i.to?`, please use ${i.to}`:"")),this._deprecatedMessages||(this._deprecatedMessages=new Set),this._deprecatedMessages.has(a)||(console.warn(a),this._deprecatedMessages.add(a))}if(!r.name)try{Object.defineProperty(r,"name",{get:()=>"_"+t.replace(/\W+/g,"_")+"_hook_cb",configurable:!0})}catch{}return this._hooks[t]=this._hooks[t]||[],this._hooks[t].push(r),()=>{r&&(this.removeHook(t,r),r=void 0)}}hookOnce(t,r){let n,o=(...i)=>(typeof n=="function"&&n(),n=void 0,o=void 0,r(...i));return n=this.hook(t,o),n}removeHook(t,r){if(this._hooks[t]){const n=this._hooks[t].indexOf(r);n!==-1&&this._hooks[t].splice(n,1),this._hooks[t].length===0&&delete this._hooks[t]}}deprecateHook(t,r){this._deprecatedHooks[t]=typeof r=="string"?{to:r}:r;const n=this._hooks[t]||[];delete this._hooks[t];for(const o of n)this.hook(t,o)}deprecateHooks(t){Object.assign(this._deprecatedHooks,t);for(const r in t)this.deprecateHook(r,t[r])}addHooks(t){const r=hl(t),n=Object.keys(r).map(o=>this.hook(o,r[o]));return()=>{for(const o of n.splice(0,n.length))o()}}removeHooks(t){const r=hl(t);for(const n in r)this.removeHook(n,r[n])}removeAllHooks(){for(const t in this._hooks)delete this._hooks[t]}callHook(t,...r){return r.unshift(t),this.callHookWith(i1,t,...r)}callHookParallel(t,...r){return r.unshift(t),this.callHookWith(o1,t,...r)}callHookWith(t,r,...n){const o=this._before||this._after?{name:r,args:n,context:{}}:void 0;this._before&&ac(this._before,o);const i=t(r in this._hooks?[...this._hooks[r]]:[],n);return i instanceof Promise?i.finally(()=>{this._after&&o&&ac(this._after,o)}):(this._after&&o&&ac(this._after,o),i)}beforeEach(t){return this._before=this._before||[],this._before.push(t),()=>{if(this._before!==void 0){const r=this._before.indexOf(t);r!==-1&&this._before.splice(r,1)}}}afterEach(t){return this._after=this._after||[],this._after.push(t),()=>{if(this._after!==void 0){const r=this._after.indexOf(t);r!==-1&&this._after.splice(r,1)}}}}function a1(){return new s1}const u1=new Set(["templateParams","htmlAttrs","bodyAttrs"]),c1={hooks:{"tag:normalise":({tag:e})=>{e.props.hid&&(e.key=e.props.hid,delete e.props.hid),e.props.vmid&&(e.key=e.props.vmid,delete e.props.vmid),e.props.key&&(e.key=e.props.key,delete e.props.key);const t=Rm(e);t&&!t.startsWith("meta:og:")&&!t.startsWith("meta:twitter:")&&delete e.key;const r=t||(e.key?`${e.tag}:${e.key}`:!1);r&&(e._d=r)},"tags:resolve":e=>{const t=Object.create(null);for(const n of e.tags){const o=(n.key?`${n.tag}:${n.key}`:n._d)||fl(n),i=t[o];if(i){let u=n==null?void 0:n.tagDuplicateStrategy;if(!u&&u1.has(n.tag)&&(u="merge"),u==="merge"){const l=i.props;l.style&&n.props.style&&(l.style[l.style.length-1]!==";"&&(l.style+=";"),n.props.style=`${l.style} ${n.props.style}`),l.class&&n.props.class?n.props.class=`${l.class} ${n.props.class}`:l.class&&(n.props.class=l.class),t[o].props={...l,...n.props};continue}else if(n._e===i._e){i._duped=i._duped||[],n._d=`${i._d}:${i._duped.length+1}`,i._duped.push(n);continue}else if(Sa(n)>Sa(i))continue}if(!(n.innerHTML||n.textContent||Object.keys(n.props).length!==0)&&Zs.has(n.tag)){delete t[o];continue}t[o]=n}const r=[];for(const n in t){const o=t[n],i=o._duped;r.push(o),i&&(delete o._duped,r.push(...i))}e.tags=r,e.tags=e.tags.filter(n=>!(n.tag==="meta"&&(n.props.name||n.props.property)&&!n.props.content))}}},l1=new Set(["script","link","bodyAttrs"]),f1=e=>({hooks:{"tags:resolve":t=>{for(const r of t.tags){if(!l1.has(r.tag))continue;const n=r.props;for(const o in n){if(o[0]!=="o"||o[1]!=="n"||!Object.prototype.hasOwnProperty.call(n,o))continue;const i=n[o];typeof i=="function"&&(e.ssr&&Qd.has(o)?n[o]=`this.dataset.${o}fired = true`:delete n[o],r._eventHandlers=r._eventHandlers||{},r._eventHandlers[o]=i)}e.ssr&&r._eventHandlers&&(r.props.src||r.props.href)&&(r.key=r.key||Ea(r.props.src||r.props.href))}},"dom:renderTag":({$el:t,tag:r})=>{var o,i;const n=t==null?void 0:t.dataset;if(n)for(const a in n){if(!a.endsWith("fired"))continue;const u=a.slice(0,-5);Qd.has(u)&&((i=(o=r._eventHandlers)==null?void 0:o[u])==null||i.call(t,new Event(u.substring(2))))}}}}),d1=new Set(["link","style","script","noscript"]),h1={hooks:{"tag:normalise":({tag:e})=>{e.key&&d1.has(e.tag)&&(e.props["data-hid"]=e._h=Ea(e.key))}}},p1={mode:"server",hooks:{"tags:beforeResolve":e=>{const t={};let r=!1;for(const n of e.tags)n._m!=="server"||n.tag!=="titleTemplate"&&n.tag!=="templateParams"&&n.tag!=="title"||(t[n.tag]=n.tag==="title"||n.tag==="titleTemplate"?n.textContent:n.props,r=!0);r&&e.tags.push({tag:"script",innerHTML:JSON.stringify(t),props:{id:"unhead:payload",type:"application/json"}})}}},v1={hooks:{"tags:resolve":e=>{var t;for(const r of e.tags)if(typeof r.tagPriority=="string")for(const{prefix:n,offset:o}of JE){if(!r.tagPriority.startsWith(n))continue;const i=r.tagPriority.substring(n.length),a=(t=e.tags.find(u=>u._d===i))==null?void 0:t._p;if(a!==void 0){r._p=a+o;break}}e.tags.sort((r,n)=>{const o=Sa(r),i=Sa(n);return o<i?-1:o>i?1:r._p-n._p})}}},g1={meta:"content",link:"href",htmlAttrs:"lang"},m1=["innerHTML","textContent"],y1=e=>({hooks:{"tags:resolve":t=>{var a;const{tags:r}=t;let n;for(let u=0;u<r.length;u+=1)r[u].tag==="templateParams"&&(n=t.tags.splice(u,1)[0].props,u-=1);const o=n||{},i=o.separator||"|";delete o.separator,o.pageTitle=Cs(o.pageTitle||((a=r.find(u=>u.tag==="title"))==null?void 0:a.textContent)||"",o,i);for(const u of r){if(u.processTemplateParams===!1)continue;const l=g1[u.tag];if(l&&typeof u.props[l]=="string")u.props[l]=Cs(u.props[l],o,i);else if(u.processTemplateParams||u.tag==="titleTemplate"||u.tag==="title")for(const s of m1)typeof u[s]=="string"&&(u[s]=Cs(u[s],o,i,u.tag==="script"&&u.props.type.endsWith("json")))}e._templateParams=o,e._separator=i},"tags:afterResolve":({tags:t})=>{let r;for(let n=0;n<t.length;n+=1){const o=t[n];o.tag==="title"&&o.processTemplateParams!==!1&&(r=o)}r!=null&&r.textContent&&(r.textContent=Cs(r.textContent,e._templateParams,e._separator))}}}),_1={hooks:{"tags:resolve":e=>{const{tags:t}=e;let r,n;for(let o=0;o<t.length;o+=1){const i=t[o];i.tag==="title"?r=i:i.tag==="titleTemplate"&&(n=i)}if(n&&r){const o=eh(n.textContent,r.textContent);o!==null?r.textContent=o||r.textContent:e.tags.splice(e.tags.indexOf(r),1)}else if(n){const o=eh(n.textContent);o!==null&&(n.textContent=o,n.tag="title",n=void 0)}n&&e.tags.splice(e.tags.indexOf(n),1)}}},b1={hooks:{"tags:afterResolve":e=>{for(const t of e.tags)typeof t.innerHTML=="string"&&(t.innerHTML&&(t.props.type==="application/ld+json"||t.props.type==="application/json")?t.innerHTML=t.innerHTML.replace(/</g,"\\u003C"):t.innerHTML=t.innerHTML.replace(new RegExp(`</${t.tag}`,"g"),`<\\/${t.tag}`))}}};let xm;function w1(e={}){const t=E1(e);return t.use(t1()),xm=t}function th(e,t){return!e||e==="server"&&t||e==="client"&&!t}function E1(e={}){const t=a1();t.addHooks(e.hooks||{}),e.document=e.document||(HE?document:void 0);const r=!e.document,n=()=>{u.dirty=!0,t.callHook("entries:updated",u)};let o=0,i=[];const a=[],u={plugins:a,dirty:!1,resolvedOptions:e,hooks:t,headEntries(){return i},use(l){const s=typeof l=="function"?l(u):l;(!s.key||!a.some(c=>c.key===s.key))&&(a.push(s),th(s.mode,r)&&t.addHooks(s.hooks||{}))},push(l,s){s==null||delete s.head;const c={_i:o++,input:l,...s};return th(c.mode,r)&&(i.push(c),n()),{dispose(){i=i.filter(f=>f._i!==c._i),n()},patch(f){for(const d of i)d._i===c._i&&(d.input=c.input=f);n()}}},async resolveTags(){const l={tags:[],entries:[...i]};await t.callHook("entries:resolve",l);for(const s of l.entries){const c=s.resolvedInput||s.input;if(s.resolvedInput=await(s.transform?s.transform(c):c),s.resolvedInput)for(const f of await zE(s)){const d={tag:f,entry:s,resolvedOptions:u.resolvedOptions};await t.callHook("tag:normalise",d),l.tags.push(d.tag)}}return await t.callHook("tags:beforeResolve",l),await t.callHook("tags:resolve",l),await t.callHook("tags:afterResolve",l),l.tags},ssr:r};return[c1,p1,f1,h1,v1,y1,_1,b1,...(e==null?void 0:e.plugins)||[]].forEach(l=>u.use(l)),u.hooks.callHook("init",u),u}function S1(){return xm}const I1=ym[0]==="3";function T1(e){return typeof e=="function"?e():Rn(e)}function Ia(e){if(e instanceof Promise||e instanceof Date||e instanceof RegExp)return e;const t=T1(e);if(!e||!t)return t;if(Array.isArray(t))return t.map(r=>Ia(r));if(typeof t=="object"){const r={};for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(n==="titleTemplate"||n[0]==="o"&&n[1]==="n"){r[n]=Rn(t[n]);continue}r[n]=Ia(t[n])}return r}return t}const O1={hooks:{"entries:resolve":e=>{for(const t of e.entries)t.resolvedInput=Ia(t.input)}}},Pm="usehead";function A1(e){return{install(r){I1&&(r.config.globalProperties.$unhead=e,r.config.globalProperties.$head=e,r.provide(Pm,e))}}.install}function R1(e={}){e.domDelayFn=e.domDelayFn||(r=>du(()=>setTimeout(()=>r(),0)));const t=w1(e);return t.use(O1),t.install=A1(t),t}const rh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},nh="__unhead_injection_handler__";function C1(){return nh in rh?rh[nh]():jt(Pm)||S1()}function yf(e,t={}){const r=t.head||C1();if(r)return r.ssr?r.push(e,t):x1(r,e,t)}function x1(e,t,r={}){const n=Ur(!1),o=Ur({});Mw(()=>{o.value=n.value?{}:Ia(t)});const i=e.push(o.value,r);return Ui(o,u=>{i.patch(u)}),gf()&&(Kg(()=>{i.dispose()}),Hg(()=>{n.value=!0}),Wg(()=>{n.value=!1})),i}function P1(e){const t=e;return t.headTags=e.resolveTags,t.addEntry=e.push,t.addHeadObjs=e.push,t.addReactiveEntry=(r,n)=>{const o=yf(r,n);return o!==void 0?o.dispose:()=>{}},t.removeHeadObjs=()=>{},t.updateDOM=()=>{e.hooks.callHook("entries:updated",e)},t.unhead=e,t}function N1(e,t){const r=R1({});return P1(r)}/*!
  * vue-router v4.5.1
  * (c) 2025 Eduardo San Martin Morote
  * @license MIT
  */const Ii=typeof document<"u";function Nm(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function L1(e){return e.__esModule||e[Symbol.toStringTag]==="Module"||e.default&&Nm(e.default)}const Te=Object.assign;function uc(e,t){const r={};for(const n in t){const o=t[n];r[n]=pr(o)?o.map(e):e(o)}return r}const Wo=()=>{},pr=Array.isArray,Lm=/#/g,D1=/&/g,U1=/\//g,$1=/=/g,F1=/\?/g,Dm=/\+/g,M1=/%5B/g,B1=/%5D/g,Um=/%5E/g,j1=/%60/g,$m=/%7B/g,k1=/%7C/g,Fm=/%7D/g,q1=/%20/g;function _f(e){return encodeURI(""+e).replace(k1,"|").replace(M1,"[").replace(B1,"]")}function W1(e){return _f(e).replace($m,"{").replace(Fm,"}").replace(Um,"^")}function pl(e){return _f(e).replace(Dm,"%2B").replace(q1,"+").replace(Lm,"%23").replace(D1,"%26").replace(j1,"`").replace($m,"{").replace(Fm,"}").replace(Um,"^")}function H1(e){return pl(e).replace($1,"%3D")}function G1(e){return _f(e).replace(Lm,"%23").replace(F1,"%3F")}function V1(e){return e==null?"":G1(e).replace(U1,"%2F")}function ns(e){try{return decodeURIComponent(""+e)}catch{}return""+e}const K1=/\/$/,z1=e=>e.replace(K1,"");function cc(e,t,r="/"){let n,o={},i="",a="";const u=t.indexOf("#");let l=t.indexOf("?");return u<l&&u>=0&&(l=-1),l>-1&&(n=t.slice(0,l),i=t.slice(l+1,u>-1?u:t.length),o=e(i)),u>-1&&(n=n||t.slice(0,u),a=t.slice(u,t.length)),n=X1(n??t,r),{fullPath:n+(i&&"?")+i+a,path:n,query:o,hash:ns(a)}}function J1(e,t){const r=t.query?e(t.query):"";return t.path+(r&&"?")+r+(t.hash||"")}function ih(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function Y1(e,t,r){const n=t.matched.length-1,o=r.matched.length-1;return n>-1&&n===o&&Gi(t.matched[n],r.matched[o])&&Mm(t.params,r.params)&&e(t.query)===e(r.query)&&t.hash===r.hash}function Gi(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function Mm(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(!Q1(e[r],t[r]))return!1;return!0}function Q1(e,t){return pr(e)?oh(e,t):pr(t)?oh(t,e):e===t}function oh(e,t){return pr(t)?e.length===t.length&&e.every((r,n)=>r===t[n]):e.length===1&&e[0]===t}function X1(e,t){if(e.startsWith("/"))return e;if(!e)return t;const r=t.split("/"),n=e.split("/"),o=n[n.length-1];(o===".."||o===".")&&n.push("");let i=r.length-1,a,u;for(a=0;a<n.length;a++)if(u=n[a],u!==".")if(u==="..")i>1&&i--;else break;return r.slice(0,i).join("/")+"/"+n.slice(a).join("/")}const sn={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var is;(function(e){e.pop="pop",e.push="push"})(is||(is={}));var Ho;(function(e){e.back="back",e.forward="forward",e.unknown=""})(Ho||(Ho={}));function Z1(e){if(!e)if(Ii){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),z1(e)}const eS=/^[^#]+#/;function tS(e,t){return e.replace(eS,"#")+t}function rS(e,t){const r=document.documentElement.getBoundingClientRect(),n=e.getBoundingClientRect();return{behavior:t.behavior,left:n.left-r.left-(t.left||0),top:n.top-r.top-(t.top||0)}}const yu=()=>({left:window.scrollX,top:window.scrollY});function nS(e){let t;if("el"in e){const r=e.el,n=typeof r=="string"&&r.startsWith("#"),o=typeof r=="string"?n?document.getElementById(r.slice(1)):document.querySelector(r):r;if(!o)return;t=rS(o,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.scrollX,t.top!=null?t.top:window.scrollY)}function sh(e,t){return(history.state?history.state.position-t:-1)+e}const vl=new Map;function iS(e,t){vl.set(e,t)}function oS(e){const t=vl.get(e);return vl.delete(e),t}let sS=()=>location.protocol+"//"+location.host;function Bm(e,t){const{pathname:r,search:n,hash:o}=t,i=e.indexOf("#");if(i>-1){let u=o.includes(e.slice(i))?e.slice(i).length:1,l=o.slice(u);return l[0]!=="/"&&(l="/"+l),ih(l,"")}return ih(r,e)+n+o}function aS(e,t,r,n){let o=[],i=[],a=null;const u=({state:d})=>{const v=Bm(e,location),m=r.value,b=t.value;let w=0;if(d){if(r.value=v,t.value=d,a&&a===m){a=null;return}w=b?d.position-b.position:0}else n(v);o.forEach(_=>{_(r.value,m,{delta:w,type:is.pop,direction:w?w>0?Ho.forward:Ho.back:Ho.unknown})})};function l(){a=r.value}function s(d){o.push(d);const v=()=>{const m=o.indexOf(d);m>-1&&o.splice(m,1)};return i.push(v),v}function c(){const{history:d}=window;d.state&&d.replaceState(Te({},d.state,{scroll:yu()}),"")}function f(){for(const d of i)d();i=[],window.removeEventListener("popstate",u),window.removeEventListener("beforeunload",c)}return window.addEventListener("popstate",u),window.addEventListener("beforeunload",c,{passive:!0}),{pauseListeners:l,listen:s,destroy:f}}function ah(e,t,r,n=!1,o=!1){return{back:e,current:t,forward:r,replaced:n,position:window.history.length,scroll:o?yu():null}}function uS(e){const{history:t,location:r}=window,n={value:Bm(e,r)},o={value:t.state};o.value||i(n.value,{back:null,current:n.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function i(l,s,c){const f=e.indexOf("#"),d=f>-1?(r.host&&document.querySelector("base")?e:e.slice(f))+l:sS()+e+l;try{t[c?"replaceState":"pushState"](s,"",d),o.value=s}catch(v){console.error(v),r[c?"replace":"assign"](d)}}function a(l,s){const c=Te({},t.state,ah(o.value.back,l,o.value.forward,!0),s,{position:o.value.position});i(l,c,!0),n.value=l}function u(l,s){const c=Te({},o.value,t.state,{forward:l,scroll:yu()});i(c.current,c,!0);const f=Te({},ah(n.value,l,null),{position:c.position+1},s);i(l,f,!1),n.value=l}return{location:n,state:o,push:u,replace:a}}function cS(e){e=Z1(e);const t=uS(e),r=aS(e,t.state,t.location,t.replace);function n(i,a=!0){a||r.pauseListeners(),history.go(i)}const o=Te({location:"",base:e,go:n,createHref:tS.bind(null,e)},t,r);return Object.defineProperty(o,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(o,"state",{enumerable:!0,get:()=>t.state.value}),o}function lS(e){return e=location.host?e||location.pathname+location.search:"",e.includes("#")||(e+="#"),cS(e)}function fS(e){return typeof e=="string"||e&&typeof e=="object"}function jm(e){return typeof e=="string"||typeof e=="symbol"}const km=Symbol("");var uh;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(uh||(uh={}));function Vi(e,t){return Te(new Error,{type:e,[km]:!0},t)}function jr(e,t){return e instanceof Error&&km in e&&(t==null||!!(e.type&t))}const ch="[^/]+?",dS={sensitive:!1,strict:!1,start:!0,end:!0},hS=/[.+*?^${}()[\]/\\]/g;function pS(e,t){const r=Te({},dS,t),n=[];let o=r.start?"^":"";const i=[];for(const s of e){const c=s.length?[]:[90];r.strict&&!s.length&&(o+="/");for(let f=0;f<s.length;f++){const d=s[f];let v=40+(r.sensitive?.25:0);if(d.type===0)f||(o+="/"),o+=d.value.replace(hS,"\\$&"),v+=40;else if(d.type===1){const{value:m,repeatable:b,optional:w,regexp:_}=d;i.push({name:m,repeatable:b,optional:w});const E=_||ch;if(E!==ch){v+=10;try{new RegExp(`(${E})`)}catch(I){throw new Error(`Invalid custom RegExp for param "${m}" (${E}): `+I.message)}}let A=b?`((?:${E})(?:/(?:${E}))*)`:`(${E})`;f||(A=w&&s.length<2?`(?:/${A})`:"/"+A),w&&(A+="?"),o+=A,v+=20,w&&(v+=-8),b&&(v+=-20),E===".*"&&(v+=-50)}c.push(v)}n.push(c)}if(r.strict&&r.end){const s=n.length-1;n[s][n[s].length-1]+=.7000000000000001}r.strict||(o+="/?"),r.end?o+="$":r.strict&&!o.endsWith("/")&&(o+="(?:/|$)");const a=new RegExp(o,r.sensitive?"":"i");function u(s){const c=s.match(a),f={};if(!c)return null;for(let d=1;d<c.length;d++){const v=c[d]||"",m=i[d-1];f[m.name]=v&&m.repeatable?v.split("/"):v}return f}function l(s){let c="",f=!1;for(const d of e){(!f||!c.endsWith("/"))&&(c+="/"),f=!1;for(const v of d)if(v.type===0)c+=v.value;else if(v.type===1){const{value:m,repeatable:b,optional:w}=v,_=m in s?s[m]:"";if(pr(_)&&!b)throw new Error(`Provided param "${m}" is an array but it is not repeatable (* or + modifiers)`);const E=pr(_)?_.join("/"):_;if(!E)if(w)d.length<2&&(c.endsWith("/")?c=c.slice(0,-1):f=!0);else throw new Error(`Missing required param "${m}"`);c+=E}}return c||"/"}return{re:a,score:n,keys:i,parse:u,stringify:l}}function vS(e,t){let r=0;for(;r<e.length&&r<t.length;){const n=t[r]-e[r];if(n)return n;r++}return e.length<t.length?e.length===1&&e[0]===80?-1:1:e.length>t.length?t.length===1&&t[0]===80?1:-1:0}function qm(e,t){let r=0;const n=e.score,o=t.score;for(;r<n.length&&r<o.length;){const i=vS(n[r],o[r]);if(i)return i;r++}if(Math.abs(o.length-n.length)===1){if(lh(n))return 1;if(lh(o))return-1}return o.length-n.length}function lh(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const gS={type:0,value:""},mS=/[a-zA-Z0-9_]/;function yS(e){if(!e)return[[]];if(e==="/")return[[gS]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(v){throw new Error(`ERR (${r})/"${s}": ${v}`)}let r=0,n=r;const o=[];let i;function a(){i&&o.push(i),i=[]}let u=0,l,s="",c="";function f(){s&&(r===0?i.push({type:0,value:s}):r===1||r===2||r===3?(i.length>1&&(l==="*"||l==="+")&&t(`A repeatable param (${s}) must be alone in its segment. eg: '/:ids+.`),i.push({type:1,value:s,regexp:c,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):t("Invalid state to consume buffer"),s="")}function d(){s+=l}for(;u<e.length;){if(l=e[u++],l==="\\"&&r!==2){n=r,r=4;continue}switch(r){case 0:l==="/"?(s&&f(),a()):l===":"?(f(),r=1):d();break;case 4:d(),r=n;break;case 1:l==="("?r=2:mS.test(l)?d():(f(),r=0,l!=="*"&&l!=="?"&&l!=="+"&&u--);break;case 2:l===")"?c[c.length-1]=="\\"?c=c.slice(0,-1)+l:r=3:c+=l;break;case 3:f(),r=0,l!=="*"&&l!=="?"&&l!=="+"&&u--,c="";break;default:t("Unknown state");break}}return r===2&&t(`Unfinished custom RegExp for param "${s}"`),f(),a(),o}function _S(e,t,r){const n=pS(yS(e.path),r),o=Te(n,{record:e,parent:t,children:[],alias:[]});return t&&!o.record.aliasOf==!t.record.aliasOf&&t.children.push(o),o}function bS(e,t){const r=[],n=new Map;t=ph({strict:!1,end:!0,sensitive:!1},t);function o(f){return n.get(f)}function i(f,d,v){const m=!v,b=dh(f);b.aliasOf=v&&v.record;const w=ph(t,f),_=[b];if("alias"in f){const I=typeof f.alias=="string"?[f.alias]:f.alias;for(const R of I)_.push(dh(Te({},b,{components:v?v.record.components:b.components,path:R,aliasOf:v?v.record:b})))}let E,A;for(const I of _){const{path:R}=I;if(d&&R[0]!=="/"){const L=d.record.path,U=L[L.length-1]==="/"?"":"/";I.path=d.record.path+(R&&U+R)}if(E=_S(I,d,w),v?v.alias.push(E):(A=A||E,A!==E&&A.alias.push(E),m&&f.name&&!hh(E)&&a(f.name)),Wm(E)&&l(E),b.children){const L=b.children;for(let U=0;U<L.length;U++)i(L[U],E,v&&v.children[U])}v=v||E}return A?()=>{a(A)}:Wo}function a(f){if(jm(f)){const d=n.get(f);d&&(n.delete(f),r.splice(r.indexOf(d),1),d.children.forEach(a),d.alias.forEach(a))}else{const d=r.indexOf(f);d>-1&&(r.splice(d,1),f.record.name&&n.delete(f.record.name),f.children.forEach(a),f.alias.forEach(a))}}function u(){return r}function l(f){const d=SS(f,r);r.splice(d,0,f),f.record.name&&!hh(f)&&n.set(f.record.name,f)}function s(f,d){let v,m={},b,w;if("name"in f&&f.name){if(v=n.get(f.name),!v)throw Vi(1,{location:f});w=v.record.name,m=Te(fh(d.params,v.keys.filter(A=>!A.optional).concat(v.parent?v.parent.keys.filter(A=>A.optional):[]).map(A=>A.name)),f.params&&fh(f.params,v.keys.map(A=>A.name))),b=v.stringify(m)}else if(f.path!=null)b=f.path,v=r.find(A=>A.re.test(b)),v&&(m=v.parse(b),w=v.record.name);else{if(v=d.name?n.get(d.name):r.find(A=>A.re.test(d.path)),!v)throw Vi(1,{location:f,currentLocation:d});w=v.record.name,m=Te({},d.params,f.params),b=v.stringify(m)}const _=[];let E=v;for(;E;)_.unshift(E.record),E=E.parent;return{name:w,path:b,params:m,matched:_,meta:ES(_)}}e.forEach(f=>i(f));function c(){r.length=0,n.clear()}return{addRoute:i,resolve:s,removeRoute:a,clearRoutes:c,getRoutes:u,getRecordMatcher:o}}function fh(e,t){const r={};for(const n of t)n in e&&(r[n]=e[n]);return r}function dh(e){const t={path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:e.aliasOf,beforeEnter:e.beforeEnter,props:wS(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}};return Object.defineProperty(t,"mods",{value:{}}),t}function wS(e){const t={},r=e.props||!1;if("component"in e)t.default=r;else for(const n in e.components)t[n]=typeof r=="object"?r[n]:r;return t}function hh(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function ES(e){return e.reduce((t,r)=>Te(t,r.meta),{})}function ph(e,t){const r={};for(const n in e)r[n]=n in t?t[n]:e[n];return r}function SS(e,t){let r=0,n=t.length;for(;r!==n;){const i=r+n>>1;qm(e,t[i])<0?n=i:r=i+1}const o=IS(e);return o&&(n=t.lastIndexOf(o,n-1)),n}function IS(e){let t=e;for(;t=t.parent;)if(Wm(t)&&qm(e,t)===0)return t}function Wm({record:e}){return!!(e.name||e.components&&Object.keys(e.components).length||e.redirect)}function TS(e){const t={};if(e===""||e==="?")return t;const n=(e[0]==="?"?e.slice(1):e).split("&");for(let o=0;o<n.length;++o){const i=n[o].replace(Dm," "),a=i.indexOf("="),u=ns(a<0?i:i.slice(0,a)),l=a<0?null:ns(i.slice(a+1));if(u in t){let s=t[u];pr(s)||(s=t[u]=[s]),s.push(l)}else t[u]=l}return t}function vh(e){let t="";for(let r in e){const n=e[r];if(r=H1(r),n==null){n!==void 0&&(t+=(t.length?"&":"")+r);continue}(pr(n)?n.map(i=>i&&pl(i)):[n&&pl(n)]).forEach(i=>{i!==void 0&&(t+=(t.length?"&":"")+r,i!=null&&(t+="="+i))})}return t}function OS(e){const t={};for(const r in e){const n=e[r];n!==void 0&&(t[r]=pr(n)?n.map(o=>o==null?null:""+o):n==null?n:""+n)}return t}const AS=Symbol(""),gh=Symbol(""),_u=Symbol(""),bf=Symbol(""),gl=Symbol("");function ho(){let e=[];function t(n){return e.push(n),()=>{const o=e.indexOf(n);o>-1&&e.splice(o,1)}}function r(){e=[]}return{add:t,list:()=>e.slice(),reset:r}}function dn(e,t,r,n,o,i=a=>a()){const a=n&&(n.enterCallbacks[o]=n.enterCallbacks[o]||[]);return()=>new Promise((u,l)=>{const s=d=>{d===!1?l(Vi(4,{from:r,to:t})):d instanceof Error?l(d):fS(d)?l(Vi(2,{from:t,to:d})):(a&&n.enterCallbacks[o]===a&&typeof d=="function"&&a.push(d),u())},c=i(()=>e.call(n&&n.instances[o],t,r,s));let f=Promise.resolve(c);e.length<3&&(f=f.then(s)),f.catch(d=>l(d))})}function lc(e,t,r,n,o=i=>i()){const i=[];for(const a of e)for(const u in a.components){let l=a.components[u];if(!(t!=="beforeRouteEnter"&&!a.instances[u]))if(Nm(l)){const c=(l.__vccOpts||l)[t];c&&i.push(dn(c,r,n,a,u,o))}else{let s=l();i.push(()=>s.then(c=>{if(!c)throw new Error(`Couldn't resolve component "${u}" at "${a.path}"`);const f=L1(c)?c.default:c;a.mods[u]=c,a.components[u]=f;const v=(f.__vccOpts||f)[t];return v&&dn(v,r,n,a,u,o)()}))}}return i}function mh(e){const t=jt(_u),r=jt(bf),n=Ct(()=>{const l=Rn(e.to);return t.resolve(l)}),o=Ct(()=>{const{matched:l}=n.value,{length:s}=l,c=l[s-1],f=r.matched;if(!c||!f.length)return-1;const d=f.findIndex(Gi.bind(null,c));if(d>-1)return d;const v=yh(l[s-2]);return s>1&&yh(c)===v&&f[f.length-1].path!==v?f.findIndex(Gi.bind(null,l[s-2])):d}),i=Ct(()=>o.value>-1&&NS(r.params,n.value.params)),a=Ct(()=>o.value>-1&&o.value===r.matched.length-1&&Mm(r.params,n.value.params));function u(l={}){if(PS(l)){const s=t[Rn(e.replace)?"replace":"push"](Rn(e.to)).catch(Wo);return e.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>s),s}return Promise.resolve()}return{route:n,href:Ct(()=>n.value.href),isActive:i,isExactActive:a,navigate:u}}function RS(e){return e.length===1?e[0]:e}const CS=jg({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:mh,setup(e,{slots:t}){const r=_s(mh(e)),{options:n}=jt(_u),o=Ct(()=>({[_h(e.activeClass,n.linkActiveClass,"router-link-active")]:r.isActive,[_h(e.exactActiveClass,n.linkExactActiveClass,"router-link-exact-active")]:r.isExactActive}));return()=>{const i=t.default&&RS(t.default(r));return e.custom?i:mm("a",{"aria-current":r.isExactActive?e.ariaCurrentValue:null,href:r.href,onClick:r.navigate,class:o.value},i)}}}),xS=CS;function PS(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function NS(e,t){for(const r in t){const n=t[r],o=e[r];if(typeof n=="string"){if(n!==o)return!1}else if(!pr(o)||o.length!==n.length||n.some((i,a)=>i!==o[a]))return!1}return!0}function yh(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const _h=(e,t,r)=>e??t??r,LS=jg({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:r}){const n=jt(gl),o=Ct(()=>e.route||n.value),i=jt(gh,0),a=Ct(()=>{let s=Rn(i);const{matched:c}=o.value;let f;for(;(f=c[s])&&!f.components;)s++;return s}),u=Ct(()=>o.value.matched[a.value]);Js(gh,Ct(()=>a.value+1)),Js(AS,u),Js(gl,o);const l=Ur();return Ui(()=>[l.value,u.value,e.name],([s,c,f],[d,v,m])=>{c&&(c.instances[f]=s,v&&v!==c&&s&&s===d&&(c.leaveGuards.size||(c.leaveGuards=v.leaveGuards),c.updateGuards.size||(c.updateGuards=v.updateGuards))),s&&c&&(!v||!Gi(c,v)||!d)&&(c.enterCallbacks[f]||[]).forEach(b=>b(s))},{flush:"post"}),()=>{const s=o.value,c=e.name,f=u.value,d=f&&f.components[c];if(!d)return bh(r.default,{Component:d,route:s});const v=f.props[c],m=v?v===!0?s.params:typeof v=="function"?v(s):v:null,w=mm(d,Te({},m,t,{onVnodeUnmounted:_=>{_.component.isUnmounted&&(f.instances[c]=null)},ref:l}));return bh(r.default,{Component:w,route:s})||w}}});function bh(e,t){if(!e)return null;const r=e(t);return r.length===1?r[0]:r}const DS=LS;function US(e){const t=bS(e.routes,e),r=e.parseQuery||TS,n=e.stringifyQuery||vh,o=e.history,i=ho(),a=ho(),u=ho(),l=Gb(sn);let s=sn;Ii&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const c=uc.bind(null,$=>""+$),f=uc.bind(null,V1),d=uc.bind(null,ns);function v($,W){let j,V;return jm($)?(j=t.getRecordMatcher($),V=W):V=$,t.addRoute(V,j)}function m($){const W=t.getRecordMatcher($);W&&t.removeRoute(W)}function b(){return t.getRoutes().map($=>$.record)}function w($){return!!t.getRecordMatcher($)}function _($,W){if(W=Te({},W||l.value),typeof $=="string"){const P=cc(r,$,W.path),g=t.resolve({path:P.path},W),h=o.createHref(P.fullPath);return Te(P,g,{params:d(g.params),hash:ns(P.hash),redirectedFrom:void 0,href:h})}let j;if($.path!=null)j=Te({},$,{path:cc(r,$.path,W.path).path});else{const P=Te({},$.params);for(const g in P)P[g]==null&&delete P[g];j=Te({},$,{params:f(P)}),W.params=f(W.params)}const V=t.resolve(j,W),fe=$.hash||"";V.params=c(d(V.params));const S=J1(n,Te({},$,{hash:W1(fe),path:V.path})),O=o.createHref(S);return Te({fullPath:S,hash:fe,query:n===vh?OS($.query):$.query||{}},V,{redirectedFrom:void 0,href:O})}function E($){return typeof $=="string"?cc(r,$,l.value.path):Te({},$)}function A($,W){if(s!==$)return Vi(8,{from:W,to:$})}function I($){return U($)}function R($){return I(Te(E($),{replace:!0}))}function L($){const W=$.matched[$.matched.length-1];if(W&&W.redirect){const{redirect:j}=W;let V=typeof j=="function"?j($):j;return typeof V=="string"&&(V=V.includes("?")||V.includes("#")?V=E(V):{path:V},V.params={}),Te({query:$.query,hash:$.hash,params:V.path!=null?{}:$.params},V)}}function U($,W){const j=s=_($),V=l.value,fe=$.state,S=$.force,O=$.replace===!0,P=L(j);if(P)return U(Te(E(P),{state:typeof P=="object"?Te({},fe,P.state):fe,force:S,replace:O}),W||j);const g=j;g.redirectedFrom=W;let h;return!S&&Y1(n,V,j)&&(h=Vi(16,{to:g,from:V}),Re(V,V,!0,!1)),(h?Promise.resolve(h):k(g,V)).catch(p=>jr(p)?jr(p,2)?p:ae(p):ce(p,g,V)).then(p=>{if(p){if(jr(p,2))return U(Te({replace:O},E(p.to),{state:typeof p.to=="object"?Te({},fe,p.to.state):fe,force:S}),W||g)}else p=Q(g,V,!0,O,fe);return M(g,V,p),p})}function N($,W){const j=A($,W);return j?Promise.reject(j):Promise.resolve()}function D($){const W=rr.values().next().value;return W&&typeof W.runWithContext=="function"?W.runWithContext($):$()}function k($,W){let j;const[V,fe,S]=$S($,W);j=lc(V.reverse(),"beforeRouteLeave",$,W);for(const P of V)P.leaveGuards.forEach(g=>{j.push(dn(g,$,W))});const O=N.bind(null,$,W);return j.push(O),ne(j).then(()=>{j=[];for(const P of i.list())j.push(dn(P,$,W));return j.push(O),ne(j)}).then(()=>{j=lc(fe,"beforeRouteUpdate",$,W);for(const P of fe)P.updateGuards.forEach(g=>{j.push(dn(g,$,W))});return j.push(O),ne(j)}).then(()=>{j=[];for(const P of S)if(P.beforeEnter)if(pr(P.beforeEnter))for(const g of P.beforeEnter)j.push(dn(g,$,W));else j.push(dn(P.beforeEnter,$,W));return j.push(O),ne(j)}).then(()=>($.matched.forEach(P=>P.enterCallbacks={}),j=lc(S,"beforeRouteEnter",$,W,D),j.push(O),ne(j))).then(()=>{j=[];for(const P of a.list())j.push(dn(P,$,W));return j.push(O),ne(j)}).catch(P=>jr(P,8)?P:Promise.reject(P))}function M($,W,j){u.list().forEach(V=>D(()=>V($,W,j)))}function Q($,W,j,V,fe){const S=A($,W);if(S)return S;const O=W===sn,P=Ii?history.state:{};j&&(V||O?o.replace($.fullPath,Te({scroll:O&&P&&P.scroll},fe)):o.push($.fullPath,fe)),l.value=$,Re($,W,j,O),ae()}let oe;function Y(){oe||(oe=o.listen(($,W,j)=>{if(!Ke.listening)return;const V=_($),fe=L(V);if(fe){U(Te(fe,{replace:!0,force:!0}),V).catch(Wo);return}s=V;const S=l.value;Ii&&iS(sh(S.fullPath,j.delta),yu()),k(V,S).catch(O=>jr(O,12)?O:jr(O,2)?(U(Te(E(O.to),{force:!0}),V).then(P=>{jr(P,20)&&!j.delta&&j.type===is.pop&&o.go(-1,!1)}).catch(Wo),Promise.reject()):(j.delta&&o.go(-j.delta,!1),ce(O,V,S))).then(O=>{O=O||Q(V,S,!1),O&&(j.delta&&!jr(O,8)?o.go(-j.delta,!1):j.type===is.pop&&jr(O,20)&&o.go(-1,!1)),M(V,S,O)}).catch(Wo)}))}let Ae=ho(),ge=ho(),K;function ce($,W,j){ae($);const V=ge.list();return V.length?V.forEach(fe=>fe($,W,j)):console.error($),Promise.reject($)}function se(){return K&&l.value!==sn?Promise.resolve():new Promise(($,W)=>{Ae.add([$,W])})}function ae($){return K||(K=!$,Y(),Ae.list().forEach(([W,j])=>$?j($):W()),Ae.reset()),$}function Re($,W,j,V){const{scrollBehavior:fe}=e;if(!Ii||!fe)return Promise.resolve();const S=!j&&oS(sh($.fullPath,0))||(V||!j)&&history.state&&history.state.scroll||null;return du().then(()=>fe($,W,S)).then(O=>O&&nS(O)).catch(O=>ce(O,$,W))}const We=$=>o.go($);let Wt;const rr=new Set,Ke={currentRoute:l,listening:!0,addRoute:v,removeRoute:m,clearRoutes:t.clearRoutes,hasRoute:w,getRoutes:b,resolve:_,options:e,push:I,replace:R,go:We,back:()=>We(-1),forward:()=>We(1),beforeEach:i.add,beforeResolve:a.add,afterEach:u.add,onError:ge.add,isReady:se,install($){const W=this;$.component("RouterLink",xS),$.component("RouterView",DS),$.config.globalProperties.$router=W,Object.defineProperty($.config.globalProperties,"$route",{enumerable:!0,get:()=>Rn(l)}),Ii&&!Wt&&l.value===sn&&(Wt=!0,I(o.location).catch(fe=>{}));const j={};for(const fe in sn)Object.defineProperty(j,fe,{get:()=>l.value[fe],enumerable:!0});$.provide(_u,W),$.provide(bf,Pg(j)),$.provide(gl,l);const V=$.unmount;rr.add($),$.unmount=function(){rr.delete($),rr.size<1&&(s=sn,oe&&oe(),oe=null,l.value=sn,Wt=!1,K=!1),V()}}};function ne($){return $.reduce((W,j)=>W.then(()=>D(j)),Promise.resolve())}return Ke}function $S(e,t){const r=[],n=[],o=[],i=Math.max(t.matched.length,e.matched.length);for(let a=0;a<i;a++){const u=t.matched[a];u&&(e.matched.find(s=>Gi(s,u))?n.push(u):r.push(u));const l=e.matched[a];l&&(t.matched.find(s=>Gi(s,l))||o.push(l))}return[r,n,o]}function Hm(){return jt(_u)}function FM(e){return jt(bf)}const FS=jE("app",()=>{const e=Ur(!1),t=Ur(""),r=Ur({name:"",description:"",url:"https://www.mao.com.cn",keywords:",,,,,,"}),n=Ct(()=>`${r.value.name} - ${r.value.description}`);function o(u){e.value=u}function i(){const u=window.location.pathname,l=window.location.hostname;return u.startsWith("/pet-daily/")||l.includes("github.io")&&(u.split("/").filter(c=>c).length===0||u==="/")&&window.location.href.includes("/pet-daily")?"/pet-daily":""}async function a(){o(!0);try{t.value=i(),console.log(" "),console.log(" :",t.value||""),console.log(" :",window.location.hostname)}catch(u){throw console.error(":",u),u}finally{o(!1)}}return{isLoading:e,basePath:t,siteInfo:r,fullSiteName:n,setLoading:o,getBasePath:i,initialize:a}}),MS="/assets/images/logo.png",BS={class:"site-header"},jS={class:"navbar"},kS={class:"nav-container"},qS={class:"nav-logo"},WS={class:"nav-menu"},HS={__name:"AppHeader",setup(e){const t=Hm(),r=Ur(!1);function n(){r.value=!r.value}function o(u){u.target.style.display="none";const l=u.target.nextElementSibling;l&&(l.textContent=" ")}function i(){r.value=!1}function a(){i(),t.currentRoute.value.path==="/"?setTimeout(()=>{const u=document.getElementById("latest-articles");u&&u.scrollIntoView({behavior:"smooth"})},100):t.push("/").then(()=>{setTimeout(()=>{const u=document.getElementById("latest-articles");u&&u.scrollIntoView({behavior:"smooth"})},200)})}return(u,l)=>{const s=ff("RouterLink");return Wi(),gu("header",BS,[pe("nav",jS,[pe("div",kS,[pe("div",qS,[Ne(s,{to:"/",class:"logo-link"},{default:ar(()=>[pe("img",{src:MS,alt:"",class:"logo-image",onError:o},null,32),l[0]||(l[0]=pe("h1",{class:"logo-text"},"",-1))]),_:1,__:[0]})]),pe("ul",WS,[pe("li",null,[Ne(s,{to:"/",class:yn({active:u.$route.name==="Home"})},{default:ar(()=>l[1]||(l[1]=[Tr("  ",-1)])),_:1,__:[1]},8,["class"])]),pe("li",null,[Ne(s,{to:"/#articles",onClick:a},{default:ar(()=>l[2]||(l[2]=[Tr("  ",-1)])),_:1,__:[2]})]),pe("li",null,[Ne(s,{to:"/upload",class:yn({active:u.$route.name==="Upload"})},{default:ar(()=>l[3]||(l[3]=[Tr("  ",-1)])),_:1,__:[3]},8,["class"])]),pe("li",null,[Ne(s,{to:"/about",class:yn({active:u.$route.name==="About"})},{default:ar(()=>l[4]||(l[4]=[Tr("  ",-1)])),_:1,__:[4]},8,["class"])]),l[5]||(l[5]=pe("li",null,[pe("a",{href:"/feed.xml",target:"_blank"},"RSS")],-1))]),pe("button",{class:yn(["mobile-menu-btn",{active:r.value}]),onClick:n},l[6]||(l[6]=[pe("span",null,null,-1),pe("span",null,null,-1),pe("span",null,null,-1)]),2)]),pe("div",{class:yn(["mobile-menu",{open:r.value}])},[pe("ul",null,[pe("li",null,[Ne(s,{to:"/",onClick:i},{default:ar(()=>l[7]||(l[7]=[Tr("",-1)])),_:1,__:[7]})]),pe("li",null,[Ne(s,{to:"/#articles",onClick:a},{default:ar(()=>l[8]||(l[8]=[Tr("",-1)])),_:1,__:[8]})]),pe("li",null,[Ne(s,{to:"/upload",onClick:i},{default:ar(()=>l[9]||(l[9]=[Tr("",-1)])),_:1,__:[9]})]),pe("li",null,[Ne(s,{to:"/about",onClick:i},{default:ar(()=>l[10]||(l[10]=[Tr("",-1)])),_:1,__:[10]})]),l[11]||(l[11]=pe("li",null,[pe("a",{href:"/feed.xml",target:"_blank"},"RSS")],-1))])],2)])])}}},GS={class:"site-footer"},VS={class:"footer-content"},KS={class:"footer-section"},zS={class:"footer-bottom"},JS={__name:"AppFooter",setup(e){const t=Ct(()=>new Date().getFullYear());return(r,n)=>{const o=ff("RouterLink");return Wi(),gu("footer",GS,[pe("div",VS,[n[4]||(n[4]=pe("div",{class:"footer-section"},[pe("h4",null,""),pe("p",null,"")],-1)),pe("div",KS,[n[3]||(n[3]=pe("h4",null,"",-1)),pe("ul",null,[pe("li",null,[Ne(o,{to:"/about"},{default:ar(()=>n[0]||(n[0]=[Tr("",-1)])),_:1,__:[0]})]),n[1]||(n[1]=pe("li",null,[pe("a",{href:"/sitemap.xml",target:"_blank"},"")],-1)),n[2]||(n[2]=pe("li",null,[pe("a",{href:"/feed.xml",target:"_blank"},"RSS")],-1))])]),n[5]||(n[5]=pm('<div class="footer-section"><h4></h4><div class="social-links"><a href="#" class="social-link"></a><a href="#" class="social-link"></a><a href="#" class="social-link"></a></div></div>',1))]),pe("div",zS,[pe("p",null," "+dg(t.value)+" . All rights reserved.",1)])])}}},YS=(e,t)=>{const r=e.__vccOpts||e;for(const[n,o]of t)r[n]=o;return r},QS={},XS={class:"loading-overlay"};function ZS(e,t){return Wi(),gu("div",XS,t[0]||(t[0]=[pm('<div class="loading-content" data-v-c2f8316f><div class="cat-loader" data-v-c2f8316f><div class="cat-body" data-v-c2f8316f><div class="cat-head" data-v-c2f8316f><div class="cat-ears" data-v-c2f8316f><div class="ear ear-left" data-v-c2f8316f></div><div class="ear ear-right" data-v-c2f8316f></div></div><div class="cat-face" data-v-c2f8316f><div class="eyes" data-v-c2f8316f><div class="eye eye-left" data-v-c2f8316f></div><div class="eye eye-right" data-v-c2f8316f></div></div><div class="nose" data-v-c2f8316f></div><div class="mouth" data-v-c2f8316f></div></div></div><div class="cat-tail" data-v-c2f8316f></div></div></div><p class="loading-text" data-v-c2f8316f>...</p></div>',1)]))}const eI=YS(QS,[["render",ZS],["__scopeId","data-v-c2f8316f"]]),tI={id:"app"},rI={class:"main-content"},nI={__name:"App",setup(e){Hm();const t=FS(),r=Ur(!1);return yf({titleTemplate:n=>n?`${n} - `:" - ",meta:[{charset:"utf-8"},{name:"viewport",content:"width=device-width, initial-scale=1"},{name:"theme-color",content:"#ff6b6b"},{property:"og:image",content:"https://www.mao.com.cn/assets/images/logo.png"},{property:"og:site_name",content:""},{name:"twitter:image",content:"https://www.mao.com.cn/assets/images/logo.png"}],link:[{rel:"icon",type:"image/x-icon",href:"/assets/images/favicon.ico"},{rel:"apple-touch-icon",href:"/assets/images/apple-touch-icon.png"},{rel:"shortcut icon",href:"/assets/images/logo.png"}]}),Vg(async()=>{r.value=!0;try{await t.initialize()}catch(n){console.error(":",n)}finally{r.value=!1}}),(n,o)=>{const i=ff("RouterView");return Wi(),gu("div",tI,[Ne(HS),pe("main",rI,[Ne(i)]),Ne(JS),r.value?(Wi(),dm(eI,{key:0})):Yw("",!0)])}}},iI="modulepreload",oI=function(e){return"/"+e},wh={},Zi=function(t,r,n){let o=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),u=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));o=Promise.allSettled(r.map(l=>{if(l=oI(l),l in wh)return;wh[l]=!0;const s=l.endsWith(".css"),c=s?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${c}`))return;const f=document.createElement("link");if(f.rel=s?"stylesheet":iI,s||(f.as="script"),f.crossOrigin="",f.href=l,u&&f.setAttribute("nonce",u),document.head.appendChild(f),s)return new Promise((d,v)=>{f.addEventListener("load",d),f.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${l}`)))})}))}function i(a){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=a,window.dispatchEvent(u),!u.defaultPrevented)throw a}return o.then(a=>{for(const u of a||[])u.status==="rejected"&&i(u.reason);return t().catch(i)})},sI=()=>Zi(()=>import("./Home-DXDvPq_e.js"),__vite__mapDeps([0,1,2])),aI=()=>Zi(()=>import("./About-DfJaN7VX.js"),__vite__mapDeps([3,4])),uI=()=>Zi(()=>import("./Article-B-F39may.js"),__vite__mapDeps([5,1,6])),cI=()=>Zi(()=>import("./Category-zCIGHnM6.js"),__vite__mapDeps([7,1,8])),lI=()=>Zi(()=>import("./Upload-RaR0PwDG.js"),__vite__mapDeps([9,10])),fI=()=>Zi(()=>import("./NotFound-BfY8IbUn.js"),__vite__mapDeps([11,12])),dI=[{path:"/",name:"Home",component:sI,meta:{title:"",description:""}},{path:"/about",name:"About",component:aI,meta:{title:"",description:""}},{path:"/stories/:slug",name:"Article",component:uI,meta:{title:"",description:""}},{path:"/categories/:category",name:"Category",component:cI,meta:{title:"",description:""}},{path:"/upload",name:"Upload",component:lI,meta:{title:"",description:""}},{path:"/:pathMatch(.*)*",name:"NotFound",component:fI,meta:{title:"",description:""}}],bu=US({history:lS(),routes:dI,scrollBehavior(e,t,r){return r||{top:0}}});bu.onError(e=>{console.warn(":",e.message)});bu.beforeEach((e,t,r)=>{e.name!==t.name&&(document.body.style.cursor="wait"),r()});bu.afterEach(e=>{document.body.style.cursor="";const{title:t,description:r}=e.meta;yf({title:t||"",meta:[{name:"description",content:r||""},{property:"og:title",content:t?`${t} - `:" - "},{property:"og:description",content:r||""},{property:"og:url",content:window.location.href}]})});var Gm="@cloudbase/js-sdk";function hI(e){Gm=e}function wu(){return Gm}var Vm="https:";function pI(e){Vm=e}function vI(){return Vm}var Eu="https://support.qq.com/products/148793",xt={INVALID_PARAMS:"INVALID_PARAMS",INVALID_OPERATION:"INVALID_OPERATION",OPERATION_FAIL:"OPERATION_FAIL"},Ta;(function(e){e.local="local",e.none="none",e.session="session"})(Ta||(Ta={}));var wf=function(){function e(){}return e}(),Km=function(){function e(){}return e}();function ea(e,t,r){r===void 0&&(r={});var n=/\?/.test(t),o="";for(var i in r)o===""?!n&&(t+="?"):o+="&",o+=i+"="+encodeURIComponent(r[i]);return t+=o,/^http(s)?\:\/\//.test(t)?t:""+e+t}const gI=Object.freeze(Object.defineProperty({__proto__:null,AbstractSDKRequest:wf,AbstractStorage:Km,get StorageType(){return Ta},formatUrl:ea},Symbol.toStringTag,{value:"Module"}));function zm(e){return Object.prototype.toString.call(e)==="[object Array]"}function Jm(e){return typeof e=="string"}function mI(e){return Object.prototype.toString.call(e)==="[object Object]"}function yI(e,t){return e instanceof t}function Ym(e){return Object.prototype.toString.call(e)==="[object FormData]"}function _I(){return Math.random().toString(16).slice(2)}function bI(){var e=new Date().getTime(),t=(Date==null?void 0:Date.now)&&Date.now()*1e3||0;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(r){var n=Math.random()*16;return e>0?(n=(e+n)%16|0,e=Math.floor(e/16)):(n=(t+n)%16|0,t=Math.floor(t/16)),(r==="x"?n:n&7|8).toString(16)})}function Qm(e,t,r){r===void 0&&(r={});var n=/\?/.test(t),o="";return Object.keys(r).forEach(function(i){o===""?!n&&(t+="?"):o+="&",o+="".concat(i,"=").concat(encodeURIComponent(r[i]))}),t+=o,/^http(s)?:\/\//.test(t)?t:"".concat(e).concat(t)}function wI(e){e===void 0&&(e={});var t=[];return Object.keys(e).forEach(function(r){t.push("".concat(r,"=").concat(encodeURIComponent(e[r])))}),t.join("&")}function Xm(e,t,r){if(r===void 0&&(r=null),e&&typeof e=="function")return e(t,r);if(t)throw t;return r}function $i(e,t){console.warn("[".concat(wu(),"][").concat(e,"]:").concat(t))}var EI=function(e){e=e.replace(/^\?/,"");var t={},r=e.split("&");return r.forEach(function(n){var o=n.split("="),i=o[0],a=o[1];i=decodeURIComponent(i),a=decodeURIComponent(a),i&&(t[i]?Array.isArray(t[i])?t[i].push(a):t[i]=[t[i],a]:t[i]=a)}),t},SI=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),nt=function(){return nt=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},nt.apply(this,arguments)},fc=function(e,t,r,n){function o(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function u(c){try{s(n.next(c))}catch(f){a(f)}}function l(c){try{s(n.throw(c))}catch(f){a(f)}}function s(c){c.done?i(c.value):o(c.value).then(u,l)}s((n=n.apply(e,t||[])).next())})},dc=function(e,t){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function u(s){return function(c){return l([s,c])}}function l(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(r=0)),r;)try{if(n=1,o&&(i=s[0]&2?o.return:s[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,s[1])).done)return i;switch(o=0,i&&(s=[s[0]&2,i.value]),s[0]){case 0:case 1:i=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,o=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(s[0]===6||s[0]===2)){r=0;continue}if(s[0]===3&&(!i||s[1]>i[0]&&s[1]<i[3])){r.label=s[1];break}if(s[0]===6&&r.label<i[1]){r.label=i[1],i=s;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(s);break}i[2]&&r.ops.pop(),r.trys.pop();continue}s=t.call(e,r)}catch(c){s=[6,c],o=0}finally{n=i=0}if(s[0]&5)throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}},II=function(e){SI(t,e);function t(r){var n=e.call(this)||this,o=r.timeout,i=r.timeoutMsg,a=r.restrictedMethods;return n.timeout=o||0,n.timeoutMsg=i||"",n.restrictedMethods=a||["get","post","upload","download"],n}return t.prototype.get=function(r){return this.request(nt(nt({},r),{method:"get"}),this.restrictedMethods.includes("get"))},t.prototype.post=function(r){return this.request(nt(nt({},r),{method:"post"}),this.restrictedMethods.includes("post"))},t.prototype.put=function(r){return this.request(nt(nt({},r),{method:"put"}))},t.prototype.upload=function(r){var n=r.data,o=r.file,i=r.name,a=r.method,u=r.headers,l=u===void 0?{}:u,s={post:"post",put:"put"}[a==null?void 0:a.toLowerCase()]||"put",c=new FormData;return s==="post"?(Object.keys(n).forEach(function(f){c.append(f,n[f])}),c.append("key",i),c.append("file",o),this.request(nt(nt({},r),{data:c,method:s}),this.restrictedMethods.includes("upload"))):this.request(nt(nt({},r),{method:"put",headers:l,body:o}),this.restrictedMethods.includes("upload"))},t.prototype.download=function(r){return fc(this,void 0,void 0,function(){var n,o,i,a;return dc(this,function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,this.get(nt(nt({},r),{headers:{},responseType:"blob"}))];case 1:return n=u.sent().data,o=window.URL.createObjectURL(new Blob([n])),i=decodeURIComponent(new URL(r.url).pathname.split("/").pop()||""),a=document.createElement("a"),a.href=o,a.setAttribute("download",i),a.style.display="none",document.body.appendChild(a),a.click(),window.URL.revokeObjectURL(o),document.body.removeChild(a),[3,3];case 2:return u.sent(),[3,3];case 3:return[2,new Promise(function(l){l({statusCode:200,tempFilePath:r.url})})]}})})},t.prototype.fetch=function(r){var n;return fc(this,void 0,void 0,function(){var o,i,a,u,l,s,c,f,d,v,m,b=this;return dc(this,function(w){switch(w.label){case 0:return o=new AbortController,i=r.url,a=r.enableAbort,u=a===void 0?!1:a,l=r.stream,s=l===void 0?!1:l,c=r.signal,f=r.timeout,d=f??this.timeout,c&&(c.aborted&&o.abort(),c.addEventListener("abort",function(){return o.abort()})),v=null,u&&d&&(v=setTimeout(function(){console.warn(b.timeoutMsg),o.abort(new Error(b.timeoutMsg))},d)),[4,fetch(i,nt(nt({},r),{signal:o.signal})).then(function(_){return fc(b,void 0,void 0,function(){var E,A,I;return dc(this,function(R){switch(R.label){case 0:return clearTimeout(v),_.ok?(E=_,[3,3]):[3,1];case 1:return I=(A=Promise).reject,[4,_.json()];case 2:E=I.apply(A,[R.sent()]),R.label=3;case 3:return[2,E]}})})}).catch(function(_){return clearTimeout(v),Promise.reject(_)})];case 1:return m=w.sent(),[2,{data:s?m.body:!((n=m.headers.get("content-type"))===null||n===void 0)&&n.includes("application/json")?m.json():m.text(),statusCode:m.status,header:m.headers}]}})})},t.prototype.request=function(r,n){var o=this;n===void 0&&(n=!1);var i=String(r.method).toLowerCase()||"get";return new Promise(function(a){var u=r.url,l=r.headers,s=l===void 0?{}:l,c=r.data,f=r.responseType,d=r.withCredentials,v=r.body,m=r.onUploadProgress,b=Qm(vI(),u,i==="get"?c:{}),w=new XMLHttpRequest;w.open(i,b),f&&(w.responseType=f),Object.keys(s).forEach(function(A){w.setRequestHeader(A,s[A])});var _;m&&w.upload.addEventListener("progress",m),w.onreadystatechange=function(){var A={};if(w.readyState===4){var I=w.getAllResponseHeaders(),R=I.trim().split(/[\r\n]+/),L={};R.forEach(function(U){var N=U.split(": "),D=N.shift().toLowerCase(),k=N.join(": ");L[D]=k}),A.header=L,A.statusCode=w.status;try{A.data=f==="blob"?w.response:JSON.parse(w.responseText)}catch{A.data=f==="blob"?w.response:w.responseText}clearTimeout(_),a(A)}},n&&o.timeout&&(_=setTimeout(function(){console.warn(o.timeoutMsg),w.abort()},o.timeout));var E;Ym(c)?E=c:s["content-type"]==="application/x-www-form-urlencoded"?E=wI(c):v?E=v:E=c?JSON.stringify(c):void 0,d&&(w.withCredentials=!0),w.send(E)})},t}(wf);function TI(){var e={type:"default",root:window,reqClass:II,wsClass:WebSocket,localStorage};return e}var ml=function(){return ml=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},ml.apply(this,arguments)},yl;(function(e){e.WEB="web",e.WX_MP="wx_mp"})(yl||(yl={}));function OI(e,t){for(var r=zm(e)?e:[e],n=0,o=r;n<o.length;n++){var i=o[n],a=i.isMatch,u=i.genAdapter,l=i.runtime;if(a())return{adapter:ml({isMatch:a},u(t)),runtime:l}}}function AI(){return{adapter:TI(),runtime:yl.WEB}}var xs={},RI=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),hc=function(e,t,r,n){function o(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function u(c){try{s(n.next(c))}catch(f){a(f)}}function l(c){try{s(n.throw(c))}catch(f){a(f)}}function s(c){c.done?i(c.value):o(c.value).then(u,l)}s((n=n.apply(e,[])).next())})},pc=function(e,t){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function u(s){return function(c){return l([s,c])}}function l(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(r=0)),r;)try{if(n=1,o&&(i=s[0]&2?o.return:s[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,s[1])).done)return i;switch(o=0,i&&(s=[s[0]&2,i.value]),s[0]){case 0:case 1:i=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,o=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(s[0]===6||s[0]===2)){r=0;continue}if(s[0]===3&&(!i||s[1]>i[0]&&s[1]<i[3])){r.label=s[1];break}if(s[0]===6&&r.label<i[1]){r.label=i[1],i=s;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(s);break}i[2]&&r.ops.pop(),r.trys.pop();continue}s=t.call(e,r)}catch(c){s=[6,c],o=0}finally{n=i=0}if(s[0]&5)throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}},vc=function(e){RI(t,e);function t(r){var n=e.call(this)||this;return n.root=r,r.tcbCacheObject||(r.tcbCacheObject={}),n}return t.prototype.setItem=function(r,n){this.root.tcbCacheObject[r]=n},t.prototype.getItem=function(r){return this.root.tcbCacheObject[r]},t.prototype.removeItem=function(r){delete this.root.tcbCacheObject[r]},t.prototype.clear=function(){delete this.root.tcbCacheObject},t}(Km);function CI(e,t){switch(e){case"local":return t.localStorage?t.localStorage:($i(xt.INVALID_PARAMS,"localStorage is not supported on current platform"),new vc(t.root));case"none":return new vc(t.root);default:return t.localStorage?t.localStorage:($i(xt.INVALID_PARAMS,"localStorage is not supported on current platform"),new vc(t.root))}}var xI=function(){function e(t){this.keys={};var r=t.persistence,n=t.platformInfo,o=n===void 0?{}:n,i=t.keys,a=i===void 0?{}:i;this.platformInfo=o,this.storage||(this.persistenceTag=this.platformInfo.adapter.primaryStorage||r,this.storage=CI(this.persistenceTag,this.platformInfo.adapter),this.keys=a)}return Object.defineProperty(e.prototype,"mode",{get:function(){return this.storage.mode||"sync"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"persistence",{get:function(){return this.persistenceTag},enumerable:!1,configurable:!0}),e.prototype.setStore=function(t,r,n){if(this.mode==="async"){$i(xt.INVALID_OPERATION,"current platform's storage is asynchronous, please use setStoreAsync insteed");return}if(this.storage)try{var o={version:n||"localCachev1",content:r};this.storage.setItem(t,JSON.stringify(o))}catch(i){throw new Error(JSON.stringify({code:xt.OPERATION_FAIL,msg:"[".concat(wu(),"][").concat(xt.OPERATION_FAIL,"]setStore failed"),info:i}))}},e.prototype.setStoreAsync=function(t,r,n){return hc(this,void 0,void 0,function(){var o;return pc(this,function(i){switch(i.label){case 0:if(!this.storage)return[2];i.label=1;case 1:return i.trys.push([1,3,,4]),o={version:n||"localCachev1",content:r},[4,this.storage.setItem(t,JSON.stringify(o))];case 2:return i.sent(),[3,4];case 3:return i.sent(),[2];case 4:return[2]}})})},e.prototype.getStore=function(t,r){var n;if(this.mode==="async"){$i(xt.INVALID_OPERATION,"current platform's storage is asynchronous, please use getStoreAsync insteed");return}try{if(typeof process<"u"&&(!((n=xs)===null||n===void 0)&&n.tcb_token))return xs.tcb_token;if(!this.storage)return""}catch{return""}r=r||"localCachev1";var o=this.storage.getItem(t);if(!o)return"";if(o.indexOf(r)>=0){var i=JSON.parse(o);return i.content}return""},e.prototype.getStoreAsync=function(t,r){var n;return hc(this,void 0,void 0,function(){var o,i;return pc(this,function(a){switch(a.label){case 0:try{if(typeof process<"u"&&(!((n=xs)===null||n===void 0)&&n.tcb_token))return[2,xs.tcb_token];if(!this.storage)return[2,""]}catch{return[2,""]}return r=r||"localCachev1",[4,this.storage.getItem(t)];case 1:return o=a.sent(),o?o.indexOf(r)>=0?(i=JSON.parse(o),[2,i.content]):[2,""]:[2,""]}})})},e.prototype.removeStore=function(t){if(this.mode==="async"){$i(xt.INVALID_OPERATION,"current platform's storage is asynchronous, please use removeStoreAsync insteed");return}this.storage.removeItem(t)},e.prototype.removeStoreAsync=function(t){return hc(this,void 0,void 0,function(){return pc(this,function(r){switch(r.label){case 0:return[4,this.storage.removeItem(t)];case 1:return r.sent(),[2]}})})},e}(),PI=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),NI=function(e,t,r){if(r||arguments.length===2)for(var n=0,o=t.length,i;n<o;n++)(i||!(n in t))&&(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return e.concat(i||Array.prototype.slice.call(t))};function LI(e,t,r){r[e]=r[e]||[],r[e].push(t)}function DI(e,t,r){if(r!=null&&r[e]){var n=r[e].indexOf(t);n!==-1&&r[e].splice(n,1)}}var Zm=function(){function e(t,r){this.data=r||null,this.name=t}return e}(),UI=function(e){PI(t,e);function t(r,n){var o=e.call(this,"error",{error:r,data:n})||this;return o.error=r,o}return t}(Zm),ey=function(){function e(){this.listeners={}}return e.prototype.on=function(t,r){return LI(t,r,this.listeners),this},e.prototype.off=function(t,r){return DI(t,r,this.listeners),this},e.prototype.fire=function(t,r){if(yI(t,UI))return console.error(t.error),this;var n=Jm(t)?new Zm(t,r||{}):t,o=n.name;if(this.listens(o)){n.target=this;for(var i=this.listeners[o]?NI([],this.listeners[o],!0):[],a=0,u=i;a<u.length;a++){var l=u[a];l.call(this,n)}}return this},e.prototype.listens=function(t){return this.listeners[t]&&this.listeners[t].length>0},e}(),Su=new ey,Iu="lang_change";typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.indexOf("Firefox");function Tu(e){return e.mode,e.customInfo,e.title,e.messages,function(t,r,n){}}function _l(e){this.message=e}_l.prototype=new Error,_l.prototype.name="InvalidCharacterError";typeof window<"u"&&window.atob&&window.atob.bind(window);function Eh(e){this.message=e}Eh.prototype=new Error,Eh.prototype.name="InvalidTokenError";/**
 * @license
 * web-streams-polyfill v4.1.0
 * Copyright 2024 Mattias Buelens, Diwank Singh Tomer and other contributors.
 * This code is released under the MIT license.
 * SPDX-License-Identifier: MIT
 */function os(){}function Je(e){return typeof e=="object"&&e!==null||typeof e=="function"}const ty=os;function ye(e,t){try{Object.defineProperty(e,"name",{value:t,configurable:!0})}catch{}}const Ef=Promise,$I=Promise.resolve.bind(Ef),FI=Promise.prototype.then,MI=Promise.reject.bind(Ef),BI=$I;function He(e){return new Ef(e)}function _e(e){return He(t=>t(e))}function Z(e){return MI(e)}function Pr(e,t,r){return FI.call(e,t,r)}function Pt(e,t,r){Pr(Pr(e,t,r),void 0,ty)}function gc(e,t){Pt(e,t)}function bl(e,t){Pt(e,void 0,t)}function en(e,t,r){return Pr(e,t,r)}function eo(e){Pr(e,void 0,ty)}let ni=e=>{if(typeof queueMicrotask=="function")ni=queueMicrotask;else{const t=_e(void 0);ni=r=>Pr(t,r)}return ni(e)};function ai(e,t,r){if(typeof e!="function")throw new TypeError("Argument is not a function");return Function.prototype.apply.call(e,t,r)}function on(e,t,r){try{return _e(ai(e,t,r))}catch(n){return Z(n)}}class Zt{constructor(){this._cursor=0,this._size=0,this._front={_elements:[],_next:void 0},this._back=this._front,this._cursor=0,this._size=0}get length(){return this._size}push(t){const r=this._back;let n=r;r._elements.length===16383&&(n={_elements:[],_next:void 0}),r._elements.push(t),n!==r&&(this._back=n,r._next=n),++this._size}shift(){const t=this._front;let r=t;const n=this._cursor;let o=n+1;const i=t._elements,a=i[n];return o===16384&&(r=t._next,o=0),--this._size,this._cursor=o,t!==r&&(this._front=r),i[n]=void 0,a}forEach(t){let r=this._cursor,n=this._front,o=n._elements;for(;!(r===o.length&&n._next===void 0||r===o.length&&(n=n._next,o=n._elements,r=0,o.length===0));)t(o[r]),++r}peek(){const t=this._front,r=this._cursor;return t._elements[r]}}const ry=Symbol("[[AbortSteps]]"),ny=Symbol("[[ErrorSteps]]"),Sf=Symbol("[[CancelSteps]]"),If=Symbol("[[PullSteps]]"),Tf=Symbol("[[ReleaseSteps]]");function iy(e,t){e._ownerReadableStream=t,t._reader=e,t._state==="readable"?wl(e):t._state==="closed"?function(r){wl(r),sy(r)}(e):oy(e,t._storedError)}function Of(e,t){return ur(e._ownerReadableStream,t)}function Xr(e){const t=e._ownerReadableStream;t._state==="readable"?Af(e,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")):function(r,n){oy(r,n)}(e,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")),t._readableStreamController[Tf](),t._reader=void 0,e._ownerReadableStream=void 0}function Oa(e){return new TypeError("Cannot "+e+" a stream using a released reader")}function wl(e){e._closedPromise=He((t,r)=>{e._closedPromise_resolve=t,e._closedPromise_reject=r})}function oy(e,t){wl(e),Af(e,t)}function Af(e,t){e._closedPromise_reject!==void 0&&(eo(e._closedPromise),e._closedPromise_reject(t),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0)}function sy(e){e._closedPromise_resolve!==void 0&&(e._closedPromise_resolve(void 0),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0)}const Sh=Number.isFinite||function(e){return typeof e=="number"&&isFinite(e)},jI=Math.trunc||function(e){return e<0?Math.ceil(e):Math.floor(e)};function Zr(e,t){if(e!==void 0&&typeof(r=e)!="object"&&typeof r!="function")throw new TypeError(`${t} is not an object.`);var r}function er(e,t){if(typeof e!="function")throw new TypeError(`${t} is not a function.`)}function ay(e,t){if(!function(r){return typeof r=="object"&&r!==null||typeof r=="function"}(e))throw new TypeError(`${t} is not an object.`)}function ui(e,t,r){if(e===void 0)throw new TypeError(`Parameter ${t} is required in '${r}'.`)}function Ih(e,t,r){if(e===void 0)throw new TypeError(`${t} is required in '${r}'.`)}function uy(e){return Number(e)}function Th(e){return e===0?0:e}function Rf(e,t){const r=Number.MAX_SAFE_INTEGER;let n=Number(e);if(n=Th(n),!Sh(n))throw new TypeError(`${t} is not a finite number`);if(n=function(o){return Th(jI(o))}(n),n<0||n>r)throw new TypeError(`${t} is outside the accepted range of 0 to ${r}, inclusive`);return Sh(n)&&n!==0?n:0}function Cf(e,t){if(!un(e))throw new TypeError(`${t} is not a ReadableStream.`)}function Fi(e){return new Gn(e)}function cy(e,t){e._reader._readRequests.push(t)}function xf(e,t,r){const n=e._reader._readRequests.shift();r?n._closeSteps():n._chunkSteps(t)}function Ou(e){return e._reader._readRequests.length}function ly(e){const t=e._reader;return t!==void 0&&!!En(t)}class Gn{constructor(t){if(ui(t,1,"ReadableStreamDefaultReader"),Cf(t,"First parameter"),Sn(t))throw new TypeError("This stream has already been locked for exclusive reading by another reader");iy(this,t),this._readRequests=new Zt}get closed(){return En(this)?this._closedPromise:Z(Ps("closed"))}cancel(t=void 0){return En(this)?this._ownerReadableStream===void 0?Z(Oa("cancel")):Of(this,t):Z(Ps("cancel"))}read(){if(!En(this))return Z(Ps("read"));if(this._ownerReadableStream===void 0)return Z(Oa("read from"));let t,r;const n=He((o,i)=>{t=o,r=i});return ss(this,{_chunkSteps:o=>t({value:o,done:!1}),_closeSteps:()=>t({value:void 0,done:!0}),_errorSteps:o=>r(o)}),n}releaseLock(){if(!En(this))throw Ps("releaseLock");this._ownerReadableStream!==void 0&&function(t){Xr(t);const r=new TypeError("Reader was released");fy(t,r)}(this)}}function En(e){return!!Je(e)&&!!Object.prototype.hasOwnProperty.call(e,"_readRequests")&&e instanceof Gn}function ss(e,t){const r=e._ownerReadableStream;r._disturbed=!0,r._state==="closed"?t._closeSteps():r._state==="errored"?t._errorSteps(r._storedError):r._readableStreamController[If](t)}function fy(e,t){const r=e._readRequests;e._readRequests=new Zt,r.forEach(n=>{n._errorSteps(t)})}function Ps(e){return new TypeError(`ReadableStreamDefaultReader.prototype.${e} can only be used on a ReadableStreamDefaultReader`)}var mc,yc,_c;function xo(e){return e.slice()}function dy(e,t,r,n,o){new Uint8Array(e).set(new Uint8Array(r,n,o),t)}Object.defineProperties(Gn.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),ye(Gn.prototype.cancel,"cancel"),ye(Gn.prototype.read,"read"),ye(Gn.prototype.releaseLock,"releaseLock"),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(Gn.prototype,Symbol.toStringTag,{value:"ReadableStreamDefaultReader",configurable:!0});let ci=e=>(ci=typeof e.transfer=="function"?t=>t.transfer():typeof structuredClone=="function"?t=>structuredClone(t,{transfer:[t]}):t=>t,ci(e)),li=e=>(li=typeof e.detached=="boolean"?t=>t.detached:t=>t.byteLength===0,li(e));function hy(e,t,r){if(e.slice)return e.slice(t,r);const n=r-t,o=new ArrayBuffer(n);return dy(o,0,e,t,n),o}function Po(e,t){const r=e[t];if(r!=null){if(typeof r!="function")throw new TypeError(`${String(t)} is not a function`);return r}}function Oh(e){try{const t=e.done,r=e.value;return Pr(BI(r),n=>({done:t,value:n}))}catch(t){return Z(t)}}const Es=(_c=(mc=Symbol.asyncIterator)!==null&&mc!==void 0?mc:(yc=Symbol.for)===null||yc===void 0?void 0:yc.call(Symbol,"Symbol.asyncIterator"))!==null&&_c!==void 0?_c:"@@asyncIterator";function py(e,t="sync",r){if(r===void 0)if(t==="async"){if((r=Po(e,Es))===void 0)return function(o){const i={next(){let a;try{a=vy(o)}catch(u){return Z(u)}return Oh(a)},return(a){let u;try{const l=Po(o.iterator,"return");if(l===void 0)return _e({done:!0,value:a});u=ai(l,o.iterator,[a])}catch(l){return Z(l)}return Je(u)?Oh(u):Z(new TypeError("The iterator.return() method must return an object"))}};return{iterator:i,nextMethod:i.next,done:!1}}(py(e,"sync",Po(e,Symbol.iterator)))}else r=Po(e,Symbol.iterator);if(r===void 0)throw new TypeError("The object is not iterable");const n=ai(r,e,[]);if(!Je(n))throw new TypeError("The iterator method must return an object");return{iterator:n,nextMethod:n.next,done:!1}}function vy(e){const t=ai(e.nextMethod,e.iterator,[]);if(!Je(t))throw new TypeError("The iterator.next() method must return an object");return t}class gy{constructor(t,r){this._ongoingPromise=void 0,this._isFinished=!1,this._reader=t,this._preventCancel=r}next(){const t=()=>this._nextSteps();return this._ongoingPromise=this._ongoingPromise?en(this._ongoingPromise,t,t):t(),this._ongoingPromise}return(t){const r=()=>this._returnSteps(t);return this._ongoingPromise=this._ongoingPromise?en(this._ongoingPromise,r,r):r(),this._ongoingPromise}_nextSteps(){if(this._isFinished)return Promise.resolve({value:void 0,done:!0});const t=this._reader;let r,n;const o=He((i,a)=>{r=i,n=a});return ss(t,{_chunkSteps:i=>{this._ongoingPromise=void 0,ni(()=>r({value:i,done:!1}))},_closeSteps:()=>{this._ongoingPromise=void 0,this._isFinished=!0,Xr(t),r({value:void 0,done:!0})},_errorSteps:i=>{this._ongoingPromise=void 0,this._isFinished=!0,Xr(t),n(i)}}),o}_returnSteps(t){if(this._isFinished)return Promise.resolve({value:t,done:!0});this._isFinished=!0;const r=this._reader;if(!this._preventCancel){const n=Of(r,t);return Xr(r),en(n,()=>({value:t,done:!0}))}return Xr(r),_e({value:t,done:!0})}}const my={next(){return Ah(this)?this._asyncIteratorImpl.next():Z(Rh("next"))},return(e){return Ah(this)?this._asyncIteratorImpl.return(e):Z(Rh("return"))},[Es](){return this}};function Ah(e){if(!Je(e)||!Object.prototype.hasOwnProperty.call(e,"_asyncIteratorImpl"))return!1;try{return e._asyncIteratorImpl instanceof gy}catch{return!1}}function Rh(e){return new TypeError(`ReadableStreamAsyncIterator.${e} can only be used on a ReadableSteamAsyncIterator`)}Object.defineProperty(my,Es,{enumerable:!1});const yy=Number.isNaN||function(e){return e!=e};function Ch(e){const t=hy(e.buffer,e.byteOffset,e.byteOffset+e.byteLength);return new Uint8Array(t)}function El(e){const t=e._queue.shift();return e._queueTotalSize-=t.size,e._queueTotalSize<0&&(e._queueTotalSize=0),t.value}function Pf(e,t,r){if(typeof(n=r)!="number"||yy(n)||n<0||r===1/0)throw new RangeError("Size must be a finite, non-NaN, non-negative number.");var n;e._queue.push({value:t,size:r}),e._queueTotalSize+=r}function Dn(e){e._queue=new Zt,e._queueTotalSize=0}function _y(e){return e===DataView}class Ti{constructor(){throw new TypeError("Illegal constructor")}get view(){if(!bc(this))throw wc("view");return this._view}respond(t){if(!bc(this))throw wc("respond");if(ui(t,1,"respond"),t=Rf(t,"First parameter"),this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");if(li(this._view.buffer))throw new TypeError("The BYOB request's buffer has been detached and so cannot be used as a response");ia(this._associatedReadableByteStreamController,t)}respondWithNewView(t){if(!bc(this))throw wc("respondWithNewView");if(ui(t,1,"respondWithNewView"),!ArrayBuffer.isView(t))throw new TypeError("You can only respond with array buffer views");if(this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");if(li(t.buffer))throw new TypeError("The given view's buffer has been detached and so cannot be used as a response");oa(this._associatedReadableByteStreamController,t)}}Object.defineProperties(Ti.prototype,{respond:{enumerable:!0},respondWithNewView:{enumerable:!0},view:{enumerable:!0}}),ye(Ti.prototype.respond,"respond"),ye(Ti.prototype.respondWithNewView,"respondWithNewView"),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(Ti.prototype,Symbol.toStringTag,{value:"ReadableStreamBYOBRequest",configurable:!0});class bn{constructor(){throw new TypeError("Illegal constructor")}get byobRequest(){if(!Vn(this))throw po("byobRequest");return Il(this)}get desiredSize(){if(!Vn(this))throw po("desiredSize");return xy(this)}close(){if(!Vn(this))throw po("close");if(this._closeRequested)throw new TypeError("The stream has already been closed; do not close it again!");const t=this._controlledReadableByteStream._state;if(t!=="readable")throw new TypeError(`The stream (in ${t} state) is not in the readable state and cannot be closed`);No(this)}enqueue(t){if(!Vn(this))throw po("enqueue");if(ui(t,1,"enqueue"),!ArrayBuffer.isView(t))throw new TypeError("chunk must be an array buffer view");if(t.byteLength===0)throw new TypeError("chunk must have non-zero byteLength");if(t.buffer.byteLength===0)throw new TypeError("chunk's buffer must have non-zero byteLength");if(this._closeRequested)throw new TypeError("stream is closed or draining");const r=this._controlledReadableByteStream._state;if(r!=="readable")throw new TypeError(`The stream (in ${r} state) is not in the readable state and cannot be enqueued to`);na(this,t)}error(t=void 0){if(!Vn(this))throw po("error");zt(this,t)}[Sf](t){by(this),Dn(this);const r=this._cancelAlgorithm(t);return Au(this),r}[If](t){const r=this._controlledReadableByteStream;if(this._queueTotalSize>0)return void Cy(this,t);const n=this._autoAllocateChunkSize;if(n!==void 0){let o;try{o=new ArrayBuffer(n)}catch(a){return void t._errorSteps(a)}const i={buffer:o,bufferByteLength:n,byteOffset:0,byteLength:n,bytesFilled:0,minimumFill:1,elementSize:1,viewConstructor:Uint8Array,readerType:"default"};this._pendingPullIntos.push(i)}cy(r,t),pi(this)}[Tf](){if(this._pendingPullIntos.length>0){const t=this._pendingPullIntos.peek();t.readerType="none",this._pendingPullIntos=new Zt,this._pendingPullIntos.push(t)}}}function Vn(e){return!!Je(e)&&!!Object.prototype.hasOwnProperty.call(e,"_controlledReadableByteStream")&&e instanceof bn}function bc(e){return!!Je(e)&&!!Object.prototype.hasOwnProperty.call(e,"_associatedReadableByteStreamController")&&e instanceof Ti}function pi(e){if(function(r){const n=r._controlledReadableByteStream;return n._state!=="readable"||r._closeRequested||!r._started?!1:!!(ly(n)&&Ou(n)>0||Lf(n)&&Ly(n)>0||xy(r)>0)}(e)){if(e._pulling)return void(e._pullAgain=!0);e._pulling=!0,Pt(e._pullAlgorithm(),()=>(e._pulling=!1,e._pullAgain&&(e._pullAgain=!1,pi(e)),null),r=>(zt(e,r),null))}}function by(e){Nf(e),e._pendingPullIntos=new Zt}function wy(e,t){let r=!1;e._state==="closed"&&(r=!0);const n=Ey(t);t.readerType==="default"?xf(e,n,r):function(o,i,a){const u=o._reader,l=u._readIntoRequests.shift();a?l._closeSteps(i):l._chunkSteps(i)}(e,n,r)}function ta(e,t){for(let r=0;r<t.length;++r)wy(e,t[r])}function Ey(e){const t=e.bytesFilled,r=e.elementSize;return new e.viewConstructor(e.buffer,e.byteOffset,t/r)}function ra(e,t,r,n){e._queue.push({buffer:t,byteOffset:r,byteLength:n}),e._queueTotalSize+=n}function Sy(e,t,r,n){let o;try{o=hy(t,r,r+n)}catch(i){throw zt(e,i),i}ra(e,o,0,n)}function Iy(e,t){t.bytesFilled>0&&Sy(e,t.buffer,t.byteOffset,t.bytesFilled),Mi(e)}function Ty(e,t){const r=Math.min(e._queueTotalSize,t.byteLength-t.bytesFilled),n=t.bytesFilled+r;let o=r,i=!1;const a=n-n%t.elementSize;a>=t.minimumFill&&(o=a-t.bytesFilled,i=!0);const u=e._queue;for(;o>0;){const l=u.peek(),s=Math.min(o,l.byteLength),c=t.byteOffset+t.bytesFilled;dy(t.buffer,c,l.buffer,l.byteOffset,s),l.byteLength===s?u.shift():(l.byteOffset+=s,l.byteLength-=s),e._queueTotalSize-=s,Oy(e,s,t),o-=s}return i}function Oy(e,t,r){r.bytesFilled+=t}function Ay(e){e._queueTotalSize===0&&e._closeRequested?(Au(e),Ss(e._controlledReadableByteStream)):pi(e)}function Nf(e){e._byobRequest!==null&&(e._byobRequest._associatedReadableByteStreamController=void 0,e._byobRequest._view=null,e._byobRequest=null)}function Sl(e){const t=[];for(;e._pendingPullIntos.length>0&&e._queueTotalSize!==0;){const r=e._pendingPullIntos.peek();Ty(e,r)&&(Mi(e),t.push(r))}return t}function kI(e,t,r,n){const o=e._controlledReadableByteStream,i=t.constructor,a=function(d){return _y(d)?1:d.BYTES_PER_ELEMENT}(i),{byteOffset:u,byteLength:l}=t,s=r*a;let c;try{c=ci(t.buffer)}catch(d){return void n._errorSteps(d)}const f={buffer:c,bufferByteLength:c.byteLength,byteOffset:u,byteLength:l,bytesFilled:0,minimumFill:s,elementSize:a,viewConstructor:i,readerType:"byob"};if(e._pendingPullIntos.length>0)return e._pendingPullIntos.push(f),void xh(o,n);if(o._state!=="closed"){if(e._queueTotalSize>0){if(Ty(e,f)){const d=Ey(f);return Ay(e),void n._chunkSteps(d)}if(e._closeRequested){const d=new TypeError("Insufficient bytes to fill elements in the given buffer");return zt(e,d),void n._errorSteps(d)}}e._pendingPullIntos.push(f),xh(o,n),pi(e)}else{const d=new i(f.buffer,f.byteOffset,0);n._closeSteps(d)}}function Ry(e,t){const r=e._pendingPullIntos.peek();Nf(e),e._controlledReadableByteStream._state==="closed"?function(n,o){o.readerType==="none"&&Mi(n);const i=n._controlledReadableByteStream;if(Lf(i)){const a=[];for(let u=0;u<Ly(i);++u)a.push(Mi(n));ta(i,a)}}(e,r):function(n,o,i){if(Oy(0,o,i),i.readerType==="none"){Iy(n,i);const l=Sl(n);return void ta(n._controlledReadableByteStream,l)}if(i.bytesFilled<i.minimumFill)return;Mi(n);const a=i.bytesFilled%i.elementSize;if(a>0){const l=i.byteOffset+i.bytesFilled;Sy(n,i.buffer,l-a,a)}i.bytesFilled-=a;const u=Sl(n);wy(n._controlledReadableByteStream,i),ta(n._controlledReadableByteStream,u)}(e,t,r),pi(e)}function Mi(e){return e._pendingPullIntos.shift()}function Au(e){e._pullAlgorithm=void 0,e._cancelAlgorithm=void 0}function No(e){const t=e._controlledReadableByteStream;if(!e._closeRequested&&t._state==="readable")if(e._queueTotalSize>0)e._closeRequested=!0;else{if(e._pendingPullIntos.length>0){const r=e._pendingPullIntos.peek();if(r.bytesFilled%r.elementSize!=0){const n=new TypeError("Insufficient bytes to fill elements in the given buffer");throw zt(e,n),n}}Au(e),Ss(t)}}function na(e,t){const r=e._controlledReadableByteStream;if(e._closeRequested||r._state!=="readable")return;const{buffer:n,byteOffset:o,byteLength:i}=t;if(li(n))throw new TypeError("chunk's buffer is detached and so cannot be enqueued");const a=ci(n);if(e._pendingPullIntos.length>0){const u=e._pendingPullIntos.peek();if(li(u.buffer))throw new TypeError("The BYOB request's buffer has been detached and so cannot be filled with an enqueued chunk");Nf(e),u.buffer=ci(u.buffer),u.readerType==="none"&&Iy(e,u)}if(ly(r))(function(u){const l=u._controlledReadableByteStream._reader;for(;l._readRequests.length>0;){if(u._queueTotalSize===0)return;Cy(u,l._readRequests.shift())}})(e),Ou(r)===0?ra(e,a,o,i):(e._pendingPullIntos.length>0&&Mi(e),xf(r,new Uint8Array(a,o,i),!1));else if(Lf(r)){ra(e,a,o,i);const u=Sl(e);ta(e._controlledReadableByteStream,u)}else ra(e,a,o,i);pi(e)}function zt(e,t){const r=e._controlledReadableByteStream;r._state==="readable"&&(by(e),Dn(e),Au(e),Zy(r,t))}function Cy(e,t){const r=e._queue.shift();e._queueTotalSize-=r.byteLength,Ay(e);const n=new Uint8Array(r.buffer,r.byteOffset,r.byteLength);t._chunkSteps(n)}function Il(e){if(e._byobRequest===null&&e._pendingPullIntos.length>0){const t=e._pendingPullIntos.peek(),r=new Uint8Array(t.buffer,t.byteOffset+t.bytesFilled,t.byteLength-t.bytesFilled),n=Object.create(Ti.prototype);(function(o,i,a){o._associatedReadableByteStreamController=i,o._view=a})(n,e,r),e._byobRequest=n}return e._byobRequest}function xy(e){const t=e._controlledReadableByteStream._state;return t==="errored"?null:t==="closed"?0:e._strategyHWM-e._queueTotalSize}function ia(e,t){const r=e._pendingPullIntos.peek();if(e._controlledReadableByteStream._state==="closed"){if(t!==0)throw new TypeError("bytesWritten must be 0 when calling respond() on a closed stream")}else{if(t===0)throw new TypeError("bytesWritten must be greater than 0 when calling respond() on a readable stream");if(r.bytesFilled+t>r.byteLength)throw new RangeError("bytesWritten out of range")}r.buffer=ci(r.buffer),Ry(e,t)}function oa(e,t){const r=e._pendingPullIntos.peek();if(e._controlledReadableByteStream._state==="closed"){if(t.byteLength!==0)throw new TypeError("The view's length must be 0 when calling respondWithNewView() on a closed stream")}else if(t.byteLength===0)throw new TypeError("The view's length must be greater than 0 when calling respondWithNewView() on a readable stream");if(r.byteOffset+r.bytesFilled!==t.byteOffset)throw new RangeError("The region specified by view does not match byobRequest");if(r.bufferByteLength!==t.buffer.byteLength)throw new RangeError("The buffer of view has different capacity than byobRequest");if(r.bytesFilled+t.byteLength>r.byteLength)throw new RangeError("The region specified by view is larger than byobRequest");const n=t.byteLength;r.buffer=ci(t.buffer),Ry(e,n)}function Py(e,t,r,n,o,i,a){t._controlledReadableByteStream=e,t._pullAgain=!1,t._pulling=!1,t._byobRequest=null,t._queue=t._queueTotalSize=void 0,Dn(t),t._closeRequested=!1,t._started=!1,t._strategyHWM=i,t._pullAlgorithm=n,t._cancelAlgorithm=o,t._autoAllocateChunkSize=a,t._pendingPullIntos=new Zt,e._readableStreamController=t,Pt(_e(r()),()=>(t._started=!0,pi(t),null),u=>(zt(t,u),null))}function wc(e){return new TypeError(`ReadableStreamBYOBRequest.prototype.${e} can only be used on a ReadableStreamBYOBRequest`)}function po(e){return new TypeError(`ReadableByteStreamController.prototype.${e} can only be used on a ReadableByteStreamController`)}function qI(e,t){if((e=`${e}`)!="byob")throw new TypeError(`${t} '${e}' is not a valid enumeration value for ReadableStreamReaderMode`);return e}function Ny(e){return new Kn(e)}function xh(e,t){e._reader._readIntoRequests.push(t)}function Ly(e){return e._reader._readIntoRequests.length}function Lf(e){const t=e._reader;return t!==void 0&&!!Xn(t)}Object.defineProperties(bn.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},byobRequest:{enumerable:!0},desiredSize:{enumerable:!0}}),ye(bn.prototype.close,"close"),ye(bn.prototype.enqueue,"enqueue"),ye(bn.prototype.error,"error"),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(bn.prototype,Symbol.toStringTag,{value:"ReadableByteStreamController",configurable:!0});class Kn{constructor(t){if(ui(t,1,"ReadableStreamBYOBReader"),Cf(t,"First parameter"),Sn(t))throw new TypeError("This stream has already been locked for exclusive reading by another reader");if(!Vn(t._readableStreamController))throw new TypeError("Cannot construct a ReadableStreamBYOBReader for a stream not constructed with a byte source");iy(this,t),this._readIntoRequests=new Zt}get closed(){return Xn(this)?this._closedPromise:Z(Ns("closed"))}cancel(t=void 0){return Xn(this)?this._ownerReadableStream===void 0?Z(Oa("cancel")):Of(this,t):Z(Ns("cancel"))}read(t,r={}){if(!Xn(this))return Z(Ns("read"));if(!ArrayBuffer.isView(t))return Z(new TypeError("view must be an array buffer view"));if(t.byteLength===0)return Z(new TypeError("view must have non-zero byteLength"));if(t.buffer.byteLength===0)return Z(new TypeError("view's buffer must have non-zero byteLength"));if(li(t.buffer))return Z(new TypeError("view's buffer has been detached"));let n;try{n=function(l,s){var c;return Zr(l,s),{min:Rf((c=l==null?void 0:l.min)!==null&&c!==void 0?c:1,`${s} has member 'min' that`)}}(r,"options")}catch(l){return Z(l)}const o=n.min;if(o===0)return Z(new TypeError("options.min must be greater than 0"));if(function(l){return _y(l.constructor)}(t)){if(o>t.byteLength)return Z(new RangeError("options.min must be less than or equal to view's byteLength"))}else if(o>t.length)return Z(new RangeError("options.min must be less than or equal to view's length"));if(this._ownerReadableStream===void 0)return Z(Oa("read from"));let i,a;const u=He((l,s)=>{i=l,a=s});return Dy(this,t,o,{_chunkSteps:l=>i({value:l,done:!1}),_closeSteps:l=>i({value:l,done:!0}),_errorSteps:l=>a(l)}),u}releaseLock(){if(!Xn(this))throw Ns("releaseLock");this._ownerReadableStream!==void 0&&function(t){Xr(t);const r=new TypeError("Reader was released");Uy(t,r)}(this)}}function Xn(e){return!!Je(e)&&!!Object.prototype.hasOwnProperty.call(e,"_readIntoRequests")&&e instanceof Kn}function Dy(e,t,r,n){const o=e._ownerReadableStream;o._disturbed=!0,o._state==="errored"?n._errorSteps(o._storedError):kI(o._readableStreamController,t,r,n)}function Uy(e,t){const r=e._readIntoRequests;e._readIntoRequests=new Zt,r.forEach(n=>{n._errorSteps(t)})}function Ns(e){return new TypeError(`ReadableStreamBYOBReader.prototype.${e} can only be used on a ReadableStreamBYOBReader`)}function as(e,t){const{highWaterMark:r}=e;if(r===void 0)return t;if(yy(r)||r<0)throw new RangeError("Invalid highWaterMark");return r}function Aa(e){const{size:t}=e;return t||(()=>1)}function Ra(e,t){Zr(e,t);const r=e==null?void 0:e.highWaterMark,n=e==null?void 0:e.size;return{highWaterMark:r===void 0?void 0:uy(r),size:n===void 0?void 0:WI(n,`${t} has member 'size' that`)}}function WI(e,t){return er(e,t),r=>uy(e(r))}function HI(e,t,r){return er(e,r),n=>on(e,t,[n])}function GI(e,t,r){return er(e,r),()=>on(e,t,[])}function VI(e,t,r){return er(e,r),n=>ai(e,t,[n])}function KI(e,t,r){return er(e,r),(n,o)=>on(e,t,[n,o])}function $y(e,t){if(!Oi(e))throw new TypeError(`${t} is not a WritableStream.`)}Object.defineProperties(Kn.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),ye(Kn.prototype.cancel,"cancel"),ye(Kn.prototype.read,"read"),ye(Kn.prototype.releaseLock,"releaseLock"),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(Kn.prototype,Symbol.toStringTag,{value:"ReadableStreamBYOBReader",configurable:!0});class zn{constructor(t={},r={}){t===void 0?t=null:ay(t,"First parameter");const n=Ra(r,"Second parameter"),o=function(a,u){Zr(a,u);const l=a==null?void 0:a.abort,s=a==null?void 0:a.close,c=a==null?void 0:a.start,f=a==null?void 0:a.type,d=a==null?void 0:a.write;return{abort:l===void 0?void 0:HI(l,a,`${u} has member 'abort' that`),close:s===void 0?void 0:GI(s,a,`${u} has member 'close' that`),start:c===void 0?void 0:VI(c,a,`${u} has member 'start' that`),write:d===void 0?void 0:KI(d,a,`${u} has member 'write' that`),type:f}}(t,"First parameter");if(My(this),o.type!==void 0)throw new RangeError("Invalid type is specified");const i=Aa(n);(function(a,u,l,s){const c=Object.create(us.prototype);let f,d,v,m;f=u.start!==void 0?()=>u.start(c):()=>{},d=u.write!==void 0?b=>u.write(b,c):()=>_e(void 0),v=u.close!==void 0?()=>u.close():()=>_e(void 0),m=u.abort!==void 0?b=>u.abort(b):()=>_e(void 0),Gy(a,c,f,d,v,m,l,s)})(this,o,as(n,1),i)}get locked(){if(!Oi(this))throw Ds("locked");return Bi(this)}abort(t=void 0){return Oi(this)?Bi(this)?Z(new TypeError("Cannot abort a stream that already has a writer")):Ca(this,t):Z(Ds("abort"))}close(){return Oi(this)?Bi(this)?Z(new TypeError("Cannot close a stream that already has a writer")):Nr(this)?Z(new TypeError("Cannot close an already-closing stream")):By(this):Z(Ds("close"))}getWriter(){if(!Oi(this))throw Ds("getWriter");return Fy(this)}}function Fy(e){return new hn(e)}function My(e){e._state="writable",e._storedError=void 0,e._writer=void 0,e._writableStreamController=void 0,e._writeRequests=new Zt,e._inFlightWriteRequest=void 0,e._closeRequest=void 0,e._inFlightCloseRequest=void 0,e._pendingAbortRequest=void 0,e._backpressure=!1}function Oi(e){return!!Je(e)&&!!Object.prototype.hasOwnProperty.call(e,"_writableStreamController")&&e instanceof zn}function Bi(e){return e._writer!==void 0}function Ca(e,t){var r;if(e._state==="closed"||e._state==="errored")return _e(void 0);e._writableStreamController._abortReason=t,(r=e._writableStreamController._abortController)===null||r===void 0||r.abort(t);const n=e._state;if(n==="closed"||n==="errored")return _e(void 0);if(e._pendingAbortRequest!==void 0)return e._pendingAbortRequest._promise;let o=!1;n==="erroring"&&(o=!0,t=void 0);const i=He((a,u)=>{e._pendingAbortRequest={_promise:void 0,_resolve:a,_reject:u,_reason:t,_wasAlreadyErroring:o}});return e._pendingAbortRequest._promise=i,o||Df(e,t),i}function By(e){const t=e._state;if(t==="closed"||t==="errored")return Z(new TypeError(`The stream (in ${t} state) is not in the writable state and cannot be closed`));const r=He((i,a)=>{const u={_resolve:i,_reject:a};e._closeRequest=u}),n=e._writer;var o;return n!==void 0&&e._backpressure&&t==="writable"&&Bf(n),Pf(o=e._writableStreamController,Hy,0),Ru(o),r}function Tl(e,t){e._state!=="writable"?Uf(e):Df(e,t)}function Df(e,t){const r=e._writableStreamController;e._state="erroring",e._storedError=t;const n=e._writer;n!==void 0&&ky(n,t),!function(o){return!(o._inFlightWriteRequest===void 0&&o._inFlightCloseRequest===void 0)}(e)&&r._started&&Uf(e)}function Uf(e){e._state="errored",e._writableStreamController[ny]();const t=e._storedError;if(e._writeRequests.forEach(n=>{n._reject(t)}),e._writeRequests=new Zt,e._pendingAbortRequest===void 0)return void Ls(e);const r=e._pendingAbortRequest;if(e._pendingAbortRequest=void 0,r._wasAlreadyErroring)return r._reject(t),void Ls(e);Pt(e._writableStreamController[ry](r._reason),()=>(r._resolve(),Ls(e),null),n=>(r._reject(n),Ls(e),null))}function Nr(e){return e._closeRequest!==void 0||e._inFlightCloseRequest!==void 0}function Ls(e){e._closeRequest!==void 0&&(e._closeRequest._reject(e._storedError),e._closeRequest=void 0);const t=e._writer;t!==void 0&&Mf(t,e._storedError)}function $f(e,t){const r=e._writer;r!==void 0&&t!==e._backpressure&&(t?function(n){Cu(n)}(r):Bf(r)),e._backpressure=t}Object.defineProperties(zn.prototype,{abort:{enumerable:!0},close:{enumerable:!0},getWriter:{enumerable:!0},locked:{enumerable:!0}}),ye(zn.prototype.abort,"abort"),ye(zn.prototype.close,"close"),ye(zn.prototype.getWriter,"getWriter"),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(zn.prototype,Symbol.toStringTag,{value:"WritableStream",configurable:!0});class hn{constructor(t){if(ui(t,1,"WritableStreamDefaultWriter"),$y(t,"First parameter"),Bi(t))throw new TypeError("This stream has already been locked for exclusive writing by another writer");this._ownerWritableStream=t,t._writer=this;const r=t._state;if(r==="writable")!Nr(t)&&t._backpressure?Cu(this):Ph(this),sa(this);else if(r==="erroring")Ol(this,t._storedError),sa(this);else if(r==="closed")Ph(this),sa(n=this),Jy(n);else{const o=t._storedError;Ol(this,o),zy(this,o)}var n}get closed(){return Mn(this)?this._closedPromise:Z(Bn("closed"))}get desiredSize(){if(!Mn(this))throw Bn("desiredSize");if(this._ownerWritableStream===void 0)throw Lo("desiredSize");return function(t){const r=t._ownerWritableStream,n=r._state;return n==="errored"||n==="erroring"?null:n==="closed"?0:Vy(r._writableStreamController)}(this)}get ready(){return Mn(this)?this._readyPromise:Z(Bn("ready"))}abort(t=void 0){return Mn(this)?this._ownerWritableStream===void 0?Z(Lo("abort")):function(r,n){return Ca(r._ownerWritableStream,n)}(this,t):Z(Bn("abort"))}close(){if(!Mn(this))return Z(Bn("close"));const t=this._ownerWritableStream;return t===void 0?Z(Lo("close")):Nr(t)?Z(new TypeError("Cannot close an already-closing stream")):jy(this)}releaseLock(){if(!Mn(this))throw Bn("releaseLock");this._ownerWritableStream!==void 0&&qy(this)}write(t=void 0){return Mn(this)?this._ownerWritableStream===void 0?Z(Lo("write to")):Wy(this,t):Z(Bn("write"))}}function Mn(e){return!!Je(e)&&!!Object.prototype.hasOwnProperty.call(e,"_ownerWritableStream")&&e instanceof hn}function jy(e){return By(e._ownerWritableStream)}function zI(e,t){e._closedPromiseState==="pending"?Mf(e,t):function(r,n){zy(r,n)}(e,t)}function ky(e,t){e._readyPromiseState==="pending"?Yy(e,t):function(r,n){Ol(r,n)}(e,t)}function qy(e){const t=e._ownerWritableStream,r=new TypeError("Writer was released and can no longer be used to monitor the stream's closedness");ky(e,r),zI(e,r),t._writer=void 0,e._ownerWritableStream=void 0}function Wy(e,t){const r=e._ownerWritableStream,n=r._writableStreamController,o=function(u,l){if(u._strategySizeAlgorithm===void 0)return 1;try{return u._strategySizeAlgorithm(l)}catch(s){return cs(u,s),1}}(n,t);if(r!==e._ownerWritableStream)return Z(Lo("write to"));const i=r._state;if(i==="errored")return Z(r._storedError);if(Nr(r)||i==="closed")return Z(new TypeError("The stream is closing or closed and cannot be written to"));if(i==="erroring")return Z(r._storedError);const a=function(u){return He((l,s)=>{const c={_resolve:l,_reject:s};u._writeRequests.push(c)})}(r);return function(u,l,s){try{Pf(u,l,s)}catch(f){return void cs(u,f)}const c=u._controlledWritableStream;!Nr(c)&&c._state==="writable"&&$f(c,Ff(u)),Ru(u)}(n,t,o),a}Object.defineProperties(hn.prototype,{abort:{enumerable:!0},close:{enumerable:!0},releaseLock:{enumerable:!0},write:{enumerable:!0},closed:{enumerable:!0},desiredSize:{enumerable:!0},ready:{enumerable:!0}}),ye(hn.prototype.abort,"abort"),ye(hn.prototype.close,"close"),ye(hn.prototype.releaseLock,"releaseLock"),ye(hn.prototype.write,"write"),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(hn.prototype,Symbol.toStringTag,{value:"WritableStreamDefaultWriter",configurable:!0});const Hy={};class us{constructor(){throw new TypeError("Illegal constructor")}get abortReason(){if(!Ec(this))throw Sc("abortReason");return this._abortReason}get signal(){if(!Ec(this))throw Sc("signal");if(this._abortController===void 0)throw new TypeError("WritableStreamDefaultController.prototype.signal is not supported");return this._abortController.signal}error(t=void 0){if(!Ec(this))throw Sc("error");this._controlledWritableStream._state==="writable"&&Ky(this,t)}[ry](t){const r=this._abortAlgorithm(t);return xa(this),r}[ny](){Dn(this)}}function Ec(e){return!!Je(e)&&!!Object.prototype.hasOwnProperty.call(e,"_controlledWritableStream")&&e instanceof us}function Gy(e,t,r,n,o,i,a,u){t._controlledWritableStream=e,e._writableStreamController=t,t._queue=void 0,t._queueTotalSize=void 0,Dn(t),t._abortReason=void 0,t._abortController=function(){if(typeof AbortController=="function")return new AbortController}(),t._started=!1,t._strategySizeAlgorithm=u,t._strategyHWM=a,t._writeAlgorithm=n,t._closeAlgorithm=o,t._abortAlgorithm=i;const l=Ff(t);$f(e,l),Pt(_e(r()),()=>(t._started=!0,Ru(t),null),s=>(t._started=!0,Tl(e,s),null))}function xa(e){e._writeAlgorithm=void 0,e._closeAlgorithm=void 0,e._abortAlgorithm=void 0,e._strategySizeAlgorithm=void 0}function Vy(e){return e._strategyHWM-e._queueTotalSize}function Ru(e){const t=e._controlledWritableStream;if(!e._started||t._inFlightWriteRequest!==void 0)return;if(t._state==="erroring")return void Uf(t);if(e._queue.length===0)return;const r=e._queue.peek().value;r===Hy?function(n){const o=n._controlledWritableStream;(function(a){a._inFlightCloseRequest=a._closeRequest,a._closeRequest=void 0})(o),El(n);const i=n._closeAlgorithm();xa(n),Pt(i,()=>(function(a){a._inFlightCloseRequest._resolve(void 0),a._inFlightCloseRequest=void 0,a._state==="erroring"&&(a._storedError=void 0,a._pendingAbortRequest!==void 0&&(a._pendingAbortRequest._resolve(),a._pendingAbortRequest=void 0)),a._state="closed";const u=a._writer;u!==void 0&&Jy(u)}(o),null),a=>(function(u,l){u._inFlightCloseRequest._reject(l),u._inFlightCloseRequest=void 0,u._pendingAbortRequest!==void 0&&(u._pendingAbortRequest._reject(l),u._pendingAbortRequest=void 0),Tl(u,l)}(o,a),null))}(e):function(n,o){const i=n._controlledWritableStream;(function(u){u._inFlightWriteRequest=u._writeRequests.shift()})(i);const a=n._writeAlgorithm(o);Pt(a,()=>{(function(l){l._inFlightWriteRequest._resolve(void 0),l._inFlightWriteRequest=void 0})(i);const u=i._state;if(El(n),!Nr(i)&&u==="writable"){const l=Ff(n);$f(i,l)}return Ru(n),null},u=>(i._state==="writable"&&xa(n),function(l,s){l._inFlightWriteRequest._reject(s),l._inFlightWriteRequest=void 0,Tl(l,s)}(i,u),null))}(e,r)}function cs(e,t){e._controlledWritableStream._state==="writable"&&Ky(e,t)}function Ff(e){return Vy(e)<=0}function Ky(e,t){const r=e._controlledWritableStream;xa(e),Df(r,t)}function Ds(e){return new TypeError(`WritableStream.prototype.${e} can only be used on a WritableStream`)}function Sc(e){return new TypeError(`WritableStreamDefaultController.prototype.${e} can only be used on a WritableStreamDefaultController`)}function Bn(e){return new TypeError(`WritableStreamDefaultWriter.prototype.${e} can only be used on a WritableStreamDefaultWriter`)}function Lo(e){return new TypeError("Cannot "+e+" a stream using a released writer")}function sa(e){e._closedPromise=He((t,r)=>{e._closedPromise_resolve=t,e._closedPromise_reject=r,e._closedPromiseState="pending"})}function zy(e,t){sa(e),Mf(e,t)}function Mf(e,t){e._closedPromise_reject!==void 0&&(eo(e._closedPromise),e._closedPromise_reject(t),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0,e._closedPromiseState="rejected")}function Jy(e){e._closedPromise_resolve!==void 0&&(e._closedPromise_resolve(void 0),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0,e._closedPromiseState="resolved")}function Cu(e){e._readyPromise=He((t,r)=>{e._readyPromise_resolve=t,e._readyPromise_reject=r}),e._readyPromiseState="pending"}function Ol(e,t){Cu(e),Yy(e,t)}function Ph(e){Cu(e),Bf(e)}function Yy(e,t){e._readyPromise_reject!==void 0&&(eo(e._readyPromise),e._readyPromise_reject(t),e._readyPromise_resolve=void 0,e._readyPromise_reject=void 0,e._readyPromiseState="rejected")}function Bf(e){e._readyPromise_resolve!==void 0&&(e._readyPromise_resolve(void 0),e._readyPromise_resolve=void 0,e._readyPromise_reject=void 0,e._readyPromiseState="fulfilled")}Object.defineProperties(us.prototype,{abortReason:{enumerable:!0},signal:{enumerable:!0},error:{enumerable:!0}}),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(us.prototype,Symbol.toStringTag,{value:"WritableStreamDefaultController",configurable:!0});const Nh=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof global<"u"?global:void 0,JI=function(){const e=Nh==null?void 0:Nh.DOMException;return function(t){if(typeof t!="function"&&typeof t!="object"||t.name!=="DOMException")return!1;try{return new t,!0}catch{return!1}}(e)?e:void 0}()||function(){const e=function(t,r){this.message=t||"",this.name=r||"Error",Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)};return ye(e,"DOMException"),e.prototype=Object.create(Error.prototype),Object.defineProperty(e.prototype,"constructor",{value:e,writable:!0,configurable:!0}),e}();function Lh(e,t,r,n,o,i){const a=Fi(e),u=Fy(t);e._disturbed=!0;let l=!1,s=_e(void 0);return He((c,f)=>{let d;if(i!==void 0){if(d=()=>{const R=i.reason!==void 0?i.reason:new JI("Aborted","AbortError"),L=[];n||L.push(()=>t._state==="writable"?Ca(t,R):_e(void 0)),o||L.push(()=>e._state==="readable"?ur(e,R):_e(void 0)),E(()=>Promise.all(L.map(U=>U())),!0,R)},i.aborted)return void d();i.addEventListener("abort",d)}var v,m,b;if(_(e,a._closedPromise,R=>(n?A(!0,R):E(()=>Ca(t,R),!0,R),null)),_(t,u._closedPromise,R=>(o?A(!0,R):E(()=>ur(e,R),!0,R),null)),v=e,m=a._closedPromise,b=()=>(r?A():E(()=>function(R){const L=R._ownerWritableStream,U=L._state;return Nr(L)||U==="closed"?_e(void 0):U==="errored"?Z(L._storedError):jy(R)}(u)),null),v._state==="closed"?b():gc(m,b),Nr(t)||t._state==="closed"){const R=new TypeError("the destination writable stream closed before all data could be piped to it");o?A(!0,R):E(()=>ur(e,R),!0,R)}function w(){const R=s;return Pr(s,()=>R!==s?w():void 0)}function _(R,L,U){R._state==="errored"?U(R._storedError):bl(L,U)}function E(R,L,U){function N(){return Pt(R(),()=>I(L,U),D=>I(!0,D)),null}l||(l=!0,t._state!=="writable"||Nr(t)?N():gc(w(),N))}function A(R,L){l||(l=!0,t._state!=="writable"||Nr(t)?I(R,L):gc(w(),()=>I(R,L)))}function I(R,L){return qy(u),Xr(a),i!==void 0&&i.removeEventListener("abort",d),R?f(L):c(void 0),null}eo(He((R,L)=>{(function U(N){N?R():Pr(l?_e(!0):Pr(u._readyPromise,()=>He((D,k)=>{ss(a,{_chunkSteps:M=>{s=Pr(Wy(u,M),void 0,os),D(!1)},_closeSteps:()=>D(!0),_errorSteps:k})})),U,L)})(!1)}))})}class wn{constructor(){throw new TypeError("Illegal constructor")}get desiredSize(){if(!Us(this))throw $s("desiredSize");return jf(this)}close(){if(!Us(this))throw $s("close");if(!zi(this))throw new TypeError("The stream is not in a state that permits close");fi(this)}enqueue(t=void 0){if(!Us(this))throw $s("enqueue");if(!zi(this))throw new TypeError("The stream is not in a state that permits enqueue");return Ki(this,t)}error(t=void 0){if(!Us(this))throw $s("error");hr(this,t)}[Sf](t){Dn(this);const r=this._cancelAlgorithm(t);return Pa(this),r}[If](t){const r=this._controlledReadableStream;if(this._queue.length>0){const n=El(this);this._closeRequested&&this._queue.length===0?(Pa(this),Ss(r)):ls(this),t._chunkSteps(n)}else cy(r,t),ls(this)}[Tf](){}}function Us(e){return!!Je(e)&&!!Object.prototype.hasOwnProperty.call(e,"_controlledReadableStream")&&e instanceof wn}function ls(e){if(Qy(e)){if(e._pulling)return void(e._pullAgain=!0);e._pulling=!0,Pt(e._pullAlgorithm(),()=>(e._pulling=!1,e._pullAgain&&(e._pullAgain=!1,ls(e)),null),t=>(hr(e,t),null))}}function Qy(e){const t=e._controlledReadableStream;return!zi(e)||!e._started?!1:Sn(t)&&Ou(t)>0?!0:jf(e)>0}function Pa(e){e._pullAlgorithm=void 0,e._cancelAlgorithm=void 0,e._strategySizeAlgorithm=void 0}function fi(e){if(!zi(e))return;const t=e._controlledReadableStream;e._closeRequested=!0,e._queue.length===0&&(Pa(e),Ss(t))}function Ki(e,t){if(!zi(e))return;const r=e._controlledReadableStream;if(Sn(r)&&Ou(r)>0)xf(r,t,!1);else{let n;try{n=e._strategySizeAlgorithm(t)}catch(o){throw hr(e,o),o}try{Pf(e,t,n)}catch(o){throw hr(e,o),o}}ls(e)}function hr(e,t){const r=e._controlledReadableStream;r._state==="readable"&&(Dn(e),Pa(e),Zy(r,t))}function jf(e){const t=e._controlledReadableStream._state;return t==="errored"?null:t==="closed"?0:e._strategyHWM-e._queueTotalSize}function zi(e){const t=e._controlledReadableStream._state;return!e._closeRequested&&t==="readable"}function Xy(e,t,r,n,o,i,a){t._controlledReadableStream=e,t._queue=void 0,t._queueTotalSize=void 0,Dn(t),t._started=!1,t._closeRequested=!1,t._pullAgain=!1,t._pulling=!1,t._strategySizeAlgorithm=a,t._strategyHWM=i,t._pullAlgorithm=n,t._cancelAlgorithm=o,e._readableStreamController=t,Pt(_e(r()),()=>(t._started=!0,ls(t),null),u=>(hr(t,u),null))}function $s(e){return new TypeError(`ReadableStreamDefaultController.prototype.${e} can only be used on a ReadableStreamDefaultController`)}function YI(e,t){return Vn(e._readableStreamController)?function(r){let n,o,i,a,u,l=Fi(r),s=!1,c=!1,f=!1,d=!1,v=!1;const m=He(U=>{u=U});function b(U){bl(U._closedPromise,N=>(U!==l||(zt(i._readableStreamController,N),zt(a._readableStreamController,N),d&&v||u(void 0)),null))}function w(){Xn(l)&&(Xr(l),l=Fi(r),b(l)),ss(l,{_chunkSteps:U=>{ni(()=>{c=!1,f=!1;const N=U;let D=U;if(!d&&!v)try{D=Ch(U)}catch(k){return zt(i._readableStreamController,k),zt(a._readableStreamController,k),void u(ur(r,k))}d||na(i._readableStreamController,N),v||na(a._readableStreamController,D),s=!1,c?E():f&&A()})},_closeSteps:()=>{s=!1,d||No(i._readableStreamController),v||No(a._readableStreamController),i._readableStreamController._pendingPullIntos.length>0&&ia(i._readableStreamController,0),a._readableStreamController._pendingPullIntos.length>0&&ia(a._readableStreamController,0),d&&v||u(void 0)},_errorSteps:()=>{s=!1}})}function _(U,N){En(l)&&(Xr(l),l=Ny(r),b(l));const D=N?a:i,k=N?i:a;Dy(l,U,1,{_chunkSteps:M=>{ni(()=>{c=!1,f=!1;const Q=N?v:d;if(N?d:v)Q||oa(D._readableStreamController,M);else{let oe;try{oe=Ch(M)}catch(Y){return zt(D._readableStreamController,Y),zt(k._readableStreamController,Y),void u(ur(r,Y))}Q||oa(D._readableStreamController,M),na(k._readableStreamController,oe)}s=!1,c?E():f&&A()})},_closeSteps:M=>{s=!1;const Q=N?v:d,oe=N?d:v;Q||No(D._readableStreamController),oe||No(k._readableStreamController),M!==void 0&&(Q||oa(D._readableStreamController,M),!oe&&k._readableStreamController._pendingPullIntos.length>0&&ia(k._readableStreamController,0)),Q&&oe||u(void 0)},_errorSteps:()=>{s=!1}})}function E(){if(s)return c=!0,_e(void 0);s=!0;const U=Il(i._readableStreamController);return U===null?w():_(U._view,!1),_e(void 0)}function A(){if(s)return f=!0,_e(void 0);s=!0;const U=Il(a._readableStreamController);return U===null?w():_(U._view,!0),_e(void 0)}function I(U){if(d=!0,n=U,v){const N=xo([n,o]),D=ur(r,N);u(D)}return m}function R(U){if(v=!0,o=U,d){const N=xo([n,o]),D=ur(r,N);u(D)}return m}function L(){}return i=Uh(L,E,I),a=Uh(L,A,R),b(l),[i,a]}(e):function(r,n){const o=Fi(r);let i,a,u,l,s,c=!1,f=!1,d=!1,v=!1;const m=He(A=>{s=A});function b(){return c?(f=!0,_e(void 0)):(c=!0,ss(o,{_chunkSteps:A=>{ni(()=>{f=!1;const I=A,R=A;d||Ki(u._readableStreamController,I),v||Ki(l._readableStreamController,R),c=!1,f&&b()})},_closeSteps:()=>{c=!1,d||fi(u._readableStreamController),v||fi(l._readableStreamController),d&&v||s(void 0)},_errorSteps:()=>{c=!1}}),_e(void 0))}function w(A){if(d=!0,i=A,v){const I=xo([i,a]),R=ur(r,I);s(R)}return m}function _(A){if(v=!0,a=A,d){const I=xo([i,a]),R=ur(r,I);s(R)}return m}function E(){}return u=fs(E,b,w),l=fs(E,b,_),bl(o._closedPromise,A=>(hr(u._readableStreamController,A),hr(l._readableStreamController,A),d&&v||s(void 0),null)),[u,l]}(e)}function QI(e){return Je(t=e)&&t.getReader!==void 0?function(r){let n;function o(){let a;try{a=r.read()}catch(u){return Z(u)}return en(a,u=>{if(!Je(u))throw new TypeError("The promise returned by the reader.read() method must fulfill with an object");if(u.done)fi(n._readableStreamController);else{const l=u.value;Ki(n._readableStreamController,l)}})}function i(a){try{return _e(r.cancel(a))}catch(u){return Z(u)}}return n=fs(os,o,i,0),n}(e.getReader()):function(r){let n;const o=py(r,"async");function i(){let u;try{u=vy(o)}catch(l){return Z(l)}return en(_e(u),l=>{if(!Je(l))throw new TypeError("The promise returned by the iterator.next() method must fulfill with an object");if(l.done)fi(n._readableStreamController);else{const s=l.value;Ki(n._readableStreamController,s)}})}function a(u){const l=o.iterator;let s;try{s=Po(l,"return")}catch(c){return Z(c)}return s===void 0?_e(void 0):en(on(s,l,[u]),c=>{if(!Je(c))throw new TypeError("The promise returned by the iterator.return() method must fulfill with an object")})}return n=fs(os,i,a,0),n}(e);var t}function XI(e,t,r){return er(e,r),n=>on(e,t,[n])}function ZI(e,t,r){return er(e,r),n=>on(e,t,[n])}function eT(e,t,r){return er(e,r),n=>ai(e,t,[n])}function tT(e,t){if((e=`${e}`)!="bytes")throw new TypeError(`${t} '${e}' is not a valid enumeration value for ReadableStreamType`);return e}function Dh(e,t){Zr(e,t);const r=e==null?void 0:e.preventAbort,n=e==null?void 0:e.preventCancel,o=e==null?void 0:e.preventClose,i=e==null?void 0:e.signal;return i!==void 0&&function(a,u){if(!function(l){if(typeof l!="object"||l===null)return!1;try{return typeof l.aborted=="boolean"}catch{return!1}}(a))throw new TypeError(`${u} is not an AbortSignal.`)}(i,`${t} has member 'signal' that`),{preventAbort:!!r,preventCancel:!!n,preventClose:!!o,signal:i}}Object.defineProperties(wn.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},desiredSize:{enumerable:!0}}),ye(wn.prototype.close,"close"),ye(wn.prototype.enqueue,"enqueue"),ye(wn.prototype.error,"error"),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(wn.prototype,Symbol.toStringTag,{value:"ReadableStreamDefaultController",configurable:!0});let tt=class{constructor(t={},r={}){t===void 0?t=null:ay(t,"First parameter");const n=Ra(r,"Second parameter"),o=function(i,a){Zr(i,a);const u=i,l=u==null?void 0:u.autoAllocateChunkSize,s=u==null?void 0:u.cancel,c=u==null?void 0:u.pull,f=u==null?void 0:u.start,d=u==null?void 0:u.type;return{autoAllocateChunkSize:l===void 0?void 0:Rf(l,`${a} has member 'autoAllocateChunkSize' that`),cancel:s===void 0?void 0:XI(s,u,`${a} has member 'cancel' that`),pull:c===void 0?void 0:ZI(c,u,`${a} has member 'pull' that`),start:f===void 0?void 0:eT(f,u,`${a} has member 'start' that`),type:d===void 0?void 0:tT(d,`${a} has member 'type' that`)}}(t,"First parameter");if(kf(this),o.type==="bytes"){if(n.size!==void 0)throw new RangeError("The strategy for a byte stream cannot have a size function");(function(i,a,u){const l=Object.create(bn.prototype);let s,c,f;s=a.start!==void 0?()=>a.start(l):()=>{},c=a.pull!==void 0?()=>a.pull(l):()=>_e(void 0),f=a.cancel!==void 0?v=>a.cancel(v):()=>_e(void 0);const d=a.autoAllocateChunkSize;if(d===0)throw new TypeError("autoAllocateChunkSize must be greater than 0");Py(i,l,s,c,f,u,d)})(this,o,as(n,0))}else{const i=Aa(n);(function(a,u,l,s){const c=Object.create(wn.prototype);let f,d,v;f=u.start!==void 0?()=>u.start(c):()=>{},d=u.pull!==void 0?()=>u.pull(c):()=>_e(void 0),v=u.cancel!==void 0?m=>u.cancel(m):()=>_e(void 0),Xy(a,c,f,d,v,l,s)})(this,o,as(n,1),i)}}get locked(){if(!un(this))throw jn("locked");return Sn(this)}cancel(t=void 0){return un(this)?Sn(this)?Z(new TypeError("Cannot cancel a stream that already has a reader")):ur(this,t):Z(jn("cancel"))}getReader(t=void 0){if(!un(this))throw jn("getReader");return function(r,n){Zr(r,n);const o=r==null?void 0:r.mode;return{mode:o===void 0?void 0:qI(o,`${n} has member 'mode' that`)}}(t,"First parameter").mode===void 0?Fi(this):Ny(this)}pipeThrough(t,r={}){if(!un(this))throw jn("pipeThrough");ui(t,1,"pipeThrough");const n=function(i,a){Zr(i,a);const u=i==null?void 0:i.readable;Ih(u,"readable","ReadableWritablePair"),Cf(u,`${a} has member 'readable' that`);const l=i==null?void 0:i.writable;return Ih(l,"writable","ReadableWritablePair"),$y(l,`${a} has member 'writable' that`),{readable:u,writable:l}}(t,"First parameter"),o=Dh(r,"Second parameter");if(Sn(this))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked ReadableStream");if(Bi(n.writable))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked WritableStream");return eo(Lh(this,n.writable,o.preventClose,o.preventAbort,o.preventCancel,o.signal)),n.readable}pipeTo(t,r={}){if(!un(this))return Z(jn("pipeTo"));if(t===void 0)return Z("Parameter 1 is required in 'pipeTo'.");if(!Oi(t))return Z(new TypeError("ReadableStream.prototype.pipeTo's first argument must be a WritableStream"));let n;try{n=Dh(r,"Second parameter")}catch(o){return Z(o)}return Sn(this)?Z(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked ReadableStream")):Bi(t)?Z(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked WritableStream")):Lh(this,t,n.preventClose,n.preventAbort,n.preventCancel,n.signal)}tee(){if(!un(this))throw jn("tee");return xo(YI(this))}values(t=void 0){if(!un(this))throw jn("values");return function(r,n){const o=Fi(r),i=new gy(o,n),a=Object.create(my);return a._asyncIteratorImpl=i,a}(this,function(r,n){return Zr(r,n),{preventCancel:!!(r==null?void 0:r.preventCancel)}}(t,"First parameter").preventCancel)}[Es](t){return this.values(t)}static from(t){return QI(t)}};function fs(e,t,r,n=1,o=()=>1){const i=Object.create(tt.prototype);return kf(i),Xy(i,Object.create(wn.prototype),e,t,r,n,o),i}function Uh(e,t,r){const n=Object.create(tt.prototype);return kf(n),Py(n,Object.create(bn.prototype),e,t,r,0,void 0),n}function kf(e){e._state="readable",e._reader=void 0,e._storedError=void 0,e._disturbed=!1}function un(e){return!!Je(e)&&!!Object.prototype.hasOwnProperty.call(e,"_readableStreamController")&&e instanceof tt}function Sn(e){return e._reader!==void 0}function ur(e,t){if(e._disturbed=!0,e._state==="closed")return _e(void 0);if(e._state==="errored")return Z(e._storedError);Ss(e);const r=e._reader;if(r!==void 0&&Xn(r)){const n=r._readIntoRequests;r._readIntoRequests=new Zt,n.forEach(o=>{o._closeSteps(void 0)})}return en(e._readableStreamController[Sf](t),os)}function Ss(e){e._state="closed";const t=e._reader;if(t!==void 0&&(sy(t),En(t))){const r=t._readRequests;t._readRequests=new Zt,r.forEach(n=>{n._closeSteps()})}}function Zy(e,t){e._state="errored",e._storedError=t;const r=e._reader;r!==void 0&&(Af(r,t),En(r)?fy(r,t):Uy(r,t))}function jn(e){return new TypeError(`ReadableStream.prototype.${e} can only be used on a ReadableStream`)}Object.defineProperties(tt,{from:{enumerable:!0}}),Object.defineProperties(tt.prototype,{cancel:{enumerable:!0},getReader:{enumerable:!0},pipeThrough:{enumerable:!0},pipeTo:{enumerable:!0},tee:{enumerable:!0},values:{enumerable:!0},locked:{enumerable:!0}}),ye(tt.from,"from"),ye(tt.prototype.cancel,"cancel"),ye(tt.prototype.getReader,"getReader"),ye(tt.prototype.pipeThrough,"pipeThrough"),ye(tt.prototype.pipeTo,"pipeTo"),ye(tt.prototype.tee,"tee"),ye(tt.prototype.values,"values"),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(tt.prototype,Symbol.toStringTag,{value:"ReadableStream",configurable:!0}),Object.defineProperty(tt.prototype,Es,{value:tt.prototype.values,writable:!0,configurable:!0});const rT=e=>e.byteLength;ye(rT,"size");const nT=()=>1;ye(nT,"size");function iT(e,t,r){return er(e,r),n=>on(e,t,[n])}function oT(e,t,r){return er(e,r),n=>ai(e,t,[n])}function sT(e,t,r){return er(e,r),(n,o)=>on(e,t,[n,o])}function aT(e,t,r){return er(e,r),n=>on(e,t,[n])}let Na=class{constructor(t={},r={},n={}){t===void 0&&(t=null);const o=Ra(r,"Second parameter"),i=Ra(n,"Third parameter"),a=function(d,v){Zr(d,v);const m=d==null?void 0:d.cancel,b=d==null?void 0:d.flush,w=d==null?void 0:d.readableType,_=d==null?void 0:d.start,E=d==null?void 0:d.transform,A=d==null?void 0:d.writableType;return{cancel:m===void 0?void 0:aT(m,d,`${v} has member 'cancel' that`),flush:b===void 0?void 0:iT(b,d,`${v} has member 'flush' that`),readableType:w,start:_===void 0?void 0:oT(_,d,`${v} has member 'start' that`),transform:E===void 0?void 0:sT(E,d,`${v} has member 'transform' that`),writableType:A}}(t,"First parameter");if(a.readableType!==void 0)throw new RangeError("Invalid readableType specified");if(a.writableType!==void 0)throw new RangeError("Invalid writableType specified");const u=as(i,0),l=Aa(i),s=as(o,1),c=Aa(o);let f;(function(d,v,m,b,w,_){function E(){return v}function A(N){return function(D,k){const M=D._transformStreamController;return D._backpressure?en(D._backpressureChangePromise,()=>{const Q=D._writable;if(Q._state==="erroring")throw Q._storedError;return Fh(M,k)}):Fh(M,k)}(d,N)}function I(N){return function(D,k){const M=D._transformStreamController;if(M._finishPromise!==void 0)return M._finishPromise;const Q=D._readable;M._finishPromise=He((Y,Ae)=>{M._finishPromise_resolve=Y,M._finishPromise_reject=Ae});const oe=M._cancelAlgorithm(k);return aa(M),Pt(oe,()=>(Q._state==="errored"?yi(M,Q._storedError):(hr(Q._readableStreamController,k),Ic(M)),null),Y=>(hr(Q._readableStreamController,Y),yi(M,Y),null)),M._finishPromise}(d,N)}function R(){return function(N){const D=N._transformStreamController;if(D._finishPromise!==void 0)return D._finishPromise;const k=N._readable;D._finishPromise=He((Q,oe)=>{D._finishPromise_resolve=Q,D._finishPromise_reject=oe});const M=D._flushAlgorithm();return aa(D),Pt(M,()=>(k._state==="errored"?yi(D,k._storedError):(fi(k._readableStreamController),Ic(D)),null),Q=>(hr(k._readableStreamController,Q),yi(D,Q),null)),D._finishPromise}(d)}function L(){return function(N){return La(N,!1),N._backpressureChangePromise}(d)}function U(N){return function(D,k){const M=D._transformStreamController;if(M._finishPromise!==void 0)return M._finishPromise;const Q=D._writable;M._finishPromise=He((Y,Ae)=>{M._finishPromise_resolve=Y,M._finishPromise_reject=Ae});const oe=M._cancelAlgorithm(k);return aa(M),Pt(oe,()=>(Q._state==="errored"?yi(M,Q._storedError):(cs(Q._writableStreamController,k),Al(D),Ic(M)),null),Y=>(cs(Q._writableStreamController,Y),Al(D),yi(M,Y),null)),M._finishPromise}(d,N)}d._writable=function(N,D,k,M,Q=1,oe=()=>1){const Y=Object.create(zn.prototype);return My(Y),Gy(Y,Object.create(us.prototype),N,D,k,M,Q,oe),Y}(E,A,R,I,m,b),d._readable=fs(E,L,U,w,_),d._backpressure=void 0,d._backpressureChangePromise=void 0,d._backpressureChangePromise_resolve=void 0,La(d,!0),d._transformStreamController=void 0})(this,He(d=>{f=d}),s,c,u,l),function(d,v){const m=Object.create(Jn.prototype);let b,w,_;b=v.transform!==void 0?E=>v.transform(E,m):E=>{try{return t0(m,E),_e(void 0)}catch(A){return Z(A)}},w=v.flush!==void 0?()=>v.flush(m):()=>_e(void 0),_=v.cancel!==void 0?E=>v.cancel(E):()=>_e(void 0),function(E,A,I,R,L){A._controlledTransformStream=E,E._transformStreamController=A,A._transformAlgorithm=I,A._flushAlgorithm=R,A._cancelAlgorithm=L,A._finishPromise=void 0,A._finishPromise_resolve=void 0,A._finishPromise_reject=void 0}(d,m,b,w,_)}(this,a),a.start!==void 0?f(a.start(this._transformStreamController)):f(void 0)}get readable(){if(!$h(this))throw Mh("readable");return this._readable}get writable(){if(!$h(this))throw Mh("writable");return this._writable}};function $h(e){return!!Je(e)&&!!Object.prototype.hasOwnProperty.call(e,"_transformStreamController")&&e instanceof Na}function e0(e,t){hr(e._readable._readableStreamController,t),qf(e,t)}function qf(e,t){aa(e._transformStreamController),cs(e._writable._writableStreamController,t),Al(e)}function Al(e){e._backpressure&&La(e,!1)}function La(e,t){e._backpressureChangePromise!==void 0&&e._backpressureChangePromise_resolve(),e._backpressureChangePromise=He(r=>{e._backpressureChangePromise_resolve=r}),e._backpressure=t}Object.defineProperties(Na.prototype,{readable:{enumerable:!0},writable:{enumerable:!0}}),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(Na.prototype,Symbol.toStringTag,{value:"TransformStream",configurable:!0});class Jn{constructor(){throw new TypeError("Illegal constructor")}get desiredSize(){if(!Fs(this))throw Ms("desiredSize");return jf(this._controlledTransformStream._readable._readableStreamController)}enqueue(t=void 0){if(!Fs(this))throw Ms("enqueue");t0(this,t)}error(t=void 0){if(!Fs(this))throw Ms("error");var r;r=t,e0(this._controlledTransformStream,r)}terminate(){if(!Fs(this))throw Ms("terminate");(function(t){const r=t._controlledTransformStream;fi(r._readable._readableStreamController);const n=new TypeError("TransformStream terminated");qf(r,n)})(this)}}function Fs(e){return!!Je(e)&&!!Object.prototype.hasOwnProperty.call(e,"_controlledTransformStream")&&e instanceof Jn}function aa(e){e._transformAlgorithm=void 0,e._flushAlgorithm=void 0,e._cancelAlgorithm=void 0}function t0(e,t){const r=e._controlledTransformStream,n=r._readable._readableStreamController;if(!zi(n))throw new TypeError("Readable side is not in a state that permits enqueue");try{Ki(n,t)}catch(i){throw qf(r,i),r._readable._storedError}(function(i){return!Qy(i)})(n)!==r._backpressure&&La(r,!0)}function Fh(e,t){return en(e._transformAlgorithm(t),void 0,r=>{throw e0(e._controlledTransformStream,r),r})}function Ms(e){return new TypeError(`TransformStreamDefaultController.prototype.${e} can only be used on a TransformStreamDefaultController`)}function Ic(e){e._finishPromise_resolve!==void 0&&(e._finishPromise_resolve(),e._finishPromise_resolve=void 0,e._finishPromise_reject=void 0)}function yi(e,t){e._finishPromise_reject!==void 0&&(eo(e._finishPromise),e._finishPromise_reject(t),e._finishPromise_resolve=void 0,e._finishPromise_reject=void 0)}function Mh(e){return new TypeError(`TransformStream.prototype.${e} can only be used on a TransformStream`)}Object.defineProperties(Jn.prototype,{enqueue:{enumerable:!0},error:{enumerable:!0},terminate:{enumerable:!0},desiredSize:{enumerable:!0}}),ye(Jn.prototype.enqueue,"enqueue"),ye(Jn.prototype.error,"error"),ye(Jn.prototype.terminate,"terminate"),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(Jn.prototype,Symbol.toStringTag,{value:"TransformStreamDefaultController",configurable:!0});var uT=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)o.hasOwnProperty(i)&&(n[i]=o[i])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Da=function(){return Da=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Da.apply(this,arguments)},cT=function(e,t,r,n){function o(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function u(c){try{s(n.next(c))}catch(f){a(f)}}function l(c){try{s(n.throw(c))}catch(f){a(f)}}function s(c){c.done?i(c.value):o(c.value).then(u,l)}s((n=n.apply(e,t||[])).next())})},lT=function(e,t){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function u(s){return function(c){return l([s,c])}}function l(s){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(i=s[0]&2?o.return:s[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,s[1])).done)return i;switch(o=0,i&&(s=[s[0]&2,i.value]),s[0]){case 0:case 1:i=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,o=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(s[0]===6||s[0]===2)){r=0;continue}if(s[0]===3&&(!i||s[1]>i[0]&&s[1]<i[3])){r.label=s[1];break}if(s[0]===6&&r.label<i[1]){r.label=i[1],i=s;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(s);break}i[2]&&r.ops.pop(),r.trys.pop();continue}s=t.call(e,r)}catch(c){s=[6,c],o=0}finally{n=i=0}if(s[0]&5)throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}};function fT(){if(typeof wx>"u"||typeof Page>"u"||!wx.getSystemInfoSync||!wx.getStorageSync||!wx.setStorageSync||!wx.connectSocket||!wx.request)return!1;try{if(!wx.getSystemInfoSync()||wx.getSystemInfoSync().AppPlatform==="qq")return!1}catch{return!1}return!0}function dT(){return typeof App>"u"&&typeof getApp>"u"&&!wx.onAppHide&&!wx.offAppHide&&!wx.onAppShow&&!wx.offAppShow}var Bh="Error when aborting requestTask",hT=function(e){uT(t,e);function t(r){r===void 0&&(r={});var n=e.call(this)||this,o=r.timeout,i=r.timeoutMsg,a=r.restrictedMethods;return n._timeout=o||0,n._timeoutMsg=i||"",n._restrictedMethods=a||["get","post","upload","download"],n}return t.prototype.post=function(r){var n=this;return new Promise(function(o,i){var a=r.url,u=r.data,l=r.headers,s=wx.request({url:ea("https:",a),data:u,timeout:n._timeout,method:"POST",header:l,success:function(c){o(c)},fail:function(c){i(c)},complete:function(c){if(!(!c||!c.errMsg)&&!(!n._timeout||n._restrictedMethods.indexOf("post")===-1)){var f=c.errMsg;if(f==="request:fail timeout"){console.warn(n._timeoutMsg);try{s.abort()}catch{}}}}})})},t.prototype.upload=function(r){var n=this,o=this;return new Promise(function(i){return cT(n,void 0,void 0,function(){var a,u,l,s,c,f;return lT(this,function(d){return a=r.url,u=r.file,l=r.data,s=r.headers,c=r.onUploadProgress,f=wx.uploadFile({url:a,filePath:u,name:"file",formData:Da({},l),header:s,timeout:this._timeout,success:function(v){var m={statusCode:v.statusCode,data:v.data||{}};v.statusCode===200&&l.success_action_status&&(m.statusCode=parseInt(l.success_action_status,10)),i(m)},fail:function(v){i(v)},complete:function(v){if(!(!v||!v.errMsg)&&!(!o._timeout||o._restrictedMethods.indexOf("upload")===-1)){var m=v.errMsg;if(m==="request:fail timeout"){console.warn(o._timeoutMsg);try{f.abort()}catch{}}}}}),c&&f.onProgressUpdate(function(v){c(v)}),[2]})})})},t.prototype.download=function(r){var n=this,o=this;return new Promise(function(i,a){var u=r.url,l=r.headers,s=wx.downloadFile({url:ea("https:",u),header:l,timeout:n._timeout,success:function(c){c.statusCode===200&&c.tempFilePath?i({statusCode:200,tempFilePath:c.tempFilePath}):i(c)},fail:function(c){a(c)},complete:function(c){if(!(!c||!c.errMsg)&&!(!o._timeout||o._restrictedMethods.indexOf("download")===-1)){var f=c.errMsg;if(f==="request:fail timeout"){console.warn(o._timeoutMsg);try{s.abort()}catch{}}}}})})},t.prototype.fetch=function(r){var n=r.url,o=r.body,i=r.enableAbort,a=r.headers,u=r.method,l=r.stream,s=l===void 0?!1:l,c=r.signal,f=r.timeout,d=this,v=f??this._timeout,m=null,b=new tt({start:function(w){m=w},cancel:function(){m=null}});return new Promise(function(w,_){s&&w({data:b});var E=wx.request({url:ea("https:",n),data:o,timeout:v,method:u.toUpperCase(),header:a,success:function(I){var R;(R=m)===null||R===void 0||R.close(),!s&&w(I)},fail:function(I){var R;if((R=m)===null||R===void 0||R.close(),_(I),s)throw I},complete:function(I){if(!(!I||!I.errMsg)&&!(!v||d._restrictedMethods.indexOf("post")===-1||!i)){var R=I.errMsg;if(R==="request:fail timeout"){console.warn(d._timeoutMsg);try{E.abort()}catch(L){console.warn(Bh,L)}}}},enableChunked:s});if(E.onChunkReceived(function(I){var R;(R=m)===null||R===void 0||R.enqueue(new Uint8Array(I.data))}),c){var A=function(){try{E.abort()}catch(I){console.warn(Bh,I)}};c.aborted?A():c.addEventListener("abort",function(){return A()})}})},t}(wf),pT={setItem:function(e,t){wx.setStorageSync(e,t)},getItem:function(e){return wx.getStorageSync(e)},removeItem:function(e){wx.removeStorageSync(e)},clear:function(){wx.clearStorageSync()}},vT=function(){function e(t,r){r===void 0&&(r={});var n=wx.connectSocket(Da({url:t},r)),o={set onopen(i){n.onOpen(i)},set onmessage(i){n.onMessage(i)},set onclose(i){n.onClose(i)},set onerror(i){n.onError(i)},send:function(i){return n.send({data:i})},close:function(i,a){return n.close({code:i,reason:a})},get readyState(){return n.readyState},CONNECTING:0,OPEN:1,CLOSING:2,CLOSED:3};return o}return e}();function gT(){var e={root:{},reqClass:hT,wsClass:vT,localStorage:pT,primaryStorage:Ta.local,getAppSign:function(){var t=wx.getAccountInfoSync();return dT()?t&&t.plugin?t.plugin.appId:"":t&&t.miniProgram?t.miniProgram.appId:""}};return e}var zr={genAdapter:gT,isMatch:fT,runtime:"wx_mp"},Ua=function(e,t,r){if(r||arguments.length===2)for(var n=0,o=t.length,i;n<o;n++)(i||!(n in t))&&(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return e.concat(i||Array.prototype.slice.call(t))},$a=xt,jh={};function mT(e,t){var r=t.name,n=t.namespace,o=t.entity,i=t.injectEvents,a=t.IIFE,u=a===void 0?!1:a;if(jh[r]||n&&e[n])throw new Error(JSON.stringify({code:$a.INVALID_OPERATION,msg:"Duplicate component ".concat(r)}));if(u){if(!o||typeof o!="function")throw new Error(JSON.stringify({code:$a.INVALID_PARAMS,msg:"IIFE component's entity must be a function"}));o.call(e)}if(jh[r]=t,n?e.prototype[n]=o:r0(e.prototype,o),i){var l=i.bus,s=i.events;if(!l||!s||s.length===0)return;var c=e.prototype.fire||function(){};e.prototype.events||(e.prototype.events={});var f=e.prototype.events||{};f[r]?e.prototype.events[r].events=Ua(Ua([],e.prototype.events[r].events,!0),s,!0):e.prototype.events[r]={bus:l,events:s},e.prototype.fire=function(d,v){c(d,v);for(var m=Object.keys(this.events),b=0,w=m;b<w.length;b++){var _=w[b],E=this.events[_],A=E.bus,I=E.events;if(I.includes(d)){A.fire(d,v);break}}}}}function r0(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:{var r=t;return new Date(r.getTime())}case Object:e===void 0&&(e={});break;case Array:e=[];break;default:return t}for(var n=Object.keys(t),o=0,i=n;o<i.length;o++){var a=i[o];Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=r0(e[a],t[a]))}return e}function yT(e,t){var r=t.entity,n=t.target;if(Object.prototype.hasOwnProperty.call(e,n))throw new Error(JSON.stringify({code:$a.INVALID_OPERATION,msg:"target:".concat(n," is not exist")}));var o=e.prototype[n];if(typeof o!="function")throw new Error(JSON.stringify({code:$a.INVALID_OPERATION,msg:"target:".concat(n," is not a function which is the only type supports hook")}));e.prototype[n]=function(){for(var i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];return r.call.apply(r,Ua([this],i,!1)),o.call.apply(o,Ua([this],i,!1))}}var Gr={},Ai=function(){return Ai=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Ai.apply(this,arguments)},_T="user_info",kh=xI,Rl={},Cl={};function qh(e){var t=e.env,r=e.platformInfo,n="".concat(_T,"_").concat(t),o={userInfoKey:n};Rl[t]=Rl[t]||new kh(Ai(Ai({},e),{keys:o,platformInfo:r})),Cl[t]=Cl[t]||new kh(Ai(Ai({},e),{keys:o,platformInfo:r,persistence:"local"}))}function bT(e){return Rl[e]}function n0(e){return Cl[e]}var Fa=function(){return Fa=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Fa.apply(this,arguments)},wT=hI,ET=pI,i0="",o0="@cloudbase/js-sdk";function ST(e){i0=e}function Wf(){return i0}function IT(e){o0=e,wT(e)}function TT(){return o0}var OT="2020-01-10",s0=[],AT=["env","endPointKey","region"],Wh="https:";function a0(e){return s0.find(function(t){return AT.filter(function(r){return e[r]!=null}).every(function(r){return t[r]===e[r]})})}function Ma(e){var t,r,n=a0(e);n?(e.baseUrl!=null&&(n.baseUrl=e.baseUrl),e.protocol!=null&&(n.protocol=e.protocol)):s0.push(Fa(Fa({},e),{protocol:(t=e.protocol)!==null&&t!==void 0?t:Wh})),e.endPointKey==="CLOUD_API"&&ET((r=e.protocol)!==null&&r!==void 0?r:Wh)}function Hf(e,t,r){return a0({env:e,endPointKey:t,region:r})}function RT(e,t){Ma({endPointKey:"GATEWAY",env:e,baseUrl:"//".concat(e,".api.tcloudbasegateway.com/v1"),protocol:t})}function CT(e,t,r){var n=t?"//".concat(e,".").concat(t,".tcb-api.tencentcloudapi.com/web"):"//".concat(e,".ap-shanghai.tcb-api.tencentcloudapi.com/web");Ma({env:e,region:t,baseUrl:n,protocol:r,endPointKey:"CLOUD_API"})}function Hh(e){var t=Hf(e,"CLOUD_API"),r=t.protocol,n=t.baseUrl,o="".concat(r).concat(n);return o.match(/(http(s)?:)?\/\/([^/?#]*)/)[0]}var Gh;(function(e){e.NULL="NULL",e.ANONYMOUS="ANONYMOUS",e.WECHAT="WECHAT",e.WECHAT_PUBLIC="WECHAT-PUBLIC",e.WECHAT_OPEN="WECHAT-OPEN",e.CUSTOM="CUSTOM",e.EMAIL="EMAIL",e.USERNAME="USERNAME",e.PHONE="PHONE"})(Gh||(Gh={}));var we=function(){return we=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},we.apply(this,arguments)},kr=function(e,t,r,n){function o(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function u(c){try{s(n.next(c))}catch(f){a(f)}}function l(c){try{s(n.throw(c))}catch(f){a(f)}}function s(c){c.done?i(c.value):o(c.value).then(u,l)}s((n=n.apply(e,t||[])).next())})},qr=function(e,t){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function u(s){return function(c){return l([s,c])}}function l(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(r=0)),r;)try{if(n=1,o&&(i=s[0]&2?o.return:s[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,s[1])).done)return i;switch(o=0,i&&(s=[s[0]&2,i.value]),s[0]){case 0:case 1:i=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,o=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(s[0]===6||s[0]===2)){r=0;continue}if(s[0]===3&&(!i||s[1]>i[0]&&s[1]<i[3])){r.label=s[1];break}if(s[0]===6&&r.label<i[1]){r.label=i[1],i=s;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(s);break}i[2]&&r.ops.pop(),r.trys.pop();continue}s=t.call(e,r)}catch(c){s=[6,c],o=0}finally{n=i=0}if(s[0]&5)throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}},xT=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]]);return r},PT=xt,NT=_I,LT=Ym,Vh=Qm,DT=["auth.getJwt","auth.logout","auth.signInWithTicket","auth.signInAnonymously","auth.signIn","auth.fetchAccessTokenWithRefreshToken","auth.signUpWithEmailAndPassword","auth.activateEndUserMail","auth.sendPasswordResetEmail","auth.resetPasswordWithToken","auth.isUsernameRegistered"];function Tc(e,t,r){var n=e[t];e[t]=function(o){var i={},a={};r.forEach(function(l){var s=l.call(e,o),c=s.data,f=s.headers;Object.assign(i,c),Object.assign(a,f)});var u=o.data;return u&&function(){if(LT(u)){Object.keys(i).forEach(function(l){u.append(l,i[l])});return}o.data=we(we({},u),i)}(),o.headers=we(we({},o.headers||{}),a),n.call(e,o)}}function Oc(){var e=NT();return{data:{seqId:e},headers:{"X-SDK-Version":"@cloudbase/js-sdk/".concat(Wf()),"x-seqid":e}}}var UT=function(){function e(t){var r=this;this.throwWhenRequestFail=!1,this.config=t;var n={timeout:this.config.timeout,timeoutMsg:"[@cloudbase/js-sdk] ".concat(this.config.timeout/1e3,"s"),restrictedMethods:["post","put"]};this.reqClass=new Gr.adapter.reqClass(n),this.throwWhenRequestFail=t.throw||!1,this.localCache=n0(this.config.env),Tc(this.reqClass,"post",[Oc]),Tc(this.reqClass,"upload",[Oc]),Tc(this.reqClass,"download",[Oc]),Su.on(Iu,function(o){var i;r.config.i18n=((i=o.data)===null||i===void 0?void 0:i.i18n)||r.config.i18n})}return e.prototype.getDefaultHeaders=function(){var t,r,n;return t={},t[(r=this.config.i18n)===null||r===void 0?void 0:r.LANG_HEADER_KEY]=(n=this.config.i18n)===null||n===void 0?void 0:n.lang,t},e.prototype.post=function(t){return kr(this,void 0,void 0,function(){var r;return qr(this,function(n){switch(n.label){case 0:return[4,this.reqClass.post(we(we({},t),{headers:we(we({},t.headers),this.getDefaultHeaders())}))];case 1:return r=n.sent(),[2,r]}})})},e.prototype.upload=function(t){return kr(this,void 0,void 0,function(){var r;return qr(this,function(n){switch(n.label){case 0:return[4,this.reqClass.upload(we(we({},t),{headers:we(we({},t.headers),this.getDefaultHeaders())}))];case 1:return r=n.sent(),[2,r]}})})},e.prototype.download=function(t){return kr(this,void 0,void 0,function(){var r;return qr(this,function(n){switch(n.label){case 0:return[4,this.reqClass.download(we(we({},t),{headers:we(we({},t.headers),this.getDefaultHeaders())}))];case 1:return r=n.sent(),[2,r]}})})},e.prototype.getBaseEndPoint=function(){return Hh(this.config.env)},e.prototype.getOauthAccessTokenV2=function(t){return kr(this,void 0,void 0,function(){var r,n;return qr(this,function(o){switch(o.label){case 0:return[4,t.getAccessToken()];case 1:return r=o.sent(),[4,t.getCredentials()];case 2:return n=o.sent(),[2,{accessToken:r,accessTokenExpire:new Date(n.expires_at).getTime()}]}})})},e.prototype.request=function(t,r,n){var o,i;return kr(this,void 0,void 0,function(){var a,u,l,s,c,f,d,v,m,b,w,_,E,A,I,R,L,U,N,D;return qr(this,function(k){switch(k.label){case 0:if(a="x-tcb-trace_".concat(this.config.env),u="application/x-www-form-urlencoded",l=we({action:t,dataVersion:OT,env:this.config.env},r),DT.indexOf(t)!==-1)return[3,2];if(s=this.config._fromApp,!s.oauthInstance)throw new Error("you can't request without auth");return c=s.oauthInstance,f=c.oauth2client,d=l,[4,this.getOauthAccessTokenV2(f)];case 1:d.access_token=k.sent().accessToken,k.label=2;case 2:return t==="storage.uploadFile"?(v=new FormData,Object.keys(v).forEach(function(M){Object.prototype.hasOwnProperty.call(v,M)&&v[M]!==void 0&&v.append(M,l[M])}),u="multipart/form-data"):(u="application/json;charset=UTF-8",v={},Object.keys(l).forEach(function(M){l[M]!==void 0&&(v[M]=l[M])})),m={headers:we({"content-type":u},this.getDefaultHeaders())},n!=null&&n.onUploadProgress&&(m.onUploadProgress=n.onUploadProgress),this.config.region&&(m.headers["X-TCB-Region"]=this.config.region),b=this.localCache.getStore(a),b&&(m.headers["X-TCB-Trace"]=b),w=(n==null?void 0:n.parse)!==void 0?n.parse:r.parse,_=(n==null?void 0:n.inQuery)!==void 0?n.inQuery:r.inQuery,E=(n==null?void 0:n.search)!==void 0?n.search:r.search,A=we(we({},(n==null?void 0:n.defaultQuery)||{}),{env:this.config.env}),w&&(A.parse=!0),_&&(A=we(we({},_),A)),I=Hf(this.config.env,"CLOUD_API"),R=I.baseUrl,L=I.protocol,n.pathname?U=Vh(L,"".concat((o=Hh(this.config.env))===null||o===void 0?void 0:o.replace(/^https?:/,""),"/").concat(n.pathname),A):U=Vh(L,R,A),E&&(U+=E),[4,this.post(we({url:U,data:v},m))];case 3:if(N=k.sent(),D=(i=N.header)===null||i===void 0?void 0:i["x-tcb-trace"],D&&this.localCache.setStore(a,D),Number(N.status)!==200&&Number(N.statusCode)!==200||!N.data)throw new Error("network request error");return[2,N]}})})},e.prototype.fetch=function(t){var r,n,o,i,a,u,l,s;return kr(this,void 0,void 0,function(){var c,f,d,v,m,b,w,_,E=this;return qr(this,function(A){switch(A.label){case 0:c=t.token,f=t.headers,d=f===void 0?{}:f,v=xT(t,["token","headers"]),m=function(){return kr(E,void 0,void 0,function(){var I,R,L;return qr(this,function(U){switch(U.label){case 0:if(c!=null)return[2,c];if(I=this.config._fromApp,!I.oauthInstance)throw new Error("you can't request without auth");return R=I.oauthInstance,L=R.oauth2client,[4,this.getOauthAccessTokenV2(L)];case 1:return[2,U.sent().accessToken]}})})},b=function(){return kr(E,void 0,void 0,function(){var I,R,L,U,N;return qr(this,function(D){switch(D.label){case 0:return R=(I=this.reqClass).fetch,U={},N={"X-SDK-Version":"@cloudbase/js-sdk/".concat(Wf())},L="Bearer ".concat,[4,m()];case 1:return[2,R.apply(I,[we.apply(void 0,[(U.headers=we.apply(void 0,[we.apply(void 0,[(N.Authorization=L.apply("Bearer ",[D.sent()]),N),this.getDefaultHeaders()]),d]),U),v])])]}})})},A.label=1;case 1:return A.trys.push([1,3,,6]),[4,b()];case 2:return w=A.sent(),[2,w];case 3:if(_=A.sent(),(_==null?void 0:_.code)!=="ACCESS_TOKEN_EXPIRED")return[3,5];if(typeof((i=(o=(n=(r=this.config)===null||r===void 0?void 0:r._fromApp)===null||n===void 0?void 0:n.oauthInstance)===null||o===void 0?void 0:o.authApi)===null||i===void 0?void 0:i.refreshTokenForce)!="function")throw _;return[4,(s=(l=(u=(a=this.config)===null||a===void 0?void 0:a._fromApp)===null||u===void 0?void 0:u.oauthInstance)===null||l===void 0?void 0:l.authApi)===null||s===void 0?void 0:s.refreshTokenForce()];case 4:return A.sent(),[2,b()];case 5:throw _;case 6:return[2]}})})},e.prototype.send=function(t,r,n){return r===void 0&&(r={}),n===void 0&&(n={}),kr(this,void 0,void 0,function(){var o;return qr(this,function(i){switch(i.label){case 0:return[4,this.request(t,r,we(we({},n),{onUploadProgress:r.onUploadProgress}))];case 1:if(o=i.sent(),o.data.code&&this.throwWhenRequestFail)throw new Error(JSON.stringify({code:PT.OPERATION_FAIL,msg:"[".concat(o.data.code,"] ").concat(o.data.message)}));return[2,o.data]}})})},e}(),u0={};function $T(e){u0[e.env]=new UT(we(we({},e),{throw:!0}))}function FT(e){return u0[e]}var Ac,Ba;(function(e){e.ZH="zh-CN",e.EN="en-US"})(Ba||(Ba={}));var MT="Accept-Language",BT=(Ac={},Ac[Ba.EN]={" AI+ ":"Please check the calling method or visit the AI+ homepage to view the documentation","AI+ ":"AI+ request error, error code",:"error message",:"not implemented"," wasm ":"wasm loading is not supported in mini programs"," js ":"dynamic js loading is not supported in mini programs",:"request timeout"," privatelink sdk ":"missing privatelink sdk address"},Ac),Kh=function(e,t){var r;return((r=BT[t])===null||r===void 0?void 0:r[e])||e},jT=function(e){return"lang_".concat(e.clientId||e.env)},kT=function(e,t){var r,n,o=jT(t),i=(e.adapter||{}).localStorage,a=t.lang||((r=i==null?void 0:i.getItem)===null||r===void 0?void 0:r.call(i,o))||Ba.ZH;return(n=i==null?void 0:i.setItem)===null||n===void 0||n.call(i,o,a),new Proxy({t:function(u){return Kh(u,a)},LANG_HEADER_KEY:MT,lang:a},{get:function(u,l){var s;return l==="lang"&&((s=i==null?void 0:i.getItem)===null||s===void 0?void 0:s.call(i,o))||u[l]},set:function(u,l,s){var c;return l==="lang"&&s!==u[l]&&(u[l]=s,u.t=function(f){return Kh(f,s)},(c=i==null?void 0:i.setItem)===null||c===void 0||c.call(i,o,s),Su.fire(Iu,{i18n:u})),u[l]=s,!0}})},de=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Gf(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function qT(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var o=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,o.get?o:{enumerable:!0,get:function(){return e[n]}})}),r}var ve={},yt={};Object.defineProperty(yt,"__esModule",{value:!0});yt.COMMUNITY_SITE_URL=yt.IS_DEBUG_MODE=yt.getProtocol=yt.setProtocol=yt.getSdkName=yt.setSdkName=void 0;var c0="@cloudbase/js-sdk";function WT(e){c0=e}yt.setSdkName=WT;function HT(){return c0}yt.getSdkName=HT;var l0="https:";function GT(e){l0=e}yt.setProtocol=GT;function VT(){return l0}yt.getProtocol=VT;yt.IS_DEBUG_MODE=!1;yt.COMMUNITY_SITE_URL="https://support.qq.com/products/148793";var xu={};Object.defineProperty(xu,"__esModule",{value:!0});xu.ERRORS=void 0;xu.ERRORS={INVALID_PARAMS:"INVALID_PARAMS",INVALID_SYNTAX:"INVALID_SYNTAX",INVALID_OPERATION:"INVALID_OPERATION",OPERATION_FAIL:"OPERATION_FAIL",NETWORK_ERROR:"NETWORK_ERROR",UNKOWN_ERROR:"UNKOWN_ERROR"};(function(e){var t=de&&de.__createBinding||(Object.create?function(n,o,i,a){a===void 0&&(a=i);var u=Object.getOwnPropertyDescriptor(o,i);(!u||("get"in u?!o.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return o[i]}}),Object.defineProperty(n,a,u)}:function(n,o,i,a){a===void 0&&(a=i),n[a]=o[i]}),r=de&&de.__exportStar||function(n,o){for(var i in n)i!=="default"&&!Object.prototype.hasOwnProperty.call(o,i)&&t(o,n,i)};Object.defineProperty(e,"__esModule",{value:!0}),e.OATUH_LOGINTYPE=void 0,r(yt,e),r(xu,e),e.OATUH_LOGINTYPE="constants"})(ve);var ds=function(){return ds=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},ds.apply(this,arguments)},f0=function(e,t,r,n){function o(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function u(c){try{s(n.next(c))}catch(f){a(f)}}function l(c){try{s(n.throw(c))}catch(f){a(f)}}function s(c){c.done?i(c.value):o(c.value).then(u,l)}s((n=n.apply(e,t||[])).next())})},d0=function(e,t){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function u(s){return function(c){return l([s,c])}}function l(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(r=0)),r;)try{if(n=1,o&&(i=s[0]&2?o.return:s[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,s[1])).done)return i;switch(o=0,i&&(s=[s[0]&2,i.value]),s[0]){case 0:case 1:i=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,o=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(s[0]===6||s[0]===2)){r=0;continue}if(s[0]===3&&(!i||s[1]>i[0]&&s[1]<i[3])){r.label=s[1];break}if(s[0]===6&&r.label<i[1]){r.label=i[1],i=s;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(s);break}i[2]&&r.ops.pop(),r.trys.pop();continue}s=t.call(e,r)}catch(c){s=[6,c],o=0}finally{n=i=0}if(s[0]&5)throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}};function KT(e,t){var r,n,o;return f0(this,void 0,void 0,function(){var i,a,u,l,s,c,f,d,v,m,b,w,_,E,A,I;return d0(this,function(R){switch(R.label){case 0:if(i=e||{},a=i.name,u=i.body,l=i.path,s=l===void 0?"":l,c=i.method,f=c===void 0?"POST":c,d=i.headers,v=d===void 0?{}:d,m=i.token,!a)throw new Error(JSON.stringify({code:ve.ERRORS.INVALID_PARAMS,msg:"[apis] invalid api name"}));return b=this.getEndPointWithKey("GATEWAY"),w=b.BASE_URL,_=b.PROTOCOL,E="".concat(_).concat(w,"/apis/").concat(a),A=s.startsWith("/")?s:"/".concat(s),[4,this.request.fetch(ds({url:"".concat(E).concat(A),method:f||"POST",headers:ds({"Content-Type":"application/json; charset=utf-8"},v),body:u,token:((r=m==null?void 0:m.trim)===null||r===void 0?void 0:r.call(m))||((o=(n=v.Authorization)===null||n===void 0?void 0:n.replace)===null||o===void 0?void 0:o.call(n,/^Bearer /,""))||""},t))];case 1:return I=R.sent(),[4,I.data];case 2:return[2,R.sent()]}})})}var zT=["GET","POST","PUT","DELETE","HEAD","OPTIONS","PATCH","REQUEST"];function JT(e){var t=this;return new Proxy({},{get:function(r,n){if(typeof n!="string")throw new Error("[apis] method must be string");var o=n.toLocaleUpperCase();if(!zT.includes(o))throw new Error("[apis] invalid method: ".concat(n));return function(i,a){return f0(t,void 0,void 0,function(){return d0(this,function(u){switch(u.label){case 0:return[4,KT.call(this,ds({name:e,method:(o==="REQUEST"?i.method:o)||"POST"},i),a)];case 1:return[2,u.sent()]}})})}}})}function YT(){var e=this;return new Proxy({},{get:function(t,r){if(typeof r=="string")return JT.call(e,r)}})}var Go=function(){return Go=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Go.apply(this,arguments)},zh=function(e,t,r,n){var o=arguments.length,i=o<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(e,t,r,n);else for(var u=e.length-1;u>=0;u--)(a=e[u])&&(i=(o<3?a(i):o>3?a(t,r,i):a(t,r))||i);return o>3&&i&&Object.defineProperty(t,r,i),i},_i=function(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)},QT=function(e,t,r,n){function o(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function u(c){try{s(n.next(c))}catch(f){a(f)}}function l(c){try{s(n.throw(c))}catch(f){a(f)}}function s(c){c.done?i(c.value):o(c.value).then(u,l)}s((n=n.apply(e,t||[])).next())})},XT=function(e,t){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function u(s){return function(c){return l([s,c])}}function l(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(r=0)),r;)try{if(n=1,o&&(i=s[0]&2?o.return:s[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,s[1])).done)return i;switch(o=0,i&&(s=[s[0]&2,i.value]),s[0]){case 0:case 1:i=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,o=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(s[0]===6||s[0]===2)){r=0;continue}if(s[0]===3&&(!i||s[1]>i[0]&&s[1]<i[3])){r.label=s[1];break}if(s[0]===6&&r.label<i[1]){r.label=i[1],i=s;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(s);break}i[2]&&r.ops.pop(),r.trys.pop();continue}s=t.call(e,r)}catch(c){s=[6,c],o=0}finally{n=i=0}if(s[0]&5)throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}},ZT=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]]);return r},eO=OI,tO=AI,Bs=xt,Jh=Eu,Yh=$i,Qh=Tu,rO={timeout:15e3,persistence:"local"},Xh=1e3*60*10,Zh=100,ep={},nO=function(){function e(t){this.cloudbaseConfig=t||this.cloudbaseConfig,this.authInstance=null,this.oauthInstance=null,this.version=Wf()}return Object.defineProperty(e.prototype,"config",{get:function(){return this.cloudbaseConfig},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"platform",{get:function(){return Gr},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"cache",{get:function(){return bT(this.cloudbaseConfig.env)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"localCache",{get:function(){return n0(this.cloudbaseConfig.env)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"request",{get:function(){return FT(this.cloudbaseConfig.env)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"apis",{get:function(){return YT.call(this)},enumerable:!1,configurable:!0}),e.prototype.init=function(t){var r;if(!t.env)throw new Error(JSON.stringify({code:Bs.INVALID_PARAMS,msg:"env must not be specified"}));Gr.adapter||this.useDefaultAdapter();var n={timeout:t.timeout||5e3,timeoutMsg:"[".concat(TT(),"][REQUEST TIMEOUT] request had been abort since didn't finished within").concat(t.timeout/1e3,"s")};this.requestClient=new Gr.adapter.reqClass(n),this.cloudbaseConfig=Go(Go(Go({},rO),t),{i18n:kT(Gr,t)}),delete this.cloudbaseConfig.lang,this.cloudbaseConfig.timeout=this.formatTimeout(this.cloudbaseConfig.timeout);var o=this.cloudbaseConfig,i=o.env,a=o.persistence,u=o.debug,l=o.timeout,s=o.oauthClient,c=o.i18n;qh({env:i,persistence:a,debug:u,platformInfo:this.platform}),CT(i,t.region||""),RT(i);var f=new e(this.cloudbaseConfig);return $T({env:i,region:t.region||"",timeout:l,oauthClient:s,_fromApp:f,i18n:c}),f.requestClient=this.requestClient,(r=this===null||this===void 0?void 0:this.fire)===null||r===void 0||r.call(this,"cloudbase_init",f),f},e.prototype.updateConfig=function(t){var r=t.persistence,n=t.debug;this.cloudbaseConfig.persistence=r,this.cloudbaseConfig.debug=n,qh({env:this.cloudbaseConfig.env,persistence:r,debug:n,platformInfo:this.platform})},e.prototype.updateLang=function(t){var r;!t||t===((r=this.cloudbaseConfig.i18n)===null||r===void 0?void 0:r.lang)||(this.cloudbaseConfig.i18n.lang=t)},e.prototype.registerExtension=function(t){ep[t.name]=t},e.prototype.invokeExtension=function(t,r){return QT(this,void 0,void 0,function(){var n;return XT(this,function(o){switch(o.label){case 0:if(n=ep[t],!n)throw new Error(JSON.stringify({code:Bs.INVALID_PARAMS,msg:"extension:".concat(t," must be registered before invoke")}));return[4,n.invoke(r,this)];case 1:return[2,o.sent()]}})})},e.prototype.useAdapters=function(t,r){var n=eO(t,r)||{},o=n.adapter,i=n.runtime;o&&(Gr.adapter=o),i&&(Gr.runtime=i)},e.prototype.registerHook=function(t){yT(e,t)},e.prototype.registerComponent=function(t){mT(e,t)},e.prototype.registerVersion=function(t){ST(t),this.version=t},e.prototype.registerSdkName=function(t){IT(t)},e.prototype.registerEndPoint=function(t,r){Ma({baseUrl:t,protocol:r,env:this.config.env,endPointKey:"CLOUD_API"})},e.prototype.registerEndPointWithKey=function(t){Ma({env:this.config.env,endPointKey:t.key,baseUrl:t.url,protocol:t.protocol})},e.prototype.getEndPointWithKey=function(t){var r=Hf(this.config.env,t);return{BASE_URL:r.baseUrl,PROTOCOL:r.protocol}},e.prototype.parseCaptcha=function(t){var r={},n=t.match(/^(data:.*?)(\?[^#\s]*)?$/);if(n){t=n[1];var o=n[2];o&&(r=EI(o))}var i=r.token,a=ZT(r,["token"]);return/^data:/.test(t)&&!i?{error:"invalid_argument",error_description:"invalid captcha data: ".concat(t)}:i?{state:a.state,token:i,captchaData:t}:{error:"unimplemented",error_description:"need to impl captcha data"}},e.prototype.useDefaultAdapter=function(){var t=tO(),r=t.adapter,n=t.runtime;Gr.adapter=r,Gr.runtime=n},e.prototype.formatTimeout=function(t){switch(!0){case t>Xh:return Yh(Bs.INVALID_PARAMS,"timeout is greater than maximum value[10min]"),Xh;case t<Zh:return Yh(Bs.INVALID_PARAMS,"timeout is less than maximum value[100ms]"),Zh;default:return t}},zh([Qh({mode:"sync",title:"Cloudbase ",messages:["","  1 -  cloudbase.init() ","  2 - https://docs.cloudbase.net/api-reference/webv3/adapter#%E7%AC%AC-2-%E6%AD%A5%E9%85%8D%E7%BD%AE%E5%AE%89%E5%85%A8%E5%BA%94%E7%94%A8%E6%9D%A5%E6%BA%90","".concat(Jh)]}),_i("design:type",Function),_i("design:paramtypes",[Object]),_i("design:returntype",e)],e.prototype,"init",null),zh([Qh({title:"",messages:["","  1 -  invokeExtension() ","  2 -  registerExtension() ","".concat(Jh)]}),_i("design:type",Function),_i("design:paramtypes",[String,Object]),_i("design:returntype",Promise)],e.prototype,"invokeExtension",null),e}(),$t=new nO;$t.useAdapters(zr);const Pu="/auth";var ue;(function(e){e.AUTH_SIGN_UP_URL="/v1/signup",e.AUTH_TOKEN_URL="/v1/token",e.AUTH_REVOKE_URL="/v1/revoke",e.WEDA_USER_URL="/v1/plugin/weda/userinfo",e.AUTH_RESET_PASSWORD="/v1/reset",e.AUTH_GET_DEVICE_CODE="/v1/device/code",e.CHECK_USERNAME="/v1/checkUsername",e.CHECK_IF_USER_EXIST="/v1/checkIfUserExist",e.GET_PROVIDER_TYPE="/v1/mgr/provider/providerSubType",e.AUTH_SIGN_IN_URL="/v1/signin",e.AUTH_SIGN_IN_ANONYMOUSLY_URL="/v1/signin/anonymously",e.AUTH_SIGN_IN_WITH_PROVIDER_URL="/v1/signin/with/provider",e.AUTH_SIGN_IN_WITH_WECHAT_URL="/v1/signin/wechat/noauth",e.AUTH_SIGN_IN_CUSTOM="/v1/signin/custom",e.PROVIDER_TOKEN_URL="/v1/provider/token",e.PROVIDER_URI_URL="/v1/provider/uri",e.USER_ME_URL="/v1/user/me",e.AUTH_SIGNOUT_URL="/v1/user/signout",e.USER_QUERY_URL="/v1/user/query",e.USER_PRIFILE_URL="/v1/user/profile",e.USER_BASIC_EDIT_URL="/v1/user/basic/edit",e.USER_TRANS_BY_PROVIDER_URL="/v1/user/trans/by/provider",e.PROVIDER_LIST="/v1/user/provider",e.PROVIDER_BIND_URL="/v1/user/provider/bind",e.PROVIDER_UNBIND_URL="/v1/user/provider",e.CHECK_PWD_URL="/v1/user/sudo",e.SUDO_URL="/v1/user/sudo",e.BIND_CONTACT_URL="/v1/user/contact",e.AUTH_SET_PASSWORD="/v1/user/password",e.AUTHORIZE_DEVICE_URL="/v1/user/device/authorize",e.AUTHORIZE_URL="/v1/user/authorize",e.AUTHORIZE_INFO_URL="/v1/user/authorize/info",e.AUTHORIZED_DEVICES_DELETE_URL="/v1/user/authorized/devices/",e.AUTH_REVOKE_ALL_URL="/v1/user/revoke/all",e.GET_USER_BEHAVIOR_LOG="/v1/user/security/history",e.VERIFICATION_URL="/v1/verification",e.VERIFY_URL="/v1/verification/verify",e.CAPTCHA_DATA_URL="/v1/captcha/data",e.VERIFY_CAPTCHA_DATA_URL="/v1/captcha/data/verify",e.GET_CAPTCHA_URL="/v1/captcha/init",e.GET_MINIPROGRAM_QRCODE="/v1/qrcode/generate",e.GET_MINIPROGRAM_QRCODE_STATUS="/v1/qrcode/get/status"})(ue||(ue={}));var ji;(function(e){e.AUTH_SIGN_IN_URL="/v2/signin/username",e.AUTH_TOKEN_URL="/v2/token",e.USER_ME_URL="/v2/user/me",e.VERIFY_URL="/v2/signin/verificationcode",e.AUTH_SIGN_IN_WITH_PROVIDER_URL="/v2/signin/with/provider",e.AUTH_PUBLIC_KEY="/v2/signin/publichkey",e.AUTH_RESET_PASSWORD="/v2/signin/password/update"})(ji||(ji={}));var tp;(function(e){e.REGISTER="REGISTER",e.SIGN_IN="SIGN_IN",e.PASSWORD_RESET="PASSWORD_RESET",e.EMAIL_ADDRESS_CHANGE="EMAIL_ADDRESS_CHANGE",e.PHONE_NUMBER_CHANGE="PHONE_NUMBER_CHANGE"})(tp||(tp={}));var gt;(function(e){e.UNREACHABLE="unreachable",e.LOCAL="local",e.CANCELLED="cancelled",e.UNKNOWN="unknown",e.UNAUTHENTICATED="unauthenticated",e.RESOURCE_EXHAUSTED="resource_exhausted",e.FAILED_PRECONDITION="failed_precondition",e.INVALID_ARGUMENT="invalid_argument",e.DEADLINE_EXCEEDED="deadline_exceeded",e.NOT_FOUND="not_found",e.ALREADY_EXISTS="already_exists",e.PERMISSION_DENIED="permission_denied",e.ABORTED="aborted",e.OUT_OF_RANGE="out_of_range",e.UNIMPLEMENTED="unimplemented",e.INTERNAL="internal",e.UNAVAILABLE="unavailable",e.DATA_LOSS="data_loss",e.INVALID_PASSWORD="invalid_password",e.PASSWORD_NOT_SET="password_not_set",e.INVALID_STATUS="invalid_status",e.USER_PENDING="user_pending",e.USER_BLOCKED="user_blocked",e.INVALID_VERIFICATION_CODE="invalid_verification_code",e.TWO_FACTOR_REQUIRED="two_factor_required",e.INVALID_TWO_FACTOR="invalid_two_factor",e.INVALID_TWO_FACTOR_RECOVERY="invalid_two_factor_recovery",e.UNDER_REVIEW="under_review",e.INVALID_REQUEST="invalid_request",e.UNAUTHORIZED_CLIENT="unauthorized_client",e.ACCESS_DENIED="access_denied",e.UNSUPPORTED_RESPONSE_TYPE="unsupported_response_type",e.INVALID_SCOPE="invalid_scope",e.INVALID_GRANT="invalid_grant",e.SERVER_ERROR="server_error",e.TEMPORARILY_UNAVAILABLE="temporarily_unavailable",e.INTERACTION_REQUIRED="interaction_required",e.LOGIN_REQUIRED="login_required",e.ACCOUNT_SELECTION_REQUIRED="account_selection_required",e.CONSENT_REQUIRED="consent_required",e.INVALID_REQUEST_URI="invalid_request_uri",e.INVALID_REQUEST_OBJECT="invalid_request_object",e.REQUEST_NOT_SUPPORTED="request_not_supported",e.REQUEST_URI_NOT_SUPPORTED="request_uri_not_supported",e.REGISTRATION_NOT_SUPPORTED="registration_not_supported",e.CAPTCHA_REQUIRED="captcha_required",e.CAPTCHA_INVALID="captcha_invalid"})(gt||(gt={}));var rp;(function(e){e.CLIENT_ID="client_id",e.CLIENT_SECRET="client_secret",e.RESPONSE_TYPE="response_type",e.SCOPE="scope",e.STATE="state",e.REDIRECT_URI="redirect_uri",e.ERROR="error",e.ERROR_DESCRIPTION="error_description",e.ERROR_URI="error_uri",e.GRANT_TYPE="grant_type",e.CODE="code",e.ACCESS_TOKEN="access_token",e.TOKEN_TYPE="token_type",e.EXPIRES_IN="expires_in",e.USERNAME="username",e.PASSWORD="password",e.REFRESH_TOKEN="refresh_token"})(rp||(rp={}));function h0(){return"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,e=>{const t=Math.random()*16|0;return(e==="x"?t:t&3|8).toString(16)})}const xl=e=>{const t=n=>{for(const o in e)e.hasOwnProperty(o)&&(n[o]=xl(e[o]));return n},r=e==null?"NullOrUndefined":Object.prototype.toString.call(e).slice(8,-1);if(["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"].includes(r))return e.slice();switch(r){case"Object":return t(Object.create(Object.getPrototypeOf(e)));case"Array":return t([]);case"Date":return new Date(e.valueOf());case"RegExp":return new RegExp(e.source,(e.global?"g":"")+(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.sticky?"y":"")+(e.unicode?"u":""));default:return e}},np=e=>{const t=/^(?:http(s)?:\/\/[^\/]+)?(\/[^\?#]*)/,r=e.match(t);return r&&r[2]||""};let vo=new Map;class p0{constructor(t){this.clientId=(t==null?void 0:t.clientId)||"",vo=vo||new Map}async run(t,r){t=`${this.clientId}_${t}`;let n=vo.get(t);return n||(n=new Promise((o,i)=>{(async()=>{try{await this.runIdlePromise();const a=r();o(await a)}catch(a){i(a)}finally{vo.delete(t)}})()}),vo.set(t,n)),n}runIdlePromise(){return Promise.resolve()}}const js="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function iO(e){e=String(e);let t,r,n,o,i="",a=0;const u=e.length%3;for(;a<e.length;){if((r=e.charCodeAt(a++))>255||(n=e.charCodeAt(a++))>255||(o=e.charCodeAt(a++))>255)throw new TypeError("Failed to execute 'btoa' on 'Window': The string to be encoded contains characters outside of the Latin1 range.");t=r<<16|n<<8|o,i+=js.charAt(t>>18&63)+js.charAt(t>>12&63)+js.charAt(t>>6&63)+js.charAt(t&63)}return u?i.slice(0,u-3)+"===".substring(u):i}function oO(){if(typeof wx>"u"||typeof Page>"u"||!wx.getSystemInfoSync||!wx.getStorageSync||!wx.setStorageSync||!wx.connectSocket||!wx.request)return!1;try{if(!wx.getSystemInfoSync()||wx.getSystemInfoSync().AppPlatform==="qq")return!1}catch{return!1}return!0}const ip="x-request-id",op="x-device-id",sp="device_id",sO=async function(e,t){let r=null,n=null;try{const o=Object.assign({},t);o.method||(o.method="GET"),o.body&&typeof o.body!="string"&&(o.body=JSON.stringify(o.body));const a=await(await fetch(e,o)).json();a!=null&&a.error?(n=a,n.error_uri=new URL(e).pathname):r=a}catch(o){n={error:gt.UNREACHABLE,error_description:o.message,error_uri:new URL(e).pathname}}if(n)throw n;return r};function aO(){return h0()}class uO{constructor(t){this._env=(t==null?void 0:t.env)||""}async getItem(t){return window.localStorage.getItem(`${t}${this._env}`)}async removeItem(t){window.localStorage.removeItem(`${t}${this._env}`)}async setItem(t,r){window.localStorage.setItem(`${t}${this._env}`,r)}getItemSync(t){return window.localStorage.getItem(`${t}${this._env}`)}removeItemSync(t){window.localStorage.removeItem(`${t}${this._env}`)}setItemSync(t,r){window.localStorage.setItem(`${t}${this._env}`,r)}}const Vf=new uO;function v0(e){let t=!0;return e!=null&&e.expires_at&&(e!=null&&e.access_token)&&(t=e.expires_at<new Date),t}class cO{constructor(t){this.credentials=null,this.singlePromise=null,this.tokenSectionName=t.tokenSectionName,this.storage=t.storage,this.clientId=t.clientId,this.singlePromise=new p0({clientId:this.clientId}),this.credentials=t.credentials||null,this.credentials&&this.setCredentials(this.credentials)}getStorageCredentialsSync(){let t=null;const r=this.storage.getItemSync(this.tokenSectionName);if(r!=null)try{t=JSON.parse(r),t!=null&&t.expires_at&&(t.expires_at=new Date(t.expires_at))}catch{this.storage.removeItem(this.tokenSectionName),t=null}return t}async setCredentials(t){if(t!=null&&t.expires_in){if(t!=null&&t.expires_at||(t.expires_at=new Date(Date.now()+(t.expires_in-30)*1e3)),this.storage){const r=JSON.stringify(t);await this.storage.setItem(this.tokenSectionName,r)}this.credentials=t}else this.storage&&await this.storage.removeItem(this.tokenSectionName),this.credentials=null}async getCredentials(){return this.singlePromise.run("getCredentials",async()=>(v0(this.credentials)&&(this.credentials=await this.getStorageCredentials()),this.credentials))}async getStorageCredentials(){return this.singlePromise.run("_getStorageCredentials",async()=>{let t=null;const r=await this.storage.getItem(this.tokenSectionName);if(r!=null)try{t=JSON.parse(r),t!=null&&t.expires_at&&(t.expires_at=new Date(t.expires_at))}catch{await this.storage.removeItem(this.tokenSectionName),t=null}return t})}}class lr{constructor(t){this.singlePromise=null,t.clientSecret||(t.clientSecret=""),!t.clientId&&t.env&&(t.clientId=t.env),this.apiOrigin=t.apiOrigin,this.apiPath=t.apiPath||Pu,this.clientId=t.clientId,this.i18n=t.i18n,this.accessKey=t.accessKey,this.singlePromise=new p0({clientId:this.clientId}),this.retry=this.formatRetry(t.retry,lr.defaultRetry),t.baseRequest?this.baseRequest=t.baseRequest:this.baseRequest=sO,this.tokenInURL=t.tokenInURL,this.headers=t.headers,this.storage=t.storage||Vf,this.localCredentials=new cO({tokenSectionName:`credentials_${t.clientId}`,storage:this.storage,clientId:t.clientId,credentials:this.accessKey?{access_token:this.accessKey,token_type:"Bearer",scope:"accessKey",expires_at:new Date(+new Date+ +new Date),expires_in:+new Date+ +new Date}:null}),this.clientSecret=t.clientSecret,t.clientId&&(this.basicAuth=`Basic ${iO(`${t.clientId}:${this.clientSecret}`)}`),this.wxCloud=t.wxCloud;try{oO()&&this.wxCloud===void 0&&t.env&&(wx.cloud.init({env:t.env}),this.wxCloud=wx.cloud)}catch{}this.refreshTokenFunc=t.refreshTokenFunc||this.defaultRefreshTokenFunc,this.anonymousSignInFunc=t.anonymousSignInFunc,this.onCredentialsError=t.onCredentialsError,Su.on(Iu,r=>{var n;this.i18n=((n=r.data)==null?void 0:n.i18n)||this.i18n})}setCredentials(t){return this.localCredentials.setCredentials(t)}async getAccessToken(){const t=await this.getCredentials();if(t!=null&&t.access_token)return Promise.resolve(t.access_token);const r={error:gt.UNAUTHENTICATED};return Promise.reject(r)}async request(t,r){var a,u;r||(r={});const n=this.formatRetry(r.retry,this.retry);if(r.headers={...r.headers,[(a=this.i18n)==null?void 0:a.LANG_HEADER_KEY]:(u=this.i18n)==null?void 0:u.lang},this.headers&&(r.headers={...this.headers,...r.headers}),r.headers[ip]||(r.headers[ip]=aO()),!r.headers[op]){const l=await this.getDeviceId();r.headers[op]=l}if(r!=null&&r.withBasicAuth&&this.basicAuth&&(r.headers.Authorization=this.basicAuth),r!=null&&r.withCredentials){const l=await this.getCredentials();l&&(this.tokenInURL?(t.indexOf("?")<0&&(t+="?"),t+=`access_token=${l.access_token}`):r.headers.Authorization=`${l.token_type} ${l.access_token}`)}else this.clientId&&t.indexOf("client_id")<0&&(t+=t.indexOf("?")<0?"?":"&",t+=`client_id=${this.clientId}`);t.startsWith("/")&&(t=`${this.apiOrigin}${this.apiPath}${t}`);let o=null;const i=n+1;for(let l=0;l<i;l++){try{r.useWxCloud?o=await this.wxCloudCallFunction(t,r):o=await this.baseRequest(t,r);break}catch(s){if(r.withCredentials&&s&&s.error===gt.UNAUTHENTICATED)return await this.setCredentials(null),Promise.reject(s);if(l===n||!s||s.error!=="unreachable")return Promise.reject(s)}await this.sleep(lr.retryInterval)}return o}async wxCloudCallFunction(t,r){var i;let n=null,o=null;try{let a="";try{a=await wx.getRendererUserAgent()}catch{}const{result:u}=await this.wxCloud.callFunction({name:"httpOverCallFunction",data:{url:t,method:r.method,headers:{origin:"https://servicewechat.com","User-Agent":a,...r.headers},body:r.body}});(i=u==null?void 0:u.body)!=null&&i.error_code?(o=u==null?void 0:u.body,o.error_uri=np(t)):n=u==null?void 0:u.body}catch(a){o={error:gt.UNREACHABLE,error_description:a.message,error_uri:np(t)}}if(o)throw o;return n}async getCredentials(){var r,n,o;let t=await this.localCredentials.getCredentials();if(!t){const i="credentials not found";return(r=this.onCredentialsError)==null||r.call(this,{msg:i}),this.unAuthenticatedError(i)}if(v0(t))if(t.refresh_token)try{t=await this.refreshToken(t)}catch(i){if(t.scope==="anonymous")t=await this.anonymousLogin(t);else return(n=this.onCredentialsError)==null||n.call(this,{msg:i.error_description}),Promise.reject(i)}else if(t.scope==="anonymous")t=await this.anonymousLogin(t);else{const i="no refresh token found in credentials";return(o=this.onCredentialsError)==null||o.call(this,{msg:i}),this.unAuthenticatedError(i)}return t}getCredentialsSync(){return this.localCredentials.getStorageCredentialsSync()}getCredentialsAsync(){return this.getCredentials()}async getScope(){var r;const t=await this.localCredentials.getCredentials();if(!t){const n="credentials not found";return(r=this.onCredentialsError)==null||r.call(this,{msg:n}),this.unAuthenticatedError(n)}return t.scope}async getGroups(){var r;const t=await this.localCredentials.getCredentials();if(!t){const n="credentials not found";return(r=this.onCredentialsError)==null||r.call(this,{msg:n}),this.unAuthenticatedError(n)}return t.groups}async refreshToken(t){return this.singlePromise.run("_refreshToken",async()=>{var r,n,o;if(!t||!t.refresh_token){const i="no refresh token found in credentials";return(r=this.onCredentialsError)==null||r.call(this,{msg:i}),this.unAuthenticatedError(i)}try{const i=await this.refreshTokenFunc(t.refresh_token,t);return await this.localCredentials.setCredentials(i),i}catch(i){if(i.error===gt.INVALID_GRANT){await this.localCredentials.setCredentials(null);const a=i.error_description;return(n=this.onCredentialsError)==null||n.call(this,{msg:a}),this.unAuthenticatedError(a)}return(o=this.onCredentialsError)==null||o.call(this,{msg:i.error_description}),Promise.reject(i)}})}async anonymousLogin(t){return this.singlePromise.run("_anonymousLogin",async()=>(this.anonymousSignInFunc?t=await this.anonymousSignInFunc(t)||await this.localCredentials.getCredentials():t=await this.anonymousSignIn(t),t))}checkRetry(t){let r=null;if((typeof t!="number"||t<lr.minRetry||t>lr.maxRetry)&&(r={error:gt.UNREACHABLE,error_description:"wrong options param: retry"}),r)throw r;return t}formatRetry(t,r){return typeof t>"u"?r:this.checkRetry(t)}async sleep(t){return new Promise(r=>{setTimeout(()=>{r()},t)})}async anonymousSignIn(t){return this.singlePromise.run("_anonymous",async()=>{if(!t||t.scope!=="anonymous")return this.unAuthenticatedError("no anonymous in credentials");try{const r=await this.request(ue.AUTH_SIGN_IN_ANONYMOUSLY_URL,{method:"POST",withBasicAuth:!0,body:{}});return await this.localCredentials.setCredentials(r),r}catch(r){return r.error===gt.INVALID_GRANT?(await this.localCredentials.setCredentials(null),this.unAuthenticatedError(r.error_description)):Promise.reject(r)}})}async defaultRefreshTokenFunc(t,r){var i;if(t===void 0||t===""){const a="refresh token not found";return(i=this.onCredentialsError)==null||i.call(this,{msg:a}),this.unAuthenticatedError(a)}let n=ue.AUTH_TOKEN_URL;return(r==null?void 0:r.version)==="v2"&&(n=ji.AUTH_TOKEN_URL),{...await this.request(n,{method:"POST",body:{client_id:this.clientId,client_secret:this.clientSecret,grant_type:"refresh_token",refresh_token:t}}),version:(r==null?void 0:r.version)||"v1"}}async getDeviceId(){if(this.deviceID)return this.deviceID;let t=await this.storage.getItem(sp);return typeof t=="string"&&t.length>=16&&t.length<=48||(t=h0(),await this.storage.setItem(sp,t)),this.deviceID=t,t}unAuthenticatedError(t){const r={error:gt.UNAUTHENTICATED,error_description:t};return Promise.reject(r)}}lr.defaultRetry=2;lr.minRetry=0;lr.maxRetry=5;lr.retryInterval=1e3;function g0(){if(typeof globalThis>"u")return!1;const{wx:e}=globalThis;if(typeof e>"u"||globalThis.Page===void 0||!e.getSystemInfoSync||!e.getStorageSync||!e.setStorageSync||!e.connectSocket||!e.request)return!1;try{if(!e.getSystemInfoSync()||e.getSystemInfoSync().AppPlatform==="qq")return!1}catch{return!1}return!0}let hs=!1;function ap(){hs=hs||typeof window!==void 0&&window.__wxjs_environment==="miniprogram"}try{g0()||(hs=hs||!!navigator.userAgent.match(/miniprogram/i)||window.__wxjs_environment==="miniprogram",window&&window.WeixinJSBridge&&window.WeixinJSBridge.invoke?ap():typeof document<"u"&&document.addEventListener("WeixinJSBridgeReady",ap,!1))}catch{}function up(){return hs}class Do{constructor(t){if(this.params={},typeof t=="string")this.parse(t);else if(t&&typeof t=="object")for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&this.append(r,t[r])}parse(t){t.split("&").forEach(n=>{const[o,i]=n.split("=").map(decodeURIComponent);this.append(o,i)})}append(t,r){this.params[t]?this.params[t]=this.params[t].concat([r]):this.params[t]=[r]}get(t){return this.params[t]?this.params[t][0]:null}getAll(t){return this.params[t]||[]}delete(t){delete this.params[t]}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}set(t,r){this.params[t]=[r]}toString(){const t=[];for(const r in this.params)Object.prototype.hasOwnProperty.call(this.params,r)&&this.params[r].forEach(n=>{t.push(`${encodeURIComponent(r)}=${encodeURIComponent(n)}`)});return t.join("&")}}class lO{constructor(t){t.openURIWithCallback||(t.openURIWithCallback=this.getDefaultOpenURIWithCallback()),t.storage||(t.storage=Vf),this.config=t,this.tokenSectionName=`captcha_${t.clientId}`}isMatch(){var t,r,n;return((n=(r=(t=this.config)==null?void 0:t.adapter)==null?void 0:r.isMatch)==null?void 0:n.call(r))||g0()}async request(t,r){r||(r={}),r.method||(r.method="GET");const n=`${r.method}:${t}`;let o=t;r.withCaptcha&&(o=await this.appendCaptchaTokenToURL(t,n,!1));let i;try{i=await this.config.request(o,r)}catch(a){return a.error===gt.CAPTCHA_REQUIRED||a.error===gt.CAPTCHA_INVALID?(t=await this.appendCaptchaTokenToURL(t,n,a.error===gt.CAPTCHA_INVALID),this.config.request(t,r)):Promise.reject(a)}return i}getDefaultOpenURIWithCallback(){if(!this.isMatch()&&!up()&&(window.location.search.indexOf("__captcha")>0&&(document.body.style.display="none"),document.getElementById("captcha_panel_wrap")===null)){const t=document.createElement("div");t.style.cssText="background-color: rgba(0, 0, 0, 0.7);position: fixed;left: 0px;right: 0px;top: 0px;bottom: 0px;padding: 9vw 0 0 0;display: none;z-index:100;",t.setAttribute("id","captcha_panel_wrap"),setTimeout(()=>{document.body.appendChild(t)},0)}return this.defaultOpenURIWithCallback}async defaultOpenURIWithCallback(t,r){const{width:n="355px",height:o="355px"}=r||{};if(t.match(/^(data:.*)$/))return Promise.reject({error:gt.UNIMPLEMENTED,error_description:"need to impl captcha data"});const a=document.getElementById("captcha_panel_wrap"),u=document.createElement("iframe");return a.innerHTML="",u.setAttribute("src",t),u.setAttribute("id","review-panel-iframe"),u.style.cssText=`min-width:${n};display:block;height:${o};margin:0 auto;background-color: rgb(255, 255, 255);border: none;`,a.appendChild(u),a.style.display="block",new Promise((l,s)=>{u.onload=function(){try{const c=window.location,f=u.contentWindow.location;if(f.host+f.pathname===c.host+c.pathname){a.style.display="none";const d=new Do(f.search),v=d.get("captcha_token");return v?l({captcha_token:v,expires_in:Number(d.get("expires_in"))}):s({error:d.get("error"),error_description:d.get("error_description")})}a.style.display="block"}catch{a.style.display="block"}}})}async getCaptchaToken(t,r){if(!t){const i=await this.findCaptchaToken();if(i)return i}let n;if(!this.isMatch()&&!up()){const i=`${window.location.origin+window.location.pathname}?__captcha=on`;if(n=await this.config.request(ue.GET_CAPTCHA_URL,{method:"POST",body:{client_id:this.config.clientId,redirect_uri:i,state:r},withCredentials:!1}),n.captcha_token){const a={captcha_token:n.captcha_token,expires_in:n.expires_in};return this.saveCaptchaToken(a),n.captcha_token}}else{const i=await this.config.request(ue.CAPTCHA_DATA_URL,{method:"POST",body:{state:r,redirect_uri:""},withCredentials:!1});n={url:`${i.data}?state=${encodeURIComponent(r)}&token=${encodeURIComponent(i.token)}`}}const o=await this.config.openURIWithCallback(n.url);return this.saveCaptchaToken(o),o.captcha_token}async appendCaptchaTokenToURL(t,r,n){const o=await this.getCaptchaToken(n,r);return t.indexOf("?")>0?t+=`&captcha_token=${o}`:t+=`?captcha_token=${o}`,t}async saveCaptchaToken(t){t.expires_at=new Date(Date.now()+(t.expires_in-10)*1e3);const r=JSON.stringify(t);await this.config.storage.setItem(this.tokenSectionName,r)}async findCaptchaToken(){const t=await this.config.storage.getItem(this.tokenSectionName);if(t!=null)try{const r=JSON.parse(t);return r!=null&&r.expires_at&&(r.expires_at=new Date(r.expires_at)),r.expires_at<new Date?null:r.captcha_token}catch{return await this.config.storage.removeItem(this.tokenSectionName),null}return null}}var fO={};function Rc(e,t){var n;const r=()=>{try{return require("../utils/encrypt")}catch{return}};try{if((((n=t==null?void 0:t.root)==null?void 0:n.globalThis)||globalThis).IS_MP_BUILD)return;if(!fO.IS_MP_BUILD&&e)return r()}catch{if(e)return r()}}let dO=class ua{static parseParamsToSearch(t){return Object.keys(t).forEach(n=>{t[n]||delete t[n]}),new Do(t).toString()}constructor(t){let{request:r}=t,n=t.credentialsClient;if(!n){const o={apiOrigin:t.apiOrigin,apiPath:t.apiPath,clientId:t.clientId,storage:t.storage,env:t.env,baseRequest:t.baseRequest,anonymousSignInFunc:t.anonymousSignInFunc,wxCloud:t.wxCloud,onCredentialsError:t.onCredentialsError,headers:t.headers||{},i18n:t.i18n,accessKey:t.accessKey};n=new lr(o)}if(!r){const o=n.request.bind(n),i=new lO({clientId:t.clientId,request:o,storage:t.storage,adapter:t.adapter,...t.captchaOptions});r=i.request.bind(i)}this.config={env:t.env,apiOrigin:t.apiOrigin,apiPath:t.apiPath,clientId:t.clientId,request:r,credentialsClient:n,storage:t.storage||Vf,adapter:t.adapter}}getParamsByVersion(t,r){var i;const n=xl(t),o=((i={v2:ji}[n==null?void 0:n.version])==null?void 0:i[r])||ue[r];return n&&delete n.version,{params:n,url:o}}async signIn(t){const r=t.version||"v1",n=this.getParamsByVersion(t,"AUTH_SIGN_IN_URL");n.params.query&&delete n.params.query;const o=await this.getEncryptParams(n.params),i=await this.config.request(n.url,{method:"POST",body:o});return await this.config.credentialsClient.setCredentials({...i,version:r}),Promise.resolve(i)}async signInAnonymously(t={},r=!1){const n=await this.config.request(ue.AUTH_SIGN_IN_ANONYMOUSLY_URL,{method:"POST",body:t,useWxCloud:r});return await this.config.credentialsClient.setCredentials(n),Promise.resolve(n)}async signUp(t){const r=await this.config.request(ue.AUTH_SIGN_UP_URL,{method:"POST",body:t});return await this.config.credentialsClient.setCredentials(r),Promise.resolve(r)}async signOut(t){let r={};if(t){try{r=await this.config.request(ue.AUTH_SIGNOUT_URL,{method:"POST",withCredentials:!0,body:t})}catch(i){i.error!==gt.UNAUTHENTICATED&&console.log("sign_out_error",i)}return await this.config.credentialsClient.setCredentials(),r}const n=await this.config.credentialsClient.getAccessToken(),o=await this.config.request(ue.AUTH_REVOKE_URL,{method:"POST",body:{token:n}});return await this.config.credentialsClient.setCredentials(),Promise.resolve(o)}async revokeAllDevices(){await this.config.request(ue.AUTH_REVOKE_ALL_URL,{method:"DELETE",withCredentials:!0})}async revokeDevice(t){await this.config.request(ue.AUTHORIZED_DEVICES_DELETE_URL+t.device_id,{method:"DELETE",withCredentials:!0})}async getVerification(t,r){let n=!1;return(t.target==="CUR_USER"||await this.hasLoginState())&&(n=!0),this.config.request(ue.VERIFICATION_URL,{method:"POST",body:t,withCaptcha:(r==null?void 0:r.withCaptcha)||!1,withCredentials:n})}async verify(t){const r=this.getParamsByVersion(t,"VERIFY_URL"),n=await this.config.request(r.url,{method:"POST",body:r.params});return(t==null?void 0:t.version)==="v2"&&await this.config.credentialsClient.setCredentials({...n,version:"v2"}),n}async genProviderRedirectUri(t){const{provider_redirect_uri:r,other_params:n={},...o}=t;r&&!o.redirect_uri&&(o.redirect_uri=r);let i=`${ue.PROVIDER_URI_URL}?${ua.parseParamsToSearch(o)}`;return Object.keys(n).forEach(a=>{const u=n[a];a==="sign_out_uri"&&!((u==null?void 0:u.length)>0)||(i+=`&other_params[${a}]=${encodeURIComponent(u)}`)}),this.config.request(i,{method:"GET"})}async grantProviderToken(t,r=!1){return this.config.request(ue.PROVIDER_TOKEN_URL,{method:"POST",body:t,useWxCloud:r})}async patchProviderToken(t){return this.config.request(ue.PROVIDER_TOKEN_URL,{method:"PATCH",body:t})}async signInWithProvider(t,r=!1){const n=this.getParamsByVersion(t,"AUTH_SIGN_IN_WITH_PROVIDER_URL"),o=await this.config.request(n.url,{method:"POST",body:n.params,useWxCloud:r});return await this.config.credentialsClient.setCredentials({...o,version:(t==null?void 0:t.version)||"v1"}),Promise.resolve(o)}async signInCustom(t){const r=await this.config.request(ue.AUTH_SIGN_IN_CUSTOM,{method:"POST",body:t});return await this.config.credentialsClient.setCredentials(r),Promise.resolve(r)}async signInWithWechat(t={}){const r=await this.config.request(ue.AUTH_SIGN_IN_WITH_WECHAT_URL,{method:"POST",body:t});return await this.config.credentialsClient.setCredentials(r),Promise.resolve(r)}async bindWithProvider(t){return this.config.request(ue.PROVIDER_BIND_URL,{method:"POST",body:t,withCredentials:!0})}async getUserProfile(t){return this.getUserInfo(t)}async getUserInfo(t={}){var o;const r=this.getParamsByVersion(t,"USER_ME_URL");if((o=r.params)!=null&&o.query){const i=new Do(r.params.query);r.url+=`?${i.toString()}`}const n=await this.config.request(r.url,{method:"GET",withCredentials:!0});return n.sub&&(n.uid=n.sub),n}async getWedaUserInfo(){return await this.config.request(ue.WEDA_USER_URL,{method:"GET",withCredentials:!0})}async deleteMe(t){const r=this.getParamsByVersion(t,"USER_ME_URL"),n=`${r.url}?${ua.parseParamsToSearch(r.params)}`;return this.config.request(n,{method:"DELETE",withCredentials:!0})}async hasLoginState(){try{return await this.config.credentialsClient.getAccessToken(),!0}catch{return!1}}hasLoginStateSync(){return this.config.credentialsClient.getCredentialsSync()}async getLoginState(){return this.config.credentialsClient.getCredentialsAsync()}async transByProvider(t){return this.config.request(ue.USER_TRANS_BY_PROVIDER_URL,{method:"PATCH",body:t,withCredentials:!0})}async grantToken(t){const r=this.getParamsByVersion(t,"AUTH_TOKEN_URL");return this.config.request(r.url,{method:"POST",body:r.params})}async getProviders(){return this.config.request(ue.PROVIDER_LIST,{method:"GET",withCredentials:!0})}async unbindProvider(t){return this.config.request(`${ue.PROVIDER_UNBIND_URL}/${t.provider_id}`,{method:"DELETE",withCredentials:!0})}async checkPassword(t){return this.config.request(`${ue.CHECK_PWD_URL}`,{method:"POST",withCredentials:!0,body:t})}async editContact(t){return this.config.request(`${ue.BIND_CONTACT_URL}`,{method:"PATCH",withCredentials:!0,body:t})}async setPassword(t){return this.config.request(`${ue.AUTH_SET_PASSWORD}`,{method:"PATCH",withCredentials:!0,body:t})}async updatePasswordByOld(t){const r=await this.sudo({password:t.old_password});return this.setPassword({sudo_token:r.sudo_token,new_password:t.new_password})}async sudo(t){return this.config.request(`${ue.SUDO_URL}`,{method:"POST",withCredentials:!0,body:t})}async sendVerificationCodeToCurrentUser(t){return t.target="CUR_USER",this.config.request(ue.VERIFICATION_URL,{method:"POST",body:t,withCredentials:!0,withCaptcha:!0})}async changeBoundProvider(t){return this.config.request(`${ue.PROVIDER_LIST}/${t.provider_id}/trans`,{method:"POST",body:{provider_trans_token:t.trans_token},withCredentials:!0})}async setUserProfile(t){return this.config.request(ue.USER_PRIFILE_URL,{method:"PATCH",body:t,withCredentials:!0})}async updateUserBasicInfo(t){return this.config.request(ue.USER_BASIC_EDIT_URL,{method:"POST",withCredentials:!0,body:t})}async queryUserProfile(t){const r=new Do(t);return this.config.request(`${ue.USER_QUERY_URL}?${r.toString()}`,{method:"GET",withCredentials:!0})}setCustomSignFunc(t){this.getCustomSignTicketFn=t}async signInWithCustomTicket(){const t=this.getCustomSignTicketFn;if(!t)return Promise.reject({error:"failed_precondition",error_description:"please use setCustomSignFunc to set custom sign function"});const r=await t();return this.signInCustom({provider_id:"custom",ticket:r})}async resetPassword(t){return this.config.request(ue.AUTH_RESET_PASSWORD,{method:"POST",body:t})}async authorize(t){return this.config.request(ue.AUTHORIZE_URL,{method:"POST",withCredentials:!0,body:t})}async authorizeDevice(t){return this.config.request(ue.AUTHORIZE_DEVICE_URL,{method:"POST",withCredentials:!0,body:t})}async deviceAuthorize(t){return this.config.request(ue.AUTH_GET_DEVICE_CODE,{method:"POST",body:t,withCredentials:!0})}async authorizeInfo(t){const r=`${ue.AUTHORIZE_INFO_URL}?${ua.parseParamsToSearch(t)}`;let n=!0,o=!1;return await this.hasLoginState()&&(o=!0,n=!1),this.config.request(r,{method:"GET",withBasicAuth:n,withCredentials:o})}async checkUsername(t){return this.config.request(ue.CHECK_USERNAME,{method:"GET",body:t,withCredentials:!0})}async checkIfUserExist(t){const r=new Do(t);return this.config.request(`${ue.CHECK_IF_USER_EXIST}?${r.toString()}`,{method:"GET"})}async loginScope(){return this.config.credentialsClient.getScope()}async loginGroups(){return this.config.credentialsClient.getGroups()}async refreshTokenForce(t){const r=await this.config.credentialsClient.getCredentials();return await this.config.credentialsClient.refreshToken({...r,version:(t==null?void 0:t.version)||"v1"})}async getCredentials(){return this.config.credentialsClient.getCredentials()}async getPublicKey(){return this.config.request(ji.AUTH_PUBLIC_KEY,{method:"POST",body:{}})}async getEncryptParams(t){const{isEncrypt:r}=t;delete t.isEncrypt;const n=xl(t),o=Rc(r,this.config.adapter);if(!o)return t;let i="",a="";try{const u=await this.getPublicKey();if(i=u.public_key,a=u.public_key_thumbprint,!i||!a)throw u}catch(u){throw u}return{params:o.getEncryptInfo({publicKey:i,payload:n}),public_key_thumbprint:a}}async getProviderSubType(){return this.config.request(ue.GET_PROVIDER_TYPE,{method:"POST",body:{provider_id:"weda"}})}async verifyCaptchaData({token:t,key:r}){return this.config.request(ue.VERIFY_CAPTCHA_DATA_URL,{method:"POST",body:{token:t,key:r},withCredentials:!1})}async createCaptchaData({state:t,redirect_uri:r=void 0}){return this.config.request(ue.CAPTCHA_DATA_URL,{method:"POST",body:{state:t,redirect_uri:r},withCredentials:!1})}async getMiniProgramCode(t){return this.config.request(ue.GET_MINIPROGRAM_QRCODE,{method:"POST",body:t})}async getMiniProgramQrCodeStatus(t){return this.config.request(ue.GET_MINIPROGRAM_QRCODE_STATUS,{method:"POST",body:t})}async getUserBehaviorLog(t){const r={LOGIN:"query[action]=USER_LOGIN",MODIFY:"ne_query[action]=USER_LOGIN"},n=`${ue.GET_USER_BEHAVIOR_LOG}?${r[t.type]}&limit=${t.limit}${t.page_token?`&page_token=${t.page_token}`:""}`;return this.config.request(n,{method:"GET",withCredentials:!0})}async modifyPassword(t){let r="",n="";const o=Rc(!0,this.config.adapter);if(!o)throw new Error("do not support encrypt, a encrypt util required.");try{const u=await this.getPublicKey();if(r=u.public_key,n=u.public_key_thumbprint,!r||!n)throw u}catch(u){throw u}const i=t.password?o.getEncryptInfo({publicKey:r,payload:t.password}):"",a=o.getEncryptInfo({publicKey:r,payload:t.new_password});return this.config.request(ue.USER_BASIC_EDIT_URL,{method:"POST",withCredentials:!0,body:{user_id:t.user_id,encrypt_password:i,encrypt_new_password:a,public_key_thumbprint:n}})}async modifyPasswordWithoutLogin(t){let r="",n="";const o=Rc(!0,this.config.adapter);if(!o)throw new Error("do not support encrypt, a encrypt util required.");try{const u=await this.getPublicKey();if(r=u.public_key,n=u.public_key_thumbprint,!r||!n)throw u}catch(u){throw u}const i=t.password?o.getEncryptInfo({publicKey:r,payload:t.password}):"",a=o.getEncryptInfo({publicKey:r,payload:t.new_password});return this.config.request(ji.AUTH_RESET_PASSWORD,{method:"POST",body:{username:t.username,password:i,new_password:a,public_key_thumbprint:n}})}};class hO{constructor(t){const{apiOrigin:r,apiPath:n=Pu,clientId:o,env:i,storage:a,request:u,baseRequest:l,anonymousSignInFunc:s,wxCloud:c,adapter:f,onCredentialsError:d,headers:v,i18n:m,accessKey:b}=t;this.oauth2client=new lr({apiOrigin:r,apiPath:n,clientId:o,env:i,storage:a,baseRequest:l||u,anonymousSignInFunc:s,wxCloud:c,onCredentialsError:d,headers:v||{},i18n:m,accessKey:b}),this.authApi=new dO({credentialsClient:this.oauth2client,...t,request:u?this.oauth2client.request.bind(this.oauth2client):void 0,adapter:f})}}var re={};Object.defineProperty(re,"__esModule",{value:!0});re.parseQueryString=re.transformPhone=re.sleep=re.printGroupLog=Lu=re.throwError=re.printInfo=re.printError=ja=re.printWarn=re.execCallback=re.createPromiseCallback=re.removeParam=re.getHash=re.getQuery=re.toQueryString=re.formatUrl=re.generateRequestId=re.genSeqId=re.isFormData=re.isInstanceOf=re.isNull=re.isPalinObject=re.isUndefined=re.isString=re.isArray=void 0;var Nu=ve;function pO(e){return Object.prototype.toString.call(e)==="[object Array]"}re.isArray=pO;function vO(e){return typeof e=="string"}re.isString=vO;function gO(e){return typeof e>"u"}re.isUndefined=gO;function mO(e){return Object.prototype.toString.call(e)==="[object Object]"}re.isPalinObject=mO;function yO(e){return Object.prototype.toString.call(e)==="[object Null]"}re.isNull=yO;function _O(e,t){return e instanceof t}re.isInstanceOf=_O;function bO(e){return Object.prototype.toString.call(e)==="[object FormData]"}re.isFormData=bO;function wO(){return Math.random().toString(16).slice(2)}re.genSeqId=wO;function EO(){var e=new Date().getTime(),t=(Date==null?void 0:Date.now)&&Date.now()*1e3||0;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(r){var n=Math.random()*16;return e>0?(n=(e+n)%16|0,e=Math.floor(e/16)):(n=(t+n)%16|0,t=Math.floor(t/16)),(r==="x"?n:n&7|8).toString(16)})}re.generateRequestId=EO;function SO(e,t,r){r===void 0&&(r={});var n=/\?/.test(t),o="";return Object.keys(r).forEach(function(i){o===""?!n&&(t+="?"):o+="&",o+="".concat(i,"=").concat(encodeURIComponent(r[i]))}),t+=o,/^http(s)?:\/\//.test(t)?t:"".concat(e).concat(t)}re.formatUrl=SO;function IO(e){e===void 0&&(e={});var t=[];return Object.keys(e).forEach(function(r){t.push("".concat(r,"=").concat(encodeURIComponent(e[r])))}),t.join("&")}re.toQueryString=IO;function TO(e,t){if(typeof window>"u")return!1;var r=t||window.location.search,n=new RegExp("(^|&)".concat(e,"=([^&]*)(&|$)")),o=r.substr(r.indexOf("?")+1).match(n);return o!=null?o[2]:""}re.getQuery=TO;var OO=function(e){if(typeof window>"u")return"";var t=window.location.hash.match(new RegExp("[#?&/]".concat(e,"=([^&#]*)")));return t?t[1]:""};re.getHash=OO;function AO(e,t){var r=t.split("?")[0],n,o=[],i=t.indexOf("?")!==-1?t.split("?")[1]:"";if(i!==""){o=i.split("&");for(var a=o.length-1;a>=0;a-=1)n=o[a].split("=")[0],n===e&&o.splice(a,1);r="".concat(r,"?").concat(o.join("&"))}return r}re.removeParam=AO;function RO(){var e;if(!Promise){e=function(){},e.promise={};var t=function(){throw new Error('Your Node runtime does support ES6 Promises. Set "global.Promise" to your preferred implementation of promises.')};return Object.defineProperty(e.promise,"then",{get:t}),Object.defineProperty(e.promise,"catch",{get:t}),e}var r=new Promise(function(n,o){e=function(i,a){return i?o(i):n(a)}});return e.promise=r,e}re.createPromiseCallback=RO;function CO(e,t,r){if(r===void 0&&(r=null),e&&typeof e=="function")return e(t,r);if(t)throw t;return r}re.execCallback=CO;function xO(e,t){console.warn("[".concat((0,Nu.getSdkName)(),"][").concat(e,"]:").concat(t))}var ja=re.printWarn=xO;function PO(e,t){console.error({code:e,msg:"[".concat((0,Nu.getSdkName)(),"][").concat(e,"]:").concat(t)})}re.printError=PO;function NO(e,t){console.log("[".concat((0,Nu.getSdkName)(),"][").concat(e,"]:").concat(t))}re.printInfo=NO;function LO(e,t){throw new Error(JSON.stringify({code:e,msg:"[".concat((0,Nu.getSdkName)(),"][").concat(e,"]:").concat(t)}))}var Lu=re.throwError=LO;function DO(e){var t,r=e.title,n=e.subtitle,o=n===void 0?"":n,i=e.content,a=i===void 0?[]:i,u=e.printTrace,l=u===void 0?!1:u,s=e.collapsed,c=s===void 0?!1:s;c?(console.groupCollapsed||console.error)(r,o):(console.group||console.error)(r,o);for(var f=0,d=a;f<d.length;f++){var v=d[f],m=v.type,b=v.body;switch(m){case"info":console.log(b);break;case"warn":console.warn(b);break;case"error":console.error(b);break}}l&&(console.trace||console.log)("stack trace:"),(t=console.groupEnd)===null||t===void 0||t.call(console)}re.printGroupLog=DO;var UO=function(e){return e===void 0&&(e=0),new Promise(function(t){return setTimeout(t,e)})};re.sleep=UO;function $O(e){return"+86".concat(e)}re.transformPhone=$O;var FO=function(e){e=e.replace(/^\?/,"");var t={},r=e.split("&");return r.forEach(function(n){var o=n.split("="),i=o[0],a=o[1];i=decodeURIComponent(i),a=decodeURIComponent(a),i&&(t[i]?Array.isArray(t[i])?t[i].push(a):t[i]=[t[i],a]:t[i]=a)}),t};re.parseQueryString=FO;var Ce={},Du={},MO=de&&de.__awaiter||function(e,t,r,n){function o(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function u(c){try{s(n.next(c))}catch(f){a(f)}}function l(c){try{s(n.throw(c))}catch(f){a(f)}}function s(c){c.done?i(c.value):o(c.value).then(u,l)}s((n=n.apply(e,t||[])).next())})},BO=de&&de.__generator||function(e,t){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function u(s){return function(c){return l([s,c])}}function l(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(r=0)),r;)try{if(n=1,o&&(i=s[0]&2?o.return:s[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,s[1])).done)return i;switch(o=0,i&&(s=[s[0]&2,i.value]),s[0]){case 0:case 1:i=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,o=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(s[0]===6||s[0]===2)){r=0;continue}if(s[0]===3&&(!i||s[1]>i[0]&&s[1]<i[3])){r.label=s[1];break}if(s[0]===6&&r.label<i[1]){r.label=i[1],i=s;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(s);break}i[2]&&r.ops.pop(),r.trys.pop();continue}s=t.call(e,r)}catch(c){s=[6,c],o=0}finally{n=i=0}if(s[0]&5)throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}};Object.defineProperty(Du,"__esModule",{value:!0});Du.catchErrorsDecorator=void 0;var cp=re,jO=ve,Vo=!1;typeof navigator<"u"&&navigator.userAgent&&(Vo=navigator.userAgent.indexOf("Firefox")!==-1);var kO=Vo?/(\.js\/)?__decorate(\$\d+)?<@.*\d$/:/(\/\w+\.js\.)?__decorate(\$\d+)?\s*\(.*\)$/,m0=/https?:\/\/.+:\d*\/.*\.js:\d+:\d+/;function qO(e){var t=e.mode,r=t===void 0?"async":t,n=e.customInfo,o=n===void 0?{}:n,i=e.title,a=e.messages,u=a===void 0?[]:a;return function(l,s,c){if(jO.IS_DEBUG_MODE){var f=o.className||l.constructor.name,d=o.methodName||s,v=c.value,m=WO(new Error);r==="sync"?c.value=function(){for(var b=[],w=0;w<arguments.length;w++)b[w]=arguments[w];var _=lp({err:new Error,className:f,methodName:d,sourceLink:m});try{return v.apply(this,b)}catch(N){var E=N,A=N.message,I=N.error,R=N.error_description,L={title:i||"".concat(f,".").concat(d," failed"),content:[{type:"error",body:N}]};if(A&&/^\{.*\}$/.test(A)){var U=JSON.parse(A);L.subtitle=A,U.code&&(_?(_.code=U.code,_.msg=U.msg):(N.code=U.code,N.message=U.msg),E=_||N,L.content=u.map(function(D){return{type:"info",body:D}}))}throw I&&R&&(L.subtitle=R,_?(_.code=I,_.msg=R):(N.code=I,N.message=R),E=_||N,L.content=u.map(function(D){return{type:"info",body:D}})),(0,cp.printGroupLog)(L),E}}:c.value=function(){for(var b=[],w=0;w<arguments.length;w++)b[w]=arguments[w];return MO(this,void 0,void 0,function(){var _,E,A,I,R,L,U,N;return BO(this,function(D){switch(D.label){case 0:_=lp({err:new Error,className:f,methodName:d,sourceLink:m}),D.label=1;case 1:return D.trys.push([1,3,,4]),[4,v.apply(this,b)];case 2:return[2,D.sent()];case 3:throw E=D.sent(),A=E,I=E.message,R=E.error,L=E.error_description,U={title:i||"".concat(f,".").concat(d," failed"),content:[{type:"error",body:E}]},I&&/^\{.*\}$/.test(I)&&(N=JSON.parse(I),U.subtitle=N,N.code&&(_?(_.code=N.code,_.message=N.msg):(E.code=N.code,E.message=N.msg),A=_||E,U.content=u.map(function(k){return{type:"info",body:k}}))),R&&L&&(U.subtitle=L,_?(_.code=R,_.msg=L):(E.code=R,E.message=L),A=_||E,U.content=u.map(function(k){return{type:"info",body:k}})),(0,cp.printGroupLog)(U),A;case 4:return[2]}})})}}}}Du.catchErrorsDecorator=qO;function WO(e){var t="",r=e.stack.split(`
`),n=r.findIndex(function(i){return kO.test(i)});if(n!==-1){var o=m0.exec(r[n+1]||"");t=o?o[0]:""}return t}function lp(e){var t=e.err,r=e.className,n=e.methodName,o=e.sourceLink;if(!o)return null;var i=t.stack.split(`
`),a=Vo?/^catchErrorsDecorator\/<\/descriptor.value@.*\d$/:new RegExp("".concat(r,"\\.descriptor.value\\s*\\[as\\s").concat(n,"\\]\\s*\\(.*\\)$")),u=Vo?/^catchErrorsDecorator\/<\/descriptor.value/:new RegExp("".concat(r,"\\.descriptor.value\\s*\\[as\\s").concat(n,"\\]")),l=i.findIndex(function(f){return a.test(f)}),s;if(l!==-1){var c=i.filter(function(f,d){return d>l});c.unshift(i[l].replace(u,"".concat(r,".").concat(n)).replace(m0,o)),s=new Error,s.stack="".concat(Vo?"@debugger":"Error",`
`).concat(c.join(`
`))}return s}(function(e){var t=de&&de.__createBinding||(Object.create?function(n,o,i,a){a===void 0&&(a=i);var u=Object.getOwnPropertyDescriptor(o,i);(!u||("get"in u?!o.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return o[i]}}),Object.defineProperty(n,a,u)}:function(n,o,i,a){a===void 0&&(a=i),n[a]=o[i]}),r=de&&de.__exportStar||function(n,o){for(var i in n)i!=="default"&&!Object.prototype.hasOwnProperty.call(o,i)&&t(o,n,i)};Object.defineProperty(e,"__esModule",{value:!0}),r(Du,e)})(Ce);var Ft={},HO=de&&de.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),GO=de&&de.__spreadArray||function(e,t,r){if(r||arguments.length===2)for(var n=0,o=t.length,i;n<o;n++)(i||!(n in t))&&(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return e.concat(i||Array.prototype.slice.call(t))};Object.defineProperty(Ft,"__esModule",{value:!0});Ft.removeEventListener=Ft.activateEvent=Ft.addEventListener=b0=Ft.CloudbaseEventEmitter=Ft.IErrorEvent=Ft.CloudbaseEvent=void 0;var fp=re;function VO(e,t,r){r[e]=r[e]||[],r[e].push(t)}function KO(e,t,r){if(r!=null&&r[e]){var n=r[e].indexOf(t);n!==-1&&r[e].splice(n,1)}}var Kf=function(){function e(t,r){this.data=r||null,this.name=t}return e}();Ft.CloudbaseEvent=Kf;var y0=function(e){HO(t,e);function t(r,n){var o=e.call(this,"error",{error:r,data:n})||this;return o.error=r,o}return t}(Kf);Ft.IErrorEvent=y0;var _0=function(){function e(){this.listeners={}}return e.prototype.on=function(t,r){return VO(t,r,this.listeners),this},e.prototype.off=function(t,r){return KO(t,r,this.listeners),this},e.prototype.fire=function(t,r){if((0,fp.isInstanceOf)(t,y0))return console.error(t.error),this;var n=(0,fp.isString)(t)?new Kf(t,r||{}):t,o=n.name;if(this.listens(o)){n.target=this;for(var i=this.listeners[o]?GO([],this.listeners[o],!0):[],a=0,u=i;a<u.length;a++){var l=u[a];l.call(this,n)}}return this},e.prototype.listens=function(t){return this.listeners[t]&&this.listeners[t].length>0},e}(),b0=Ft.CloudbaseEventEmitter=_0,zf=new _0;function zO(e,t){zf.on(e,t)}Ft.addEventListener=zO;function JO(e,t){t===void 0&&(t={}),zf.fire(e,t)}Ft.activateEvent=JO;function YO(e,t){zf.off(e,t)}Ft.removeEventListener=YO;var Jf={};const w0=qT(gI);var ks={},QO=de&&de.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Cc=de&&de.__awaiter||function(e,t,r,n){function o(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function u(c){try{s(n.next(c))}catch(f){a(f)}}function l(c){try{s(n.throw(c))}catch(f){a(f)}}function s(c){c.done?i(c.value):o(c.value).then(u,l)}s((n=n.apply(e,t||[])).next())})},xc=de&&de.__generator||function(e,t){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function u(s){return function(c){return l([s,c])}}function l(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(r=0)),r;)try{if(n=1,o&&(i=s[0]&2?o.return:s[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,s[1])).done)return i;switch(o=0,i&&(s=[s[0]&2,i.value]),s[0]){case 0:case 1:i=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,o=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(s[0]===6||s[0]===2)){r=0;continue}if(s[0]===3&&(!i||s[1]>i[0]&&s[1]<i[3])){r.label=s[1];break}if(s[0]===6&&r.label<i[1]){r.label=i[1],i=s;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(s);break}i[2]&&r.ops.pop(),r.trys.pop();continue}s=t.call(e,r)}catch(c){s=[6,c],o=0}finally{n=i=0}if(s[0]&5)throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}};Object.defineProperty(Jf,"__esModule",{value:!0});var E0=Jf.CloudbaseCache=void 0,XO=w0,Ko=re,pn=ve,Pc=function(e){QO(t,e);function t(r){var n=e.call(this)||this;return n.root=r,r.tcbCacheObject||(r.tcbCacheObject={}),n}return t.prototype.setItem=function(r,n){this.root.tcbCacheObject[r]=n},t.prototype.getItem=function(r){return this.root.tcbCacheObject[r]},t.prototype.removeItem=function(r){delete this.root.tcbCacheObject[r]},t.prototype.clear=function(){delete this.root.tcbCacheObject},t}(XO.AbstractStorage);function ZO(e,t){switch(e){case"local":return t.localStorage?t.localStorage:((0,Ko.printWarn)(pn.ERRORS.INVALID_PARAMS,"localStorage is not supported on current platform"),new Pc(t.root));case"none":return new Pc(t.root);default:return t.localStorage?t.localStorage:((0,Ko.printWarn)(pn.ERRORS.INVALID_PARAMS,"localStorage is not supported on current platform"),new Pc(t.root))}}var eA=function(){function e(t){this.keys={};var r=t.persistence,n=t.platformInfo,o=n===void 0?{}:n,i=t.keys,a=i===void 0?{}:i;this.platformInfo=o,this.storage||(this.persistenceTag=this.platformInfo.adapter.primaryStorage||r,this.storage=ZO(this.persistenceTag,this.platformInfo.adapter),this.keys=a)}return Object.defineProperty(e.prototype,"mode",{get:function(){return this.storage.mode||"sync"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"persistence",{get:function(){return this.persistenceTag},enumerable:!1,configurable:!0}),e.prototype.setStore=function(t,r,n){if(this.mode==="async"){(0,Ko.printWarn)(pn.ERRORS.INVALID_OPERATION,"current platform's storage is asynchronous, please use setStoreAsync insteed");return}if(this.storage)try{var o={version:n||"localCachev1",content:r};this.storage.setItem(t,JSON.stringify(o))}catch(i){throw new Error(JSON.stringify({code:pn.ERRORS.OPERATION_FAIL,msg:"[".concat((0,pn.getSdkName)(),"][").concat(pn.ERRORS.OPERATION_FAIL,"]setStore failed"),info:i}))}},e.prototype.setStoreAsync=function(t,r,n){return Cc(this,void 0,void 0,function(){var o;return xc(this,function(i){switch(i.label){case 0:if(!this.storage)return[2];i.label=1;case 1:return i.trys.push([1,3,,4]),o={version:n||"localCachev1",content:r},[4,this.storage.setItem(t,JSON.stringify(o))];case 2:return i.sent(),[3,4];case 3:return i.sent(),[2];case 4:return[2]}})})},e.prototype.getStore=function(t,r){var n;if(this.mode==="async"){(0,Ko.printWarn)(pn.ERRORS.INVALID_OPERATION,"current platform's storage is asynchronous, please use getStoreAsync insteed");return}try{if(typeof process<"u"&&(!((n=ks)===null||n===void 0)&&n.tcb_token))return ks.tcb_token;if(!this.storage)return""}catch{return""}r=r||"localCachev1";var o=this.storage.getItem(t);if(!o)return"";if(o.indexOf(r)>=0){var i=JSON.parse(o);return i.content}return""},e.prototype.getStoreAsync=function(t,r){var n;return Cc(this,void 0,void 0,function(){var o,i;return xc(this,function(a){switch(a.label){case 0:try{if(typeof process<"u"&&(!((n=ks)===null||n===void 0)&&n.tcb_token))return[2,ks.tcb_token];if(!this.storage)return[2,""]}catch{return[2,""]}return r=r||"localCachev1",[4,this.storage.getItem(t)];case 1:return o=a.sent(),o?o.indexOf(r)>=0?(i=JSON.parse(o),[2,i.content]):[2,""]:[2,""]}})})},e.prototype.removeStore=function(t){if(this.mode==="async"){(0,Ko.printWarn)(pn.ERRORS.INVALID_OPERATION,"current platform's storage is asynchronous, please use removeStoreAsync insteed");return}this.storage.removeItem(t)},e.prototype.removeStoreAsync=function(t){return Cc(this,void 0,void 0,function(){return xc(this,function(r){switch(r.label){case 0:return[4,this.storage.removeItem(t)];case 1:return r.sent(),[2]}})})},e}();E0=Jf.CloudbaseCache=eA;var S0={},Ji={},tA=de&&de.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),it=de&&de.__assign||function(){return it=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},it.apply(this,arguments)},Nc=de&&de.__awaiter||function(e,t,r,n){function o(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function u(c){try{s(n.next(c))}catch(f){a(f)}}function l(c){try{s(n.throw(c))}catch(f){a(f)}}function s(c){c.done?i(c.value):o(c.value).then(u,l)}s((n=n.apply(e,t||[])).next())})},Lc=de&&de.__generator||function(e,t){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function u(s){return function(c){return l([s,c])}}function l(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(r=0)),r;)try{if(n=1,o&&(i=s[0]&2?o.return:s[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,s[1])).done)return i;switch(o=0,i&&(s=[s[0]&2,i.value]),s[0]){case 0:case 1:i=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,o=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(s[0]===6||s[0]===2)){r=0;continue}if(s[0]===3&&(!i||s[1]>i[0]&&s[1]<i[3])){r.label=s[1];break}if(s[0]===6&&r.label<i[1]){r.label=i[1],i=s;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(s);break}i[2]&&r.ops.pop(),r.trys.pop();continue}s=t.call(e,r)}catch(c){s=[6,c],o=0}finally{n=i=0}if(s[0]&5)throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}};Object.defineProperty(Ji,"__esModule",{value:!0});Ji.WebRequest=Ji.genAdapter=void 0;var rA=w0,Dc=re,nA=yt,I0=function(e){tA(t,e);function t(r){var n=e.call(this)||this,o=r.timeout,i=r.timeoutMsg,a=r.restrictedMethods;return n.timeout=o||0,n.timeoutMsg=i||"",n.restrictedMethods=a||["get","post","upload","download"],n}return t.prototype.get=function(r){return this.request(it(it({},r),{method:"get"}),this.restrictedMethods.includes("get"))},t.prototype.post=function(r){return this.request(it(it({},r),{method:"post"}),this.restrictedMethods.includes("post"))},t.prototype.put=function(r){return this.request(it(it({},r),{method:"put"}))},t.prototype.upload=function(r){var n=r.data,o=r.file,i=r.name,a=r.method,u=r.headers,l=u===void 0?{}:u,s={post:"post",put:"put"}[a==null?void 0:a.toLowerCase()]||"put",c=new FormData;return s==="post"?(Object.keys(n).forEach(function(f){c.append(f,n[f])}),c.append("key",i),c.append("file",o),this.request(it(it({},r),{data:c,method:s}),this.restrictedMethods.includes("upload"))):this.request(it(it({},r),{method:"put",headers:l,body:o}),this.restrictedMethods.includes("upload"))},t.prototype.download=function(r){return Nc(this,void 0,void 0,function(){var n,o,i,a;return Lc(this,function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,this.get(it(it({},r),{headers:{},responseType:"blob"}))];case 1:return n=u.sent().data,o=window.URL.createObjectURL(new Blob([n])),i=decodeURIComponent(new URL(r.url).pathname.split("/").pop()||""),a=document.createElement("a"),a.href=o,a.setAttribute("download",i),a.style.display="none",document.body.appendChild(a),a.click(),window.URL.revokeObjectURL(o),document.body.removeChild(a),[3,3];case 2:return u.sent(),[3,3];case 3:return[2,new Promise(function(l){l({statusCode:200,tempFilePath:r.url})})]}})})},t.prototype.fetch=function(r){var n;return Nc(this,void 0,void 0,function(){var o,i,a,u,l,s,c,f,d,v,m,b=this;return Lc(this,function(w){switch(w.label){case 0:return o=new AbortController,i=r.url,a=r.enableAbort,u=a===void 0?!1:a,l=r.stream,s=l===void 0?!1:l,c=r.signal,f=r.timeout,d=f??this.timeout,c&&(c.aborted&&o.abort(),c.addEventListener("abort",function(){return o.abort()})),v=null,u&&d&&(v=setTimeout(function(){console.warn(b.timeoutMsg),o.abort(new Error(b.timeoutMsg))},d)),[4,fetch(i,it(it({},r),{signal:o.signal})).then(function(_){return Nc(b,void 0,void 0,function(){var E,A,I;return Lc(this,function(R){switch(R.label){case 0:return clearTimeout(v),_.ok?(E=_,[3,3]):[3,1];case 1:return I=(A=Promise).reject,[4,_.json()];case 2:E=I.apply(A,[R.sent()]),R.label=3;case 3:return[2,E]}})})}).catch(function(_){return clearTimeout(v),Promise.reject(_)})];case 1:return m=w.sent(),[2,{data:s?m.body:!((n=m.headers.get("content-type"))===null||n===void 0)&&n.includes("application/json")?m.json():m.text(),statusCode:m.status,header:m.headers}]}})})},t.prototype.request=function(r,n){var o=this;n===void 0&&(n=!1);var i=String(r.method).toLowerCase()||"get";return new Promise(function(a){var u=r.url,l=r.headers,s=l===void 0?{}:l,c=r.data,f=r.responseType,d=r.withCredentials,v=r.body,m=r.onUploadProgress,b=(0,Dc.formatUrl)((0,nA.getProtocol)(),u,i==="get"?c:{}),w=new XMLHttpRequest;w.open(i,b),f&&(w.responseType=f),Object.keys(s).forEach(function(A){w.setRequestHeader(A,s[A])});var _;m&&w.upload.addEventListener("progress",m),w.onreadystatechange=function(){var A={};if(w.readyState===4){var I=w.getAllResponseHeaders(),R=I.trim().split(/[\r\n]+/),L={};R.forEach(function(U){var N=U.split(": "),D=N.shift().toLowerCase(),k=N.join(": ");L[D]=k}),A.header=L,A.statusCode=w.status;try{A.data=f==="blob"?w.response:JSON.parse(w.responseText)}catch{A.data=f==="blob"?w.response:w.responseText}clearTimeout(_),a(A)}},n&&o.timeout&&(_=setTimeout(function(){console.warn(o.timeoutMsg),w.abort()},o.timeout));var E;(0,Dc.isFormData)(c)?E=c:s["content-type"]==="application/x-www-form-urlencoded"?E=(0,Dc.toQueryString)(c):v?E=v:E=c?JSON.stringify(c):void 0,d&&(w.withCredentials=!0),w.send(E)})},t}(rA.AbstractSDKRequest);Ji.WebRequest=I0;function iA(){var e={type:"default",root:window,reqClass:I0,wsClass:WebSocket,localStorage};return e}Ji.genAdapter=iA;(function(e){var t=de&&de.__assign||function(){return t=Object.assign||function(c){for(var f,d=1,v=arguments.length;d<v;d++){f=arguments[d];for(var m in f)Object.prototype.hasOwnProperty.call(f,m)&&(c[m]=f[m])}return c},t.apply(this,arguments)},r=de&&de.__createBinding||(Object.create?function(c,f,d,v){v===void 0&&(v=d);var m=Object.getOwnPropertyDescriptor(f,d);(!m||("get"in m?!f.__esModule:m.writable||m.configurable))&&(m={enumerable:!0,get:function(){return f[d]}}),Object.defineProperty(c,v,m)}:function(c,f,d,v){v===void 0&&(v=d),c[v]=f[d]}),n=de&&de.__setModuleDefault||(Object.create?function(c,f){Object.defineProperty(c,"default",{enumerable:!0,value:f})}:function(c,f){c.default=f}),o=de&&de.__importStar||function(c){if(c&&c.__esModule)return c;var f={};if(c!=null)for(var d in c)d!=="default"&&Object.prototype.hasOwnProperty.call(c,d)&&r(f,c,d);return n(f,c),f};Object.defineProperty(e,"__esModule",{value:!0}),e.useDefaultAdapter=e.useAdapters=e.RUNTIME=void 0;var i=o(Ji),a=re,u;(function(c){c.WEB="web",c.WX_MP="wx_mp"})(u=e.RUNTIME||(e.RUNTIME={}));function l(c,f){for(var d=(0,a.isArray)(c)?c:[c],v=0,m=d;v<m.length;v++){var b=m[v],w=b.isMatch,_=b.genAdapter,E=b.runtime;if(w())return{adapter:t({isMatch:w},_(f)),runtime:E}}}e.useAdapters=l;function s(){return{adapter:i.genAdapter(),runtime:u.WEB}}e.useDefaultAdapter=s})(S0);var fr=function(){return fr=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},fr.apply(this,arguments)},zo=function(e,t,r,n){function o(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function u(c){try{s(n.next(c))}catch(f){a(f)}}function l(c){try{s(n.throw(c))}catch(f){a(f)}}function s(c){c.done?i(c.value):o(c.value).then(u,l)}s((n=n.apply(e,t||[])).next())})},Jo=function(e,t){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function u(s){return function(c){return l([s,c])}}function l(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(r=0)),r;)try{if(n=1,o&&(i=s[0]&2?o.return:s[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,s[1])).done)return i;switch(o=0,i&&(s=[s[0]&2,i.value]),s[0]){case 0:case 1:i=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,o=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(s[0]===6||s[0]===2)){r=0;continue}if(s[0]===3&&(!i||s[1]>i[0]&&s[1]<i[3])){r.label=s[1];break}if(s[0]===6&&r.label<i[1]){r.label=i[1],i=s;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(s);break}i[2]&&r.ops.pop(),r.trys.pop();continue}s=t.call(e,r)}catch(c){s=[6,c],o=0}finally{n=i=0}if(s[0]&5)throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}},T0=function(){function e(t){var r,n;try{this.localStorage=(t==null?void 0:t.localStorage)||(((n=(r=t==null?void 0:t.adapter)===null||r===void 0?void 0:r.root)===null||n===void 0?void 0:n.globalThis)||globalThis).localStorage}catch{this.localStorage=(t==null?void 0:t.localStorage)||{}}}return e.prototype.getItem=function(t){return zo(this,void 0,void 0,function(){return Jo(this,function(r){return[2,this.localStorage.getItem(t)]})})},e.prototype.removeItem=function(t){return zo(this,void 0,void 0,function(){return Jo(this,function(r){return this.localStorage.removeItem(t),[2]})})},e.prototype.setItem=function(t,r){return zo(this,void 0,void 0,function(){return Jo(this,function(n){return this.localStorage.setItem(t,r),[2]})})},e.prototype.getItemSync=function(t){return this.localStorage.getItem(t)},e.prototype.setItemSync=function(t,r){this.localStorage.setItem(t,r)},e.prototype.removeItemSync=function(t){this.localStorage.removeItem(t)},e}(),oA=/^[^:]+:\/\/[^/]+(\/[^?#]+)/,O0=function(e,t){var r,n,o,i=(r=t==null?void 0:t.headers)===null||r===void 0?void 0:r["x-request-id"];return e||(e={}),(e!=null&&e.code||!((n=e==null?void 0:e.data)===null||n===void 0)&&n.error_code)&&(e={error:e.code||e.data.error,error_description:e.data.error_description||e.message||e.code||e.data.error_code,request_id:e.requestId,error_code:(o=e.data)===null||o===void 0?void 0:o.error_code}),e!=null&&e.request_id||(e.request_id=e.request_id||i),e!=null&&e.error?(e.error_uri=aA(t==null?void 0:t.url),e):(e==null?void 0:e.data)||{}};function sA(e){return function(t,r){return zo(this,void 0,void 0,function(){return Jo(this,function(n){return[2,new Promise(function(o,i){var a=Object.assign({},r);a.body&&typeof a.body!="string"&&(a.body=JSON.stringify(a.body));var u=wx.request({url:t,data:a.body,timeout:e._timeout,method:a.method||"GET",header:a.headers,success:function(l){l=O0(l,fr(fr({},r),{url:t})),l.error&&i(l),o(l)},fail:function(l){i({error:"unreachable",error_description:l.message})},complete:function(l){if(!(!l||!l.errMsg)&&!(!e._timeout||e._restrictedMethods.indexOf("request")===-1)){var s=l.errMsg;if(s==="request:fail timeout"){console.warn(e._timeoutMsg);try{u.abort()}catch{}}}}})})]})})}}function aA(e){return oA.test(e)?RegExp.$1:e}var uA=function(e,t){var r=fr({},e);try{if(!(e!=null&&e.storage)&&(t!=null&&t.localStorage)&&(r.storage=new T0({localStorage:t.localStorage,adapter:t})),!e.captchaOptions&&(t!=null&&t.captchaOptions)&&(r.captchaOptions=t.captchaOptions),!e.baseRequest&&!e.request&&(t!=null&&t.reqClass)){var n={timeout:1e4,restrictedMethods:["get","post","upload","download","request"]},o=new t.reqClass(n);r.baseRequest=function(i,a){var u,l,s,c,f;return zo(this,void 0,void 0,function(){var d,v,m,b;return Jo(this,function(w){switch(w.label){case 0:if(d={},v=((u=a.method)===null||u===void 0?void 0:u.toLocaleLowerCase())||"post",m=(s=(l=o==null?void 0:o[v])===null||l===void 0?void 0:l.bind)===null||s===void 0?void 0:s.call(l,o),typeof m!="function")throw new Error("invalid ".concat(v," request method"));w.label=1;case 1:return w.trys.push([1,3,,4]),(!(!((c=a.headers)===null||c===void 0)&&c["content-type"])||!((f=a.headers)===null||f===void 0)&&f["content-type"].includes("application/json"))&&["string","undefined"].includes(typeof a.body)&&(a.data=a.data||a.body,a.body=JSON.stringify(a.body)),[4,m(fr({url:i},a))];case 2:return d=w.sent(),d=O0(d,fr(fr({},a),{url:i})),[3,4];case 3:throw b=w.sent(),d=b,b;case 4:if(d!=null&&d.error)throw d;return[2,d]}})})}}}catch(i){console.error("user adapter generate fail:",i)}return r},cA=function(e,t){if(!zr.isMatch()||e.storage&&e.baseRequest)return e;var r=fr({},e),n={};try{var o=zr.genAdapter(),i=o.localStorage,a=o.reqClass;if(i&&(n.storage=new T0({localStorage:i,adapter:t})),a){var u=new a({timeout:1e4,restrictedMethods:["get","post","upload","download","request"]});n.request=sA(u)}return r.captchaOptions&&(n.baseRequest=n.request,n.request=void 0),fr(fr({},r),n)}catch(l){console.error("adapter generate fail:",l)}return r},lA=function(e){return e.adapter&&e.adapter.type!=="default"?uA(e,e.adapter):cA(e,e.adapter)},ft=function(){return ft=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},ft.apply(this,arguments)},Pe=function(e,t,r,n){var o=arguments.length,i=o<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(e,t,r,n);else for(var u=e.length-1;u>=0;u--)(a=e[u])&&(i=(o<3?a(i):o>3?a(t,r,i):a(t,r))||i);return o>3&&i&&Object.defineProperty(t,r,i),i},H=function(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)},z=function(e,t,r,n){function o(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function u(c){try{s(n.next(c))}catch(f){a(f)}}function l(c){try{s(n.throw(c))}catch(f){a(f)}}function s(c){c.done?i(c.value):o(c.value).then(u,l)}s((n=n.apply(e,t||[])).next())})},J=function(e,t){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function u(s){return function(c){return l([s,c])}}function l(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(r=0)),r;)try{if(n=1,o&&(i=s[0]&2?o.return:s[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,s[1])).done)return i;switch(o=0,i&&(s=[s[0]&2,i.value]),s[0]){case 0:case 1:i=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,o=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(s[0]===6||s[0]===2)){r=0;continue}if(s[0]===3&&(!i||s[1]>i[0]&&s[1]<i[3])){r.label=s[1];break}if(s[0]===6&&r.label<i[1]){r.label=i[1],i=s;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(s);break}i[2]&&r.ops.pop(),r.trys.pop();continue}s=t.call(e,r)}catch(c){s=[6,c],o=0}finally{n=i=0}if(s[0]&5)throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}},fA="auth",ca={SIGN_OUT:"sign_out",SIGN_IN:"sign_in",CREDENTIALS_ERROR:"credentials_error"},la={LOGIN_STATE_CHANGED:"loginStateChanged"},fa=new b0,dA=function(e){fa.fire(la.LOGIN_STATE_CHANGED,ft(ft({},e),{eventType:ca.CREDENTIALS_ERROR}))},hA=function(){function e(t){var r=t.cache,n=t.oauthInstance;this.cache=r,this.oauthInstance=n,this.setUserInfo()}return e.prototype.checkLocalInfo=function(){return z(this,void 0,void 0,function(){return J(this,function(t){return this.uid=this.getLocalUserInfo("uid"),this.gender=this.getLocalUserInfo("gender"),this.picture=this.getLocalUserInfo("picture"),this.email=this.getLocalUserInfo("email"),this.emailVerified=this.getLocalUserInfo("email_verified"),this.phoneNumber=this.getLocalUserInfo("phone_number"),this.username=this.getLocalUserInfo("username"),this.name=this.getLocalUserInfo("name"),this.birthdate=this.getLocalUserInfo("birthdate"),this.zoneinfo=this.getLocalUserInfo("zoneinfo"),this.locale=this.getLocalUserInfo("locale"),this.sub=this.getLocalUserInfo("sub"),this.createdFrom=this.getLocalUserInfo("created_from"),this.providers=this.getLocalUserInfo("providers"),[2]})})},e.prototype.checkLocalInfoAsync=function(){return z(this,void 0,void 0,function(){var t,r,n,o;return J(this,function(i){switch(i.label){case 0:return t=this,[4,this.getLocalUserInfoAsync("uid")];case 1:return t.uid=i.sent(),r=this,[4,this.getLocalUserInfoAsync("gender")];case 2:return r.gender=i.sent(),this.picture=this.getLocalUserInfo("picture"),n=this,[4,this.getLocalUserInfoAsync("email")];case 3:return n.email=i.sent(),this.emailVerified=this.getLocalUserInfo("email_verified"),this.phoneNumber=this.getLocalUserInfo("phone_number"),o=this,[4,this.getLocalUserInfoAsync("username")];case 4:return o.username=i.sent(),this.name=this.getLocalUserInfo("name"),this.birthdate=this.getLocalUserInfo("birthdate"),this.zoneinfo=this.getLocalUserInfo("zoneinfo"),this.locale=this.getLocalUserInfo("locale"),this.sub=this.getLocalUserInfo("sub"),this.createdFrom=this.getLocalUserInfo("created_from"),this.providers=this.getLocalUserInfo("providers"),[2]}})})},e.prototype.update=function(t){return z(this,void 0,void 0,function(){var r;return J(this,function(n){switch(n.label){case 0:return[4,this.oauthInstance.authApi.setUserProfile(ft({},t))];case 1:return r=n.sent(),this.setLocalUserInfo(r),[2]}})})},e.prototype.updateUserBasicInfo=function(t){return z(this,void 0,void 0,function(){return J(this,function(r){switch(r.label){case 0:return[4,this.oauthInstance.authApi.updateUserBasicInfo(ft({},t))];case 1:return r.sent(),this.setLocalUserInfo({username:t.username}),[2]}})})},e.prototype.updatePassword=function(t,r){return this.oauthInstance.authApi.updatePasswordByOld({old_password:r,new_password:t})},e.prototype.updateUsername=function(t){return typeof t!="string"&&Lu(ve.ERRORS.INVALID_PARAMS,"username must be a string"),this.update({username:t})},e.prototype.refresh=function(t){return z(this,void 0,void 0,function(){var r;return J(this,function(n){switch(n.label){case 0:return[4,this.oauthInstance.authApi.getUserInfo(t)];case 1:return r=n.sent(),this.setLocalUserInfo(r),[2,r]}})})},e.prototype.getLocalUserInfo=function(t){var r=this.cache.keys.userInfoKey,n=this.cache.getStore(r);return n[t]},e.prototype.getLocalUserInfoAsync=function(t){return z(this,void 0,void 0,function(){var r,n;return J(this,function(o){switch(o.label){case 0:return r=this.cache.keys.userInfoKey,[4,this.cache.getStoreAsync(r)];case 1:return n=o.sent(),[2,n[t]]}})})},e.prototype.setUserInfo=function(){var t=this,r=this.cache.keys.userInfoKey,n=this.cache.getStore(r);["uid","email","name","gender","picture","email_verified","phone_number","birthdate","zoneinfo","locale","sub","created_from","providers","username"].forEach(function(o){t[o]=n[o]})},e.prototype.setLocalUserInfo=function(t){var r=this.cache.keys.userInfoKey;this.cache.setStore(r,t),this.setUserInfo()},Pe([Ce.catchErrorsDecorator({title:"",messages:["","  1 -  User.update() ","  2 - ","".concat(ve.COMMUNITY_SITE_URL)]}),H("design:type",Function),H("design:paramtypes",[Object]),H("design:returntype",Promise)],e.prototype,"update",null),Pe([Ce.catchErrorsDecorator({title:"",messages:["","  1 -  User.updatePassword() ","  3 - ","".concat(ve.COMMUNITY_SITE_URL)]}),H("design:type",Function),H("design:paramtypes",[String,String]),H("design:returntype",void 0)],e.prototype,"updatePassword",null),Pe([Ce.catchErrorsDecorator({title:"",messages:["","  1 -  User.updateUsername() ","  2 - ","".concat(ve.COMMUNITY_SITE_URL)]}),H("design:type",Function),H("design:paramtypes",[String]),H("design:returntype",void 0)],e.prototype,"updateUsername",null),Pe([Ce.catchErrorsDecorator({title:"",messages:["","  1 -  User.refresh() ","".concat(ve.COMMUNITY_SITE_URL)]}),H("design:type",Function),H("design:paramtypes",[Object]),H("design:returntype",Promise)],e.prototype,"refresh",null),e}(),Uc=function(){function e(t){var r=t.envId,n=t.cache,o=t.oauthInstance;r||Lu(ve.ERRORS.INVALID_PARAMS,"envId is not defined"),this.cache=n,this.oauthInstance=o,this.user=new hA({cache:this.cache,oauthInstance:o})}return e.prototype.checkLocalState=function(){var t;this.oauthLoginState=(t=this.oauthInstance)===null||t===void 0?void 0:t.authApi.hasLoginStateSync(),this.user.checkLocalInfo()},e.prototype.checkLocalStateAsync=function(){var t;return z(this,void 0,void 0,function(){return J(this,function(r){switch(r.label){case 0:return[4,(t=this.oauthInstance)===null||t===void 0?void 0:t.authApi.getLoginState()];case 1:return r.sent(),[4,this.user.checkLocalInfoAsync()];case 2:return r.sent(),[2]}})})},e}(),pA=function(){function e(t){this.config=t,this.cache=t.cache,this.oauthInstance=t.oauthInstance,t.accessKey&&this.createLoginState()}return e.prototype.bindPhoneNumber=function(t){return z(this,void 0,void 0,function(){return J(this,function(r){return[2,this.oauthInstance.authApi.editContact(t)]})})},e.prototype.unbindProvider=function(t){return z(this,void 0,void 0,function(){return J(this,function(r){return[2,this.oauthInstance.authApi.unbindProvider(t)]})})},e.prototype.bindEmail=function(t){return this.oauthInstance.authApi.editContact(t)},e.prototype.verify=function(t){return z(this,void 0,void 0,function(){return J(this,function(r){return[2,this.oauthInstance.authApi.verify(t)]})})},e.prototype.getVerification=function(t,r){return z(this,void 0,void 0,function(){return J(this,function(n){return[2,this.oauthInstance.authApi.getVerification(t,r)]})})},Object.defineProperty(e.prototype,"currentUser",{get:function(){if(this.cache.mode==="async"){ja(ve.ERRORS.INVALID_OPERATION,"current platform's storage is asynchronous, please use getCurrentUser insteed");return}var t=this.hasLoginState();return t&&t.user||null},enumerable:!1,configurable:!0}),e.prototype.getCurrentUser=function(){return z(this,void 0,void 0,function(){var t;return J(this,function(r){switch(r.label){case 0:return[4,this.getLoginState()];case 1:return t=r.sent(),t?[4,t.user.checkLocalInfoAsync()]:[3,3];case 2:return r.sent(),[2,t.user||null];case 3:return[2,null]}})})},e.prototype.signInAnonymously=function(t){return t===void 0&&(t={}),z(this,void 0,void 0,function(){return J(this,function(r){switch(r.label){case 0:return[4,this.oauthInstance.authApi.signInAnonymously(t)];case 1:return r.sent(),[2,this.createLoginState()]}})})},e.prototype.signInAnonymouslyInWx=function(t){var r=t===void 0?{}:t,n=r.useWxCloud;return z(this,void 0,void 0,function(){var o,i,a=this;return J(this,function(u){switch(u.label){case 0:if(!zr.isMatch())throw Error("wx api undefined");return o=wx.getAccountInfoSync().miniProgram,i=function(l){return z(a,void 0,void 0,function(){var s,c,f;return J(this,function(d){switch(d.label){case 0:s=void 0,c=void 0,d.label=1;case 1:return d.trys.push([1,4,,5]),[4,this.oauthInstance.authApi.grantProviderToken({provider_id:o==null?void 0:o.appId,provider_code:l,provider_params:{provider_code_type:"open_id",appid:o==null?void 0:o.appId}},n)];case 2:if(s=d.sent(),s!=null&&s.error_code||!s.provider_token)throw s;return[4,this.oauthInstance.authApi.signInAnonymously({provider_token:s.provider_token},n)];case 3:if(c=d.sent(),c!=null&&c.error_code)throw c;return[3,5];case 4:throw f=d.sent(),f;case 5:return[2]}})})},[4,new Promise(function(l,s){wx.login({success:function(c){return z(a,void 0,void 0,function(){var f;return J(this,function(d){switch(d.label){case 0:return d.trys.push([0,2,,3]),[4,i(c.code)];case 1:return d.sent(),l(!0),[3,3];case 2:return f=d.sent(),s(f),[3,3];case 3:return[2]}})})},fail:function(c){var f=new Error(c==null?void 0:c.errMsg);f.code=c==null?void 0:c.errno,s(f)}})})];case 1:return u.sent(),[2,this.createLoginState(void 0,{asyncRefreshUser:!0})]}})})},e.prototype.bindOpenId=function(){return z(this,void 0,void 0,function(){var t,r,n=this;return J(this,function(o){switch(o.label){case 0:if(!zr.isMatch())throw Error("wx api undefined");return t=wx.getAccountInfoSync().miniProgram,r=function(i){return z(n,void 0,void 0,function(){var a,u;return J(this,function(l){switch(l.label){case 0:a=void 0,l.label=1;case 1:return l.trys.push([1,4,,5]),[4,this.oauthInstance.authApi.grantProviderToken({provider_id:t==null?void 0:t.appId,provider_code:i,provider_params:{provider_code_type:"open_id",appid:t==null?void 0:t.appId}})];case 2:if(a=l.sent(),a!=null&&a.error_code||!a.provider_token)throw a;return[4,this.oauthInstance.authApi.bindWithProvider({provider_token:a.provider_token})];case 3:return l.sent(),[3,5];case 4:throw u=l.sent(),u;case 5:return[2]}})})},[4,new Promise(function(i,a){wx.login({success:function(u){return z(n,void 0,void 0,function(){var l;return J(this,function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),[4,r(u.code)];case 1:return s.sent(),i(!0),[3,3];case 2:return l=s.sent(),a(l),[3,3];case 3:return[2]}})})},fail:function(u){var l=new Error(u==null?void 0:u.errMsg);l.code=u==null?void 0:u.errno,a(l)}})})];case 1:return o.sent(),[2]}})})},e.prototype.signInWithOpenId=function(t){var r=t===void 0?{}:t,n=r.useWxCloud,o=n===void 0?!0:n;return z(this,void 0,void 0,function(){var i,a,u=this;return J(this,function(l){switch(l.label){case 0:if(!zr.isMatch())throw Error("wx api undefined");return i=wx.getAccountInfoSync().miniProgram,a=function(s){return z(u,void 0,void 0,function(){var c,f,d;return J(this,function(v){switch(v.label){case 0:c=void 0,f=void 0,v.label=1;case 1:return v.trys.push([1,4,,5]),[4,this.oauthInstance.authApi.grantProviderToken({provider_id:i==null?void 0:i.appId,provider_code:s,provider_params:{provider_code_type:"open_id",appid:i==null?void 0:i.appId}},o)];case 2:if(c=v.sent(),c!=null&&c.error_code||!c.provider_token)throw c;return[4,this.oauthInstance.authApi.signInWithProvider({provider_token:c.provider_token},o)];case 3:if(f=v.sent(),f!=null&&f.error_code)throw f;return[3,5];case 4:throw d=v.sent(),d;case 5:return[4,this.oauthInstance.oauth2client.setCredentials(f)];case 6:return v.sent(),[2]}})})},[4,new Promise(function(s,c){wx.login({success:function(f){return z(u,void 0,void 0,function(){var d;return J(this,function(v){switch(v.label){case 0:return v.trys.push([0,2,,3]),[4,a(f.code)];case 1:return v.sent(),s(!0),[3,3];case 2:return d=v.sent(),c(d),[3,3];case 3:return[2]}})})},fail:function(f){var d=new Error(f==null?void 0:f.errMsg);d.code=f==null?void 0:f.errno,c(d)}})})];case 1:return l.sent(),[2,this.createLoginState()]}})})},e.prototype.signInWithUnionId=function(){return z(this,void 0,void 0,function(){var t,r=this;return J(this,function(n){switch(n.label){case 0:if(!zr.isMatch())throw Error("wx api undefined");n.label=1;case 1:return n.trys.push([1,3,,4]),[4,new Promise(function(o,i){var a=wx.getAccountInfoSync().miniProgram;wx.login({success:function(u){return z(r,void 0,void 0,function(){var l,s,c,f,d;return J(this,function(v){switch(v.label){case 0:l=a==null?void 0:a.appId,v.label=1;case 1:return v.trys.push([1,4,,5]),[4,this.oauthInstance.authApi.grantProviderToken({provider_code:u.code,provider_id:l,provider_params:{provider_code_type:"union_id",appid:a==null?void 0:a.appId}})];case 2:return s=v.sent(),c=s.provider_token,c?[4,this.oauthInstance.authApi.signInWithProvider({provider_id:l,provider_token:c})]:(i(s),[2]);case 3:return f=v.sent(),f!=null&&f.error_code?(i(f),[2]):(o(!0),[3,5]);case 4:return d=v.sent(),i(d),[3,5];case 5:return[2]}})})},fail:function(u){var l=new Error(u==null?void 0:u.errMsg);l.code=u==null?void 0:u.errno,i(l)}})})];case 2:return n.sent(),[3,4];case 3:throw t=n.sent(),t;case 4:return[2,this.createLoginState()]}})})},e.prototype.signInWithPhoneAuth=function(t){var r=t.phoneCode,n=r===void 0?"":r;return z(this,void 0,void 0,function(){var o,i,a,u,l,s;return J(this,function(c){switch(c.label){case 0:if(!zr.isMatch())throw Error("wx api undefined");return o=wx.getAccountInfoSync().miniProgram,i={provider_params:{provider_code_type:"phone"},provider_id:o.appId},[4,wx.login()];case 1:a=c.sent().code,i.provider_code=a,c.label=2;case 2:return c.trys.push([2,6,,7]),[4,this.oauthInstance.authApi.grantProviderToken(i)];case 3:if(u=c.sent(),u.error_code)throw u;return[4,this.oauthInstance.authApi.patchProviderToken({provider_token:u.provider_token,provider_id:o.appId,provider_params:{code:n,provider_code_type:"phone"}})];case 4:if(u=c.sent(),u.error_code)throw u;return[4,this.oauthInstance.authApi.signInWithProvider({provider_token:u.provider_token})];case 5:if(l=c.sent(),l!=null&&l.error_code)throw l;return[3,7];case 6:throw s=c.sent(),s;case 7:return[2,this.createLoginState()]}})})},e.prototype.signInWithSms=function(t){var r=t.verificationInfo,n=r===void 0?{verification_id:"",is_user:!1}:r,o=t.verificationCode,i=o===void 0?"":o,a=t.phoneNum,u=a===void 0?"":a,l=t.bindInfo,s=l===void 0?void 0:l;return z(this,void 0,void 0,function(){return J(this,function(c){try{return[2,this.signInWithUsername({verificationInfo:n,verificationCode:i,bindInfo:s,username:u,loginType:"sms"})]}catch(f){throw f}return[2]})})},e.prototype.signInWithEmail=function(t){var r=t.verificationInfo,n=r===void 0?{verification_id:"",is_user:!1}:r,o=t.verificationCode,i=o===void 0?"":o,a=t.bindInfo,u=a===void 0?void 0:a,l=t.email,s=l===void 0?"":l;return z(this,void 0,void 0,function(){return J(this,function(c){try{return[2,this.signInWithUsername({verificationInfo:n,verificationCode:i,bindInfo:u,username:s,loginType:"email"})]}catch(f){throw f}return[2]})})},e.prototype.setCustomSignFunc=function(t){this.oauthInstance.authApi.setCustomSignFunc(t)},e.prototype.signInWithCustomTicket=function(){return z(this,void 0,void 0,function(){return J(this,function(t){switch(t.label){case 0:return[4,this.oauthInstance.authApi.signInWithCustomTicket()];case 1:return t.sent(),[2,this.createLoginState()]}})})},e.prototype.signIn=function(t){return z(this,void 0,void 0,function(){return J(this,function(r){switch(r.label){case 0:return[4,this.oauthInstance.authApi.signIn(t)];case 1:return r.sent(),[2,this.createLoginState(t)]}})})},e.prototype.signUp=function(t){return z(this,void 0,void 0,function(){return J(this,function(r){switch(r.label){case 0:return[4,this.oauthInstance.authApi.signUp(t)];case 1:return r.sent(),[2,this.createLoginState()]}})})},e.prototype.setPassword=function(t){return z(this,void 0,void 0,function(){return J(this,function(r){return[2,this.oauthInstance.authApi.setPassword(t)]})})},e.prototype.isUsernameRegistered=function(t){return z(this,void 0,void 0,function(){var r;return J(this,function(n){switch(n.label){case 0:return typeof t!="string"&&Lu(ve.ERRORS.INVALID_PARAMS,"username must be a string"),[4,this.oauthInstance.authApi.checkIfUserExist({username:t})];case 1:return r=n.sent().exist,[2,r]}})})},e.prototype.signOut=function(t){return z(this,void 0,void 0,function(){var r,n;return J(this,function(o){switch(o.label){case 0:return r=this.cache.keys.userInfoKey,[4,this.oauthInstance.authApi.signOut(t)];case 1:return n=o.sent(),[4,this.cache.removeStoreAsync(r)];case 2:return o.sent(),fa.fire(la.LOGIN_STATE_CHANGED,{eventType:ca.SIGN_OUT}),[2,n]}})})},e.prototype.hasLoginState=function(){var t;if(this.cache.mode==="async"){ja(ve.ERRORS.INVALID_OPERATION,"current platform's storage is asynchronous, please use getLoginState insteed");return}var r=(t=this.oauthInstance)===null||t===void 0?void 0:t.authApi.hasLoginStateSync();if(r){var n=new Uc({envId:this.config.env,cache:this.cache,oauthInstance:this.oauthInstance});return n}return null},e.prototype.getLoginState=function(){return z(this,void 0,void 0,function(){var t,r;return J(this,function(n){switch(n.label){case 0:t=null,n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.oauthInstance.authApi.getLoginState()];case 2:return t=n.sent(),[3,4];case 3:return n.sent(),[2,null];case 4:return t?(r=new Uc({envId:this.config.env,cache:this.cache,oauthInstance:this.oauthInstance}),[2,r]):[2,null]}})})},e.prototype.getUserInfo=function(t){return z(this,void 0,void 0,function(){return J(this,function(r){return[2,this.oauthInstance.authApi.getUserInfo(t)]})})},e.prototype.getWedaUserInfo=function(){return z(this,void 0,void 0,function(){return J(this,function(t){return[2,this.oauthInstance.authApi.getWedaUserInfo()]})})},e.prototype.updateUserBasicInfo=function(t){return z(this,void 0,void 0,function(){var r;return J(this,function(n){switch(n.label){case 0:return[4,this.getLoginState()];case 1:return r=n.sent(),r?[4,r.user.updateUserBasicInfo(t)]:[3,3];case 2:n.sent(),n.label=3;case 3:return[2]}})})},e.prototype.getAuthHeader=function(){return console.error("Auth.getAuthHeader API "),{}},e.prototype.bindWithProvider=function(t){return z(this,void 0,void 0,function(){return J(this,function(r){return[2,this.oauthInstance.authApi.bindWithProvider(t)]})})},e.prototype.queryUser=function(t){return z(this,void 0,void 0,function(){return J(this,function(r){return[2,this.oauthInstance.authApi.queryUserProfile(t)]})})},e.prototype.getAccessToken=function(){return z(this,void 0,void 0,function(){var t;return J(this,function(r){switch(r.label){case 0:return[4,this.oauthInstance.oauth2client.getAccessToken()];case 1:return t=r.sent(),[2,{accessToken:t,env:this.config.env}]}})})},e.prototype.grantProviderToken=function(t){return z(this,void 0,void 0,function(){return J(this,function(r){return[2,this.oauthInstance.authApi.grantProviderToken(t)]})})},e.prototype.patchProviderToken=function(t){return z(this,void 0,void 0,function(){return J(this,function(r){return[2,this.oauthInstance.authApi.patchProviderToken(t)]})})},e.prototype.signInWithProvider=function(t){return z(this,void 0,void 0,function(){return J(this,function(r){switch(r.label){case 0:return[4,this.oauthInstance.authApi.signInWithProvider(t)];case 1:return r.sent(),[2,this.createLoginState(t)]}})})},e.prototype.signInWithWechat=function(t){return t===void 0&&(t={}),z(this,void 0,void 0,function(){return J(this,function(r){switch(r.label){case 0:return[4,this.oauthInstance.authApi.signInWithWechat(t)];case 1:return r.sent(),[2,this.createLoginState(t)]}})})},e.prototype.grantToken=function(t){return z(this,void 0,void 0,function(){return J(this,function(r){switch(r.label){case 0:return[4,this.oauthInstance.authApi.grantToken(t)];case 1:return r.sent(),[2,this.createLoginState()]}})})},e.prototype.genProviderRedirectUri=function(t){return z(this,void 0,void 0,function(){return J(this,function(r){return[2,this.oauthInstance.authApi.genProviderRedirectUri(t)]})})},e.prototype.resetPassword=function(t){return z(this,void 0,void 0,function(){return J(this,function(r){return[2,this.oauthInstance.authApi.resetPassword(t)]})})},e.prototype.deviceAuthorize=function(t){return z(this,void 0,void 0,function(){return J(this,function(r){return[2,this.oauthInstance.authApi.deviceAuthorize(t)]})})},e.prototype.sudo=function(t){return z(this,void 0,void 0,function(){return J(this,function(r){return[2,this.oauthInstance.authApi.sudo(t)]})})},e.prototype.deleteMe=function(t){return z(this,void 0,void 0,function(){return J(this,function(r){return[2,this.oauthInstance.authApi.deleteMe(t)]})})},e.prototype.getProviders=function(){return z(this,void 0,void 0,function(){return J(this,function(t){return[2,this.oauthInstance.authApi.getProviders()]})})},e.prototype.loginScope=function(){return z(this,void 0,void 0,function(){return J(this,function(t){return[2,this.oauthInstance.authApi.loginScope()]})})},e.prototype.loginGroups=function(){return z(this,void 0,void 0,function(){return J(this,function(t){return[2,this.oauthInstance.authApi.loginGroups()]})})},e.prototype.onLoginStateChanged=function(t){return z(this,void 0,void 0,function(){var r,n=this;return J(this,function(o){switch(o.label){case 0:return fa.on(la.LOGIN_STATE_CHANGED,function(i){return z(n,void 0,void 0,function(){var a,u,l;return J(this,function(s){switch(s.label){case 0:return((l=i==null?void 0:i.data)===null||l===void 0?void 0:l.eventType)===ca.CREDENTIALS_ERROR?[3,2]:[4,this.getLoginState()];case 1:return u=s.sent(),[3,3];case 2:u={},s.label=3;case 3:return a=u,t.call(this,ft(ft({},i),a)),[2]}})})}),[4,this.getLoginState()];case 1:return r=o.sent(),t.call(this,r),[2]}})})},e.prototype.refreshTokenForce=function(t){return z(this,void 0,void 0,function(){return J(this,function(r){return[2,this.oauthInstance.authApi.refreshTokenForce(t)]})})},e.prototype.getCredentials=function(){return z(this,void 0,void 0,function(){return J(this,function(t){return[2,this.oauthInstance.authApi.getCredentials()]})})},e.prototype.setCredentials=function(t){return z(this,void 0,void 0,function(){return J(this,function(r){switch(r.label){case 0:return[4,this.oauthInstance.oauth2client.setCredentials(t)];case 1:return r.sent(),[2]}})})},e.prototype.getProviderSubType=function(){return z(this,void 0,void 0,function(){return J(this,function(t){return[2,this.oauthInstance.authApi.getProviderSubType()]})})},e.prototype.createCaptchaData=function(t){return z(this,void 0,void 0,function(){return J(this,function(r){return[2,this.oauthInstance.authApi.createCaptchaData(t)]})})},e.prototype.verifyCaptchaData=function(t){return z(this,void 0,void 0,function(){return J(this,function(r){return[2,this.oauthInstance.authApi.verifyCaptchaData(t)]})})},e.prototype.getMiniProgramQrCode=function(t){return z(this,void 0,void 0,function(){return J(this,function(r){return[2,this.oauthInstance.authApi.getMiniProgramCode(t)]})})},e.prototype.getMiniProgramQrCodeStatus=function(t){return z(this,void 0,void 0,function(){return J(this,function(r){return[2,this.oauthInstance.authApi.getMiniProgramQrCodeStatus(t)]})})},e.prototype.modifyPassword=function(t){return z(this,void 0,void 0,function(){return J(this,function(r){return[2,this.oauthInstance.authApi.modifyPassword(t)]})})},e.prototype.modifyPasswordWithoutLogin=function(t){return z(this,void 0,void 0,function(){return J(this,function(r){return[2,this.oauthInstance.authApi.modifyPasswordWithoutLogin(t)]})})},e.prototype.getUserBehaviorLog=function(t){return z(this,void 0,void 0,function(){return J(this,function(r){return[2,this.oauthInstance.authApi.getUserBehaviorLog(t)]})})},e.prototype.toDefaultLoginPage=function(t){return t===void 0&&(t={}),z(this,void 0,void 0,function(){var r,n,o,i;return J(this,function(a){return r=t.config_version||"env",zr.isMatch()?wx.navigateTo({url:"/packages/$wd_system/pages/login/index"}):(n=t.redirect_uri||window.location.href,o=new URL(n),i="".concat(o.origin,"/__auth/?app_id=").concat(t.app_id||"","&env_id=").concat(this.config.env,"&client_id=").concat(this.config.clientId,"&config_version=").concat(r,"&redirect_uri=").concat(encodeURIComponent(n)),window.location.href=i),[2]})})},e.prototype.createLoginState=function(t,r){return z(this,void 0,void 0,function(){var n;return J(this,function(o){switch(o.label){case 0:return n=new Uc({envId:this.config.env,cache:this.cache,oauthInstance:this.oauthInstance}),[4,n.checkLocalStateAsync()];case 1:return o.sent(),r!=null&&r.asyncRefreshUser?(n.user.refresh(t),[3,4]):[3,2];case 2:return[4,n.user.refresh(t)];case 3:o.sent(),o.label=4;case 4:return fa.fire(la.LOGIN_STATE_CHANGED,{eventType:ca.SIGN_IN}),[2,n]}})})},e.prototype.signInWithUsername=function(t){var r=t.verificationInfo,n=r===void 0?{verification_id:"",is_user:!1}:r,o=t.verificationCode,i=o===void 0?"":o,a=t.username,u=a===void 0?"":a,l=t.bindInfo,s=l===void 0?void 0:l,c=t.loginType,f=c===void 0?"":c;return z(this,void 0,void 0,function(){var d,v,m,b,w,_,E,A;return J(this,function(I){switch(I.label){case 0:return I.trys.push([0,8,,9]),[4,this.oauthInstance.authApi.verify({verification_id:n.verification_id,verification_code:i})];case 1:if(d=I.sent(),d!=null&&d.error_code)throw d;return v=d.verification_token,m="+86 ".concat(u),b={phone_number:m},f==="email"&&(m=u,b={email:m}),n.is_user?[4,this.oauthInstance.authApi.signIn({username:m,verification_token:v})]:[3,5];case 2:if(w=I.sent(),w!=null&&w.error_code)throw w;return s?[4,this.oauthInstance.authApi.bindWithProvider({provider_token:s==null?void 0:s.providerToken})]:[3,4];case 3:if(_=I.sent(),_!=null&&_.error_code)throw _;I.label=4;case 4:return[3,7];case 5:return[4,this.oauthInstance.authApi.signUp(ft(ft({},b),{verification_token:v,provider_token:s==null?void 0:s.providerId}))];case 6:if(E=I.sent(),E!=null&&E.error_code)throw E;I.label=7;case 7:return[2,this.createLoginState()];case 8:throw A=I.sent(),A;case 9:return[2]}})})},Pe([Ce.catchErrorsDecorator({title:"",messages:["","  1 -  auth().bindPhoneNumber() ","  2 - ","".concat(ve.COMMUNITY_SITE_URL)]}),H("design:type",Function),H("design:paramtypes",[Object]),H("design:returntype",Promise)],e.prototype,"bindPhoneNumber",null),Pe([Ce.catchErrorsDecorator({title:"",messages:["","  1 -  auth().unbindProvider() ","  2 - ","".concat(ve.COMMUNITY_SITE_URL)]}),H("design:type",Function),H("design:paramtypes",[Object]),H("design:returntype",Promise)],e.prototype,"unbindProvider",null),Pe([Ce.catchErrorsDecorator({title:"",messages:["","  1 -  auth().bindEmail() ","  2 - ","".concat(ve.COMMUNITY_SITE_URL)]}),H("design:type",Function),H("design:paramtypes",[Object]),H("design:returntype",void 0)],e.prototype,"bindEmail",null),Pe([Ce.catchErrorsDecorator({title:"",messages:["","  1 -  auth().verify() ","  2 - /","".concat(ve.COMMUNITY_SITE_URL)]}),H("design:type",Function),H("design:paramtypes",[Object]),H("design:returntype",Promise)],e.prototype,"verify",null),Pe([Ce.catchErrorsDecorator({title:"",messages:["","  1 -  auth().getVerification() ","  2 - /","".concat(ve.COMMUNITY_SITE_URL)]}),H("design:type",Function),H("design:paramtypes",[Object,Object]),H("design:returntype",Promise)],e.prototype,"getVerification",null),Pe([Ce.catchErrorsDecorator({title:"",messages:["","  1 -  auth().getCurrentUser() ","".concat(ve.COMMUNITY_SITE_URL)]}),H("design:type",Function),H("design:paramtypes",[]),H("design:returntype",Promise)],e.prototype,"getCurrentUser",null),Pe([Ce.catchErrorsDecorator({title:"",messages:["","  1 - ","  2 -  auth().signInAnonymously() ","".concat(ve.COMMUNITY_SITE_URL)]}),H("design:type",Function),H("design:paramtypes",[Object]),H("design:returntype",Promise)],e.prototype,"signInAnonymously",null),Pe([Ce.catchErrorsDecorator({title:"",messages:["","  1 - ","  2 -  auth().signInAnonymouslyInWx() ","".concat(ve.COMMUNITY_SITE_URL)]}),H("design:type",Function),H("design:paramtypes",[Object]),H("design:returntype",Promise)],e.prototype,"signInAnonymouslyInWx",null),Pe([Ce.catchErrorsDecorator({title:"OpenID",messages:["","  1 - openId","  2 -  auth().bindOpenId() ","".concat(ve.COMMUNITY_SITE_URL)]}),H("design:type",Function),H("design:paramtypes",[]),H("design:returntype",Promise)],e.prototype,"bindOpenId",null),Pe([Ce.catchErrorsDecorator({title:"openId",messages:["","  1 - openId","  2 -  auth().signInWithOpenId() ","".concat(ve.COMMUNITY_SITE_URL)]}),H("design:type",Function),H("design:paramtypes",[Object]),H("design:returntype",Promise)],e.prototype,"signInWithOpenId",null),Pe([Ce.catchErrorsDecorator({title:"unionId",messages:["","  1 - unionId","  2 -  auth().signInWithUnionId() ","".concat(ve.COMMUNITY_SITE_URL)]}),H("design:type",Function),H("design:paramtypes",[]),H("design:returntype",Promise)],e.prototype,"signInWithUnionId",null),Pe([Ce.catchErrorsDecorator({title:"",messages:["","  1 - ","  2 -  auth().signInWithPhoneAuth() ","".concat(ve.COMMUNITY_SITE_URL)]}),H("design:type",Function),H("design:paramtypes",[Object]),H("design:returntype",Promise)],e.prototype,"signInWithPhoneAuth",null),Pe([Ce.catchErrorsDecorator({title:"",messages:["","  1 - ","  2 -  auth().signInWithSms() ","".concat(ve.COMMUNITY_SITE_URL)]}),H("design:type",Function),H("design:paramtypes",[Object]),H("design:returntype",Promise)],e.prototype,"signInWithSms",null),Pe([Ce.catchErrorsDecorator({title:"",messages:["","  1 - ","  2 -  auth().signInWithEmail() ","".concat(ve.COMMUNITY_SITE_URL)]}),H("design:type",Function),H("design:paramtypes",[Object]),H("design:returntype",Promise)],e.prototype,"signInWithEmail",null),Pe([Ce.catchErrorsDecorator({title:"",messages:["","  1 - ","  2 -  auth().signInWithCustomTicket() ","  3 - ticket ","  4 -  ticket ","".concat(ve.COMMUNITY_SITE_URL)]}),H("design:type",Function),H("design:paramtypes",[]),H("design:returntype",Promise)],e.prototype,"signInWithCustomTicket",null),Pe([Ce.catchErrorsDecorator({title:"",messages:["","  1 - ","  2 -  auth().signUp() ","".concat(ve.COMMUNITY_SITE_URL)]}),H("design:type",Function),H("design:paramtypes",[Object]),H("design:returntype",Promise)],e.prototype,"signUp",null),Pe([Ce.catchErrorsDecorator({title:"",messages:["","  1 -  auth().isUsernameRegistered() ","".concat(ve.COMMUNITY_SITE_URL)]}),H("design:type",Function),H("design:paramtypes",[String]),H("design:returntype",Promise)],e.prototype,"isUsernameRegistered",null),Pe([Ce.catchErrorsDecorator({title:"",messages:["","  1 -  auth().signOut() ","  2 - signOut","".concat(ve.COMMUNITY_SITE_URL)]}),H("design:type",Function),H("design:paramtypes",[Object]),H("design:returntype",Promise)],e.prototype,"signOut",null),Pe([Ce.catchErrorsDecorator({title:"",messages:["","  1 -  auth().getLoginState() ","".concat(ve.COMMUNITY_SITE_URL)]}),H("design:type",Function),H("design:paramtypes",[]),H("design:returntype",Promise)],e.prototype,"getLoginState",null),Pe([Ce.catchErrorsDecorator({title:"",messages:["","  1 - ","  2 -  auth().getUserInfo() ","".concat(ve.COMMUNITY_SITE_URL)]}),H("design:type",Function),H("design:paramtypes",[Object]),H("design:returntype",Promise)],e.prototype,"getUserInfo",null),Pe([Ce.catchErrorsDecorator({title:"",messages:["","  1 - ","  2 -  auth().getWedaUserInfo() ","".concat(ve.COMMUNITY_SITE_URL)]}),H("design:type",Function),H("design:paramtypes",[]),H("design:returntype",Promise)],e.prototype,"getWedaUserInfo",null),Pe([Ce.catchErrorsDecorator({title:"",messages:["","  1 -  auth().bindWithProvider() ","  2 - ","".concat(ve.COMMUNITY_SITE_URL)]}),H("design:type",Function),H("design:paramtypes",[Object]),H("design:returntype",Promise)],e.prototype,"bindWithProvider",null),Pe([Ce.catchErrorsDecorator({title:"",messages:["","  1 -  auth().getProviderSubType() ","".concat(ve.COMMUNITY_SITE_URL)]}),H("design:type",Function),H("design:paramtypes",[]),H("design:returntype",Promise)],e.prototype,"getProviderSubType",null),e}();function vA(e,t){var r=e.region,n=r===void 0?"ap-shanghai":r,o=e.i18n,i=e.accessKey,a=(t==null?void 0:t.platform)||S0.useDefaultAdapter(),u=a.runtime,l=a.adapter,s=t||{},c=s.env,f=s.clientId,d=s.debug,v=s.cache,m=s.app,b=(t||{}).apiOrigin;b||(b="https://".concat(c,".").concat(n,".tcb-api.tencentcloudapi.com"));var w={env:c,clientId:f,i18n:o,accessKey:i},_=new hO(lA(ft(ft({},w),{apiOrigin:b,apiPath:(e==null?void 0:e.apiPath)||Pu,storage:e==null?void 0:e.storage,baseRequest:e==null?void 0:e.baseRequest,request:e==null?void 0:e.request,anonymousSignInFunc:e==null?void 0:e.anonymousSignInFunc,captchaOptions:e==null?void 0:e.captchaOptions,wxCloud:e==null?void 0:e.wxCloud,adapter:l,onCredentialsError:dA,headers:e.headers||{}}))),E=new pA(ft(ft({},w),{region:n,persistence:e.persistence,debug:d,cache:v||new E0({persistence:e.persistence,keys:{userInfoKey:"user_info_".concat(c)},platformInfo:a}),runtime:u||"web",_fromApp:m,oauthInstance:_}));return{authInstance:E,oauthInstance:_}}var A0={name:fA,namespace:"auth",entity:function(e){if(e===void 0&&(e={region:"",persistence:"local",apiPath:Pu}),this.authInstance)return ja(ve.ERRORS.INVALID_OPERATION,"every cloudbase instance should has only one auth object"),this.authInstance;var t=this.platform.adapter,r=e.persistence||t.primaryStorage;r&&r!==this.config.persistence&&this.updateConfig({persistence:r});var n=vA(ft(ft({wxCloud:this.config.wxCloud,storage:this.config.storage},e),{persistence:this.config.persistence,i18n:this.config.i18n,accessKey:this.config.accessKey}),{env:this.config.env,clientId:this.config.clientId,apiOrigin:this.request.getBaseEndPoint(),platform:this.platform,cache:this.cache,app:this,debug:this.config.debug}),o=n.authInstance,i=n.oauthInstance;return this.oauthInstance=i,this.authInstance=o,this.authInstance}};try{cloudbase.registerComponent(A0)}catch{}function gA(e){try{e.registerComponent(A0)}catch(t){console.warn(t)}}var ka=function(){return ka=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},ka.apply(this,arguments)},R0=function(e,t,r,n){function o(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function u(c){try{s(n.next(c))}catch(f){a(f)}}function l(c){try{s(n.throw(c))}catch(f){a(f)}}function s(c){c.done?i(c.value):o(c.value).then(u,l)}s((n=n.apply(e,t||[])).next())})},C0=function(e,t){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function u(s){return function(c){return l([s,c])}}function l(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(r=0)),r;)try{if(n=1,o&&(i=s[0]&2?o.return:s[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,s[1])).done)return i;switch(o=0,i&&(s=[s[0]&2,i.value]),s[0]){case 0:case 1:i=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,o=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(s[0]===6||s[0]===2)){r=0;continue}if(s[0]===3&&(!i||s[1]>i[0]&&s[1]<i[3])){r.label=s[1];break}if(s[0]===6&&r.label<i[1]){r.label=i[1],i=s;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(s);break}i[2]&&r.ops.pop(),r.trys.pop();continue}s=t.call(e,r)}catch(c){s=[6,c],o=0}finally{n=i=0}if(s[0]&5)throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}},dp=xt,Pl="cloudrun",mA=function(){function e(){}return e.prototype.callContainer=function(t){return R0(this,void 0,void 0,function(){var r,n,o;return C0(this,function(i){switch(i.label){case 0:if(r=t.name,n=t.data,!r)throw new Error(JSON.stringify({code:dp.INVALID_PARAMS,msg:"[".concat(Pl,".callContainer] invalid name")}));try{o=n?JSON.stringify(n):""}catch{throw new Error(JSON.stringify({code:dp.INVALID_PARAMS,msg:"[".concat(Pl,".callContainer] invalid data")}))}return[4,x0.call(this,ka(ka({},t),{data:o}))];case 1:return[2,i.sent()]}})})},e}();function x0(e){return R0(this,void 0,void 0,function(){var t,r,n,o,i,a,u,l,s,c;return C0(this,function(f){switch(f.label){case 0:return t=e.name,r=e.data,n=e.path,o=n===void 0?"":n,i=e.method,a=e.header,u=a===void 0?{}:a,l="https://".concat(this.config.env,".api.tcloudbasegateway.com/v1/cloudrun/").concat(t),s=o.startsWith("/")?o:"/".concat(o),[4,this.request.fetch({method:i||"POST",headers:Object.assign({},{"Content-Type":"application/json; charset=utf-8"},u),body:r,url:"".concat(l).concat(s)})];case 1:return c=f.sent(),[4,c.data];case 2:return[2,f.sent()]}})})}var yA=new mA,P0={name:Pl,entity:{callContainer:yA.callContainer}};try{cloudbase.registerComponent(P0)}catch{}function _A(e){try{e.registerComponent(P0)}catch(t){console.warn(t)}}var qa=function(){return qa=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},qa.apply(this,arguments)},bA=function(e,t,r,n){var o=arguments.length,i=o<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(e,t,r,n);else for(var u=e.length-1;u>=0;u--)(a=e[u])&&(i=(o<3?a(i):o>3?a(t,r,i):a(t,r))||i);return o>3&&i&&Object.defineProperty(t,r,i),i},$c=function(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)},wA=function(e,t,r,n){function o(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function u(c){try{s(n.next(c))}catch(f){a(f)}}function l(c){try{s(n.throw(c))}catch(f){a(f)}}function s(c){c.done?i(c.value):o(c.value).then(u,l)}s((n=n.apply(e,t||[])).next())})},EA=function(e,t){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function u(s){return function(c){return l([s,c])}}function l(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(r=0)),r;)try{if(n=1,o&&(i=s[0]&2?o.return:s[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,s[1])).done)return i;switch(o=0,i&&(s=[s[0]&2,i.value]),s[0]){case 0:case 1:i=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,o=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(s[0]===6||s[0]===2)){r=0;continue}if(s[0]===3&&(!i||s[1]>i[0]&&s[1]<i[3])){r.label=s[1];break}if(s[0]===6&&r.label<i[1]){r.label=i[1],i=s;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(s);break}i[2]&&r.ops.pop(),r.trys.pop();continue}s=t.call(e,r)}catch(c){s=[6,c],o=0}finally{n=i=0}if(s[0]&5)throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}},SA=wu,Fc=xt,IA=Eu,go=Xm,TA=Tu,da="functions",OA=function(){function e(){}return e.prototype.callFunction=function(t,r){var n,o;return wA(this,void 0,void 0,function(){var i,a,u,l,s,c,f,d,v,m,b,w,_,L,E,A,I,R,L,U;return EA(this,function(N){switch(N.label){case 0:if(i=t.name,a=t.data,u=t.query,l=t.parse,s=t.search,c=t.type,f=t.path,d=f===void 0?"":f,v=t.method,m=t.header,b=m===void 0?{}:m,!i)throw new Error(JSON.stringify({code:Fc.INVALID_PARAMS,msg:"[".concat(da,".callFunction] invalid function name")}));try{w=a?JSON.stringify(a):""}catch{throw new Error(JSON.stringify({code:Fc.INVALID_PARAMS,msg:"[".concat(da,".callFunction] invalid data")}))}return c!=="cloudrun"?[3,2]:(_=bI(),[4,x0.call(this,{name:i,data:w,path:d,method:v,header:qa(qa({},b),{"X-Request-Id":_})})]);case 1:return L=N.sent(),[2,{result:L,requestId:_}];case 2:E="functions.invokeFunction",A={inQuery:u,parse:l,search:s,function_name:i,request_data:w},I=this.request,N.label=3;case 3:return N.trys.push([3,5,,6]),[4,I.send(E,A,{defaultQuery:!((n=a==null?void 0:a.params)===null||n===void 0)&&n.action?{action:(o=a==null?void 0:a.params)===null||o===void 0?void 0:o.action}:{}})];case 4:if(R=N.sent(),R.code)return[2,go(r,null,R)];if(L=R.data.response_data,l)return[2,go(r,null,{result:L,requestId:R.requestId})];try{return L=JSON.parse(R.data.response_data),[2,go(r,null,{result:L,requestId:R.requestId})]}catch{go(r,new Error("[".concat(SA(),"][").concat(Fc.INVALID_PARAMS,"][").concat(da,".callFunction] response data must be json")))}return[3,6];case 5:return U=N.sent(),go(r,U),[3,6];case 6:return[2]}})})},bA([TA({customInfo:{},title:"",messages:["","  1 -  callFunction() ","  2 - ","  3 - ","".concat(IA)]}),$c("design:type",Function),$c("design:paramtypes",[Object,Function]),$c("design:returntype",Promise)],e.prototype,"callFunction",null),e}(),AA=new OA,N0={name:da,entity:{callFunction:AA.callFunction}};try{cloudbase.registerComponent(N0)}catch{}function RA(e){try{e.registerComponent(N0)}catch(t){console.warn(t)}}var vn=function(){return vn=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},vn.apply(this,arguments)},mo=function(e,t,r,n){var o=arguments.length,i=o<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(e,t,r,n);else for(var u=e.length-1;u>=0;u--)(a=e[u])&&(i=(o<3?a(i):o>3?a(t,r,i):a(t,r))||i);return o>3&&i&&Object.defineProperty(t,r,i),i},ht=function(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)},yo=function(e,t,r,n){function o(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function u(c){try{s(n.next(c))}catch(f){a(f)}}function l(c){try{s(n.throw(c))}catch(f){a(f)}}function s(c){c.done?i(c.value):o(c.value).then(u,l)}s((n=n.apply(e,t||[])).next())})},_o=function(e,t){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function u(s){return function(c){return l([s,c])}}function l(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(r=0)),r;)try{if(n=1,o&&(i=s[0]&2?o.return:s[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,s[1])).done)return i;switch(o=0,i&&(s=[s[0]&2,i.value]),s[0]){case 0:case 1:i=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,o=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(s[0]===6||s[0]===2)){r=0;continue}if(s[0]===3&&(!i||s[1]>i[0]&&s[1]<i[3])){r.label=s[1];break}if(s[0]===6&&r.label<i[1]){r.label=i[1],i=s;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(s);break}i[2]&&r.ops.pop(),r.trys.pop();continue}s=t.call(e,r)}catch(c){s=[6,c],o=0}finally{n=i=0}if(s[0]&5)throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}},Or;(function(e){e.put="put",e.post="post"})(Or||(Or={}));var CA=wu,Wr=xt,bo=Eu,hp=zm,wo=Jm,xA=mI,br=Xm,Eo=Tu,Sr="storage",PA=function(){function e(){}return e.prototype.uploadFile=function(t,r){return yo(this,void 0,void 0,function(){var n,o,i,a,u,l,s,c,f,d,v,m,b,w,_,E,A,I,R,L,U,N,D,k,M,Q;return _o(this,function(oe){switch(oe.label){case 0:if(n=t.cloudPath,o=t.filePath,i=t.onUploadProgress,a=t.method,u=a===void 0?"put":a,l=t.headers,s=l===void 0?{}:l,!wo(n)||!o)throw new Error(JSON.stringify({code:Wr.INVALID_PARAMS,msg:"[".concat(Sr,".uploadFile] invalid params")}));return c={put:Or.put,post:Or.post}[u.toLocaleLowerCase()]||Or.put,f="storage.getUploadMetadata",d=this.request,v={path:n,method:c},c===Or.put&&(v.headers=s),[4,d.send(f,v)];case 1:return m=oe.sent(),b=m.data,w=b.url,_=b.authorization,E=b.token,A=b.fileId,I=b.cosFileId,R=b.download_url,L=m.requestId,U={url:w,file:o,name:n,onUploadProgress:i},N=vn(vn({},U),{method:Or.put,headers:vn(vn({},s),{authorization:_,"x-cos-meta-fileid":I,"x-cos-security-token":E})}),D=vn(vn({},U),{method:Or.post,data:{key:n,signature:_,"x-cos-meta-fileid":I,success_action_status:"201","x-cos-security-token":E}}),k=(Q={},Q[Or.put]={params:N,isSuccess:function(Y){return Y>=200&&Y<300}},Q[Or.post]={params:D,isSuccess:function(Y){return Y===201}},Q),[4,d.upload(k[c].params)];case 2:return M=oe.sent(),k[c].isSuccess(M.statusCode)?[2,br(r,null,{fileID:A,download_url:R,requestId:L})]:[2,br(r,new Error("[".concat(CA(),"][").concat(Wr.OPERATION_FAIL,"][").concat(Sr,"]:").concat(M.data)))]}})})},e.prototype.getUploadMetadata=function(t,r){return yo(this,void 0,void 0,function(){var n,o,i,a,u;return _o(this,function(l){switch(l.label){case 0:if(n=t.cloudPath,!wo(n))throw new Error(JSON.stringify({code:Wr.INVALID_PARAMS,msg:"[".concat(Sr,".getUploadMetadata] invalid cloudPath")}));o=this.request,i="storage.getUploadMetadata",l.label=1;case 1:return l.trys.push([1,3,,4]),[4,o.send(i,{path:n})];case 2:return a=l.sent(),[2,br(r,null,a)];case 3:return u=l.sent(),[2,br(r,u)];case 4:return[2]}})})},e.prototype.deleteFile=function(t,r){return yo(this,void 0,void 0,function(){var n,o,i,a,u,l,s,c;return _o(this,function(f){switch(f.label){case 0:if(n=t.fileList,!n||!hp(n)||n.length===0)throw new Error(JSON.stringify({code:Wr.INVALID_PARAMS,msg:"[".concat(Sr,".deleteFile] fileList must not be empty")}));for(o=0,i=n;o<i.length;o++)if(a=i[o],!a||!wo(a))throw new Error(JSON.stringify({code:Wr.INVALID_PARAMS,msg:"[".concat(Sr,".deleteFile] fileID must be string")}));return u="storage.batchDeleteFile",l=this.request,[4,l.send(u,{fileid_list:n})];case 1:return s=f.sent(),s.code?[2,br(r,null,s)]:(c={fileList:s.data.delete_list,requestId:s.requestId},[2,br(r,null,c)])}})})},e.prototype.getTempFileURL=function(t,r){return yo(this,void 0,void 0,function(){var n,o,i,a,u,l,s,c;return _o(this,function(f){switch(f.label){case 0:if(n=t.fileList,!n||!hp(n)||n.length===0)throw new Error(JSON.stringify({code:Wr.INVALID_PARAMS,msg:"[".concat(Sr,".getTempFileURL] fileList must not be empty")}));for(o=[],i=0,a=n;i<a.length;i++)if(u=a[i],xA(u)){if(!Object.prototype.hasOwnProperty.call(u,"fileID")||!Object.prototype.hasOwnProperty.call(u,"maxAge"))throw new Error(JSON.stringify({code:Wr.INVALID_PARAMS,msg:"[".concat(Sr,".getTempFileURL] file info must include fileID and maxAge")}));o.push({fileid:u.fileID,max_age:u.maxAge})}else if(wo(u))o.push({fileid:u});else throw new Error(JSON.stringify({code:Wr.INVALID_PARAMS,msg:"[".concat(Sr,".getTempFileURL] invalid fileList")}));return l="storage.batchGetDownloadUrl",s=this.request,[4,s.send(l,{file_list:o})];case 1:return c=f.sent(),c.code?[2,br(r,null,c)]:[2,br(r,null,{fileList:c.data.download_list,requestId:c.requestId})]}})})},e.prototype.downloadFile=function(t,r){return yo(this,void 0,void 0,function(){var n,o,i,a,u,l;return _o(this,function(s){switch(s.label){case 0:if(n=t.fileID,!wo(n))throw new Error(JSON.stringify({code:Wr.INVALID_PARAMS,msg:"[".concat(Sr,".getTempFileURL] fileID must be string")}));return[4,this.getTempFileURL.call(this,{fileList:[{fileID:n,maxAge:600}]})];case 1:return o=s.sent(),i=o.fileList[0],i.code!=="SUCCESS"?[2,br(r,i)]:(a=this.request,u=encodeURI(i.download_url),[4,a.download({url:u})]);case 2:return l=s.sent(),[2,br(r,null,l)]}})})},mo([Eo({customInfo:{},title:"",messages:["","  1 -  uploadFile() ","  2 - https://console.cloud.tencent.com/tcb/env/safety","  3 - ","".concat(bo)]}),ht("design:type",Function),ht("design:paramtypes",[Object,Function]),ht("design:returntype",Promise)],e.prototype,"uploadFile",null),mo([Eo({customInfo:{},title:"",messages:["","  1 -  getUploadMetadata() ","  2 - https://console.cloud.tencent.com/tcb/env/safety","  3 - ","".concat(bo)]}),ht("design:type",Function),ht("design:paramtypes",[Object,Function]),ht("design:returntype",Promise)],e.prototype,"getUploadMetadata",null),mo([Eo({customInfo:{},title:"",messages:["","  1 -  deleteFile() ","  2 - https://console.cloud.tencent.com/tcb/env/safety","  3 - ","".concat(bo)]}),ht("design:type",Function),ht("design:paramtypes",[Object,Function]),ht("design:returntype",Promise)],e.prototype,"deleteFile",null),mo([Eo({customInfo:{},title:"",messages:["","  1 -  getTempFileURL() ","  2 - https://console.cloud.tencent.com/tcb/env/safety","  3 - ","".concat(bo)]}),ht("design:type",Function),ht("design:paramtypes",[Object,Function]),ht("design:returntype",Promise)],e.prototype,"getTempFileURL",null),mo([Eo({customInfo:{},title:"",messages:["","  1 -  downloadFile() ","  2 - https://console.cloud.tencent.com/tcb/env/safety","  3 - ","".concat(bo)]}),ht("design:type",Function),ht("design:paramtypes",[Object,Function]),ht("design:returntype",Promise)],e.prototype,"downloadFile",null),e}(),So=new PA,L0={name:Sr,entity:{uploadFile:So.uploadFile,deleteFile:So.deleteFile,getTempFileURL:So.getTempFileURL,downloadFile:So.downloadFile,getUploadMetadata:So.getUploadMetadata}};try{cloudbase.registerComponent(L0)}catch{}function NA(e){try{e.registerComponent(L0)}catch(t){console.warn(t)}}var LA=typeof de=="object"&&de&&de.Object===Object&&de,D0=LA,DA=D0,UA=typeof self=="object"&&self&&self.Object===Object&&self,$A=DA||UA||Function("return this")(),Mr=$A,FA=Mr,MA=FA.Symbol,Uu=MA,pp=Uu,U0=Object.prototype,BA=U0.hasOwnProperty,jA=U0.toString,Io=pp?pp.toStringTag:void 0;function kA(e){var t=BA.call(e,Io),r=e[Io];try{e[Io]=void 0;var n=!0}catch{}var o=jA.call(e);return n&&(t?e[Io]=r:delete e[Io]),o}var qA=kA,WA=Object.prototype,HA=WA.toString;function GA(e){return HA.call(e)}var VA=GA,vp=Uu,KA=qA,zA=VA,JA="[object Null]",YA="[object Undefined]",gp=vp?vp.toStringTag:void 0;function QA(e){return e==null?e===void 0?YA:JA:gp&&gp in Object(e)?KA(e):zA(e)}var Is=QA;function XA(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var to=XA,ZA=Is,eR=to,tR="[object AsyncFunction]",rR="[object Function]",nR="[object GeneratorFunction]",iR="[object Proxy]";function oR(e){if(!eR(e))return!1;var t=ZA(e);return t==rR||t==nR||t==tR||t==iR}var $0=oR,sR=Mr,aR=sR["__core-js_shared__"],uR=aR,Mc=uR,mp=function(){var e=/[^.]+$/.exec(Mc&&Mc.keys&&Mc.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function cR(e){return!!mp&&mp in e}var lR=cR,fR=Function.prototype,dR=fR.toString;function hR(e){if(e!=null){try{return dR.call(e)}catch{}try{return e+""}catch{}}return""}var F0=hR,pR=$0,vR=lR,gR=to,mR=F0,yR=/[\\^$.*+?()[\]{}|]/g,_R=/^\[object .+?Constructor\]$/,bR=Function.prototype,wR=Object.prototype,ER=bR.toString,SR=wR.hasOwnProperty,IR=RegExp("^"+ER.call(SR).replace(yR,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function TR(e){if(!gR(e)||vR(e))return!1;var t=pR(e)?IR:_R;return t.test(mR(e))}var OR=TR;function AR(e,t){return e==null?void 0:e[t]}var RR=AR,CR=OR,xR=RR;function PR(e,t){var r=xR(e,t);return CR(r)?r:void 0}var vi=PR,NR=vi,LR=function(){try{var e=NR(Object,"defineProperty");return e({},"",{}),e}catch{}}(),DR=LR,yp=DR;function UR(e,t,r){t=="__proto__"&&yp?yp(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}var M0=UR;function $R(e,t){return e===t||e!==e&&t!==t}var B0=$R,FR=M0,MR=B0,BR=Object.prototype,jR=BR.hasOwnProperty;function kR(e,t,r){var n=e[t];(!(jR.call(e,t)&&MR(n,r))||r===void 0&&!(t in e))&&FR(e,t,r)}var Yf=kR,qR=Array.isArray,ro=qR;function WR(e){return e!=null&&typeof e=="object"}var no=WR,HR=Is,GR=no,VR="[object Symbol]";function KR(e){return typeof e=="symbol"||GR(e)&&HR(e)==VR}var Qf=KR,zR=ro,JR=Qf,YR=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,QR=/^\w*$/;function XR(e,t){if(zR(e))return!1;var r=typeof e;return r=="number"||r=="symbol"||r=="boolean"||e==null||JR(e)?!0:QR.test(e)||!YR.test(e)||t!=null&&e in Object(t)}var ZR=XR,eC=vi,tC=eC(Object,"create"),$u=tC,_p=$u;function rC(){this.__data__=_p?_p(null):{},this.size=0}var nC=rC;function iC(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var oC=iC,sC=$u,aC="__lodash_hash_undefined__",uC=Object.prototype,cC=uC.hasOwnProperty;function lC(e){var t=this.__data__;if(sC){var r=t[e];return r===aC?void 0:r}return cC.call(t,e)?t[e]:void 0}var fC=lC,dC=$u,hC=Object.prototype,pC=hC.hasOwnProperty;function vC(e){var t=this.__data__;return dC?t[e]!==void 0:pC.call(t,e)}var gC=vC,mC=$u,yC="__lodash_hash_undefined__";function _C(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=mC&&t===void 0?yC:t,this}var bC=_C,wC=nC,EC=oC,SC=fC,IC=gC,TC=bC;function io(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}io.prototype.clear=wC;io.prototype.delete=EC;io.prototype.get=SC;io.prototype.has=IC;io.prototype.set=TC;var OC=io;function AC(){this.__data__=[],this.size=0}var RC=AC,CC=B0;function xC(e,t){for(var r=e.length;r--;)if(CC(e[r][0],t))return r;return-1}var Fu=xC,PC=Fu,NC=Array.prototype,LC=NC.splice;function DC(e){var t=this.__data__,r=PC(t,e);if(r<0)return!1;var n=t.length-1;return r==n?t.pop():LC.call(t,r,1),--this.size,!0}var UC=DC,$C=Fu;function FC(e){var t=this.__data__,r=$C(t,e);return r<0?void 0:t[r][1]}var MC=FC,BC=Fu;function jC(e){return BC(this.__data__,e)>-1}var kC=jC,qC=Fu;function WC(e,t){var r=this.__data__,n=qC(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}var HC=WC,GC=RC,VC=UC,KC=MC,zC=kC,JC=HC;function oo(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}oo.prototype.clear=GC;oo.prototype.delete=VC;oo.prototype.get=KC;oo.prototype.has=zC;oo.prototype.set=JC;var Mu=oo,YC=vi,QC=Mr,XC=YC(QC,"Map"),Xf=XC,bp=OC,ZC=Mu,ex=Xf;function tx(){this.size=0,this.__data__={hash:new bp,map:new(ex||ZC),string:new bp}}var rx=tx;function nx(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var ix=nx,ox=ix;function sx(e,t){var r=e.__data__;return ox(t)?r[typeof t=="string"?"string":"hash"]:r.map}var Bu=sx,ax=Bu;function ux(e){var t=ax(this,e).delete(e);return this.size-=t?1:0,t}var cx=ux,lx=Bu;function fx(e){return lx(this,e).get(e)}var dx=fx,hx=Bu;function px(e){return hx(this,e).has(e)}var vx=px,gx=Bu;function mx(e,t){var r=gx(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}var yx=mx,_x=rx,bx=cx,Ex=dx,Sx=vx,Ix=yx;function so(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}so.prototype.clear=_x;so.prototype.delete=bx;so.prototype.get=Ex;so.prototype.has=Sx;so.prototype.set=Ix;var j0=so,k0=j0,Tx="Expected a function";function Zf(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(Tx);var r=function(){var n=arguments,o=t?t.apply(this,n):n[0],i=r.cache;if(i.has(o))return i.get(o);var a=e.apply(this,n);return r.cache=i.set(o,a)||i,a};return r.cache=new(Zf.Cache||k0),r}Zf.Cache=k0;var Ox=Zf,Ax=Ox,Rx=500;function Cx(e){var t=Ax(e,function(n){return r.size===Rx&&r.clear(),n}),r=t.cache;return t}var xx=Cx,Px=xx,Nx=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Lx=/\\(\\)?/g,Dx=Px(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(Nx,function(r,n,o,i){t.push(o?i.replace(Lx,"$1"):n||r)}),t}),Ux=Dx;function $x(e,t){for(var r=-1,n=e==null?0:e.length,o=Array(n);++r<n;)o[r]=t(e[r],r,e);return o}var Fx=$x,wp=Uu,Mx=Fx,Bx=ro,jx=Qf,Ep=wp?wp.prototype:void 0,Sp=Ep?Ep.toString:void 0;function q0(e){if(typeof e=="string")return e;if(Bx(e))return Mx(e,q0)+"";if(jx(e))return Sp?Sp.call(e):"";var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}var kx=q0,qx=kx;function Wx(e){return e==null?"":qx(e)}var Hx=Wx,Gx=ro,Vx=ZR,Kx=Ux,zx=Hx;function Jx(e,t){return Gx(e)?e:Vx(e,t)?[e]:Kx(zx(e))}var ed=Jx,Yx=9007199254740991,Qx=/^(?:0|[1-9]\d*)$/;function Xx(e,t){var r=typeof e;return t=t??Yx,!!t&&(r=="number"||r!="symbol"&&Qx.test(e))&&e>-1&&e%1==0&&e<t}var W0=Xx,Zx=Qf;function eP(e){if(typeof e=="string"||Zx(e))return e;var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}var td=eP,tP=Yf,rP=ed,nP=W0,Ip=to,iP=td;function oP(e,t,r,n){if(!Ip(e))return e;t=rP(t,e);for(var o=-1,i=t.length,a=i-1,u=e;u!=null&&++o<i;){var l=iP(t[o]),s=r;if(l==="__proto__"||l==="constructor"||l==="prototype")return e;if(o!=a){var c=u[l];s=n?n(c,l,u):void 0,s===void 0&&(s=Ip(c)?c:nP(t[o+1])?[]:{})}tP(u,l,s),u=u[l]}return e}var sP=oP,aP=sP;function uP(e,t,r){return e==null?e:aP(e,t,r)}var cP=uP;const lP=Gf(cP);function fP(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}var dP=fP,hP=ed,pP=td;function vP(e,t){t=hP(t,e);for(var r=0,n=t.length;e!=null&&r<n;)e=e[pP(t[r++])];return r&&r==n?e:void 0}var gP=vP;function mP(e,t,r){var n=-1,o=e.length;t<0&&(t=-t>o?0:o+t),r=r>o?o:r,r<0&&(r+=o),o=t>r?0:r-t>>>0,t>>>=0;for(var i=Array(o);++n<o;)i[n]=e[n+t];return i}var yP=mP,_P=gP,bP=yP;function wP(e,t){return t.length<2?e:_P(e,bP(t,0,-1))}var EP=wP,SP=ed,IP=dP,TP=EP,OP=td;function AP(e,t){return t=SP(t,e),e=TP(e,t),e==null||delete e[OP(IP(t))]}var RP=AP,CP=RP;function xP(e,t){return e==null?!0:CP(e,t)}var PP=xP;const NP=Gf(PP);var LP=Mu;function DP(){this.__data__=new LP,this.size=0}var UP=DP;function $P(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}var FP=$P;function MP(e){return this.__data__.get(e)}var BP=MP;function jP(e){return this.__data__.has(e)}var kP=jP,qP=Mu,WP=Xf,HP=j0,GP=200;function VP(e,t){var r=this.__data__;if(r instanceof qP){var n=r.__data__;if(!WP||n.length<GP-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new HP(n)}return r.set(e,t),this.size=r.size,this}var KP=VP,zP=Mu,JP=UP,YP=FP,QP=BP,XP=kP,ZP=KP;function ao(e){var t=this.__data__=new zP(e);this.size=t.size}ao.prototype.clear=JP;ao.prototype.delete=YP;ao.prototype.get=QP;ao.prototype.has=XP;ao.prototype.set=ZP;var e2=ao;function t2(e,t){for(var r=-1,n=e==null?0:e.length;++r<n&&t(e[r],r,e)!==!1;);return e}var r2=t2,n2=Yf,i2=M0;function o2(e,t,r,n){var o=!r;r||(r={});for(var i=-1,a=t.length;++i<a;){var u=t[i],l=n?n(r[u],e[u],u,r,e):void 0;l===void 0&&(l=e[u]),o?i2(r,u,l):n2(r,u,l)}return r}var ju=o2;function s2(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}var a2=s2,u2=Is,c2=no,l2="[object Arguments]";function f2(e){return c2(e)&&u2(e)==l2}var d2=f2,Tp=d2,h2=no,H0=Object.prototype,p2=H0.hasOwnProperty,v2=H0.propertyIsEnumerable,g2=Tp(function(){return arguments}())?Tp:function(e){return h2(e)&&p2.call(e,"callee")&&!v2.call(e,"callee")},m2=g2,Wa={exports:{}};function y2(){return!1}var _2=y2;Wa.exports;(function(e,t){var r=Mr,n=_2,o=t&&!t.nodeType&&t,i=o&&!0&&e&&!e.nodeType&&e,a=i&&i.exports===o,u=a?r.Buffer:void 0,l=u?u.isBuffer:void 0,s=l||n;e.exports=s})(Wa,Wa.exports);var G0=Wa.exports,b2=9007199254740991;function w2(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=b2}var V0=w2,E2=Is,S2=V0,I2=no,T2="[object Arguments]",O2="[object Array]",A2="[object Boolean]",R2="[object Date]",C2="[object Error]",x2="[object Function]",P2="[object Map]",N2="[object Number]",L2="[object Object]",D2="[object RegExp]",U2="[object Set]",$2="[object String]",F2="[object WeakMap]",M2="[object ArrayBuffer]",B2="[object DataView]",j2="[object Float32Array]",k2="[object Float64Array]",q2="[object Int8Array]",W2="[object Int16Array]",H2="[object Int32Array]",G2="[object Uint8Array]",V2="[object Uint8ClampedArray]",K2="[object Uint16Array]",z2="[object Uint32Array]",Fe={};Fe[j2]=Fe[k2]=Fe[q2]=Fe[W2]=Fe[H2]=Fe[G2]=Fe[V2]=Fe[K2]=Fe[z2]=!0;Fe[T2]=Fe[O2]=Fe[M2]=Fe[A2]=Fe[B2]=Fe[R2]=Fe[C2]=Fe[x2]=Fe[P2]=Fe[N2]=Fe[L2]=Fe[D2]=Fe[U2]=Fe[$2]=Fe[F2]=!1;function J2(e){return I2(e)&&S2(e.length)&&!!Fe[E2(e)]}var Y2=J2;function Q2(e){return function(t){return e(t)}}var rd=Q2,Ha={exports:{}};Ha.exports;(function(e,t){var r=D0,n=t&&!t.nodeType&&t,o=n&&!0&&e&&!e.nodeType&&e,i=o&&o.exports===n,a=i&&r.process,u=function(){try{var l=o&&o.require&&o.require("util").types;return l||a&&a.binding&&a.binding("util")}catch{}}();e.exports=u})(Ha,Ha.exports);var nd=Ha.exports,X2=Y2,Z2=rd,Op=nd,Ap=Op&&Op.isTypedArray,eN=Ap?Z2(Ap):X2,tN=eN,rN=a2,nN=m2,iN=ro,oN=G0,sN=W0,aN=tN,uN=Object.prototype,cN=uN.hasOwnProperty;function lN(e,t){var r=iN(e),n=!r&&nN(e),o=!r&&!n&&oN(e),i=!r&&!n&&!o&&aN(e),a=r||n||o||i,u=a?rN(e.length,String):[],l=u.length;for(var s in e)(t||cN.call(e,s))&&!(a&&(s=="length"||o&&(s=="offset"||s=="parent")||i&&(s=="buffer"||s=="byteLength"||s=="byteOffset")||sN(s,l)))&&u.push(s);return u}var K0=lN,fN=Object.prototype;function dN(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||fN;return e===r}var id=dN;function hN(e,t){return function(r){return e(t(r))}}var z0=hN,pN=z0,vN=pN(Object.keys,Object),gN=vN,mN=id,yN=gN,_N=Object.prototype,bN=_N.hasOwnProperty;function wN(e){if(!mN(e))return yN(e);var t=[];for(var r in Object(e))bN.call(e,r)&&r!="constructor"&&t.push(r);return t}var EN=wN,SN=$0,IN=V0;function TN(e){return e!=null&&IN(e.length)&&!SN(e)}var J0=TN,ON=K0,AN=EN,RN=J0;function CN(e){return RN(e)?ON(e):AN(e)}var od=CN,xN=ju,PN=od;function NN(e,t){return e&&xN(t,PN(t),e)}var LN=NN;function DN(e){var t=[];if(e!=null)for(var r in Object(e))t.push(r);return t}var UN=DN,$N=to,FN=id,MN=UN,BN=Object.prototype,jN=BN.hasOwnProperty;function kN(e){if(!$N(e))return MN(e);var t=FN(e),r=[];for(var n in e)n=="constructor"&&(t||!jN.call(e,n))||r.push(n);return r}var qN=kN,WN=K0,HN=qN,GN=J0;function VN(e){return GN(e)?WN(e,!0):HN(e)}var sd=VN,KN=ju,zN=sd;function JN(e,t){return e&&KN(t,zN(t),e)}var YN=JN,Ga={exports:{}};Ga.exports;(function(e,t){var r=Mr,n=t&&!t.nodeType&&t,o=n&&!0&&e&&!e.nodeType&&e,i=o&&o.exports===n,a=i?r.Buffer:void 0,u=a?a.allocUnsafe:void 0;function l(s,c){if(c)return s.slice();var f=s.length,d=u?u(f):new s.constructor(f);return s.copy(d),d}e.exports=l})(Ga,Ga.exports);var QN=Ga.exports;function XN(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}var ZN=XN;function eL(e,t){for(var r=-1,n=e==null?0:e.length,o=0,i=[];++r<n;){var a=e[r];t(a,r,e)&&(i[o++]=a)}return i}var tL=eL;function rL(){return[]}var Y0=rL,nL=tL,iL=Y0,oL=Object.prototype,sL=oL.propertyIsEnumerable,Rp=Object.getOwnPropertySymbols,aL=Rp?function(e){return e==null?[]:(e=Object(e),nL(Rp(e),function(t){return sL.call(e,t)}))}:iL,ad=aL,uL=ju,cL=ad;function lL(e,t){return uL(e,cL(e),t)}var fL=lL;function dL(e,t){for(var r=-1,n=t.length,o=e.length;++r<n;)e[o+r]=t[r];return e}var Q0=dL,hL=z0,pL=hL(Object.getPrototypeOf,Object),X0=pL,vL=Q0,gL=X0,mL=ad,yL=Y0,_L=Object.getOwnPropertySymbols,bL=_L?function(e){for(var t=[];e;)vL(t,mL(e)),e=gL(e);return t}:yL,Z0=bL,wL=ju,EL=Z0;function SL(e,t){return wL(e,EL(e),t)}var IL=SL,TL=Q0,OL=ro;function AL(e,t,r){var n=t(e);return OL(e)?n:TL(n,r(e))}var e_=AL,RL=e_,CL=ad,xL=od;function PL(e){return RL(e,xL,CL)}var NL=PL,LL=e_,DL=Z0,UL=sd;function $L(e){return LL(e,UL,DL)}var FL=$L,ML=vi,BL=Mr,jL=ML(BL,"DataView"),kL=jL,qL=vi,WL=Mr,HL=qL(WL,"Promise"),GL=HL,VL=vi,KL=Mr,zL=VL(KL,"Set"),JL=zL,YL=vi,QL=Mr,XL=YL(QL,"WeakMap"),ZL=XL,Nl=kL,Ll=Xf,Dl=GL,Ul=JL,$l=ZL,t_=Is,uo=F0,Cp="[object Map]",eD="[object Object]",xp="[object Promise]",Pp="[object Set]",Np="[object WeakMap]",Lp="[object DataView]",tD=uo(Nl),rD=uo(Ll),nD=uo(Dl),iD=uo(Ul),oD=uo($l),Hn=t_;(Nl&&Hn(new Nl(new ArrayBuffer(1)))!=Lp||Ll&&Hn(new Ll)!=Cp||Dl&&Hn(Dl.resolve())!=xp||Ul&&Hn(new Ul)!=Pp||$l&&Hn(new $l)!=Np)&&(Hn=function(e){var t=t_(e),r=t==eD?e.constructor:void 0,n=r?uo(r):"";if(n)switch(n){case tD:return Lp;case rD:return Cp;case nD:return xp;case iD:return Pp;case oD:return Np}return t});var ud=Hn,sD=Object.prototype,aD=sD.hasOwnProperty;function uD(e){var t=e.length,r=new e.constructor(t);return t&&typeof e[0]=="string"&&aD.call(e,"index")&&(r.index=e.index,r.input=e.input),r}var cD=uD,lD=Mr,fD=lD.Uint8Array,dD=fD,Dp=dD;function hD(e){var t=new e.constructor(e.byteLength);return new Dp(t).set(new Dp(e)),t}var cd=hD,pD=cd;function vD(e,t){var r=t?pD(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}var gD=vD,mD=/\w*$/;function yD(e){var t=new e.constructor(e.source,mD.exec(e));return t.lastIndex=e.lastIndex,t}var _D=yD,Up=Uu,$p=Up?Up.prototype:void 0,Fp=$p?$p.valueOf:void 0;function bD(e){return Fp?Object(Fp.call(e)):{}}var wD=bD,ED=cd;function SD(e,t){var r=t?ED(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}var ID=SD,TD=cd,OD=gD,AD=_D,RD=wD,CD=ID,xD="[object Boolean]",PD="[object Date]",ND="[object Map]",LD="[object Number]",DD="[object RegExp]",UD="[object Set]",$D="[object String]",FD="[object Symbol]",MD="[object ArrayBuffer]",BD="[object DataView]",jD="[object Float32Array]",kD="[object Float64Array]",qD="[object Int8Array]",WD="[object Int16Array]",HD="[object Int32Array]",GD="[object Uint8Array]",VD="[object Uint8ClampedArray]",KD="[object Uint16Array]",zD="[object Uint32Array]";function JD(e,t,r){var n=e.constructor;switch(t){case MD:return TD(e);case xD:case PD:return new n(+e);case BD:return OD(e,r);case jD:case kD:case qD:case WD:case HD:case GD:case VD:case KD:case zD:return CD(e,r);case ND:return new n;case LD:case $D:return new n(e);case DD:return AD(e);case UD:return new n;case FD:return RD(e)}}var YD=JD,QD=to,Mp=Object.create,XD=function(){function e(){}return function(t){if(!QD(t))return{};if(Mp)return Mp(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}(),ZD=XD,e3=ZD,t3=X0,r3=id;function n3(e){return typeof e.constructor=="function"&&!r3(e)?e3(t3(e)):{}}var i3=n3,o3=ud,s3=no,a3="[object Map]";function u3(e){return s3(e)&&o3(e)==a3}var c3=u3,l3=c3,f3=rd,Bp=nd,jp=Bp&&Bp.isMap,d3=jp?f3(jp):l3,h3=d3,p3=ud,v3=no,g3="[object Set]";function m3(e){return v3(e)&&p3(e)==g3}var y3=m3,_3=y3,b3=rd,kp=nd,qp=kp&&kp.isSet,w3=qp?b3(qp):_3,E3=w3,S3=e2,I3=r2,T3=Yf,O3=LN,A3=YN,R3=QN,C3=ZN,x3=fL,P3=IL,N3=NL,L3=FL,D3=ud,U3=cD,$3=YD,F3=i3,M3=ro,B3=G0,j3=h3,k3=to,q3=E3,W3=od,H3=sd,G3=1,V3=2,K3=4,r_="[object Arguments]",z3="[object Array]",J3="[object Boolean]",Y3="[object Date]",Q3="[object Error]",n_="[object Function]",X3="[object GeneratorFunction]",Z3="[object Map]",eU="[object Number]",i_="[object Object]",tU="[object RegExp]",rU="[object Set]",nU="[object String]",iU="[object Symbol]",oU="[object WeakMap]",sU="[object ArrayBuffer]",aU="[object DataView]",uU="[object Float32Array]",cU="[object Float64Array]",lU="[object Int8Array]",fU="[object Int16Array]",dU="[object Int32Array]",hU="[object Uint8Array]",pU="[object Uint8ClampedArray]",vU="[object Uint16Array]",gU="[object Uint32Array]",Le={};Le[r_]=Le[z3]=Le[sU]=Le[aU]=Le[J3]=Le[Y3]=Le[uU]=Le[cU]=Le[lU]=Le[fU]=Le[dU]=Le[Z3]=Le[eU]=Le[i_]=Le[tU]=Le[rU]=Le[nU]=Le[iU]=Le[hU]=Le[pU]=Le[vU]=Le[gU]=!0;Le[Q3]=Le[n_]=Le[oU]=!1;function ha(e,t,r,n,o,i){var a,u=t&G3,l=t&V3,s=t&K3;if(r&&(a=o?r(e,n,o,i):r(e)),a!==void 0)return a;if(!k3(e))return e;var c=M3(e);if(c){if(a=U3(e),!u)return C3(e,a)}else{var f=D3(e),d=f==n_||f==X3;if(B3(e))return R3(e,u);if(f==i_||f==r_||d&&!o){if(a=l||d?{}:F3(e),!u)return l?P3(e,A3(a,e)):x3(e,O3(a,e))}else{if(!Le[f])return o?e:{};a=$3(e,f,u)}}i||(i=new S3);var v=i.get(e);if(v)return v;i.set(e,a),q3(e)?e.forEach(function(w){a.add(ha(w,t,r,w,e,i))}):j3(e)&&e.forEach(function(w,_){a.set(_,ha(w,t,r,_,e,i))});var m=s?l?L3:N3:l?H3:W3,b=c?void 0:m(e);return I3(b||e,function(w,_){b&&(_=w,w=e[_]),T3(a,_,ha(w,t,r,_,e,i))}),a}var mU=ha,yU=mU,_U=1,bU=4;function wU(e){return yU(e,_U|bU)}var EU=wU;const SU=Gf(EU);function Ri(e){return e===void 0&&(e=""),"".concat(e?"".concat(e,"_"):"").concat(+new Date,"_").concat(Math.random())}var IU=function(){function e(t){this.close=t.close,this.onChange=t.onChange,this.onError=t.onError,t.debug&&Object.defineProperty(this,"virtualClient",{get:function(){return t.virtualClient}})}return e}(),Wp=function(){function e(t){var r=t.id,n=t.docChanges,o=t.docs,i=t.msgType,a=t.type,u,l;Object.defineProperties(this,{id:{get:function(){return r},enumerable:!0},docChanges:{get:function(){return u||(u=JSON.parse(JSON.stringify(n))),u},enumerable:!0},docs:{get:function(){return l||(l=JSON.parse(JSON.stringify(o))),l},enumerable:!0},msgType:{get:function(){return i},enumerable:!0},type:{get:function(){return a},enumerable:!0}})}return e}(),ku=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),TU=function(e){ku(t,e);function t(r){var n=e.call(this,"Watch Error ".concat(JSON.stringify(r.msgData)," (requestid: ").concat(r.requestId,")"))||this;return n.isRealtimeErrorMessageError=!0,n.payload=r,n}return t}(Error),Hp=function(e){return e==null?void 0:e.isRealtimeErrorMessageError},OU=function(e){ku(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type="timeout",r.payload=null,r.generic=!0,r}return t}(Error),AU=function(e){return e.type==="timeout"},RU=function(e){ku(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type="cancelled",r.payload=null,r.generic=!0,r}return t}(Error),CU=function(e){return e.type==="cancelled"},Vt=function(e){ku(t,e);function t(r){var n=e.call(this,r.errMsg)||this;return n.errCode="UNKNOWN_ERROR",Object.defineProperties(n,{message:{get:function(){return"errCode: ".concat(this.errCode," ").concat(At[this.errCode]||""," | errMsg: ").concat(this.errMsg)},set:function(o){this.errMsg=o}}}),n.errCode=r.errCode||"UNKNOWN_ERROR",n.errMsg=r.errMsg,n}return Object.defineProperty(t.prototype,"message",{get:function(){return"errCode: ".concat(this.errCode," | errMsg: ").concat(this.errMsg)},set:function(r){this.errMsg=r},enumerable:!1,configurable:!0}),t}(Error),At={UNKNOWN_ERROR:"UNKNOWN_ERROR",SDK_DATABASE_REALTIME_LISTENER_INIT_WATCH_FAIL:"SDK_DATABASE_REALTIME_LISTENER_INIT_WATCH_FAIL",SDK_DATABASE_REALTIME_LISTENER_RECONNECT_WATCH_FAIL:"SDK_DATABASE_REALTIME_LISTENER_RECONNECT_WATCH_FAIL",SDK_DATABASE_REALTIME_LISTENER_REBUILD_WATCH_FAIL:"SDK_DATABASE_REALTIME_LISTENER_REBUILD_WATCH_FAIL",SDK_DATABASE_REALTIME_LISTENER_CLOSE_WATCH_FAIL:"SDK_DATABASE_REALTIME_LISTENER_CLOSE_WATCH_FAIL",SDK_DATABASE_REALTIME_LISTENER_SERVER_ERROR_MSG:"SDK_DATABASE_REALTIME_LISTENER_SERVER_ERROR_MSG",SDK_DATABASE_REALTIME_LISTENER_RECEIVE_INVALID_SERVER_DATA:"SDK_DATABASE_REALTIME_LISTENER_RECEIVE_INVALID_SERVER_DATA",SDK_DATABASE_REALTIME_LISTENER_WEBSOCKET_CONNECTION_ERROR:"SDK_DATABASE_REALTIME_LISTENER_WEBSOCKET_CONNECTION_ERROR",SDK_DATABASE_REALTIME_LISTENER_WEBSOCKET_CONNECTION_CLOSED:"SDK_DATABASE_REALTIME_LISTENER_WEBSOCKET_CONNECTION_CLOSED",SDK_DATABASE_REALTIME_LISTENER_CHECK_LAST_FAIL:"SDK_DATABASE_REALTIME_LISTENER_CHECK_LAST_FAIL",SDK_DATABASE_REALTIME_LISTENER_UNEXPECTED_FATAL_ERROR:"SDK_DATABASE_REALTIME_LISTENER_UNEXPECTED_FATAL_ERROR"},Fl=function(e){return e===void 0&&(e=0),new Promise(function(t){return setTimeout(t,e)})},Lt=function(e,t,r,n){function o(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function u(c){try{s(n.next(c))}catch(f){a(f)}}function l(c){try{s(n.throw(c))}catch(f){a(f)}}function s(c){c.done?i(c.value):o(c.value).then(u,l)}s((n=n.apply(e,t||[])).next())})},bt=function(e,t){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function u(s){return function(c){return l([s,c])}}function l(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(r=0)),r;)try{if(n=1,o&&(i=s[0]&2?o.return:s[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,s[1])).done)return i;switch(o=0,i&&(s=[s[0]&2,i.value]),s[0]){case 0:case 1:i=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,o=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(s[0]===6||s[0]===2)){r=0;continue}if(s[0]===3&&(!i||s[1]>i[0]&&s[1]<i[3])){r.label=s[1];break}if(s[0]===6&&r.label<i[1]){r.label=i[1],i=s;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(s);break}i[2]&&r.ops.pop(),r.trys.pop();continue}s=t.call(e,r)}catch(c){s=[6,c],o=0}finally{n=i=0}if(s[0]&5)throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}},Gp=function(e,t,r){if(r||arguments.length===2)for(var n=0,o=t.length,i;n<o;n++)(i||!(n in t))&&(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return e.concat(i||Array.prototype.slice.call(t))},xe;(function(e){e.LOGGINGIN="LOGGINGIN",e.INITING="INITING",e.REBUILDING="REBUILDING",e.ACTIVE="ACTIVE",e.ERRORED="ERRORED",e.CLOSING="CLOSING",e.CLOSED="CLOSED",e.PAUSED="PAUSED",e.RESUMING="RESUMING"})(xe||(xe={}));var xU=100,qs=2,PU=2,NU=10*1e3,LU=10*1e3,DU=10*1e3,UU=function(){function e(t){var r=this;this.watchStatus=xe.INITING,this.wsLogin=function(n,o){return Lt(r,void 0,void 0,function(){var i;return bt(this,function(a){switch(a.label){case 0:return this.watchStatus=xe.LOGGINGIN,[4,this.login(n,o)];case 1:return i=a.sent(),this.envId||(this.envId=i.envId),[2,i]}})})},this.initWatch=function(n){return Lt(r,void 0,void 0,function(){var o,i=this;return bt(this,function(a){switch(a.label){case 0:if(this.initWatchPromise!==null&&this.initWatchPromise!==void 0)return[2,this.initWatchPromise];this.initWatchPromise=new Promise(function(u,l){(function(){return Lt(i,void 0,void 0,function(){var s,c,f,d,v,m,b,w,_,E,A;return bt(this,function(I){switch(I.label){case 0:return I.trys.push([0,3,,4]),this.watchStatus===xe.PAUSED?(console.log("[realtime] initWatch cancelled on pause"),[2,u()]):[4,this.wsLogin(this.envId,n)];case 1:return s=I.sent().envId,this.watchStatus===xe.PAUSED?(console.log("[realtime] initWatch cancelled on pause"),[2,u()]):(this.watchStatus=xe.INITING,c={watchId:this.watchId,requestId:Ri(),msgType:"INIT_WATCH",msgData:{envId:s,collName:this.collectionName,query:this.query,limit:this.limit,orderBy:this.orderBy}},[4,this.send({msg:c,waitResponse:!0,skipOnMessage:!0,timeout:LU})]);case 2:if(f=I.sent(),d=f.msgData,v=d.events,m=d.currEvent,this.sessionInfo={queryID:f.msgData.queryID,currentEventId:m-1,currentDocs:[]},v.length>0){for(b=0,w=v;b<w.length;b++)_=w[b],_.ID=m;this.handleServerEvents(f)}else this.sessionInfo.currentEventId=m,E=new Wp({id:m,docChanges:[],docs:[],type:"init"}),this.listener.onChange(E),this.scheduleSendACK();return this.onWatchStart(this,this.sessionInfo.queryID),this.watchStatus=xe.ACTIVE,this.availableRetries.INIT_WATCH=qs,u(),[3,4];case 3:return A=I.sent(),this.handleWatchEstablishmentError(A,{operationName:"INIT_WATCH",resolve:u,reject:l}),[3,4];case 4:return[2]}})})})()}),o=!1,a.label=1;case 1:return a.trys.push([1,,3,4]),[4,this.initWatchPromise];case 2:return a.sent(),o=!0,[3,4];case 3:return this.initWatchPromise=void 0,[7];case 4:return console.log("[realtime] initWatch ".concat(o?"success":"fail")),[2]}})})},this.rebuildWatch=function(n){return Lt(r,void 0,void 0,function(){var o,i=this;return bt(this,function(a){switch(a.label){case 0:if(this.rebuildWatchPromise!==null&&this.rebuildWatchPromise!==void 0)return[2,this.rebuildWatchPromise];this.rebuildWatchPromise=new Promise(function(u,l){(function(){return Lt(i,void 0,void 0,function(){var s,c,f,d;return bt(this,function(v){switch(v.label){case 0:return v.trys.push([0,3,,4]),this.watchStatus===xe.PAUSED?(console.log("[realtime] rebuildWatch cancelled on pause"),[2,u()]):[4,this.wsLogin(this.envId,n)];case 1:if(s=v.sent().envId,!this.sessionInfo)throw new Error("can not rebuildWatch without a successful initWatch (lack of sessionInfo)");return this.watchStatus===xe.PAUSED?(console.log("[realtime] rebuildWatch cancelled on pause"),[2,u()]):(this.watchStatus=xe.REBUILDING,c={watchId:this.watchId,requestId:Ri(),msgType:"REBUILD_WATCH",msgData:{envId:s,collName:this.collectionName,queryID:this.sessionInfo.queryID,eventID:this.sessionInfo.currentEventId}},[4,this.send({msg:c,waitResponse:!0,skipOnMessage:!1,timeout:DU})]);case 2:return f=v.sent(),this.handleServerEvents(f),this.watchStatus=xe.ACTIVE,this.availableRetries.REBUILD_WATCH=qs,u(),[3,4];case 3:return d=v.sent(),this.handleWatchEstablishmentError(d,{operationName:"REBUILD_WATCH",resolve:u,reject:l}),[3,4];case 4:return[2]}})})})()}),o=!1,a.label=1;case 1:return a.trys.push([1,,3,4]),[4,this.rebuildWatchPromise];case 2:return a.sent(),o=!0,[3,4];case 3:return this.rebuildWatchPromise=void 0,[7];case 4:return console.log("[realtime] rebuildWatch ".concat(o?"success":"fail")),[2]}})})},this.handleWatchEstablishmentError=function(n,o){return Lt(r,void 0,void 0,function(){var i,a,u,l=this;return bt(this,function(s){return i=o.operationName==="INIT_WATCH",a=function(){l.closeWithError(new Vt({errCode:i?At.SDK_DATABASE_REALTIME_LISTENER_INIT_WATCH_FAIL:At.SDK_DATABASE_REALTIME_LISTENER_REBUILD_WATCH_FAIL,errMsg:n})),o.reject(n)},u=function(c){l.useRetryTicket(o.operationName)?i?(l.initWatchPromise=void 0,o.resolve(l.initWatch(c))):(l.rebuildWatchPromise=void 0,o.resolve(l.rebuildWatch(c))):a()},this.handleCommonError(n,{onSignError:function(){return u(!0)},onTimeoutError:function(){return u(!1)},onNotRetryableError:a,onCancelledError:o.reject,onUnknownError:function(){(function(){return Lt(l,void 0,void 0,function(){var c,f=this;return bt(this,function(d){switch(d.label){case 0:return d.trys.push([0,8,,9]),c=function(){return Lt(f,void 0,void 0,function(){return bt(this,function(v){switch(v.label){case 0:return this.pause(),[4,this.onceWSConnected()];case 1:return v.sent(),u(!0),[2]}})})},this.isWSConnected()?[3,2]:[4,c()];case 1:return d.sent(),[3,7];case 2:return[4,Fl(xU)];case 3:return d.sent(),this.watchStatus!==xe.PAUSED?[3,4]:(o.reject(new RU("".concat(o.operationName," cancelled due to pause after unknownError"))),[3,7]);case 4:return this.isWSConnected()?[3,6]:[4,c()];case 5:return d.sent(),[3,7];case 6:u(!1),d.label=7;case 7:return[3,9];case 8:return d.sent(),u(!0),[3,9];case 9:return[2]}})})})()}}),[2]})})},this.closeWatch=function(){return Lt(r,void 0,void 0,function(){var n,o,i;return bt(this,function(a){switch(a.label){case 0:if(n=this.sessionInfo?this.sessionInfo.queryID:"",this.watchStatus!==xe.ACTIVE)return this.watchStatus=xe.CLOSED,this.onWatchClose(this,n),[2];a.label=1;case 1:return a.trys.push([1,3,4,5]),this.watchStatus=xe.CLOSING,o={watchId:this.watchId,requestId:Ri(),msgType:"CLOSE_WATCH",msgData:null},[4,this.send({msg:o})];case 2:return a.sent(),this.sessionInfo=void 0,this.watchStatus=xe.CLOSED,[3,5];case 3:return i=a.sent(),this.closeWithError(new Vt({errCode:At.SDK_DATABASE_REALTIME_LISTENER_CLOSE_WATCH_FAIL,errMsg:i})),[3,5];case 4:return this.onWatchClose(this,n),[7];case 5:return[2]}})})},this.scheduleSendACK=function(){r.clearACKSchedule(),r.ackTimeoutId=setTimeout(function(){r.waitExpectedTimeoutId?r.scheduleSendACK():r.sendACK()},NU)},this.clearACKSchedule=function(){r.ackTimeoutId&&clearTimeout(r.ackTimeoutId)},this.sendACK=function(){return Lt(r,void 0,void 0,function(){var n,o,i;return bt(this,function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),this.watchStatus!==xe.ACTIVE?(this.scheduleSendACK(),[2]):this.sessionInfo?(n={watchId:this.watchId,requestId:Ri(),msgType:"CHECK_LAST",msgData:{queryID:this.sessionInfo.queryID,eventID:this.sessionInfo.currentEventId}},[4,this.send({msg:n})]):(console.warn("[realtime listener] can not send ack without a successful initWatch (lack of sessionInfo)"),[2]);case 1:return a.sent(),this.scheduleSendACK(),[3,3];case 2:if(o=a.sent(),Hp(o))switch(i=o.payload,i.msgData.code){case"CHECK_LOGIN_FAILED":case"SIGN_EXPIRED_ERROR":case"SIGN_INVALID_ERROR":case"SIGN_PARAM_INVALID":return this.rebuildWatch(),[2];case"QUERYID_INVALID_ERROR":case"SYS_ERR":case"INVALIID_ENV":case"COLLECTION_PERMISSION_DENIED":return this.closeWithError(new Vt({errCode:At.SDK_DATABASE_REALTIME_LISTENER_CHECK_LAST_FAIL,errMsg:i.msgData.code})),[2]}return this.availableRetries.CHECK_LAST&&this.availableRetries.CHECK_LAST>0?(this.availableRetries.CHECK_LAST-=1,this.scheduleSendACK()):this.closeWithError(new Vt({errCode:At.SDK_DATABASE_REALTIME_LISTENER_CHECK_LAST_FAIL,errMsg:o})),[3,3];case 3:return[2]}})})},this.handleCommonError=function(n,o){if(Hp(n)){var i=n.payload;switch(i.msgData.code){case"CHECK_LOGIN_FAILED":case"SIGN_EXPIRED_ERROR":case"SIGN_INVALID_ERROR":case"SIGN_PARAM_INVALID":{o.onSignError(n);return}case"QUERYID_INVALID_ERROR":case"SYS_ERR":case"INVALIID_ENV":case"COLLECTION_PERMISSION_DENIED":{o.onNotRetryableError(n);return}default:{o.onNotRetryableError(n);return}}}else if(AU(n)){o.onTimeoutError(n);return}else if(CU(n)){o.onCancelledError(n);return}o.onUnknownError(n)},this.watchId="watchid_".concat(+new Date,"_").concat(Math.random()),this.envId=t.envId,this.collectionName=t.collectionName,this.query=t.query,this.limit=t.limit,this.orderBy=t.orderBy,this.send=t.send,this.login=t.login,this.isWSConnected=t.isWSConnected,this.onceWSConnected=t.onceWSConnected,this.getWaitExpectedTimeoutLength=t.getWaitExpectedTimeoutLength,this.onWatchStart=t.onWatchStart,this.onWatchClose=t.onWatchClose,this.debug=t.debug,this.availableRetries={INIT_WATCH:qs,REBUILD_WATCH:qs,CHECK_LAST:PU},this.listener=new IU({close:function(){r.closeWatch()},onChange:t.onChange,onError:t.onError,debug:this.debug,virtualClient:this}),this.initWatch()}return e.prototype.onMessage=function(t){var r=this;switch(this.watchStatus){case xe.PAUSED:{if(t.msgType!=="ERROR")return;break}case xe.LOGGINGIN:case xe.INITING:case xe.REBUILDING:{console.warn("[realtime listener] internal non-fatal error: unexpected message received while ".concat(this.watchStatus));return}case xe.CLOSED:{console.warn("[realtime listener] internal non-fatal error: unexpected message received when the watch has closed");return}case xe.ERRORED:{console.warn("[realtime listener] internal non-fatal error: unexpected message received when the watch has ended with error");return}}if(!this.sessionInfo){console.warn("[realtime listener] internal non-fatal error: sessionInfo not found while message is received.");return}switch(this.scheduleSendACK(),t.msgType){case"NEXT_EVENT":{console.warn("nextevent ".concat(t.msgData.currEvent," ignored"),t),this.handleServerEvents(t);break}case"CHECK_EVENT":{this.sessionInfo.currentEventId<t.msgData.currEvent&&(this.sessionInfo.expectEventId=t.msgData.currEvent,this.clearWaitExpectedEvent(),this.waitExpectedTimeoutId=setTimeout(function(){r.rebuildWatch()},this.getWaitExpectedTimeoutLength()),console.log("[realtime] waitExpectedTimeoutLength ".concat(this.getWaitExpectedTimeoutLength())));break}case"ERROR":{this.closeWithError(new Vt({errCode:At.SDK_DATABASE_REALTIME_LISTENER_SERVER_ERROR_MSG,errMsg:"".concat(t.msgData.code," - ").concat(t.msgData.message)}));break}default:{console.warn("[realtime listener] virtual client receive unexpected msg ".concat(t.msgType,": "),t);break}}},e.prototype.closeWithError=function(t){var r;this.watchStatus=xe.ERRORED,this.clearACKSchedule(),this.listener.onError(t),this.onWatchClose(this,((r=this.sessionInfo)===null||r===void 0?void 0:r.queryID)||""),console.log("[realtime] client closed (".concat(this.collectionName," ").concat(this.query,") (watchId ").concat(this.watchId,")"))},e.prototype.pause=function(){this.watchStatus=xe.PAUSED,console.log("[realtime] client paused (".concat(this.collectionName," ").concat(this.query,") (watchId ").concat(this.watchId,")"))},e.prototype.resume=function(){return Lt(this,void 0,void 0,function(){var t;return bt(this,function(r){switch(r.label){case 0:this.watchStatus=xe.RESUMING,console.log("[realtime] client resuming with ".concat(this.sessionInfo?"REBUILD_WATCH":"INIT_WATCH"," (").concat(this.collectionName," ").concat(this.query,") (").concat(this.watchId,")")),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.sessionInfo?this.rebuildWatch():this.initWatch()];case 2:return r.sent(),console.log("[realtime] client successfully resumed (".concat(this.collectionName," ").concat(this.query,") (").concat(this.watchId,")")),[3,4];case 3:return t=r.sent(),console.error("[realtime] client resume failed (".concat(this.collectionName," ").concat(this.query,") (").concat(this.watchId,")"),t),[3,4];case 4:return[2]}})})},e.prototype.useRetryTicket=function(t){return this.availableRetries[t]&&this.availableRetries[t]>0?(this.availableRetries[t]-=1,console.log("[realtime] ".concat(t," use a retry ticket, now only ").concat(this.availableRetries[t]," retry left")),!0):!1},e.prototype.handleServerEvents=function(t){return Lt(this,void 0,void 0,function(){var r;return bt(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),this.scheduleSendACK(),[4,this.handleServerEventsInternel(t)];case 1:return n.sent(),this.postHandleServerEventsValidityCheck(t),[3,3];case 2:throw r=n.sent(),console.error("[realtime listener] internal non-fatal error: handle server events failed with error: ",r),r;case 3:return[2]}})})},e.prototype.handleServerEventsInternel=function(t){return Lt(this,void 0,void 0,function(){var r,n,o,i,a,u,l,s,c,f,d,v;return bt(this,function(m){switch(m.label){case 0:if(r=t.requestId,n=t.msgData.events,o=t.msgType,!n.length||!this.sessionInfo)return[2];i=this.sessionInfo;try{a=n.map($U)}catch(b){return this.closeWithError(new Vt({errCode:At.SDK_DATABASE_REALTIME_LISTENER_RECEIVE_INVALID_SERVER_DATA,errMsg:b})),[2]}u=Gp([],i.currentDocs,!0),l=!1,s=function(b,w){var _,E,A,I,R,L,N,N,U,U,N,D,D,k,M,Q;return bt(this,function(oe){switch(oe.label){case 0:return _=a[b],i.currentEventId>=_.id?(!a[b-1]||_.id>a[b-1].id?console.warn("[realtime] duplicate event received, cur ".concat(i.currentEventId," but got ").concat(_.id)):console.error("[realtime listener] server non-fatal error: events out of order (the latter event's id is smaller than that of the former) (requestId ".concat(r,")")),[2,"continue"]):[3,1];case 1:if(i.currentEventId!==_.id-1)return[3,2];switch(_.dataType){case"update":{if(!_.doc)switch(_.queueType){case"update":case"dequeue":{if(E=u.find(function(Y){return Y._id===_.docId}),E){if(A=SU(E),_.updatedFields&&Object.keys(_.updatedFields).forEach(function(Y){lP(A,Y,_.updatedFields[Y])}),_.removedFields)for(I=0,R=_.removedFields;I<R.length;I++)L=R[I],NP(A,L);_.doc=A}else console.error("[realtime listener] internal non-fatal server error: unexpected update dataType event where no doc is associated.");break}case"enqueue":throw N=new Vt({errCode:At.SDK_DATABASE_REALTIME_LISTENER_UNEXPECTED_FATAL_ERROR,errMsg:'HandleServerEvents: full doc is not provided with dataType="update" and queueType="enqueue" (requestId '.concat(t.requestId,")")}),c.closeWithError(N),N}break}case"replace":{if(!_.doc)throw N=new Vt({errCode:At.SDK_DATABASE_REALTIME_LISTENER_UNEXPECTED_FATAL_ERROR,errMsg:'HandleServerEvents: full doc is not provided with dataType="replace" (requestId '.concat(t.requestId,")")}),c.closeWithError(N),N;break}case"remove":{U=u.find(function(Y){return Y._id===_.docId}),U?_.doc=U:console.error("[realtime listener] internal non-fatal server error: unexpected remove event where no doc is associated.");break}case"limit":{if(!_.doc)switch(_.queueType){case"dequeue":{U=u.find(function(Y){return Y._id===_.docId}),U?_.doc=U:console.error("[realtime listener] internal non-fatal server error: unexpected limit dataType event where no doc is associated.");break}case"enqueue":throw N=new Vt({errCode:At.SDK_DATABASE_REALTIME_LISTENER_UNEXPECTED_FATAL_ERROR,errMsg:'HandleServerEvents: full doc is not provided with dataType="limit" and queueType="enqueue" (requestId '.concat(t.requestId,")")}),c.closeWithError(N),N}break}}switch(_.queueType){case"init":{l?u.push(_.doc):(l=!0,u=[_.doc]);break}case"enqueue":{u.push(_.doc);break}case"dequeue":{D=u.findIndex(function(Y){return Y._id===_.docId}),D>-1?u.splice(D,1):console.error("[realtime listener] internal non-fatal server error: unexpected dequeue event where no doc is associated.");break}case"update":{D=u.findIndex(function(Y){return Y._id===_.docId}),D>-1?u[D]=_.doc:console.error("[realtime listener] internal non-fatal server error: unexpected queueType update event where no doc is associated.");break}}return(b===w-1||a[b+1]&&a[b+1].id!==_.id)&&(k=Gp([],u,!0),M=a.slice(0,b+1).filter(function(Y){return Y.id===_.id}),c.sessionInfo.currentEventId=_.id,c.sessionInfo.currentDocs=u,Q=new Wp({id:_.id,docChanges:M,docs:k,msgType:o}),c.listener.onChange(Q)),[3,4];case 2:return console.warn("[realtime listener] event received is out of order, cur ".concat(c.sessionInfo.currentEventId," but got ").concat(_.id)),[4,c.rebuildWatch()];case 3:return oe.sent(),[2,{value:void 0}];case 4:return[2]}})},c=this,f=0,d=a.length,m.label=1;case 1:return f<d?[5,s(f,d)]:[3,4];case 2:if(v=m.sent(),typeof v=="object")return[2,v.value];m.label=3;case 3:return f++,[3,1];case 4:return[2]}})})},e.prototype.postHandleServerEventsValidityCheck=function(t){if(!this.sessionInfo){console.error("[realtime listener] internal non-fatal error: sessionInfo lost after server event handling, this should never occur");return}if(this.sessionInfo.expectEventId&&this.sessionInfo.currentEventId>=this.sessionInfo.expectEventId&&this.clearWaitExpectedEvent(),this.sessionInfo.currentEventId<t.msgData.currEvent){console.warn("[realtime listener] internal non-fatal error: client eventId does not match with server event id after server event handling");return}},e.prototype.clearWaitExpectedEvent=function(){this.waitExpectedTimeoutId&&(clearTimeout(this.waitExpectedTimeoutId),this.waitExpectedTimeoutId=void 0)},e}();function $U(e){var t={id:e.ID,dataType:e.DataType,queueType:e.QueueType,docId:e.DocID,doc:e.Doc&&e.Doc!=="{}"?JSON.parse(e.Doc):void 0};return e.DataType==="update"&&(e.UpdatedFields&&(t.updatedFields=JSON.parse(e.UpdatedFields)),(e.removedFields||e.RemovedFields)&&(t.removedFields=JSON.parse(e.removedFields))),t}var o_={1e3:{code:1e3,name:"Normal Closure",description:"Normal closure; the connection successfully completed whatever purpose for which it was created."},1001:{code:1001,name:"Going Away",description:"The endpoint is going away, either because of a server failure or because the browser is navigating away from the page that opened the connection."},1002:{code:1002,name:"Protocol Error",description:"The endpoint is terminating the connection due to a protocol error."},1003:{code:1003,name:"Unsupported Data",description:"The connection is being terminated because the endpoint received data of a type it cannot accept (for example, a text-only endpoint received binary data)."},1005:{code:1005,name:"No Status Received",description:"Indicates that no status code was provided even though one was expected."},1006:{code:1006,name:"Abnormal Closure",description:"Used to indicate that a connection was closed abnormally (that is, with no close frame being sent) when a status code is expected."},1007:{code:1007,name:"Invalid frame payload data",description:"The endpoint is terminating the connection because a message was received that contained inconsistent data (e.g., non-UTF-8 data within a text message)."},1008:{code:1008,name:"Policy Violation",description:"The endpoint is terminating the connection because it received a message that violates its policy. This is a generic status code, used when codes 1003 and 1009 are not suitable."},1009:{code:1009,name:"Message too big",description:"The endpoint is terminating the connection because a data frame was received that is too large."},1010:{code:1010,name:"Missing Extension",description:"The client is terminating the connection because it expected the server to negotiate one or more extension, but the server didn't."},1011:{code:1011,name:"Internal Error",description:"The server is terminating the connection because it encountered an unexpected condition that prevented it from fulfilling the request."},1012:{code:1012,name:"Service Restart",description:"The server is terminating the connection because it is restarting."},1013:{code:1013,name:"Try Again Later",description:"The server is terminating the connection due to a temporary condition, e.g. it is overloaded and is casting off some of its clients."},1014:{code:1014,name:"Bad Gateway",description:"The server was acting as a gateway or proxy and received an invalid response from the upstream server. This is similar to 502 HTTP Status Code."},1015:{code:1015,name:"TLS Handshake",description:"Indicates that the connection was closed due to a failure to perform a TLS handshake (e.g., the server certificate can't be verified)."},3e3:{code:3e3,name:"Reconnect WebSocket",description:"The client is terminating the connection because it wants to reconnect"},3001:{code:3001,name:"No Realtime Listeners",description:"The client is terminating the connection because no more realtime listeners exist"},3002:{code:3002,name:"Heartbeat Ping Error",description:"The client is terminating the connection due to its failure in sending heartbeat messages"},3003:{code:3003,name:"Heartbeat Pong Timeout Error",description:"The client is terminating the connection because no heartbeat response is received from the server"},3050:{code:3050,name:"Server Close",description:"The client is terminating the connection because no heartbeat response is received from the server"}},Gt;(function(e){e[e.NormalClosure=1e3]="NormalClosure",e[e.GoingAway=1001]="GoingAway",e[e.ProtocolError=1002]="ProtocolError",e[e.UnsupportedData=1003]="UnsupportedData",e[e.NoStatusReceived=1005]="NoStatusReceived",e[e.AbnormalClosure=1006]="AbnormalClosure",e[e.InvalidFramePayloadData=1007]="InvalidFramePayloadData",e[e.PolicyViolation=1008]="PolicyViolation",e[e.MessageTooBig=1009]="MessageTooBig",e[e.MissingExtension=1010]="MissingExtension",e[e.InternalError=1011]="InternalError",e[e.ServiceRestart=1012]="ServiceRestart",e[e.TryAgainLater=1013]="TryAgainLater",e[e.BadGateway=1014]="BadGateway",e[e.TLSHandshake=1015]="TLSHandshake",e[e.ReconnectWebSocket=3e3]="ReconnectWebSocket",e[e.NoRealtimeListeners=3001]="NoRealtimeListeners",e[e.HeartbeatPingError=3002]="HeartbeatPingError",e[e.HeartbeatPongTimeoutError=3003]="HeartbeatPongTimeoutError",e[e.NoAuthentication=3050]="NoAuthentication"})(Gt||(Gt={}));var Bc=function(e,t){var r=o_[e],n=r?"".concat(r.name,", code ").concat(e,", reason ").concat(t||r.description):"code ".concat(e);return new Vt({errCode:At.SDK_DATABASE_REALTIME_LISTENER_WEBSOCKET_CONNECTION_CLOSED,errMsg:n})},s_=null,a_="web";function FU(){return s_}function MU(e){s_=e}function Vp(){return a_}function BU(e){a_=e}var Va=function(){return Va=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Va.apply(this,arguments)},nr=function(e,t,r,n){function o(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function u(c){try{s(n.next(c))}catch(f){a(f)}}function l(c){try{s(n.throw(c))}catch(f){a(f)}}function s(c){c.done?i(c.value):o(c.value).then(u,l)}s((n=n.apply(e,t||[])).next())})},ir=function(e,t){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function u(s){return function(c){return l([s,c])}}function l(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(r=0)),r;)try{if(n=1,o&&(i=s[0]&2?o.return:s[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,s[1])).done)return i;switch(o=0,i&&(s=[s[0]&2,i.value]),s[0]){case 0:case 1:i=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,o=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(s[0]===6||s[0]===2)){r=0;continue}if(s[0]===3&&(!i||s[1]>i[0]&&s[1]<i[3])){r.label=s[1];break}if(s[0]===6&&r.label<i[1]){r.label=i[1],i=s;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(s);break}i[2]&&r.ops.pop(),r.trys.pop();continue}s=t.call(e,r)}catch(c){s=[6,c],o=0}finally{n=i=0}if(s[0]&5)throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}},jc={OPEN:1},Kp=3,jU=5e3,kU=1e4,qU=5,WU=1e4,HU=2,GU=2,VU=5e3,KU=function(){function e(t){var r=this;this.virtualWSClient=new Set,this.queryIdClientMap=new Map,this.watchIdClientMap=new Map,this.pingFailed=0,this.pongMissed=0,this.logins=new Map,this.wsReadySubsribers=[],this.wsResponseWait=new Map,this.rttObserved=[],this.send=function(n){return nr(r,void 0,void 0,function(){var o=this;return ir(this,function(i){return[2,new Promise(function(a,u){(function(){return nr(o,void 0,void 0,function(){var l,s,c,f,d,v,m,b,w=this;return ir(this,function(_){switch(_.label){case 0:s=!1,c=!1,f=function(E){s=!0,l&&clearTimeout(l),a(E)},d=function(E){c=!0,l&&clearTimeout(l),u(E)},n.timeout&&(l=setTimeout(function(){(function(){return nr(w,void 0,void 0,function(){return ir(this,function(E){switch(E.label){case 0:return!s||!c?[4,Fl(0)]:[3,2];case 1:E.sent(),(!s||!c)&&d(new OU("wsclient.send timedout")),E.label=2;case 2:return[2]}})})})()},n.timeout)),_.label=1;case 1:return _.trys.push([1,8,,9]),this.wsInitPromise!==void 0||this.wsInitPromise!==null?[4,this.wsInitPromise]:[3,3];case 2:_.sent(),_.label=3;case 3:if(!this.ws)return d(new Error("invalid state: ws connection not exists, can not send message")),[2];if(this.ws.readyState!==jc.OPEN)return d(new Error("ws readyState invalid: ".concat(this.ws.readyState,", can not send message"))),[2];n.waitResponse&&(v={resolve:f,reject:d,skipOnMessage:n.skipOnMessage},this.wsResponseWait.set(n.msg.requestId,v)),_.label=4;case 4:return _.trys.push([4,6,,7]),[4,this.ws.send(JSON.stringify(n.msg))];case 5:return _.sent(),n.waitResponse||f(void 0),[3,7];case 6:return m=_.sent(),m&&(d(m),n.waitResponse&&this.wsResponseWait.delete(n.msg.requestId)),[3,7];case 7:return[3,9];case 8:return b=_.sent(),d(b),[3,9];case 9:return[2]}})})})()})]})})},this.closeAllClients=function(n){r.virtualWSClient.forEach(function(o){o.closeWithError(n)})},this.pauseClients=function(n){(n||r.virtualWSClient).forEach(function(o){o.pause()})},this.resumeClients=function(n){(n||r.virtualWSClient).forEach(function(o){o.resume()})},this.initWebSocketConnection=function(n,o){return o===void 0&&(o=r.maxReconnect),nr(r,void 0,void 0,function(){var i=this;return ir(this,function(a){switch(a.label){case 0:if(n&&this.reconnectState)return[2];if(n&&(this.reconnectState=!0),this.wsInitPromise!==void 0&&this.wsInitPromise!==null)return[2,this.wsInitPromise];n&&this.pauseClients(),this.close(Gt.ReconnectWebSocket),this.wsInitPromise=new Promise(function(u,l){(function(){return nr(i,void 0,void 0,function(){var s,c,f,d=this;return ir(this,function(v){switch(v.label){case 0:return v.trys.push([0,6,,11]),[4,this.getWsSign()];case 1:return s=v.sent(),[4,new Promise(function(m){var b=s.wsUrl||"wss://tcb-ws.tencentcloudapi.com",w=FU();d.ws=w?new w(b):new WebSocket(b),m(void 0)})];case 2:return v.sent(),this.ws.connect?[4,this.ws.connect()]:[3,4];case 3:v.sent(),v.label=4;case 4:return[4,this.initWebSocketEvent()];case 5:return v.sent(),u(),n&&(this.resumeClients(),this.reconnectState=!1),[3,11];case 6:return c=v.sent(),console.error("[realtime] initWebSocketConnection connect fail",c),o>0?(f=!0,this.wsInitPromise=void 0,f?[4,Fl(this.reconnectInterval)]:[3,8]):[3,9];case 7:v.sent(),n&&(this.reconnectState=!1),v.label=8;case 8:return u(this.initWebSocketConnection(n,o-1)),[3,10];case 9:l(c),n&&this.closeAllClients(new Vt({errCode:At.SDK_DATABASE_REALTIME_LISTENER_RECONNECT_WATCH_FAIL,errMsg:c})),v.label=10;case 10:return[3,11];case 11:return[2]}})})})()}),a.label=1;case 1:return a.trys.push([1,3,4,5]),[4,this.wsInitPromise];case 2:return a.sent(),this.wsReadySubsribers.forEach(function(u){var l=u.resolve;return l()}),[3,5];case 3:return a.sent(),this.wsReadySubsribers.forEach(function(u){var l=u.reject;return l()}),[3,5];case 4:return this.wsInitPromise=void 0,this.wsReadySubsribers=[],[7];case 5:return[2]}})})},this.initWebSocketEvent=function(){return new Promise(function(n,o){if(!r.ws)throw new Error("can not initWebSocketEvent, ws not exists");var i=!1;r.ws.onopen=function(a){console.warn("[realtime] ws event: open",a),i=!0,n()},r.ws.onerror=function(a){r.logins=new Map,i?(console.error("[realtime] ws event: error",a),r.clearHeartbeat(),r.virtualWSClient.forEach(function(u){return u.closeWithError(new Vt({errCode:At.SDK_DATABASE_REALTIME_LISTENER_WEBSOCKET_CONNECTION_ERROR,errMsg:a}))})):(console.error("[realtime] ws open failed with ws event: error",a),o(a))},r.ws.onclose=function(a){switch(console.warn("[realtime] ws event: close",a),r.logins=new Map,r.clearHeartbeat(),a.code){case Gt.ReconnectWebSocket:break;case Gt.NoRealtimeListeners:break;case Gt.HeartbeatPingError:case Gt.HeartbeatPongTimeoutError:case Gt.NormalClosure:case Gt.AbnormalClosure:{r.maxReconnect>0?r.initWebSocketConnection(!0,r.maxReconnect):r.closeAllClients(Bc(a.code));break}case Gt.NoAuthentication:{r.closeAllClients(Bc(a.code,a.reason));break}default:r.maxReconnect>0?r.initWebSocketConnection(!0,r.maxReconnect):r.closeAllClients(Bc(a.code))}},r.ws.onmessage=function(a){var u,l=((u=a.data)===null||u===void 0?void 0:u.data)||a.data;r.heartbeat();var s;try{s=typeof l=="string"?JSON.parse(l):l}catch(E){throw new Error("[realtime] onMessage parse res.data error: ".concat(E))}if(s.msgType==="ERROR"){var c=null;r.virtualWSClient.forEach(function(E){E.watchId===s.watchId&&(c=E)}),c&&c.listener.onError(s)}var f=r.wsResponseWait.get(s.requestId);if(f){try{s.msgType==="ERROR"?f.reject(new TU(s)):f.resolve(s)}catch(E){console.error("ws onMessage responseWaitSpec.resolve(msg) errored:",E)}finally{r.wsResponseWait.delete(s.requestId)}if(f.skipOnMessage)return}if(s.msgType==="PONG"){if(r.lastPingSendTS){var d=Date.now()-r.lastPingSendTS;if(d>kU){console.warn("[realtime] untrusted rtt observed: ".concat(d));return}r.rttObserved.length>=Kp&&r.rttObserved.splice(0,r.rttObserved.length-Kp+1),r.rttObserved.push(d)}return}var v=s.watchId&&r.watchIdClientMap.get(s.watchId);if(v)v.onMessage(s);else switch(console.error("[realtime] no realtime listener found responsible for watchId ".concat(s.watchId,": "),s),s.msgType){case"INIT_EVENT":case"NEXT_EVENT":case"CHECK_EVENT":{v=r.queryIdClientMap.get(s.msgData.queryID),v&&v.onMessage(s);break}default:for(var m=0,b=Array.from(r.watchIdClientMap.entries());m<b.length;m++){var w=b[m],_=w[1];_.onMessage(s);break}}},r.heartbeat()})},this.isWSConnected=function(){return!!(r.ws&&r.ws.readyState===jc.OPEN)},this.onceWSConnected=function(){return nr(r,void 0,void 0,function(){var n=this;return ir(this,function(o){return this.isWSConnected()?[2]:this.wsInitPromise!==null&&this.wsInitPromise!==void 0?[2,this.wsInitPromise]:[2,new Promise(function(i,a){n.wsReadySubsribers.push({resolve:i,reject:a})})]})})},this.webLogin=function(n,o){return nr(r,void 0,void 0,function(){var i,a,u,l,s,c,f,d,v=this;return ir(this,function(m){switch(m.label){case 0:if(!o){if(n){if(i=this.logins.get(n),i){if(i.loggedIn&&i.loginResult)return[2,i.loginResult];if(i.loggingInPromise!==null&&i.loggingInPromise!==void 0)return[2,i.loggingInPromise]}}else if(a=this.logins.get(""),(a==null?void 0:a.loggingInPromise)!==null&&(a==null?void 0:a.loggingInPromise)!==void 0)return[2,a.loggingInPromise]}u=new Promise(function(b,w){(function(){return nr(v,void 0,void 0,function(){var _,E,A,I,R;return ir(this,function(L){switch(L.label){case 0:return L.trys.push([0,3,,4]),[4,this.getWsSign()];case 1:return _=L.sent(),E={envId:_.envId||"",accessToken:"",referrer:"web",sdkVersion:"",dataVersion:""},A={watchId:void 0,requestId:Ri(),msgType:"LOGIN",msgData:E,exMsgData:{runtime:Vp(),signStr:_.signStr,secretVersion:_.secretVersion}},[4,this.send({msg:A,waitResponse:!0,skipOnMessage:!0,timeout:VU})];case 2:return I=L.sent(),I.msgData.code?w(new Error("".concat(I.msgData.code," ").concat(I.msgData.message))):b({envId:_.envId}),[3,4];case 3:return R=L.sent(),w(R),[3,4];case 4:return[2]}})})})()}),l=n&&this.logins.get(n),s=Date.now(),l?(l.loggedIn=!1,l.loggingInPromise=u,l.loginStartTS=s):(l={loggedIn:!1,loggingInPromise:u,loginStartTS:s},this.logins.set(n||"",l)),m.label=1;case 1:return m.trys.push([1,3,,4]),[4,u];case 2:if(c=m.sent(),f=n&&this.logins.get(n),f&&f===l&&f.loginStartTS===s)return l.loggedIn=!0,l.loggingInPromise=void 0,l.loginStartTS=void 0,l.loginResult=c,[2,c];if(f){if(f.loggedIn&&f.loginResult)return[2,f.loginResult];if(f.loggingInPromise!==null&&f.loggingInPromise!==void 0)return[2,f.loggingInPromise];throw new Error("ws unexpected login info")}else throw new Error("ws login info reset");case 3:throw d=m.sent(),l.loggedIn=!1,l.loggingInPromise=void 0,l.loginStartTS=void 0,l.loginResult=void 0,d;case 4:return[2]}})})},this.getWsSign=function(){return nr(r,void 0,void 0,function(){var n,o,i,a,u,l,s;return ir(this,function(c){switch(c.label){case 0:return this.wsSign&&this.wsSign.expiredTs>Date.now()?[2,this.wsSign]:(n=Date.now()+6e4,[4,this.context.appConfig.request.send("auth.wsWebSign",{runtime:Vp()})]);case 1:if(o=c.sent(),o.code)throw new Error("[tcb-js-sdk] : ".concat(o.code));if(o.data)return i=o.data,a=i.signStr,u=i.wsUrl,l=i.secretVersion,s=i.envId,[2,{signStr:a,wsUrl:u,secretVersion:l,envId:s,expiredTs:n}];throw new Error("[tcb-js-sdk] ")}})})},this.getWaitExpectedTimeoutLength=function(){return r.rttObserved.length?r.rttObserved.reduce(function(n,o){return n+o})/r.rttObserved.length*1.5:jU},this.ping=function(){return nr(r,void 0,void 0,function(){var n;return ir(this,function(o){switch(o.label){case 0:return n={watchId:void 0,requestId:Ri(),msgType:"PING",msgData:null},[4,this.send({msg:n})];case 1:return o.sent(),[2]}})})},this.onWatchStart=function(n,o){r.queryIdClientMap.set(o,n)},this.onWatchClose=function(n,o){o&&r.queryIdClientMap.delete(o),r.watchIdClientMap.delete(n.watchId),r.virtualWSClient.delete(n),r.virtualWSClient.size||r.close(Gt.NoRealtimeListeners)},this.maxReconnect=t.maxReconnect||qU,this.reconnectInterval=t.reconnectInterval||WU,this.context=t.context}return e.prototype.clearHeartbeat=function(){this.pingTimeoutId&&clearTimeout(this.pingTimeoutId),this.pongTimeoutId&&clearTimeout(this.pongTimeoutId)},e.prototype.close=function(t){this.clearHeartbeat(),this.ws&&(this.ws.close(t,o_[t].name),this.ws=void 0)},e.prototype.watch=function(t){!this.ws&&(this.wsInitPromise===void 0||this.wsInitPromise===null)&&this.initWebSocketConnection(!1);var r=new UU(Va(Va({},t),{send:this.send,login:this.webLogin,isWSConnected:this.isWSConnected,onceWSConnected:this.onceWSConnected,getWaitExpectedTimeoutLength:this.getWaitExpectedTimeoutLength,onWatchStart:this.onWatchStart,onWatchClose:this.onWatchClose,debug:!0}));return this.virtualWSClient.add(r),this.watchIdClientMap.set(r.watchId,r),r.listener},e.prototype.heartbeat=function(t){var r=this;this.clearHeartbeat(),this.pingTimeoutId=setTimeout(function(){(function(){return nr(r,void 0,void 0,function(){var n=this;return ir(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),!this.ws||this.ws.readyState!==jc.OPEN?[2]:(this.lastPingSendTS=Date.now(),[4,this.ping()]);case 1:return o.sent(),this.pingFailed=0,this.pongTimeoutId=setTimeout(function(){console.error("pong timed out"),n.pongMissed<GU?(n.pongMissed+=1,n.heartbeat(!0)):n.initWebSocketConnection(!0)},this.context.appConfig.realtimePongWaitTimeout),[3,3];case 2:return o.sent(),this.pingFailed<HU?(this.pingFailed+=1,this.heartbeat()):this.close(Gt.HeartbeatPingError),[3,3];case 3:return[2]}})})})()},t?0:this.context.appConfig.realtimePingInterval)},e}(),u_={target:"database",entity:function(){var e=this.platform,t=e.adapter,r=e.runtime;MU(t.wsClass),BU(r)}},c_={name:"realtime",IIFE:!0,entity:function(){this.prototype.wsClientClass=KU}};try{cloudbase.registerComponent(c_),cloudbase.registerHook(u_)}catch{}function zU(e){try{e.registerComponent(c_),e.registerHook(u_)}catch(t){console.warn(t)}}var JU=function(e,t,r,n){var o=arguments.length,i=o<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(e,t,r,n);else for(var u=e.length-1;u>=0;u--)(a=e[u])&&(i=(o<3?a(i):o>3?a(t,r,i):a(t,r))||i);return o>3&&i&&Object.defineProperty(t,r,i),i},kc=function(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)},YU=function(e,t,r,n){function o(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function u(c){try{s(n.next(c))}catch(f){a(f)}}function l(c){try{s(n.throw(c))}catch(f){a(f)}}function s(c){c.done?i(c.value):o(c.value).then(u,l)}s((n=n.apply(e,t||[])).next())})},QU=function(e,t){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function u(s){return function(c){return l([s,c])}}function l(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(r=0)),r;)try{if(n=1,o&&(i=s[0]&2?o.return:s[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,s[1])).done)return i;switch(o=0,i&&(s=[s[0]&2,i.value]),s[0]){case 0:case 1:i=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,o=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(s[0]===6||s[0]===2)){r=0;continue}if(s[0]===3&&(!i||s[1]>i[0]&&s[1]<i[3])){r.label=s[1];break}if(s[0]===6&&r.label<i[1]){r.label=i[1],i=s;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(s);break}i[2]&&r.ops.pop(),r.trys.pop();continue}s=t.call(e,r)}catch(c){s=[6,c],o=0}finally{n=i=0}if(s[0]&5)throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}},XU=xt,ZU=Eu,e$=Tu,l_="analytics",t$=["mall"];function r$(e){if(Object.prototype.toString.call(e).slice(8,-1)!=="Object")return!1;var t=e.report_data,r=e.report_type;return!(t$.includes(r)===!1||Object.prototype.toString.call(t).slice(8,-1)!=="Object"||t.action_time!==void 0&&!Number.isInteger(t.action_time)||typeof t.action_type!="string")}var n$=function(){function e(){}return e.prototype.analytics=function(t){return YU(this,void 0,void 0,function(){var r,n,o,i,a;return QU(this,function(u){if(!r$(t))throw new Error(JSON.stringify({code:XU.INVALID_PARAMS,msg:"[".concat(l_,".analytics] invalid report data")}));return r="analytics.report",n=t.report_data.action_time===void 0?Math.floor(Date.now()/1e3):t.report_data.action_time,o={analytics_scene:t.report_type,analytics_data:Object.assign({},t.report_data,{action_time:n})},i={requestData:o},a=this.request,a.send(r,i),[2]})})},JU([e$({customInfo:{},title:"",messages:["","  1 -  analytics() ","".concat(ZU)]}),kc("design:type",Function),kc("design:paramtypes",[Object]),kc("design:returntype",Promise)],e.prototype,"analytics",null),e}(),i$=new n$,f_={name:l_,entity:{analytics:i$.analytics}};try{cloudbase.registerComponent(f_)}catch{}function o$(e){try{e.registerComponent(f_)}catch(t){console.warn(t)}}var Ml=function(e,t){return Ml=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])},Ml(e,t)};function s$(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");Ml(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var Ze=function(){return Ze=Object.assign||function(t){for(var r,n=1,o=arguments.length;n<o;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},Ze.apply(this,arguments)};function Yi(e,t,r,n){function o(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function u(c){try{s(n.next(c))}catch(f){a(f)}}function l(c){try{s(n.throw(c))}catch(f){a(f)}}function s(c){c.done?i(c.value):o(c.value).then(u,l)}s((n=n.apply(e,[])).next())})}function Qi(e,t){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function u(s){return function(c){return l([s,c])}}function l(s){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(i=s[0]&2?o.return:s[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,s[1])).done)return i;switch(o=0,i&&(s=[s[0]&2,i.value]),s[0]){case 0:case 1:i=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,o=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(s[0]===6||s[0]===2)){r=0;continue}if(s[0]===3&&(!i||s[1]>i[0]&&s[1]<i[3])){r.label=s[1];break}if(s[0]===6&&r.label<i[1]){r.label=i[1],i=s;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(s);break}i[2]&&r.ops.pop(),r.trys.pop();continue}s=t.call(e,r)}catch(c){s=[6,c],o=0}finally{n=i=0}if(s[0]&5)throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}}var Zn=function(e){s$(t,e);function t(r,n){var o=e.call(this,r)||this;return o.name="WxCloudSDKError",o.code=n==null?void 0:n.code,o.requestId=n==null?void 0:n.requestId,o.originError=n==null?void 0:n.originError,o}return t}(Error);function Bl(){return typeof window<"u"&&window||typeof globalThis<"u"&&globalThis}function a$(){try{var e=Bl();return e?typeof wx>"u"?Bl().location.href:e.__wxRoute:void 0}catch{}}function u$(){var e=Bl();if(e!=null&&e.navigator)return e.navigator.userAgent;if(typeof wx<"u"&&wx.getSystemInfo){var t;return wx.getSystemInfo({success:function(r){r&&(t=["brand","model","version","system","platform","SDKVersion","language"].map(function(n){return"".concat(n,": ").concat(r[n])}).join(", "))}}),t}}var c$="1.6.1",l$=function(e){var t=e.dataSourceName,r=e.methodName,n=e.params,o=e.realMethodName,i=e.callFunction,a=e.envType,u=a===void 0?"prod":a,l=e.mode;return Yi(void 0,void 0,void 0,function(){var s,c,f,d,v,m;return Qi(this,function(b){switch(b.label){case 0:s={data:{},requestId:""},b.label=1;case 1:return b.trys.push([1,3,,4]),[4,i({name:"lowcode-datasource",data:{dataSourceName:t,methodName:r,params:n,userAgent:u$(),referrer:a$(),"x-sdk-version":c$,envType:u,mode:l}})];case 2:if(c=b.sent(),f=((v=c==null?void 0:c.result)===null||v===void 0?void 0:v.requestId)||(c==null?void 0:c.requestId)||(c==null?void 0:c.requestID),c!=null&&c.result.code)throw new Zn("".concat(c==null?void 0:c.result.message,`
 models.`).concat(t?"".concat(t,"."):"").concat(o,`
`).concat(c==null?void 0:c.result.code,`
ID`).concat(f||"N/A"),{code:c==null?void 0:c.result.code,requestId:f});return s.data=((m=c==null?void 0:c.result)===null||m===void 0?void 0:m.data)||{},s.requestId=f,[3,4];case 3:throw d=b.sent(),d.name==="WxCloudSDKError"?d:(console.log(d),new Zn("".concat(d.message,`
       models.`).concat(t?"".concat(t,"."):"").concat(o,`
      IDN/A`),{code:"UnknownError",originError:d}));case 4:return[2,s]}})})},zp=function(e){var t=e.sql,r=e.params,n=e.config,o=e.callFunction,i=e.unsafe,a=i===void 0?!1:i;return Yi(void 0,void 0,void 0,function(){return Qi(this,function(u){return[2,l$({realMethodName:"$runSQL",methodName:"callWedaApi",params:{action:"RunMysqlCommand",data:{sqlTemplate:t,config:n,parameter:a?"":Object.entries(r||{}).reduce(function(l,s){var c=s[0],f=s[1];if(f!==void 0){var d="OBJECT",v=typeof f;switch(v){case"boolean":{d="BOOLEAN";break}case"number":{d="NUMBER";break}case"string":{d="STRING";break}default:Array.isArray(f)?d="ARRAY":d="OBJECT"}l.push({key:c,type:d,value:d==="STRING"?f:JSON.stringify(f)})}return l},[])||[]}},callFunction:o,mode:"sdk"})]})})},f$=function(e){return{$runSQL:function(t,r,n){return Yi(this,void 0,void 0,function(){var o;return Qi(this,function(i){switch(i.label){case 0:return[4,zp({sql:t,params:r,config:Ze(Ze({},n),{preparedStatements:!0}),callFunction:e})];case 1:return o=i.sent(),[2,o]}})})},$runSQLRaw:function(t,r){return Yi(this,void 0,void 0,function(){var n;return Qi(this,function(o){switch(o.label){case 0:return[4,zp({sql:t,params:[],config:Ze(Ze({},r),{preparedStatements:!1}),callFunction:e})];case 1:return n=o.sent(),[2,n]}})})}}},Jp={filter:{where:{}},select:{$master:!0}};function Hr(e){return{getUrl:function(t){return"".concat(t,"/").concat(e)},method:"post"}}var d$={get:Ze(Ze({},Hr("get")),{defaultParams:Ze({},Jp)}),list:Ze(Ze({},Hr("list")),{defaultParams:Ze({},Jp)}),create:Hr("create"),createMany:Hr("createMany"),update:Ze(Ze({},Hr("update")),{method:"put"}),updateMany:Ze(Ze({},Hr("updateMany")),{method:"put"}),upsert:Hr("upsert"),delete:Hr("delete"),deleteMany:Hr("deleteMany")},Ws="Unknown error occurred",Yp="NotSupported",h$=function(e,t,r,n){var o=f$(e);return new Proxy({},{get:function(i,a){if(typeof a=="string")return Object.prototype.hasOwnProperty.call(o,a)?o[a]:p$(r,a,t,n)}})},Qp=function(e,t,r,n,o){return new Zn("".concat(e,`
 models.`).concat(t,".").concat(r,`
`).concat(n,`
ID`).concat(o),{code:n,requestId:o})},p$=function(e,t,r,n){var o=new Proxy({},{get:function(i,a){if(a!=="runSQLTemplate"){var u=d$[a];if(!u){var l=new Error(": ".concat(a));throw new Zn(l.message||Ws,{originError:l,code:Yp,requestId:"N/A"})}return function(s){return s===void 0&&(s={}),Yi(void 0,void 0,void 0,function(){var c,f,d,v,m,b,w,_,E,A;return Qi(this,function(I){switch(I.label){case 0:c=u.getUrl,f=u.method,d=u.defaultParams,v=d===void 0?{}:d,m=Object.assign({},v,s),b=m.envType==="pre"?"pre":"prod",w=[e,b,c(t)].join("/"),I.label=1;case 1:return I.trys.push([1,3,,4]),[4,r({url:w,body:JSON.stringify(m),method:f})];case 2:if(_=I.sent(),_.code)throw Qp(_==null?void 0:_.message,t,a,_==null?void 0:_.code,_==null?void 0:_.requestId);return a==="get"&&Object.assign(_,{data:(A=_.data.record)!==null&&A!==void 0?A:_.data}),[2,_];case 3:throw E=I.sent(),new Zn((E==null?void 0:E.message)||Ws,{originError:E});case 4:return[2]}})})}}else{if(!(n!=null&&n.sqlBaseUrl)){var l=new Error(": ".concat(a));throw new Zn(l.message||Ws,{originError:l,code:Yp,requestId:"N/A"})}return function(s){return Yi(void 0,void 0,void 0,function(){var c,f,d,v,m,b,w,_,E,A,I,R,L,U,N,D;return Qi(this,function(k){switch(k.label){case 0:c=s.params,f=s.templateName,d=s.envType,v=d==="pre"?"pre":"prod",m=[n.sqlBaseUrl,v,f,"run"].join("/"),b=Object.entries(c||{}).reduce(function(M,Q){var oe=Q[0],Y=Q[1];if(Y!==void 0){var Ae="OBJECT",ge=typeof Y;switch(ge){case"boolean":{Ae="BOOLEAN";break}case"number":{Ae="NUMBER";break}case"string":{Ae="STRING";break}default:Array.isArray(Y)?Ae="ARRAY":Ae="OBJECT"}M.push({key:oe,type:Ae,value:Ae==="STRING"?Y:JSON.stringify(Y)})}return M},[]),k.label=1;case 1:return k.trys.push([1,3,,4]),[4,r({url:m,body:JSON.stringify({parameter:b}),method:"POST"})];case 2:if(w=k.sent(),!((E=w==null?void 0:w.Response)===null||E===void 0)&&E.Error)throw Qp((I=(A=w==null?void 0:w.Response)===null||A===void 0?void 0:A.Error)===null||I===void 0?void 0:I.Message,t,a,(L=(R=w==null?void 0:w.Response)===null||R===void 0?void 0:R.Error)===null||L===void 0?void 0:L.Code,(U=w==null?void 0:w.Response)===null||U===void 0?void 0:U.RequestId);return[2,Ze(Ze({},(N=w==null?void 0:w.Response)!==null&&N!==void 0?N:{}),{data:(D=w==null?void 0:w.Response)===null||D===void 0?void 0:D.Data})];case 3:throw _=k.sent(),new Zn((_==null?void 0:_.message)||Ws,{originError:_});case 4:return[2]}})})}}}});return o},Yo=function(){return Yo=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Yo.apply(this,arguments)},v$=function(e,t,r,n){function o(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function u(c){try{s(n.next(c))}catch(f){a(f)}}function l(c){try{s(n.throw(c))}catch(f){a(f)}}function s(c){c.done?i(c.value):o(c.value).then(u,l)}s((n=n.apply(e,t||[])).next())})},g$=function(e,t){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function u(s){return function(c){return l([s,c])}}function l(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(r=0)),r;)try{if(n=1,o&&(i=s[0]&2?o.return:s[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,s[1])).done)return i;switch(o=0,i&&(s=[s[0]&2,i.value]),s[0]){case 0:case 1:i=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,o=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(s[0]===6||s[0]===2)){r=0;continue}if(s[0]===3&&(!i||s[1]>i[0]&&s[1]<i[3])){r.label=s[1];break}if(s[0]===6&&r.label<i[1]){r.label=i[1],i=s;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(s);break}i[2]&&r.ops.pop(),r.trys.pop();continue}s=t.call(e,r)}catch(c){s=[6,c],o=0}finally{n=i=0}if(s[0]&5)throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}},m$=ey,Xp="models";function y$(e){var t=this,r=e.callFunction.bind(e),n=e.request.fetch.bind(e.request),o=function(f){return v$(t,void 0,void 0,function(){var d;return g$(this,function(v){switch(v.label){case 0:return[4,n(Yo(Yo({},f),{headers:Yo({"Content-Type":"application/json"},f.headers)}))];case 1:return d=v.sent(),[4,d.data];case 2:return[2,v.sent()]}})})},i=e.getEndPointWithKey("GATEWAY"),a=i.BASE_URL,u=i.PROTOCOL,l="".concat(u).concat(a,"/model"),s="".concat(u).concat(a,"/sql"),c=h$(r,o,l,{sqlBaseUrl:s});return c}var Zp=new WeakMap;function _$(e){return new Proxy({},{get:function(t,r){var n=Zp.get(e);return n||(n=y$(e),Zp.set(e,n)),n[r]}})}var d_="cloudbase_init",h_=new m$;h_.on(d_,function(e){var t=e.data;Object.assign(t,{models:_$(t)})});var p_={name:Xp,namespace:Xp,entity:new Proxy({},{get:function(e,t){console.warn("deprecatedAccessing Cloudbase.prototype.models.".concat(t,"."))}}),injectEvents:{bus:h_,events:[d_]}};try{cloudbase.registerComponent(p_)}catch{}function b$(e){try{e.registerComponent(p_)}catch(t){console.warn(t)}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var jl=function(e,t){return jl=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])},jl(e,t)};function v_(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");jl(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}function Xi(e){if(!e)throw new TypeError("Assertion failed")}function w$(){}function E$(e){return typeof e=="object"&&e!==null||typeof e=="function"}function S$(e){if(typeof e!="function")return!1;var t=!1;try{new e({start:function(){t=!0}})}catch{}return t}function g_(e){return!(!E$(e)||typeof e.getReader!="function")}function I$(e){return!(!S$(e)||!g_(new e))}function m_(e){try{var t=e.getReader({mode:"byob"});return t.releaseLock(),!0}catch{return!1}}function T$(e){try{return new e({type:"bytes"}),!0}catch{return!1}}function O$(e){Xi(I$(e));var t=T$(e);return function(r,n){var o=n===void 0?{}:n,i=o.type;if(i=y_(i),i==="bytes"&&!t&&(i=void 0),r.constructor===e&&(i!=="bytes"||m_(r)))return r;if(i==="bytes"){var a=ev(r,{type:i});return new e(a)}else{var a=ev(r);return new e(a)}}}function ev(e,t){var r=t===void 0?{}:t,n=r.type;Xi(g_(e)),Xi(e.locked===!1),n=y_(n);var o;return n==="bytes"?o=new C$(e):o=new A$(e),o}function y_(e){var t=String(e);if(t==="bytes")return t;if(e===void 0)return e;throw new RangeError("Invalid type is specified")}var __=function(){function e(t){this._underlyingReader=void 0,this._readerMode=void 0,this._readableStreamController=void 0,this._pendingRead=void 0,this._underlyingStream=t,this._attachDefaultReader()}return e.prototype.start=function(t){this._readableStreamController=t},e.prototype.cancel=function(t){return Xi(this._underlyingReader!==void 0),this._underlyingReader.cancel(t)},e.prototype._attachDefaultReader=function(){if(this._readerMode!=="default"){this._detachReader();var t=this._underlyingStream.getReader();this._readerMode="default",this._attachReader(t)}},e.prototype._attachReader=function(t){var r=this;Xi(this._underlyingReader===void 0),this._underlyingReader=t;var n=this._underlyingReader.closed;n&&n.then(function(){return r._finishPendingRead()}).then(function(){t===r._underlyingReader&&r._readableStreamController.close()},function(o){t===r._underlyingReader&&r._readableStreamController.error(o)}).catch(w$)},e.prototype._detachReader=function(){this._underlyingReader!==void 0&&(this._underlyingReader.releaseLock(),this._underlyingReader=void 0,this._readerMode=void 0)},e.prototype._pullWithDefaultReader=function(){var t=this;this._attachDefaultReader();var r=this._underlyingReader.read().then(function(n){var o=t._readableStreamController;n.done?t._tryClose():o.enqueue(n.value)});return this._setPendingRead(r),r},e.prototype._tryClose=function(){try{this._readableStreamController.close()}catch{}},e.prototype._setPendingRead=function(t){var r=this,n,o=function(){r._pendingRead===n&&(r._pendingRead=void 0)};this._pendingRead=n=t.then(o,o)},e.prototype._finishPendingRead=function(){var t=this;if(this._pendingRead){var r=function(){return t._finishPendingRead()};return this._pendingRead.then(r,r)}},e}(),A$=function(e){v_(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.pull=function(){return this._pullWithDefaultReader()},t}(__);function tv(e){return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}function R$(e,t){var r=tv(e),n=tv(t);n.set(r,0)}var C$=function(e){v_(t,e);function t(r){var n=this,o=m_(r);return n=e.call(this,r)||this,n._supportsByob=o,n}return Object.defineProperty(t.prototype,"type",{get:function(){return"bytes"},enumerable:!1,configurable:!0}),t.prototype._attachByobReader=function(){if(this._readerMode!=="byob"){Xi(this._supportsByob),this._detachReader();var r=this._underlyingStream.getReader({mode:"byob"});this._readerMode="byob",this._attachReader(r)}},t.prototype.pull=function(){if(this._supportsByob){var r=this._readableStreamController.byobRequest;if(r)return this._pullWithByobRequest(r)}return this._pullWithDefaultReader()},t.prototype._pullWithByobRequest=function(r){var n=this;this._attachByobReader();var o=new Uint8Array(r.view.byteLength),i=this._underlyingReader.read(o).then(function(a){n._readableStreamController,a.done?(n._tryClose(),r.respond(0)):(R$(a.value,r.view),r.respond(a.value.byteLength))});return this._setPendingRead(i),i},t}(__);function x$(e){var t,r,n,o,i,a,u;return l(),{feed:s,reset:l};function l(){t=!0,r="",n=0,o=-1,i=void 0,a=void 0,u=""}function s(f){r=r?r+f:f,t&&P$(r)&&(r=r.slice(b_.length)),t=!1;for(var d=r.length,v=0,m=!1;v<d;){m&&(r[v]===`
`&&(v+=1),m=!1);for(var b=-1,w=o,_=void 0,E=n;b<0&&E<d;E++)_=r[E],_===":"&&w<0?w=E-v:_==="\r"?(m=!0,b=E-v):_===`
`&&(b=E-v);if(b<0){n=d-v,o=w;break}else n=0,o=-1;c(r,v,w,b),v+=b+1}v===d?r="":v>0&&(r=r.slice(v))}function c(f,d,v,m){if(m===0){u.length>0&&(e({type:"event",id:i,event:a||void 0,data:u.slice(0,-1)}),u="",i=void 0),a=void 0;return}var b=v<0,w=f.slice(d,d+(b?m:v)),_=0;b?_=m:f[d+v+1]===" "?_=v+2:_=v+1;var E=d+_,A=m-_,I=f.slice(E,E+A).toString();if(w==="data")u+=I?"".concat(I,`
`):`
`;else if(w==="event")a=I;else if(w==="id"&&!I.includes("\0"))i=I;else if(w==="retry"){var R=parseInt(I,10);Number.isNaN(R)||e({type:"reconnect-interval",value:R})}}}var b_=[239,187,191];function P$(e){return b_.every(function(t,r){return e.charCodeAt(r)===t})}var w_={exports:{}};(function(e,t){(function(r,n){e.exports=n()})(de,function(){var r=typeof de<"u"?de:self;if(typeof r.TextEncoder<"u"&&typeof r.TextDecoder<"u")return{TextEncoder:r.TextEncoder,TextDecoder:r.TextDecoder};var n=["utf8","utf-8","unicode-1-1-utf-8"],o=function(a){if(n.indexOf(a)<0&&typeof a<"u"&&a!==null)throw new RangeError("Invalid encoding type. Only utf-8 is supported");this.encoding="utf-8",this.encode=function(u){if(typeof u!="string")throw new TypeError("passed argument must be of type string");var l=unescape(encodeURIComponent(u)),s=new Uint8Array(l.length);return l.split("").forEach(function(c,f){s[f]=c.charCodeAt(0)}),s}},i=function(a,u){if(n.indexOf(a)<0&&typeof a<"u"&&a!==null)throw new RangeError("Invalid encoding type. Only utf-8 is supported");if(this.encoding="utf-8",this.ignoreBOM=!1,this.fatal=typeof u<"u"&&"fatal"in u?u.fatal:!1,typeof this.fatal!="boolean")throw new TypeError("fatal flag must be boolean");this.decode=function(l,s){if(typeof l>"u")return"";var c=typeof s<"u"&&"stream"in s?s.stream:!1;if(typeof c!="boolean")throw new TypeError("stream option must be boolean");if(ArrayBuffer.isView(l)){var f=new Uint8Array(l.buffer,l.byteOffset,l.byteLength),d=new Array(f.length);return f.forEach(function(v,m){d[m]=String.fromCharCode(v)}),decodeURIComponent(escape(d.join("")))}else throw new TypeError("passed argument must be an array buffer view")}};return{TextEncoder:o,TextDecoder:i}})})(w_);var N$=w_.exports,E_=function(e,t,r,n){function o(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function u(c){try{s(n.next(c))}catch(f){a(f)}}function l(c){try{s(n.throw(c))}catch(f){a(f)}}function s(c){c.done?i(c.value):o(c.value).then(u,l)}s((n=n.apply(e,t||[])).next())})},S_=function(e,t){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function u(s){return function(c){return l([s,c])}}function l(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(r=0)),r;)try{if(n=1,o&&(i=s[0]&2?o.return:s[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,s[1])).done)return i;switch(o=0,i&&(s=[s[0]&2,i.value]),s[0]){case 0:case 1:i=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,o=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(s[0]===6||s[0]===2)){r=0;continue}if(s[0]===3&&(!i||s[1]>i[0]&&s[1]<i[3])){r.label=s[1];break}if(s[0]===6&&r.label<i[1]){r.label=i[1],i=s;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(s);break}i[2]&&r.ops.pop(),r.trys.pop();continue}s=t.call(e,r)}catch(c){s=[6,c],o=0}finally{n=i=0}if(s[0]&5)throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}},L$=function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],r;return t?t.call(e):(e=typeof __values=="function"?__values(e):e[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(i){r[i]=e[i]&&function(a){return new Promise(function(u,l){a=e[i](a),o(u,l,a.done,a.value)})}}function o(i,a,u,l){Promise.resolve(l).then(function(s){i({value:s,done:u})},a)}},D$=tt,Ge=Na,I_=function(){var e;return new Ge({start:function(t){e=x$(function(r){r.type==="event"&&t.enqueue(r)})},transform:function(t){e.feed(t)}})},kt=O$(D$),ld=function(){function e(t,r){t===void 0&&(t="utf-8"),r===void 0&&(r={});var n=this;this.transform=new Ge({transform:function(o,i){var a=n.handle.decode(new Uint8Array(o),{stream:!0});a&&i.enqueue(a)},flush:function(o){var i=n.handle.decode();i&&o.enqueue(i),o.terminate()}}),this.handle=new N$.TextDecoder(t,r)}return Object.defineProperty(e.prototype,"encoding",{get:function(){return this.handle.encoding},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fatal",{get:function(){return this.handle.fatal},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ignoreBOM",{get:function(){return this.handle.ignoreBOM},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"readable",{get:function(){return this.transform.readable},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"writable",{get:function(){return this.transform.writable},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,Symbol.toStringTag,{get:function(){return"TextDecoderStream"},enumerable:!1,configurable:!0}),e}();function Me(e){var t=e;return t[Symbol.asyncIterator]=function(){var r=e.getReader();return{next:function(){return E_(this,void 0,void 0,function(){var n,o,i;return S_(this,function(a){switch(a.label){case 0:return[4,r.read()];case 1:return n=a.sent(),o=n.done,i=n.value,[2,o?{done:!0,value:void 0}:{done:!1,value:i}]}})})}}},t}function vr(e){return Me(e.pipeThrough(new ld).pipeThrough(I_()).pipeThrough(new Ge({transform:function(t,r){try{var n=JSON.parse(t.data);r.enqueue(n)}catch(o){t.data!=="[DONE]"?console.warn("Error when transforming event source data to json",o,t):r.terminate()}}})))}function U$(e){return Me(kt(e).pipeThrough(new ld))}function $$(e){var t,r,n,o;return E_(this,void 0,void 0,function(){var i,a,u,l,s,c,f;return S_(this,function(d){switch(d.label){case 0:i=U$(e),a="",d.label=1;case 1:d.trys.push([1,6,7,12]),u=!0,l=L$(i),d.label=2;case 2:return[4,l.next()];case 3:if(s=d.sent(),t=s.done,!!t)return[3,5];o=s.value,u=!1;try{c=o,a+=c}finally{u=!0}d.label=4;case 4:return[3,2];case 5:return[3,12];case 6:return f=d.sent(),r={error:f},[3,12];case 7:return d.trys.push([7,,10,11]),!u&&!t&&(n=l.return)?[4,n.call(l)]:[3,9];case 8:d.sent(),d.label=9;case 9:return[3,11];case 10:if(r)throw r.error;return[7];case 11:return[7];case 12:return[2,JSON.parse(a)]}})})}function rv(){var e,t,r=new Promise(function(n,o){e=n,t=o});return{promise:r,res:e,rej:t}}function tr(e){var t;return e.role==="assistant"&&"tool_calls"in e&&((t=e.tool_calls)===null||t===void 0?void 0:t[0])!=null}function F$(e){return{type:"function",function:{description:e.description,name:e.name,parameters:e.parameters}}}var gn=function(){return gn=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},gn.apply(this,arguments)},or=function(e,t,r,n){function o(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function u(c){try{s(n.next(c))}catch(f){a(f)}}function l(c){try{s(n.throw(c))}catch(f){a(f)}}function s(c){c.done?i(c.value):o(c.value).then(u,l)}s((n=n.apply(e,t||[])).next())})},sr=function(e,t){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function u(s){return function(c){return l([s,c])}}function l(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(r=0)),r;)try{if(n=1,o&&(i=s[0]&2?o.return:s[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,s[1])).done)return i;switch(o=0,i&&(s=[s[0]&2,i.value]),s[0]){case 0:case 1:i=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,o=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(s[0]===6||s[0]===2)){r=0;continue}if(s[0]===3&&(!i||s[1]>i[0]&&s[1]<i[3])){r.label=s[1];break}if(s[0]===6&&r.label<i[1]){r.label=i[1],i=s;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(s);break}i[2]&&r.ops.pop(),r.trys.pop();continue}s=t.call(e,r)}catch(c){s=[6,c],o=0}finally{n=i=0}if(s[0]&5)throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}},Hs=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]]);return r},M$=function(){function e(t,r){this.baseUrl=r;var n=arguments[2];typeof n=="string"?this.req=function(o){var i=o.headers,a=i===void 0?{}:i,u=Hs(o,["headers"]);return t(gn(gn({},u),{headers:gn(gn({},a),{Authorization:"Bearer ".concat(n)})}))}:this.req=t}return e.prototype.list=function(t,r){return this.req({method:"get",url:this.join("bots"),data:t,timeout:r==null?void 0:r.timeout})},e.prototype.create=function(t,r){var n=t.botInfo;return this.req({method:"post",url:this.join("bots"),data:n,timeout:r==null?void 0:r.timeout})},e.prototype.get=function(t,r){var n=t.botId;return this.req({method:"get",url:this.join("bots/".concat(n)),timeout:r==null?void 0:r.timeout})},e.prototype.update=function(t,r){var n=t.botId,o=t.botInfo;return this.req({method:"PATCH",url:this.join("bots/".concat(n)),data:o,timeout:r==null?void 0:r.timeout})},e.prototype.delete=function(t,r){var n=t.botId;return this.req({method:"delete",url:this.join("bots/".concat(n)),timeout:r==null?void 0:r.timeout})},e.prototype.getChatRecords=function(t,r){return this.req({method:"get",url:this.join("bots/".concat(t.botId,"/records")),data:t,timeout:r==null?void 0:r.timeout})},e.prototype.sendFeedback=function(t,r){var n=t.userFeedback;return this.req({method:"post",url:this.join("bots/".concat(n.botId,"/feedback")),data:n,timeout:r==null?void 0:r.timeout})},e.prototype.getFeedback=function(t,r){return this.req({method:"get",url:this.join("bots/".concat(t.botId,"/feedback")),data:t,timeout:r==null?void 0:r.timeout})},e.prototype.uploadFiles=function(t,r){return or(this,void 0,void 0,function(){return sr(this,function(n){return[2,this.req({method:"post",url:this.join("bots/".concat(t.botId,"/files")),data:t,timeout:r==null?void 0:r.timeout})]})})},e.prototype.createConversation=function(t,r){var n=t.botId,o=Hs(t,["botId"]);return or(this,void 0,void 0,function(){return sr(this,function(i){return[2,this.req({method:"post",url:this.join("bots/".concat(n,"/conversation")),data:o,timeout:r==null?void 0:r.timeout})]})})},e.prototype.getConversation=function(t,r){var n=t.pageSize,o=n===void 0?10:n,i=t.pageNumber,a=i===void 0?1:i,u=t.botId,l=Hs(t,["pageSize","pageNumber","botId"]);return or(this,void 0,void 0,function(){var s,c;return sr(this,function(f){if(a<1)throw new Error("pageNumber must be greater than 0");return s=o*(a-1),c=o,[2,this.req({method:"get",url:this.join("bots/".concat(u,"/conversation")),data:gn(gn({},l),{offset:s,limit:c}),timeout:r==null?void 0:r.timeout})]})})},e.prototype.deleteConversation=function(t,r){var n=t.botId,o=t.conversationId,i=Hs(t,["botId","conversationId"]);return or(this,void 0,void 0,function(){return sr(this,function(a){return[2,this.req({method:"delete",url:this.join("bots/".concat(n,"/conversation/").concat(o)),data:i,timeout:r==null?void 0:r.timeout})]})})},e.prototype.speechToText=function(t,r){return or(this,void 0,void 0,function(){return sr(this,function(n){return[2,this.req({method:"post",url:this.join("bots/".concat(t.botId,"/speech-to-text")),data:t,timeout:r==null?void 0:r.timeout})]})})},e.prototype.textToSpeech=function(t,r){return or(this,void 0,void 0,function(){return sr(this,function(n){return[2,this.req({method:"post",url:this.join("bots/".concat(t.botId,"/text-to-speech")),data:t,timeout:r==null?void 0:r.timeout})]})})},e.prototype.getTextToSpeechResult=function(t,r){return or(this,void 0,void 0,function(){return sr(this,function(n){return[2,this.req({method:"get",url:this.join("bots/".concat(t.botId,"/text-to-speech")),data:t,timeout:r==null?void 0:r.timeout})]})})},e.prototype.getRecommendQuestions=function(t,r){return or(this,void 0,void 0,function(){var n;return sr(this,function(o){switch(o.label){case 0:return[4,this.req({method:"post",url:this.join("bots/".concat(t.botId,"/recommend-questions")),data:t,stream:!0,timeout:r==null?void 0:r.timeout})];case 1:return n=o.sent(),[2,new Gs(n)]}})})},e.prototype.generateBot=function(t,r){return or(this,void 0,void 0,function(){var n;return sr(this,function(o){switch(o.label){case 0:return[4,this.req({method:"post",url:this.join("generate-bot"),data:t,stream:!0,timeout:r==null?void 0:r.timeout})];case 1:return n=o.sent(),[2,new Gs(n)]}})})},e.prototype.getPreview=function(t,r){return or(this,void 0,void 0,function(){var n;return sr(this,function(o){switch(o.label){case 0:return[4,this.req({method:"post",url:this.join("preview"),data:t,stream:!0,timeout:r==null?void 0:r.timeout})];case 1:return n=o.sent(),[2,new Gs(n)]}})})},e.prototype.generateImage=function(t,r){return this.req({method:"post",url:this.join("generate-image"),data:t,timeout:r==null?void 0:r.timeout})},e.prototype.sendMessage=function(t,r){return or(this,void 0,void 0,function(){var n;return sr(this,function(o){switch(o.label){case 0:return[4,this.req({method:"post",url:this.join("bots/".concat(t.botId,"/send-message")),data:t,stream:!0,timeout:r==null?void 0:r.timeout})];case 1:return n=o.sent(),[2,new Gs(n)]}})})},e.prototype.join=function(t){return"".concat(this.baseUrl,"/").concat(t)},e}(),Gs=function(){function e(t){var r=kt(t);this._eventSourceStream=r.pipeThrough(new ld).pipeThrough(I_())}return Object.defineProperty(e.prototype,"teeedStream",{get:function(){var t=this._eventSourceStream.tee(),r=t[0],n=t[1];return this._eventSourceStream=n,r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"eventSourceStream",{get:function(){return Me(this.teeedStream)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dataStream",{get:function(){return Me(this.eventSourceStream.pipeThrough(new Ge({transform:function(t,r){try{var n=JSON.parse(t.data);r.enqueue(n)}catch(o){t.data!=="[DONE]"?console.warn("Error when transforming event source data to json",o,t):r.terminate()}}})))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textStream",{get:function(){return Me(this.dataStream.pipeThrough(new Ge({transform:function(t,r){var n;r.enqueue((n=t==null?void 0:t.content)!==null&&n!==void 0?n:"")}})))},enumerable:!1,configurable:!0}),e}(),ot=function(){return ot=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},ot.apply(this,arguments)},nv=function(e,t,r,n){function o(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function u(c){try{s(n.next(c))}catch(f){a(f)}}function l(c){try{s(n.throw(c))}catch(f){a(f)}}function s(c){c.done?i(c.value):o(c.value).then(u,l)}s((n=n.apply(e,t||[])).next())})},iv=function(e,t){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function u(s){return function(c){return l([s,c])}}function l(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(r=0)),r;)try{if(n=1,o&&(i=s[0]&2?o.return:s[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,s[1])).done)return i;switch(o=0,i&&(s=[s[0]&2,i.value]),s[0]){case 0:case 1:i=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,o=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(s[0]===6||s[0]===2)){r=0;continue}if(s[0]===3&&(!i||s[1]>i[0]&&s[1]<i[3])){r.label=s[1];break}if(s[0]===6&&r.label<i[1]){r.label=i[1],i=s;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(s);break}i[2]&&r.ops.pop(),r.trys.pop();continue}s=t.call(e,r)}catch(c){s=[6,c],o=0}finally{n=i=0}if(s[0]&5)throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}};function ov(e){var t=e.messages,r=e.model,n=e.temperature,o=e.tool_choice,i=e.tools,a=e.top_p,u=function(){return o&&o!=="auto"&&console.warn("`tool_choice` is not 'auto'"),o};return ot(ot({},e),{messages:t,model:r,temperature:n,tool_choice:u(),tools:i,top_p:a})}var T_=function(){function e(t,r,n){this.req=t,this.baseUrl=r,this.subUrl="zhipu/api/paas/v4/chat/completions",n!=null&&(this.subUrl=n)}return Object.defineProperty(e.prototype,"url",{get:function(){return"".concat(this.baseUrl,"/").concat(this.subUrl)},enumerable:!1,configurable:!0}),e.prototype.doGenerate=function(t,r){return nv(this,void 0,void 0,function(){var n,o;return iv(this,function(i){switch(i.label){case 0:return n=ov(t),[4,this.req({url:this.url,data:ot(ot({},n),{stream:!1}),stream:!1,timeout:r==null?void 0:r.timeout})];case 1:return o=i.sent(),[2,ot(ot({},o),{rawResponse:o})]}})})},e.prototype.doStream=function(t,r){return nv(this,void 0,void 0,function(){var n,o,i,a,u,l;return iv(this,function(s){switch(s.label){case 0:return n=ov(t),o=null,[4,this.req({url:this.url,data:ot(ot({},n),{stream:!0}),stream:!0,timeout:r==null?void 0:r.timeout})];case 1:return i=s.sent(),a=kt(i),u=vr(a),l=u.pipeThrough(new Ge({transform:function(c,f){var d=c.choices.map(function(m){var b=m.delta;return o==null&&(o=tr(b)),o?ot(ot({},m),{finish_reason:"tool_calls",delta:b}):m}),v=ot(ot({},c),{choices:d});f.enqueue(ot(ot({},v),{rawResponse:c}))}})),[2,Me(l)]}})})},e}(),Ka=function(){return Ka=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Ka.apply(this,arguments)};function di(e){var t=e.messages,r=e.model,n=e.temperature,o=e.tool_choice,i=e.tools,a=e.top_p,u=function(){if(i)return i.forEach(function(s){s.type!=="function"&&console.warn("`type` in tool is not 'function'",s)}),i},l=function(){return t.forEach(function(s){"tool_calls"in s&&s.tool_calls.filter(function(c){return c.type!=="function"}).forEach(function(c){return console.warn("`type` in tool_call is not 'function'",c,s)})}),t};return Ka(Ka({},e),{messages:l(),model:r,tools:u(),top_p:a,tool_choice:o,temperature:n})}function za(e){if(typeof e!="object"||e==null)return e;if(Array.isArray(e))return e.map(function(r){return za(r)});return Object.entries(e).reduce(function(r,n){var o=n[0],i=n[1],a=t(o);return r[a]=typeof i=="object"?za(i):i,r},{});function t(r){var n=r.replace(/[A-Z]/g,function(o){return"_".concat(o.toLowerCase())});return n.charAt(0)==="_"?n.slice(1):n}}var wt=function(){return wt=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},wt.apply(this,arguments)},sv=function(e,t,r,n){function o(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function u(c){try{s(n.next(c))}catch(f){a(f)}}function l(c){try{s(n.throw(c))}catch(f){a(f)}}function s(c){c.done?i(c.value):o(c.value).then(u,l)}s((n=n.apply(e,t||[])).next())})},av=function(e,t){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function u(s){return function(c){return l([s,c])}}function l(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(r=0)),r;)try{if(n=1,o&&(i=s[0]&2?o.return:s[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,s[1])).done)return i;switch(o=0,i&&(s=[s[0]&2,i.value]),s[0]){case 0:case 1:i=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,o=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(s[0]===6||s[0]===2)){r=0;continue}if(s[0]===3&&(!i||s[1]>i[0]&&s[1]<i[3])){r.label=s[1];break}if(s[0]===6&&r.label<i[1]){r.label=i[1],i=s;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(s);break}i[2]&&r.ops.pop(),r.trys.pop();continue}s=t.call(e,r)}catch(c){s=[6,c],o=0}finally{n=i=0}if(s[0]&5)throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}},O_=function(){function e(t,r,n){this.req=t,this.baseUrl=r,this.subUrl="hunyuan-beta/openapi/v1/chat/completions",n!=null&&(this.subUrl=n)}return Object.defineProperty(e.prototype,"url",{get:function(){return"".concat(this.baseUrl,"/").concat(this.subUrl)},enumerable:!1,configurable:!0}),e.prototype.doGenerate=function(t,r){return sv(this,void 0,void 0,function(){var n;return av(this,function(o){switch(o.label){case 0:return[4,this.req({url:this.url,data:wt(wt({},di(t)),{stream:!1}),stream:!1,timeout:r==null?void 0:r.timeout})];case 1:return n=o.sent(),[2,wt(wt({},n),{rawResponse:n})]}})})},e.prototype.doStream=function(t,r){return sv(this,void 0,void 0,function(){var n,o,i,a,u;return av(this,function(l){switch(l.label){case 0:return n=null,[4,this.req({url:this.url,data:wt(wt({},di(t)),{stream:!0}),stream:!0,timeout:r==null?void 0:r.timeout})];case 1:return o=l.sent(),i=kt(o),a=vr(i),u=a.pipeThrough(new Ge({transform:function(s,c){var f=s.choices.map(function(v){var m=v.delta;return n==null&&(n=tr(m)),n?wt(wt({},v),{finish_reason:"tool_calls",delta:m}):v}),d=wt(wt({},s),{choices:f});c.enqueue(wt(wt({},d),{rawResponse:s}))}})),[2,Me(u)]}})})},e}(),Et=function(){return Et=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Et.apply(this,arguments)},uv=function(e,t,r,n){function o(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function u(c){try{s(n.next(c))}catch(f){a(f)}}function l(c){try{s(n.throw(c))}catch(f){a(f)}}function s(c){c.done?i(c.value):o(c.value).then(u,l)}s((n=n.apply(e,t||[])).next())})},cv=function(e,t){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function u(s){return function(c){return l([s,c])}}function l(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(r=0)),r;)try{if(n=1,o&&(i=s[0]&2?o.return:s[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,s[1])).done)return i;switch(o=0,i&&(s=[s[0]&2,i.value]),s[0]){case 0:case 1:i=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,o=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(s[0]===6||s[0]===2)){r=0;continue}if(s[0]===3&&(!i||s[1]>i[0]&&s[1]<i[3])){r.label=s[1];break}if(s[0]===6&&r.label<i[1]){r.label=i[1],i=s;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(s);break}i[2]&&r.ops.pop(),r.trys.pop();continue}s=t.call(e,r)}catch(c){s=[6,c],o=0}finally{n=i=0}if(s[0]&5)throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}},A_=function(){function e(t,r,n){this.req=t,this.baseUrl=r,this.subUrl="hunyuan",n!=null&&(this.subUrl=n)}return Object.defineProperty(e.prototype,"url",{get:function(){return"".concat(this.baseUrl,"/").concat(this.subUrl)},enumerable:!1,configurable:!0}),e.prototype.doGenerate=function(t,r){return uv(this,void 0,void 0,function(){var n,o;return cv(this,function(i){switch(i.label){case 0:return[4,this.req({url:this.url,headers:{"X-Tc-Action":"ChatCompletions"},data:Et(Et({},di(t)),{stream:!1}),stream:!1,timeout:r==null?void 0:r.timeout})];case 1:return n=i.sent(),o=za(n.Response),[2,Et(Et({},o),{rawResponse:n})]}})})},e.prototype.doStream=function(t,r){return uv(this,void 0,void 0,function(){var n,o,i,a,u;return cv(this,function(l){switch(l.label){case 0:return n=null,[4,this.req({url:this.url,headers:{"X-Tc-Action":"ChatCompletions"},data:Et(Et({},t),{stream:!0}),stream:!0,timeout:r==null?void 0:r.timeout})];case 1:return o=l.sent(),i=kt(o),a=vr(i),u=a.pipeThrough(new Ge({transform:function(s,c){var f=za(s),d=f.choices.map(function(m){var b=m.delta;return n==null&&(n=tr(b)),n?Et(Et({},m),{finish_reason:"tool_calls",delta:b}):m}),v=Et(Et({},f),{choices:d});c.enqueue(Et(Et({},v),{rawResponse:s}))}})),[2,Me(u)]}})})},e}(),st=function(){return st=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},st.apply(this,arguments)},lv=function(e,t,r,n){function o(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function u(c){try{s(n.next(c))}catch(f){a(f)}}function l(c){try{s(n.throw(c))}catch(f){a(f)}}function s(c){c.done?i(c.value):o(c.value).then(u,l)}s((n=n.apply(e,t||[])).next())})},fv=function(e,t){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function u(s){return function(c){return l([s,c])}}function l(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(r=0)),r;)try{if(n=1,o&&(i=s[0]&2?o.return:s[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,s[1])).done)return i;switch(o=0,i&&(s=[s[0]&2,i.value]),s[0]){case 0:case 1:i=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,o=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(s[0]===6||s[0]===2)){r=0;continue}if(s[0]===3&&(!i||s[1]>i[0]&&s[1]<i[3])){r.label=s[1];break}if(s[0]===6&&r.label<i[1]){r.label=i[1],i=s;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(s);break}i[2]&&r.ops.pop(),r.trys.pop();continue}s=t.call(e,r)}catch(c){s=[6,c],o=0}finally{n=i=0}if(s[0]&5)throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}};function dv(e){var t=e.messages,r=e.model,n=e.temperature,o=e.tools,i=e.top_p;return st(st({},e),{messages:t,model:r,tools:o,top_p:i,temperature:n})}var R_=function(){function e(t,r,n){this.req=t,this.baseUrl=r,this.subUrl="ark/api/v3/chat/completions",n!=null&&(this.subUrl=n)}return Object.defineProperty(e.prototype,"url",{get:function(){return"".concat(this.baseUrl,"/").concat(this.subUrl)},enumerable:!1,configurable:!0}),e.prototype.doGenerate=function(t,r){return lv(this,void 0,void 0,function(){var n;return fv(this,function(o){switch(o.label){case 0:return[4,this.req({url:this.url,data:st(st({},dv(t)),{stream:!1}),stream:!1,timeout:r==null?void 0:r.timeout})];case 1:return n=o.sent(),[2,st(st({},n),{rawResponse:n})]}})})},e.prototype.doStream=function(t,r){return lv(this,void 0,void 0,function(){var n,o,i,a,u;return fv(this,function(l){switch(l.label){case 0:return n=null,[4,this.req({url:this.url,data:st(st({},dv(t)),{stream:!0}),stream:!0,timeout:r==null?void 0:r.timeout})];case 1:return o=l.sent(),i=kt(o),a=vr(i),u=a.pipeThrough(new Ge({transform:function(s,c){var f=s.choices.map(function(v){var m=v.delta;return n==null&&(n=tr(m)),n?st(st({},v),{finish_reason:"tool_calls",delta:m}):v}),d=st(st({},s),{choices:f});c.enqueue(st(st({},d),{rawResponse:s}))}})),[2,Me(u)]}})})},e}(),Qe=function(){return Qe=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Qe.apply(this,arguments)},hv=function(e,t,r,n){function o(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function u(c){try{s(n.next(c))}catch(f){a(f)}}function l(c){try{s(n.throw(c))}catch(f){a(f)}}function s(c){c.done?i(c.value):o(c.value).then(u,l)}s((n=n.apply(e,t||[])).next())})},pv=function(e,t){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function u(s){return function(c){return l([s,c])}}function l(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(r=0)),r;)try{if(n=1,o&&(i=s[0]&2?o.return:s[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,s[1])).done)return i;switch(o=0,i&&(s=[s[0]&2,i.value]),s[0]){case 0:case 1:i=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,o=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(s[0]===6||s[0]===2)){r=0;continue}if(s[0]===3&&(!i||s[1]>i[0]&&s[1]<i[3])){r.label=s[1];break}if(s[0]===6&&r.label<i[1]){r.label=i[1],i=s;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(s);break}i[2]&&r.ops.pop(),r.trys.pop();continue}s=t.call(e,r)}catch(c){s=[6,c],o=0}finally{n=i=0}if(s[0]&5)throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}};function vv(e){var t=e.messages,r=e.model,n=e.temperature,o=e.tools,i=e.top_p;return Qe(Qe({},e),{messages:t,model:r,tools:o,top_p:i,temperature:n})}var C_=function(){function e(t,r,n){this.req=t,this.baseUrl=r,this.subUrl="dashscope/compatible-mode/v1/chat/completions",n!=null&&(this.subUrl=n)}return Object.defineProperty(e.prototype,"url",{get:function(){return"".concat(this.baseUrl,"/").concat(this.subUrl)},enumerable:!1,configurable:!0}),e.prototype.doGenerate=function(t,r){return hv(this,void 0,void 0,function(){var n;return pv(this,function(o){switch(o.label){case 0:return[4,this.req({url:this.url,data:Qe(Qe({},vv(t)),{stream:!1}),stream:!1,timeout:r==null?void 0:r.timeout})];case 1:return n=o.sent(),[2,Qe(Qe({},n),{rawResponse:n})]}})})},e.prototype.doStream=function(t,r){return hv(this,void 0,void 0,function(){var n,o,i,a,u;return pv(this,function(l){switch(l.label){case 0:return n=null,[4,this.req({url:this.url,data:Qe(Qe({},vv(t)),{stream:!0}),stream:!0,timeout:r==null?void 0:r.timeout})];case 1:return o=l.sent(),i=kt(o),a=vr(i),u=a.pipeThrough(new Ge({transform:function(s,c){var f=s.choices.map(function(v){var m=Object.assign(v.delta,{role:"assistant"});return n==null&&(n=tr(m)),n?Qe(Qe({},v),{finish_reason:"tool_calls",delta:m}):Qe(Qe({},v),{delta:m})}),d=Qe(Qe({},s),{choices:f});c.enqueue(Qe(Qe({},d),{rawResponse:s}))}})),[2,Me(u)]}})})},e}(),Xe=function(){return Xe=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Xe.apply(this,arguments)},gv=function(e,t,r,n){function o(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function u(c){try{s(n.next(c))}catch(f){a(f)}}function l(c){try{s(n.throw(c))}catch(f){a(f)}}function s(c){c.done?i(c.value):o(c.value).then(u,l)}s((n=n.apply(e,t||[])).next())})},mv=function(e,t){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function u(s){return function(c){return l([s,c])}}function l(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(r=0)),r;)try{if(n=1,o&&(i=s[0]&2?o.return:s[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,s[1])).done)return i;switch(o=0,i&&(s=[s[0]&2,i.value]),s[0]){case 0:case 1:i=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,o=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(s[0]===6||s[0]===2)){r=0;continue}if(s[0]===3&&(!i||s[1]>i[0]&&s[1]<i[3])){r.label=s[1];break}if(s[0]===6&&r.label<i[1]){r.label=i[1],i=s;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(s);break}i[2]&&r.ops.pop(),r.trys.pop();continue}s=t.call(e,r)}catch(c){s=[6,c],o=0}finally{n=i=0}if(s[0]&5)throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}};function yv(e){var t=e.messages,r=e.model,n=e.temperature,o=e.tools,i=e.top_p;return Xe(Xe({},e),{messages:t,model:r,tools:o,top_p:i,temperature:n})}var x_=function(){function e(t,r,n){this.req=t,this.baseUrl=r,this.subUrl="01-ai/v1/chat/completions",n!=null&&(this.subUrl=n)}return Object.defineProperty(e.prototype,"url",{get:function(){return"".concat(this.baseUrl,"/").concat(this.subUrl)},enumerable:!1,configurable:!0}),e.prototype.doGenerate=function(t,r){return gv(this,void 0,void 0,function(){var n;return mv(this,function(o){switch(o.label){case 0:return[4,this.req({url:this.url,data:Xe(Xe({},yv(t)),{stream:!1}),stream:!1,timeout:r==null?void 0:r.timeout})];case 1:return n=o.sent(),[2,Xe(Xe({},n),{rawResponse:n})]}})})},e.prototype.doStream=function(t,r){return gv(this,void 0,void 0,function(){var n,o,i,a,u;return mv(this,function(l){switch(l.label){case 0:return n=null,[4,this.req({url:this.url,data:Xe(Xe({},yv(t)),{stream:!0}),stream:!0,timeout:r==null?void 0:r.timeout})];case 1:return o=l.sent(),i=kt(o),a=vr(i),u=a.pipeThrough(new Ge({transform:function(s,c){var f,d,v,m,b,w;if(!((v=(d=(f=s==null?void 0:s.choices)===null||f===void 0?void 0:f[0])===null||d===void 0?void 0:d.delta)===null||v===void 0)&&v.content||!((w=(b=(m=s==null?void 0:s.choices)===null||m===void 0?void 0:m[0])===null||b===void 0?void 0:b.delta)===null||w===void 0)&&w.tool_calls){var _=s.choices.map(function(A){var I=Object.assign(A.delta,{role:"assistant"});return n==null&&(n=tr(I)),n?Xe(Xe({},A),{finish_reason:"tool_calls",delta:I}):Xe(Xe({},A),{delta:I})}),E=Xe(Xe({},s),{choices:_});c.enqueue(Xe(Xe({},E),{rawResponse:s}))}}})),[2,Me(u)]}})})},e}(),at=function(){return at=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},at.apply(this,arguments)},_v=function(e,t,r,n){function o(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function u(c){try{s(n.next(c))}catch(f){a(f)}}function l(c){try{s(n.throw(c))}catch(f){a(f)}}function s(c){c.done?i(c.value):o(c.value).then(u,l)}s((n=n.apply(e,t||[])).next())})},bv=function(e,t){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function u(s){return function(c){return l([s,c])}}function l(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(r=0)),r;)try{if(n=1,o&&(i=s[0]&2?o.return:s[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,s[1])).done)return i;switch(o=0,i&&(s=[s[0]&2,i.value]),s[0]){case 0:case 1:i=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,o=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(s[0]===6||s[0]===2)){r=0;continue}if(s[0]===3&&(!i||s[1]>i[0]&&s[1]<i[3])){r.label=s[1];break}if(s[0]===6&&r.label<i[1]){r.label=i[1],i=s;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(s);break}i[2]&&r.ops.pop(),r.trys.pop();continue}s=t.call(e,r)}catch(c){s=[6,c],o=0}finally{n=i=0}if(s[0]&5)throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}};function wv(e){var t=e.messages,r=e.model,n=e.temperature,o=e.tools,i=e.top_p;return at(at({},e),{messages:t,model:r,tools:o,top_p:i,temperature:n})}var P_=function(){function e(t,r,n){this.req=t,this.baseUrl=r,this.subUrl="moonshot/v1/chat/completions",n!=null&&(this.subUrl=n)}return Object.defineProperty(e.prototype,"url",{get:function(){return"".concat(this.baseUrl,"/").concat(this.subUrl)},enumerable:!1,configurable:!0}),e.prototype.doGenerate=function(t,r){return _v(this,void 0,void 0,function(){var n;return bv(this,function(o){switch(o.label){case 0:return[4,this.req({url:this.url,data:at(at({},wv(t)),{stream:!1}),stream:!1,timeout:r==null?void 0:r.timeout})];case 1:return n=o.sent(),[2,at(at({},n),{rawResponse:n})]}})})},e.prototype.doStream=function(t,r){return _v(this,void 0,void 0,function(){var n,o,i,a,u;return bv(this,function(l){switch(l.label){case 0:return n=null,[4,this.req({url:this.url,data:at(at({},wv(t)),{stream:!0}),stream:!0,timeout:r==null?void 0:r.timeout})];case 1:return o=l.sent(),i=kt(o),a=vr(i),u=a.pipeThrough(new Ge({transform:function(s,c){var f=s.choices.map(function(v){var m=v.delta;return n==null&&(n=tr(m)),n?at(at({},v),{finish_reason:"tool_calls",delta:m}):v}),d=at(at({},s),{choices:f});c.enqueue(at(at({},d),{rawResponse:s}))}})),[2,Me(u)]}})})},e}(),St=function(){return St=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},St.apply(this,arguments)},Ev=function(e,t,r,n){function o(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function u(c){try{s(n.next(c))}catch(f){a(f)}}function l(c){try{s(n.throw(c))}catch(f){a(f)}}function s(c){c.done?i(c.value):o(c.value).then(u,l)}s((n=n.apply(e,t||[])).next())})},Sv=function(e,t){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function u(s){return function(c){return l([s,c])}}function l(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(r=0)),r;)try{if(n=1,o&&(i=s[0]&2?o.return:s[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,s[1])).done)return i;switch(o=0,i&&(s=[s[0]&2,i.value]),s[0]){case 0:case 1:i=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,o=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(s[0]===6||s[0]===2)){r=0;continue}if(s[0]===3&&(!i||s[1]>i[0]&&s[1]<i[3])){r.label=s[1];break}if(s[0]===6&&r.label<i[1]){r.label=i[1],i=s;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(s);break}i[2]&&r.ops.pop(),r.trys.pop();continue}s=t.call(e,r)}catch(c){s=[6,c],o=0}finally{n=i=0}if(s[0]&5)throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}},N_=function(){function e(t,r,n){this.req=t,this.baseUrl=r,this.subUrl="hunyuan-exp/chat/completions",n!=null&&(this.subUrl=n)}return Object.defineProperty(e.prototype,"url",{get:function(){return"".concat(this.baseUrl,"/").concat(this.subUrl)},enumerable:!1,configurable:!0}),e.prototype.doGenerate=function(t){return Ev(this,void 0,void 0,function(){var r;return Sv(this,function(n){switch(n.label){case 0:return[4,this.req({url:this.url,data:St(St({},di(t)),{stream:!1}),stream:!1})];case 1:return r=n.sent(),[2,St(St({},r),{rawResponse:r})]}})})},e.prototype.doStream=function(t){return Ev(this,void 0,void 0,function(){var r,n,o,i,a;return Sv(this,function(u){switch(u.label){case 0:return r=null,[4,this.req({url:this.url,data:St(St({},di(t)),{stream:!0}),stream:!0})];case 1:return n=u.sent(),o=kt(n),i=vr(o),a=i.pipeThrough(new Ge({transform:function(l,s){var c=l.choices.map(function(d){var v=d.delta;return r==null&&(r=tr(v)),r?St(St({},d),{finish_reason:"tool_calls",delta:v}):d}),f=St(St({},l),{choices:c});s.enqueue(St(St({},f),{rawResponse:l}))}})),[2,Me(a)]}})})},e}(),It=function(){return It=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},It.apply(this,arguments)},Iv=function(e,t,r,n){function o(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function u(c){try{s(n.next(c))}catch(f){a(f)}}function l(c){try{s(n.throw(c))}catch(f){a(f)}}function s(c){c.done?i(c.value):o(c.value).then(u,l)}s((n=n.apply(e,t||[])).next())})},Tv=function(e,t){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function u(s){return function(c){return l([s,c])}}function l(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(r=0)),r;)try{if(n=1,o&&(i=s[0]&2?o.return:s[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,s[1])).done)return i;switch(o=0,i&&(s=[s[0]&2,i.value]),s[0]){case 0:case 1:i=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,o=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(s[0]===6||s[0]===2)){r=0;continue}if(s[0]===3&&(!i||s[1]>i[0]&&s[1]<i[3])){r.label=s[1];break}if(s[0]===6&&r.label<i[1]){r.label=i[1],i=s;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(s);break}i[2]&&r.ops.pop(),r.trys.pop();continue}s=t.call(e,r)}catch(c){s=[6,c],o=0}finally{n=i=0}if(s[0]&5)throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}},L_=function(){function e(t,r,n){this.req=t,this.baseUrl=r,this.subUrl="hunyuan-open/v1/chat/completions",n!=null&&(this.subUrl=n)}return Object.defineProperty(e.prototype,"url",{get:function(){return"".concat(this.baseUrl,"/").concat(this.subUrl)},enumerable:!1,configurable:!0}),e.prototype.doGenerate=function(t,r){return Iv(this,void 0,void 0,function(){var n;return Tv(this,function(o){switch(o.label){case 0:return[4,this.req({url:this.url,data:It(It({},di(t)),{stream:!1}),stream:!1,timeout:r==null?void 0:r.timeout})];case 1:return n=o.sent(),[2,It(It({},n),{rawResponse:n})]}})})},e.prototype.doStream=function(t,r){return Iv(this,void 0,void 0,function(){var n,o,i,a,u;return Tv(this,function(l){switch(l.label){case 0:return n=null,[4,this.req({url:this.url,data:It(It({},di(t)),{stream:!0}),stream:!0,timeout:r==null?void 0:r.timeout})];case 1:return o=l.sent(),i=kt(o),a=vr(i),u=a.pipeThrough(new Ge({transform:function(s,c){var f=s.choices.map(function(v){var m=v.delta;return n==null&&(n=tr(m)),n?It(It({},v),{finish_reason:"tool_calls",delta:m}):v}),d=It(It({},s),{choices:f});c.enqueue(It(It({},d),{rawResponse:s}))}})),[2,Me(u)]}})})},e}(),Tt=function(){return Tt=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Tt.apply(this,arguments)},Ov=function(e,t,r,n){function o(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function u(c){try{s(n.next(c))}catch(f){a(f)}}function l(c){try{s(n.throw(c))}catch(f){a(f)}}function s(c){c.done?i(c.value):o(c.value).then(u,l)}s((n=n.apply(e,t||[])).next())})},Av=function(e,t){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function u(s){return function(c){return l([s,c])}}function l(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(r=0)),r;)try{if(n=1,o&&(i=s[0]&2?o.return:s[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,s[1])).done)return i;switch(o=0,i&&(s=[s[0]&2,i.value]),s[0]){case 0:case 1:i=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,o=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(s[0]===6||s[0]===2)){r=0;continue}if(s[0]===3&&(!i||s[1]>i[0]&&s[1]<i[3])){r.label=s[1];break}if(s[0]===6&&r.label<i[1]){r.label=i[1],i=s;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(s);break}i[2]&&r.ops.pop(),r.trys.pop();continue}s=t.call(e,r)}catch(c){s=[6,c],o=0}finally{n=i=0}if(s[0]&5)throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}},B$=function(){function e(t,r,n){this.req=t,this.baseUrl=r,this.subUrl="deepseek/chat/completions",n!=null&&(this.subUrl=n)}return Object.defineProperty(e.prototype,"url",{get:function(){return"".concat(this.baseUrl,"/").concat(this.subUrl)},enumerable:!1,configurable:!0}),e.prototype.doGenerate=function(t,r){return Ov(this,void 0,void 0,function(){var n;return Av(this,function(o){switch(o.label){case 0:return[4,this.req({url:this.url,data:Tt(Tt({},t),{stream:!1}),stream:!1,timeout:r==null?void 0:r.timeout})];case 1:return n=o.sent(),[2,Tt(Tt({},n),{rawResponse:n})]}})})},e.prototype.doStream=function(t,r){return Ov(this,void 0,void 0,function(){var n,o,i,a,u;return Av(this,function(l){switch(l.label){case 0:return n=null,[4,this.req({url:this.url,data:Tt(Tt({},t),{stream:!0}),stream:!0,timeout:r==null?void 0:r.timeout})];case 1:return o=l.sent(),i=kt(o),a=vr(i),u=a.pipeThrough(new Ge({transform:function(s,c){var f=s.choices.map(function(v){var m=v.delta;return n==null&&(n=tr(m)),n?Tt(Tt({},v),{finish_reason:"tool_calls",delta:m}):v}),d=Tt(Tt({},s),{choices:f});c.enqueue(Tt(Tt({},d),{rawResponse:s}))}})),[2,Me(u)]}})})},e}(),Ot=function(){return Ot=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Ot.apply(this,arguments)},Rv=function(e,t,r,n){function o(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function u(c){try{s(n.next(c))}catch(f){a(f)}}function l(c){try{s(n.throw(c))}catch(f){a(f)}}function s(c){c.done?i(c.value):o(c.value).then(u,l)}s((n=n.apply(e,t||[])).next())})},Cv=function(e,t){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function u(s){return function(c){return l([s,c])}}function l(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(r=0)),r;)try{if(n=1,o&&(i=s[0]&2?o.return:s[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,s[1])).done)return i;switch(o=0,i&&(s=[s[0]&2,i.value]),s[0]){case 0:case 1:i=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,o=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(s[0]===6||s[0]===2)){r=0;continue}if(s[0]===3&&(!i||s[1]>i[0]&&s[1]<i[3])){r.label=s[1];break}if(s[0]===6&&r.label<i[1]){r.label=i[1],i=s;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(s);break}i[2]&&r.ops.pop(),r.trys.pop();continue}s=t.call(e,r)}catch(c){s=[6,c],o=0}finally{n=i=0}if(s[0]&5)throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}},D_=function(){function e(t,r,n){n===void 0&&(n=""),this.req=t,this.baseUrl=r,this.subUrl=n}return Object.defineProperty(e.prototype,"url",{get:function(){return"".concat(this.baseUrl,"/").concat(this.subUrl)},enumerable:!1,configurable:!0}),e.prototype.doGenerate=function(t){return Rv(this,void 0,void 0,function(){var r;return Cv(this,function(n){switch(n.label){case 0:return[4,this.req({url:this.url,data:Ot(Ot({},t),{stream:!1}),stream:!1})];case 1:return r=n.sent(),[2,Ot(Ot({},r),{rawResponse:r})]}})})},e.prototype.doStream=function(t){return Rv(this,void 0,void 0,function(){var r,n,o,i,a;return Cv(this,function(u){switch(u.label){case 0:return r=null,[4,this.req({url:this.url,data:Ot(Ot({},t),{stream:!0}),stream:!0})];case 1:return n=u.sent(),o=kt(n),i=vr(o),a=i.pipeThrough(new Ge({transform:function(l,s){var c=l.choices.map(function(d){var v=d.delta;return r==null&&(r=tr(v)),r?Ot(Ot({},d),{finish_reason:"tool_calls",delta:v}):d}),f=Ot(Ot({},l),{choices:c});s.enqueue(Ot(Ot({},f),{rawResponse:l}))}})),[2,Me(a)]}})})},e}(),Ja=function(){return Ja=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Ja.apply(this,arguments)},kl=function(e,t,r,n){function o(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function u(c){try{s(n.next(c))}catch(f){a(f)}}function l(c){try{s(n.throw(c))}catch(f){a(f)}}function s(c){c.done?i(c.value):o(c.value).then(u,l)}s((n=n.apply(e,t||[])).next())})},ql=function(e,t){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function u(s){return function(c){return l([s,c])}}function l(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(r=0)),r;)try{if(n=1,o&&(i=s[0]&2?o.return:s[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,s[1])).done)return i;switch(o=0,i&&(s=[s[0]&2,i.value]),s[0]){case 0:case 1:i=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,o=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(s[0]===6||s[0]===2)){r=0;continue}if(s[0]===3&&(!i||s[1]>i[0]&&s[1]<i[3])){r.label=s[1];break}if(s[0]===6&&r.label<i[1]){r.label=i[1],i=s;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(s);break}i[2]&&r.ops.pop(),r.trys.pop();continue}s=t.call(e,r)}catch(c){s=[6,c],o=0}finally{n=i=0}if(s[0]&5)throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}},j$=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]]);return r},k$=function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],r;return t?t.call(e):(e=typeof __values=="function"?__values(e):e[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(i){r[i]=e[i]&&function(a){return new Promise(function(u,l){a=e[i](a),o(u,l,a.done,a.value)})}}function o(i,a,u,l){Promise.resolve(l).then(function(s){i({value:s,done:u})},a)}},wr=function(e,t,r){if(r||arguments.length===2)for(var n=0,o=t.length,i;n<o;n++)(i||!(n in t))&&(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return e.concat(i||Array.prototype.slice.call(t))};function xv(e){var t,r=e.onStepFinish,n=e.abortSignal,o=e.maxSteps,i=e.topP,a=e.toolChoice,u=j$(e,["onStepFinish","abortSignal","maxSteps","topP","toolChoice"]);if(o!=null&&o<1)throw new Error("`maxSteps` muse be greater than 0.");return[{onStepFinish:r,abortSignal:n,maxSteps:o},Ja(Ja({},u),{tools:(t=u.tools)===null||t===void 0?void 0:t.map(function(l){return"fn"in l?F$(l):l}),top_p:i??u.top_p,tool_choice:a??u.tool_choice})]}var U_=function(){function e(t){this.model=t}return e.prototype.generateText=function(t,r){var n,o;return kl(this,void 0,void 0,function(){var i,a,u,l,s,c,f,d,v,m,b,w,_,E,A,I,R,L,U,N,D,k=this;return ql(this,function(M){switch(M.label){case 0:return i=[],a={completion_tokens:0,prompt_tokens:0,total_tokens:0},u=xv(t),l=u[0],s=l.onStepFinish,c=l.maxSteps,f=c===void 0?10:c,d=u[1],v=function(){return k.model.doGenerate(d,r)},[4,v()];case 1:m=M.sent(),b=1,m.rawResponse&&i.push(m.rawResponse),w=null,M.label=2;case 2:if(!(b<f&&(w=Pv(m))!=null))return[3,9];_=Dv(m.usage),To(a,_),M.label=3;case 3:return M.trys.push([3,7,,8]),[4,Lv(w)];case 4:return E=M.sent(),A=m.choices[0],[4,s==null?void 0:s({finishReason:A.finish_reason,messages:d.messages.slice(),text:A.message.content,toolCall:w,toolResult:E,stepUsage:_,totalUsage:Object.assign({},a)})];case 5:return M.sent(),Nv(d.messages,A.message,E),[4,v()];case 6:return m=M.sent(),m.rawResponse&&i.push(m.rawResponse),b+=1,[3,8];case 7:return I=M.sent(),[2,{text:"",messages:d.messages,usage:a,error:I,rawResponses:i}];case 8:return[3,2];case 9:return R=(n=m==null?void 0:m.choices)===null||n===void 0?void 0:n[0],L=R==null?void 0:R.message,U=(o=L==null?void 0:L.content)!==null&&o!==void 0?o:"",N=L?wr(wr([],d.messages,!0),[L],!1):d.messages,D=Dv(m.usage),To(a,D),[4,s==null?void 0:s({finishReason:R.finish_reason,messages:N.slice(),text:U,toolCall:Pv(m),toolResult:null,stepUsage:D,totalUsage:Object.assign({},a)})];case 10:return M.sent(),[2,{text:U,messages:N,usage:a,rawResponses:i}]}})})},e.prototype.streamText=function(t,r){var n;return kl(this,void 0,void 0,function(){var o,i,a,u,l,s,c,f,d,v,m,b,w,_,E,A,I,R,L,U,N,D,k,M,Q,oe,Y,Ae,ge,K,ce,se,ae,Re,We,Wt,rr=this;return ql(this,function(Ke){switch(Ke.label){case 0:return o={completion_tokens:0,prompt_tokens:0,total_tokens:0},i=xv(t),a=i[0],u=a.onStepFinish,l=a.maxSteps,s=l===void 0?10:l,c=i[1],f=function(){return rr.model.doStream(c,r)},[4,f()];case 1:d=Ke.sent(),v=1,m=null,b=function(){var ne=d.tee(),$=ne[0],W=ne[1];return d=Me($),q$(W)},Ke.label=2;case 2:return w=v<s,w?[4,b()]:[3,4];case 3:w=(m=Ke.sent())!=null,Ke.label=4;case 4:if(!w)return[3,11];_=m.message,E=m.usage,To(o,E),A=(n=_.tool_calls)===null||n===void 0?void 0:n[0],Ke.label=5;case 5:return Ke.trys.push([5,9,,10]),[4,Lv(A)];case 6:return I=Ke.sent(),[4,u==null?void 0:u({finishReason:"tool_calls",messages:c.messages.slice(),text:_.content,toolCall:A,toolResult:I,stepUsage:E,totalUsage:Object.assign({},o)})];case 7:return Ke.sent(),Nv(c.messages,_,I),[4,f()];case 8:return d=Ke.sent(),[3,10];case 9:return R=Ke.sent(),L=d.tee(),U=L[0],N=L[1],[2,{messages:Promise.resolve(c.messages),dataStream:Me(U),textStream:Me(N.pipeThrough(new Ge({transform:function(ne,$){var W,j,V,fe=(V=(j=(W=ne==null?void 0:ne.choices)===null||W===void 0?void 0:W[0])===null||j===void 0?void 0:j.delta)===null||V===void 0?void 0:V.content;typeof fe=="string"&&$.enqueue(fe)}}))),usage:Promise.resolve(o),error:R}];case 10:return[3,2];case 11:return[4,b()];case 12:return m=Ke.sent(),m?(D=m.message,k=m.usage,To(o,k),M=wr(wr([],c.messages,!0),[D],!1),u({messages:M.slice(),finishReason:"tool_call",stepUsage:k,text:D.content,toolCall:D.tool_calls[0],totalUsage:Object.assign({},o)}),Q=d.tee(),oe=Q[0],Y=Q[1],[2,{messages:Promise.resolve(wr(wr([],c.messages,!0),[D],!1)),dataStream:Me(oe),textStream:Me(Y.pipeThrough(new Ge({transform:function(ne,$){var W,j,V,fe=(V=(j=(W=ne==null?void 0:ne.choices)===null||W===void 0?void 0:W[0])===null||j===void 0?void 0:j.delta)===null||V===void 0?void 0:V.content;typeof fe=="string"&&$.enqueue(fe)}}))),usage:Promise.resolve(o)}]):(Ae=rv(),ge=rv(),K={role:"assistant",content:""},ce="",se={completion_tokens:0,prompt_tokens:0,total_tokens:0},ae=d.pipeThrough(new Ge({transform:function(ne,$){var W,j,V,fe,S,O,P,g,h=(V=(j=(W=ne==null?void 0:ne.choices)===null||W===void 0?void 0:W[0])===null||j===void 0?void 0:j.delta)===null||V===void 0?void 0:V.content;typeof h=="string"&&(K.content+=h);var p=(S=(fe=ne==null?void 0:ne.choices)===null||fe===void 0?void 0:fe[0])===null||S===void 0?void 0:S.finish_reason;p&&(ce=p),!((O=ne==null?void 0:ne.usage)===null||O===void 0)&&O.completion_tokens&&(se.completion_tokens=ne.usage.completion_tokens),!((P=ne==null?void 0:ne.usage)===null||P===void 0)&&P.prompt_tokens&&(se.prompt_tokens=ne.usage.prompt_tokens),!((g=ne==null?void 0:ne.usage)===null||g===void 0)&&g.total_tokens&&(se.total_tokens=ne.usage.total_tokens),$.enqueue(ne)},flush:function(){Ae.res(wr(wr([],c.messages,!0),[K],!1)),To(o,se),ge.res(Object.assign({},o)),u==null||u({messages:wr(wr([],c.messages,!0),[K],!1),finishReason:ce,text:K.content,stepUsage:se,totalUsage:Object.assign({},o)})}})),Re=ae.tee(),We=Re[0],Wt=Re[1],[2,{messages:Ae.promise,dataStream:Me(We),textStream:Me(Wt.pipeThrough(new Ge({transform:function(ne,$){var W,j,V,fe=(V=(j=(W=ne==null?void 0:ne.choices)===null||W===void 0?void 0:W[0])===null||j===void 0?void 0:j.delta)===null||V===void 0?void 0:V.content;typeof fe=="string"&&$.enqueue(fe)}}))),usage:ge.promise}])}})})},e}();function Pv(e){var t,r=(t=e==null?void 0:e.choices)===null||t===void 0?void 0:t[0];if(!r)return null;var n=r.finish_reason,o=r.message;return n!=="tool_calls"||!o||!tr(o)?null:o.tool_calls[0]}function Nv(e,t,r){e.push(t,{role:"tool",tool_call_id:t.tool_calls[0].id,content:JSON.stringify(r)})}function q$(e){var t,r,n,o,i,a,u,l,s,c;return kl(this,void 0,void 0,function(){var f,d,v,m,b,w,_,E,A,I,R,L,U;return ql(this,function(N){switch(N.label){case 0:f={completion_tokens:0,prompt_tokens:0,total_tokens:0},d=Me(e),v={id:"",function:{name:"",arguments:""},type:""},m={role:"assistant",content:"",tool_calls:[v]},N.label=1;case 1:N.trys.push([1,6,7,12]),b=!0,w=k$(d),N.label=2;case 2:return[4,w.next()];case 3:if(_=N.sent(),t=_.done,!!t)return[3,5];o=_.value,b=!1;try{if(E=o,A=E==null?void 0:E.choices[0],!A)return[2,null];if(I=A.finish_reason,R=A.delta,I!=="tool_calls")return[2,null];if(!R)return[3,4];if(R.content&&(m.content+=R.content),!("tool_calls"in R))return[3,4];L=(i=R==null?void 0:R.tool_calls)===null||i===void 0?void 0:i[0],L!=null&&L.id&&(v.id=L.id),L!=null&&L.type&&(v.type=L.type),!((a=L==null?void 0:L.function)===null||a===void 0)&&a.name&&(v.function.name=L.function.name),!((u=L==null?void 0:L.function)===null||u===void 0)&&u.arguments&&(v.function.arguments+=L.function.arguments),!((l=E==null?void 0:E.usage)===null||l===void 0)&&l.completion_tokens&&(f.completion_tokens=E.usage.completion_tokens),!((s=E==null?void 0:E.usage)===null||s===void 0)&&s.prompt_tokens&&(f.prompt_tokens=E.usage.prompt_tokens),!((c=E==null?void 0:E.usage)===null||c===void 0)&&c.total_tokens&&(f.total_tokens=E.usage.total_tokens)}finally{b=!0}N.label=4;case 4:return[3,2];case 5:return[3,12];case 6:return U=N.sent(),r={error:U},[3,12];case 7:return N.trys.push([7,,10,11]),!b&&!t&&(n=w.return)?[4,n.call(w)]:[3,9];case 8:N.sent(),N.label=9;case 9:return[3,11];case 10:if(r)throw r.error;return[7];case 11:return[7];case 12:return[2,{message:m,usage:f}]}})})}var Ya=new Map;function Lv(e){return Ya.get(e.function.name)(JSON.parse(e.function.arguments))}function Dv(e){var t,r,n;return{completion_tokens:(t=e==null?void 0:e.completion_tokens)!==null&&t!==void 0?t:0,prompt_tokens:(r=e==null?void 0:e.prompt_tokens)!==null&&r!==void 0?r:0,total_tokens:(n=e==null?void 0:e.total_tokens)!==null&&n!==void 0?n:0}}function To(e,t){e.completion_tokens+=t.completion_tokens,e.prompt_tokens+=t.prompt_tokens,e.total_tokens+=t.total_tokens}var $_={hunyuan:A_,"hunyuan-beta":O_,ark:R_,dashscope:C_,"01-ai":x_,moonshot:P_,zhipu:T_,"hunyuan-exp":N_,"hunyuan-open":L_,deepseek:B$};const W$=Object.freeze(Object.defineProperty({__proto__:null,ArkSimpleModel:R_,DSSimpleModel:C_,DefaultSimpleModel:D_,HunYuanBetaSimpleModel:O_,HunYuanExpSimpleModel:N_,HunYuanOpenSimpleModel:L_,HunYuanSimpleModel:A_,MODELS:$_,MoonshotSimpleModel:P_,ReactModel:U_,YiSimpleModel:x_,ZhiPuSimpleModel:T_,toolMap:Ya},Symbol.toStringTag,{value:"Module"}));var Ci=function(){return Ci=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Ci.apply(this,arguments)},qc=function(e,t,r,n){function o(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function u(c){try{s(n.next(c))}catch(f){a(f)}}function l(c){try{s(n.throw(c))}catch(f){a(f)}}function s(c){c.done?i(c.value):o(c.value).then(u,l)}s((n=n.apply(e,t||[])).next())})},Wc=function(e,t){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function u(s){return function(c){return l([s,c])}}function l(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(r=0)),r;)try{if(n=1,o&&(i=s[0]&2?o.return:s[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,s[1])).done)return i;switch(o=0,i&&(s=[s[0]&2,i.value]),s[0]){case 0:case 1:i=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,o=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(s[0]===6||s[0]===2)){r=0;continue}if(s[0]===3&&(!i||s[1]>i[0]&&s[1]<i[3])){r.label=s[1];break}if(s[0]===6&&r.label<i[1]){r.label=i[1],i=s;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(s);break}i[2]&&r.ops.pop(),r.trys.pop();continue}s=t.call(e,r)}catch(c){s=[6,c],o=0}finally{n=i=0}if(s[0]&5)throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}},Hc=$_,H$=function(){function e(t,r,n){var o=this;this.req=t,this.baseUrl=r,this.modelRequest=function(i){var a=i.url,u=i.data,l=i.headers,s=i.stream,c=i.timeout;return qc(o,void 0,void 0,function(){var f,d,v,m,b,w,_;return Wc(this,function(E){switch(E.label){case 0:return f={"Content-Type":"application/json"},s&&Object.assign(f,{Accept:"text/event-stream"}),[4,this.req.fetch({method:"post",headers:Ci(Ci((b={},b[(w=this.i18n)===null||w===void 0?void 0:w.LANG_HEADER_KEY]=(_=this.i18n)===null||_===void 0?void 0:_.lang,b),f),l),body:JSON.stringify(u),url:a,stream:s,timeout:c})];case 1:return d=E.sent(),v=d.data,m=d.header,[2,this.handleResponseData(v,m)]}})})},this.botRequest=function(i){var a=i.method,u=i.url,l=i.data,s=l===void 0?{}:l,c=i.headers,f=i.stream,d=i.timeout;return qc(o,void 0,void 0,function(){function v(L){return Object.entries(L).map(function(U){var N=U[0],D=U[1];return"".concat(N,"=").concat(D)}).join("&")}var m,b,w,_,E,A,I,R;return Wc(this,function(L){switch(L.label){case 0:return a!=="get"?[3,2]:(m=this.handleResponseData,[4,this.req.fetch({url:"".concat(u,"?").concat(v(s)),method:a,headers:c,stream:f,timeout:d})]);case 1:return[2,m.apply(this,[L.sent().data])];case 2:return b={"Content-Type":"application/json"},f&&Object.assign(b,{Accept:"text/event-stream"}),[4,this.req.fetch({url:u,body:JSON.stringify(s),headers:Ci(Ci((A={},A[(I=this.i18n)===null||I===void 0?void 0:I.LANG_HEADER_KEY]=(R=this.i18n)===null||R===void 0?void 0:R.lang,A),b),c),stream:f,method:a,timeout:d})];case 3:return w=L.sent(),_=w.data,E=w.header,[2,this.handleResponseData(_,E)]}})})},this.aiBaseUrl="".concat(r,"/ai"),this.aiBotBaseUrl="".concat(r,"/aibot"),this.bot=new M$(this.botRequest,this.aiBotBaseUrl),this.i18n=n,Su.on(Iu,function(i){var a;o.i18n=((a=i.data)===null||a===void 0?void 0:a.i18n)||o.i18n})}return e.prototype.handleResponseData=function(t,r){var n,o;return qc(this,void 0,void 0,function(){var i,a,a;return Wc(this,function(u){switch(u.label){case 0:return i="".concat(this.i18n.t(" AI+ "),"https://tcb.cloud.tencent.com/dev#/ai"),typeof t=="object"&&t&&"then"in t?[4,t]:[3,2];case 1:if(a=u.sent(),typeof a=="object"&&a&&"code"in a&&a.code!=="NORMAL")throw new Error("".concat(this.i18n.t("AI+ "),"").concat(a.code,"").concat(this.i18n.t(""),"").concat(a.message,`
`).concat(i,`
`).concat(JSON.stringify(a,null,2)));return[2,t];case 2:return!((o=(n=r==null?void 0:r.get)===null||n===void 0?void 0:n.call(r,"content-type"))===null||o===void 0)&&o.includes("application/json")?[4,$$(t)]:[3,4];case 3:if(a=u.sent(),typeof a=="object"&&a&&"code"in a&&a.code!=="NORMAL")throw new Error("".concat(this.i18n.t("AI+ "),"").concat(a.code,"").concat(this.i18n.t(""),"").concat(a.message,`
`).concat(i,`
`).concat(JSON.stringify(a,null,2)));u.label=4;case 4:return[2,t]}})})},e.prototype.createModel=function(t,r){var n,o=Hc[t];if(o)n=new o(this.modelRequest,this.aiBaseUrl);else{var i=typeof(r==null?void 0:r.defaultModelSubUrl)=="string"?r.defaultModelSubUrl:"/chat/completions";n=new D_(this.modelRequest,this.aiBaseUrl,"".concat(t).concat(i))}var a=new U_(n);return a},e.prototype.registerModel=function(t,r){if(Hc[t]!=null){console.warn("AI model ".concat(t," already exists!"));return}Hc[t]=r},e.prototype.registerFunctionTool=function(t){Ya.has(t.name)&&console.warn("AI function tool ".concat(t.name," already exists and will be overwritten!")),Ya.set(t.name,t.fn)},e}(),Qa=function(){return Qa=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Qa.apply(this,arguments)},G$=function(e,t,r,n){function o(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function u(c){try{s(n.next(c))}catch(f){a(f)}}function l(c){try{s(n.throw(c))}catch(f){a(f)}}function s(c){c.done?i(c.value):o(c.value).then(u,l)}s((n=n.apply(e,t||[])).next())})},V$=function(e,t){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function u(s){return function(c){return l([s,c])}}function l(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(r=0)),r;)try{if(n=1,o&&(i=s[0]&2?o.return:s[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,s[1])).done)return i;switch(o=0,i&&(s=[s[0]&2,i.value]),s[0]){case 0:case 1:i=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,o=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(s[0]===6||s[0]===2)){r=0;continue}if(s[0]===3&&(!i||s[1]>i[0]&&s[1]<i[3])){r.label=s[1];break}if(s[0]===6&&r.label<i[1]){r.label=i[1],i=s;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(s);break}i[2]&&r.ops.pop(),r.trys.pop();continue}s=t.call(e,r)}catch(c){s=[6,c],o=0}finally{n=i=0}if(s[0]&5)throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}},F_=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]]);return r},K$="ai";F_(W$,["MODELS"]);var z$=function(e){var t=e.getAccessToken,r=e.req,n=function(o){return G$(void 0,void 0,void 0,function(){var i,a,u,l,s;return V$(this,function(c){switch(c.label){case 0:if(typeof r.fetch!="function")throw new Error("req.fetch is not a function");return i=o.token,a=o.headers,u=a===void 0?{}:a,l=F_(o,["token","headers"]),i==null?[3,1]:(s=i,[3,3]);case 1:return[4,t()];case 2:s=c.sent().accessToken,c.label=3;case 3:return[2,r.fetch(Qa({headers:Qa({Authorization:"Bearer ".concat(s)},u)},l))]}})})};return{download:r.download,post:r.post,upload:r.upload,fetch:n}};function J$(e){var t=e.env,r=e.baseUrl,n=e.req,o=e.getAccessToken,i=e.handleReqInstance,a=e.i18n,u=function(){if(r!=null)return r;if(t==null)throw new Error("`env` is required when `baseUrl` is not provided!");return"https://".concat(t,".api.tcloudbasegateway.com/v1")},l=function(){if(i==null){if(o==null)throw new Error("`getAccessToken` is required when `handleReqInstance` is not provided!");return z$({req:n,getAccessToken:o})}return i({req:n})};return new H$(l(),u(),a)}function Y$(e){var t=this,r,n=this.request;if(n.fetch==null)throw new Error("cloudbase.request.fetch() unimplemented!");var o=function(){var a=t.getEndPointWithKey("GATEWAY"),u=a.BASE_URL,l=a.PROTOCOL;return"".concat(l).concat(u)},i=(r=e==null?void 0:e.baseUrl)!==null&&r!==void 0?r:o();return J$({req:n,baseUrl:i,handleReqInstance:function(a){var u=a.req;return u},i18n:this.config.i18n})}var Q$={name:K$,entity:{ai:Y$}};function X$(e){try{e.registerComponent(Q$)}catch(t){console.warn(t)}}var kn,Yr;(function(e){e.DocIDError="ID",e.CollNameError="",e.OpStrError="",e.DirectionError="",e.IntergerError="must be integer",e.QueryParamTypeError="",e.QueryParamValueError="undefined"})(Yr||(Yr={}));var $e={Number:"Number",Object:"Object",Array:"Array",GeoPoint:"GeoPoint",GeoLineString:"GeoLineString",GeoPolygon:"GeoPolygon",GeoMultiPoint:"GeoMultiPoint",GeoMultiLineString:"GeoMultiLineString",GeoMultiPolygon:"GeoMultiPolygon",Timestamp:"Date",ServerDate:"ServerDate",BsonDate:"BsonDate"},Z$=["desc","asc"],eF=["<","<=","==",">=",">"],Yn;(function(e){e.lt="<",e.gt=">",e.lte="<=",e.gte=">=",e.eq="=="})(Yn||(Yn={}));kn={},kn[Yn.eq]="$eq",kn[Yn.lt]="$lt",kn[Yn.lte]="$lte",kn[Yn.gt]="$gt",kn[Yn.gte]="$gte";var Lr;(function(e){e.WHERE="WHERE",e.DOC="DOC"})(Lr||(Lr={}));var tF=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)o.hasOwnProperty(i)&&(n[i]=o[i])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Vs=[],Uv={},rF=function(){function e(t){Object.defineProperties(this,{target:{enumerable:!1,writable:!1,configurable:!1,value:t}})}return e}(),qt=function(e){tF(t,e);function t(r,n){var o=this;if(n!==Uv)throw new TypeError("InternalSymbol cannot be constructed with new operator");return o=e.call(this,r)||this,o}return t.for=function(r){for(var n=0,o=Vs.length;n<o;n++)if(Vs[n].target===r)return Vs[n].instance;var i=new t(r,Uv);return Vs.push({target:r,instance:i}),i},t}(rF),ps=qt.for("UNSET_FIELD_NAME"),M_=qt.for("UPDATE_COMMAND"),B_=qt.for("QUERY_COMMAND"),j_=qt.for("LOGIC_COMMAND"),k_=qt.for("GEO_POINT"),nF=qt.for("SYMBOL_GEO_LINE_STRING"),iF=qt.for("SYMBOL_GEO_POLYGON"),oF=qt.for("SYMBOL_GEO_MULTI_POINT"),sF=qt.for("SYMBOL_GEO_MULTI_LINE_STRING"),aF=qt.for("SYMBOL_GEO_MULTI_POLYGON"),q_=qt.for("SERVER_DATE"),W_=qt.for("REGEXP"),H_=function(){function e(t){var r=(t===void 0?{}:t).offset,n=r===void 0?0:r;this.offset=n}return Object.defineProperty(e.prototype,"_internalType",{get:function(){return q_},enumerable:!0,configurable:!0}),e.prototype.parse=function(){return{$date:{offset:this.offset}}},e}();function uF(e){return new H_(e)}var Gc=function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),o,i=[],a;try{for(;(t===void 0||t-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(u){a={error:u}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return i},qu=function(){function e(){}return e.formatResDocumentData=function(t){return t.map(function(r){return e.formatField(r)})},e.formatField=function(t){var r=Object.keys(t),n={};return Array.isArray(t)&&(n=[]),r.forEach(function(o){var i=t[o],a=e.whichType(i),u;switch(a){case $e.GeoPoint:u=new Rt(i.coordinates[0],i.coordinates[1]);break;case $e.GeoLineString:u=new Cr(i.coordinates.map(function(l){return new Rt(l[0],l[1])}));break;case $e.GeoPolygon:u=new ii(i.coordinates.map(function(l){return new Cr(l.map(function(s){var c=Gc(s,2),f=c[0],d=c[1];return new Rt(f,d)}))}));break;case $e.GeoMultiPoint:u=new Xa(i.coordinates.map(function(l){return new Rt(l[0],l[1])}));break;case $e.GeoMultiLineString:u=new Za(i.coordinates.map(function(l){return new Cr(l.map(function(s){var c=Gc(s,2),f=c[0],d=c[1];return new Rt(f,d)}))}));break;case $e.GeoMultiPolygon:u=new vs(i.coordinates.map(function(l){return new ii(l.map(function(s){return new Cr(s.map(function(c){var f=Gc(c,2),d=f[0],v=f[1];return new Rt(d,v)}))}))}));break;case $e.Timestamp:u=new Date(i.$timestamp*1e3);break;case $e.Object:case $e.Array:u=e.formatField(i);break;case $e.ServerDate:u=new Date(i.$date);break;default:u=i}Array.isArray(n)?n.push(u):n[o]=u}),n},e.whichType=function(t){var r=Object.prototype.toString.call(t).slice(8,-1);if(r===$e.Timestamp)return $e.BsonDate;if(r===$e.Object){if(t instanceof Rt)return $e.GeoPoint;if(t instanceof Date)return $e.Timestamp;if(t instanceof H_)return $e.ServerDate;t.$timestamp?r=$e.Timestamp:t.$date?r=$e.ServerDate:Rt.validate(t)?r=$e.GeoPoint:Cr.validate(t)?r=$e.GeoLineString:ii.validate(t)?r=$e.GeoPolygon:Xa.validate(t)?r=$e.GeoMultiPoint:Za.validate(t)?r=$e.GeoMultiLineString:vs.validate(t)&&(r=$e.GeoMultiPolygon)}return r},e.generateDocId=function(){for(var t="ABCDEFabcdef0123456789",r="",n=0;n<24;n++)r+=t.charAt(Math.floor(Math.random()*t.length));return r},e}(),In=function(){function e(){}return e.isGeopoint=function(t,r){if(qu.whichType(r)!==$e.Number)throw new Error("Geo Point must be number type");var n=Math.abs(r);if(t==="latitude"&&n>90)throw new Error("latitude should be a number ranges from -90 to 90");if(t==="longitude"&&n>180)throw new Error("longitude should be a number ranges from -180 to 180");return!0},e.isInteger=function(t,r){if(!Number.isInteger(r))throw new Error(t+Yr.IntergerError);return!0},e.isFieldOrder=function(t){if(Z$.indexOf(t)===-1)throw new Error(Yr.DirectionError);return!0},e.isFieldPath=function(t){if(!/^[a-zA-Z0-9-_\.]/.test(t))throw new Error;return!0},e.isOperator=function(t){if(eF.indexOf(t)===-1)throw new Error(Yr.OpStrError);return!0},e.isCollName=function(t){if(!/^[a-zA-Z0-9]([a-zA-Z0-9-_]){1,32}$/.test(t))throw new Error(Yr.CollNameError);return!0},e.isDocID=function(t){if(!/^([a-fA-F0-9]){24}$/.test(t))throw new Error(Yr.DocIDError);return!0},e}(),Fr=function(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()},Cn=function(e){return Fr(e)==="object"},cF=function(e){return Fr(e)==="string"},Qt=function(e){return Fr(e)==="number"},ke=function(e){return Array.isArray(e)},G_=function(e){return Fr(e)==="date"},fd=function(e){return Fr(e)==="regexp"},V_=function(e){return e&&e._internalType instanceof qt},Rt=function(){function e(t,r){In.isGeopoint("longitude",t),In.isGeopoint("latitude",r),this.longitude=t,this.latitude=r}return e.prototype.parse=function(t){var r;return r={},r[t]={type:"Point",coordinates:[this.longitude,this.latitude]},r},e.prototype.toJSON=function(){return{type:"Point",coordinates:[this.longitude,this.latitude]}},e.prototype.toReadableString=function(){return"["+this.longitude+","+this.latitude+"]"},e.validate=function(t){return t.type==="Point"&&ke(t.coordinates)&&In.isGeopoint("longitude",t.coordinates[0])&&In.isGeopoint("latitude",t.coordinates[1])},Object.defineProperty(e.prototype,"_internalType",{get:function(){return k_},enumerable:!0,configurable:!0}),e}(),lF=function(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Cr=function(){function e(t){if(!ke(t))throw new TypeError('"points" must be of type Point[]. Received type '+typeof t);if(t.length<2)throw new Error('"points" must contain 2 points at least');t.forEach(function(r){if(!(r instanceof Rt))throw new TypeError('"points" must be of type Point[]. Received type '+typeof r+"[]")}),this.points=t}return e.prototype.parse=function(t){var r;return r={},r[t]={type:"LineString",coordinates:this.points.map(function(n){return n.toJSON().coordinates})},r},e.prototype.toJSON=function(){return{type:"LineString",coordinates:this.points.map(function(t){return t.toJSON().coordinates})}},e.validate=function(t){var r,n;if(t.type!=="LineString"||!ke(t.coordinates))return!1;try{for(var o=lF(t.coordinates),i=o.next();!i.done;i=o.next()){var a=i.value;if(!Qt(a[0])||!Qt(a[1]))return!1}}catch(u){r={error:u}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return!0},e.isClosed=function(t){var r=t.points[0],n=t.points[t.points.length-1];if(r.latitude===n.latitude&&r.longitude===n.longitude)return!0},Object.defineProperty(e.prototype,"_internalType",{get:function(){return nF},enumerable:!0,configurable:!0}),e}(),$v=function(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},ii=function(){function e(t){if(!ke(t))throw new TypeError('"lines" must be of type LineString[]. Received type '+typeof t);if(t.length===0)throw new Error("Polygon must contain 1 linestring at least");t.forEach(function(r){if(!(r instanceof Cr))throw new TypeError('"lines" must be of type LineString[]. Received type '+typeof r+"[]");if(!Cr.isClosed(r))throw new Error("LineString "+r.points.map(function(n){return n.toReadableString()})+" is not a closed cycle")}),this.lines=t}return e.prototype.parse=function(t){var r;return r={},r[t]={type:"Polygon",coordinates:this.lines.map(function(n){return n.points.map(function(o){return[o.longitude,o.latitude]})})},r},e.prototype.toJSON=function(){return{type:"Polygon",coordinates:this.lines.map(function(t){return t.points.map(function(r){return[r.longitude,r.latitude]})})}},e.validate=function(t){var r,n,o,i;if(t.type!=="Polygon"||!ke(t.coordinates))return!1;try{for(var a=$v(t.coordinates),u=a.next();!u.done;u=a.next()){var l=u.value;if(!this.isCloseLineString(l))return!1;try{for(var s=(o=void 0,$v(l)),c=s.next();!c.done;c=s.next()){var f=c.value;if(!Qt(f[0])||!Qt(f[1]))return!1}}catch(d){o={error:d}}finally{try{c&&!c.done&&(i=s.return)&&i.call(s)}finally{if(o)throw o.error}}}}catch(d){r={error:d}}finally{try{u&&!u.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}return!0},e.isCloseLineString=function(t){var r=t[0],n=t[t.length-1];return!(r[0]!==n[0]||r[1]!==n[1])},Object.defineProperty(e.prototype,"_internalType",{get:function(){return aF},enumerable:!0,configurable:!0}),e}(),fF=function(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Xa=function(){function e(t){if(!ke(t))throw new TypeError('"points" must be of type Point[]. Received type '+typeof t);if(t.length===0)throw new Error('"points" must contain 1 point at least');t.forEach(function(r){if(!(r instanceof Rt))throw new TypeError('"points" must be of type Point[]. Received type '+typeof r+"[]")}),this.points=t}return e.prototype.parse=function(t){var r;return r={},r[t]={type:"MultiPoint",coordinates:this.points.map(function(n){return n.toJSON().coordinates})},r},e.prototype.toJSON=function(){return{type:"MultiPoint",coordinates:this.points.map(function(t){return t.toJSON().coordinates})}},e.validate=function(t){var r,n;if(t.type!=="MultiPoint"||!ke(t.coordinates))return!1;try{for(var o=fF(t.coordinates),i=o.next();!i.done;i=o.next()){var a=i.value;if(!Qt(a[0])||!Qt(a[1]))return!1}}catch(u){r={error:u}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return!0},Object.defineProperty(e.prototype,"_internalType",{get:function(){return oF},enumerable:!0,configurable:!0}),e}(),Fv=function(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Za=function(){function e(t){if(!ke(t))throw new TypeError('"lines" must be of type LineString[]. Received type '+typeof t);if(t.length===0)throw new Error("Polygon must contain 1 linestring at least");t.forEach(function(r){if(!(r instanceof Cr))throw new TypeError('"lines" must be of type LineString[]. Received type '+typeof r+"[]")}),this.lines=t}return e.prototype.parse=function(t){var r;return r={},r[t]={type:"MultiLineString",coordinates:this.lines.map(function(n){return n.points.map(function(o){return[o.longitude,o.latitude]})})},r},e.prototype.toJSON=function(){return{type:"MultiLineString",coordinates:this.lines.map(function(t){return t.points.map(function(r){return[r.longitude,r.latitude]})})}},e.validate=function(t){var r,n,o,i;if(t.type!=="MultiLineString"||!ke(t.coordinates))return!1;try{for(var a=Fv(t.coordinates),u=a.next();!u.done;u=a.next()){var l=u.value;try{for(var s=(o=void 0,Fv(l)),c=s.next();!c.done;c=s.next()){var f=c.value;if(!Qt(f[0])||!Qt(f[1]))return!1}}catch(d){o={error:d}}finally{try{c&&!c.done&&(i=s.return)&&i.call(s)}finally{if(o)throw o.error}}}}catch(d){r={error:d}}finally{try{u&&!u.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}return!0},Object.defineProperty(e.prototype,"_internalType",{get:function(){return sF},enumerable:!0,configurable:!0}),e}(),Ks=function(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},vs=function(){function e(t){var r,n;if(!ke(t))throw new TypeError('"polygons" must be of type Polygon[]. Received type '+typeof t);if(t.length===0)throw new Error("MultiPolygon must contain 1 polygon at least");try{for(var o=Ks(t),i=o.next();!i.done;i=o.next()){var a=i.value;if(!(a instanceof ii))throw new TypeError('"polygon" must be of type Polygon[]. Received type '+typeof a+"[]")}}catch(u){r={error:u}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}this.polygons=t}return e.prototype.parse=function(t){var r;return r={},r[t]={type:"MultiPolygon",coordinates:this.polygons.map(function(n){return n.lines.map(function(o){return o.points.map(function(i){return[i.longitude,i.latitude]})})})},r},e.prototype.toJSON=function(){return{type:"MultiPolygon",coordinates:this.polygons.map(function(t){return t.lines.map(function(r){return r.points.map(function(n){return[n.longitude,n.latitude]})})})}},e.validate=function(t){var r,n,o,i,a,u;if(t.type!=="MultiPolygon"||!ke(t.coordinates))return!1;try{for(var l=Ks(t.coordinates),s=l.next();!s.done;s=l.next()){var c=s.value;try{for(var f=(o=void 0,Ks(c)),d=f.next();!d.done;d=f.next()){var v=d.value;try{for(var m=(a=void 0,Ks(v)),b=m.next();!b.done;b=m.next()){var w=b.value;if(!Qt(w[0])||!Qt(w[1]))return!1}}catch(_){a={error:_}}finally{try{b&&!b.done&&(u=m.return)&&u.call(m)}finally{if(a)throw a.error}}}}catch(_){o={error:_}}finally{try{d&&!d.done&&(i=f.return)&&i.call(f)}finally{if(o)throw o.error}}}}catch(_){r={error:_}}finally{try{s&&!s.done&&(n=l.return)&&n.call(l)}finally{if(r)throw r.error}}return!0},Object.defineProperty(e.prototype,"_internalType",{get:function(){return iF},enumerable:!0,configurable:!0}),e}();const dF=Object.freeze(Object.defineProperty({__proto__:null,LineString:Cr,MultiLineString:Za,MultiPoint:Xa,MultiPolygon:vs,Point:Rt,Polygon:ii},Symbol.toStringTag,{value:"Module"}));var Qr=function(){var e;if(!Promise){e=function(){},e.promise={};var t=function(){throw new Error('Your Node runtime does support ES6 Promises. Set "global.Promise" to your preferred implementation of promises.')};return Object.defineProperty(e.promise,"then",{get:t}),Object.defineProperty(e.promise,"catch",{get:t}),e}var r=new Promise(function(n,o){e=function(i,a){return i?o(i):n(a)}});return e.promise=r,e},me;(function(e){e.SET="set",e.REMOVE="remove",e.INC="inc",e.MUL="mul",e.PUSH="push",e.PULL="pull",e.PULL_ALL="pullAll",e.POP="pop",e.SHIFT="shift",e.UNSHIFT="unshift",e.ADD_TO_SET="addToSet",e.BIT="bit",e.RENAME="rename",e.MAX="max",e.MIN="min"})(me||(me={}));var ze=function(){function e(t,r,n){this._internalType=M_,Object.defineProperties(this,{_internalType:{enumerable:!1,configurable:!1}}),this.operator=t,this.operands=r,this.fieldName=n||ps}return e.prototype._setFieldName=function(t){var r=new e(this.operator,this.operands,t);return r},e}();function Mv(e){return e&&e instanceof ze&&e._internalType===M_}var Bt;(function(e){e.AND="and",e.OR="or",e.NOT="not",e.NOR="nor"})(Bt||(Bt={}));var ei=function(){function e(t,r,n){if(this._internalType=j_,Object.defineProperties(this,{_internalType:{enumerable:!1,configurable:!1}}),this.operator=t,this.operands=r,this.fieldName=n||ps,this.fieldName!==ps)if(Array.isArray(r)){r=r.slice(),this.operands=r;for(var o=0,i=r.length;o<i;o++){var a=r[o];(eu(a)||tu(a))&&(r[o]=a._setFieldName(this.fieldName))}}else{var a=r;(eu(a)||tu(a))&&(r=a._setFieldName(this.fieldName))}}return e.prototype._setFieldName=function(t){var r=this.operands.map(function(o){return o instanceof e?o._setFieldName(t):o}),n=new e(this.operator,r,t);return n},e.prototype.and=function(){var t=Array.isArray(arguments[0])?arguments[0]:Array.from(arguments);return t.unshift(this),new e(Bt.AND,t,this.fieldName)},e.prototype.or=function(){var t=Array.isArray(arguments[0])?arguments[0]:Array.from(arguments);return t.unshift(this),new e(Bt.OR,t,this.fieldName)},e}();function eu(e){return e&&e instanceof ei&&e._internalType===j_}var hF=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)o.hasOwnProperty(i)&&(n[i]=o[i])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),ie;(function(e){e.EQ="eq",e.NEQ="neq",e.GT="gt",e.GTE="gte",e.LT="lt",e.LTE="lte",e.IN="in",e.NIN="nin",e.ALL="all",e.ELEM_MATCH="elemMatch",e.EXISTS="exists",e.SIZE="size",e.MOD="mod",e.GEO_NEAR="geoNear",e.GEO_WITHIN="geoWithin",e.GEO_INTERSECTS="geoIntersects"})(ie||(ie={}));var Ye=function(e){hF(t,e);function t(r,n,o){var i=e.call(this,r,n,o)||this;return i.operator=r,i._internalType=B_,i}return t.prototype.toJSON=function(){var r,n;switch(this.operator){case ie.IN:case ie.NIN:return r={},r["$"+this.operator]=this.operands,r;default:return n={},n["$"+this.operator]=this.operands[0],n}},t.prototype._setFieldName=function(r){var n=new t(this.operator,this.operands,r);return n},t.prototype.eq=function(r){var n=new t(ie.EQ,[r],this.fieldName);return this.and(n)},t.prototype.neq=function(r){var n=new t(ie.NEQ,[r],this.fieldName);return this.and(n)},t.prototype.gt=function(r){var n=new t(ie.GT,[r],this.fieldName);return this.and(n)},t.prototype.gte=function(r){var n=new t(ie.GTE,[r],this.fieldName);return this.and(n)},t.prototype.lt=function(r){var n=new t(ie.LT,[r],this.fieldName);return this.and(n)},t.prototype.lte=function(r){var n=new t(ie.LTE,[r],this.fieldName);return this.and(n)},t.prototype.in=function(r){var n=new t(ie.IN,r,this.fieldName);return this.and(n)},t.prototype.nin=function(r){var n=new t(ie.NIN,r,this.fieldName);return this.and(n)},t.prototype.geoNear=function(r){if(!(r.geometry instanceof Rt))throw new TypeError('"geometry" must be of type Point. Received type '+typeof r.geometry);if(r.maxDistance!==void 0&&!Qt(r.maxDistance))throw new TypeError('"maxDistance" must be of type Number. Received type '+typeof r.maxDistance);if(r.minDistance!==void 0&&!Qt(r.minDistance))throw new TypeError('"minDistance" must be of type Number. Received type '+typeof r.minDistance);var n=new t(ie.GEO_NEAR,[r],this.fieldName);return this.and(n)},t.prototype.geoWithin=function(r){if(!(r.geometry instanceof vs)&&!(r.geometry instanceof ii))throw new TypeError('"geometry" must be of type Polygon or MultiPolygon. Received type '+typeof r.geometry);var n=new t(ie.GEO_WITHIN,[r],this.fieldName);return this.and(n)},t.prototype.geoIntersects=function(r){if(!(r.geometry instanceof Rt)&&!(r.geometry instanceof Cr)&&!(r.geometry instanceof ii)&&!(r.geometry instanceof Xa)&&!(r.geometry instanceof Za)&&!(r.geometry instanceof vs))throw new TypeError('"geometry" must be of type Point, LineString, Polygon, MultiPoint, MultiLineString or MultiPolygon. Received type '+typeof r.geometry);var n=new t(ie.GEO_INTERSECTS,[r],this.fieldName);return this.and(n)},t}(ei);function tu(e){return e&&e instanceof Ye&&e._internalType===B_}function Bv(e){return tu(e)}var Un={};for(var Nn in ie)Un[Nn]="$"+Nn;for(var Nn in Bt)Un[Nn]="$"+Nn;for(var Nn in me)Un[Nn]="$"+Nn;Un[ie.NEQ]="$ne";Un[me.REMOVE]="$unset";Un[me.SHIFT]="$pop";Un[me.UNSHIFT]="$push";function xi(e){return Un[e]||"$"+e}var Wl=function(){return Wl=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Wl.apply(this,arguments)},pF=function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),o,i=[],a;try{for(;(t===void 0||t-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(u){a={error:u}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return i},jv=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(pF(arguments[t]));return e};function gs(e){return Hl(e,[e])}function Hl(e,t){if(V_(e))switch(e._internalType){case k_:return e.toJSON();case q_:return e.parse();case W_:return e.parse();default:return e.toJSON?e.toJSON():e}else{if(G_(e))return{$date:+e};if(fd(e))return{$regex:e.source,$options:e.flags};if(ke(e))return e.map(function(o){if(t.indexOf(o)>-1)throw new Error("Cannot convert circular structure to JSON");return Hl(o,jv(t,[o]))});if(Cn(e)){var r=Wl({},e);for(var n in r){if(t.indexOf(r[n])>-1)throw new Error("Cannot convert circular structure to JSON");r[n]=Hl(r[n],jv(t,[r[n]]))}return r}else return e}}var Gl=function(){return Gl=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Gl.apply(this,arguments)},vF=function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),o,i=[],a;try{for(;(t===void 0||t-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(u){a={error:u}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return i},kv=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(vF(arguments[t]));return e};function K_(e,t,r,n){var o=Gl({},e);for(var i in e)if(!/^\$/.test(i)){var a=e[i];if(a&&Cn(a)&&!t(a)){if(n.indexOf(a)>-1)throw new Error("Cannot convert circular structure to JSON");var u=kv(r,[i]),l=kv(n,[a]),s=K_(a,t,u,l);o[i]=s;var c=!1;for(var f in s)/^\$/.test(f)?c=!0:(o[i+"."+f]=s[f],delete o[i][f]);c||delete o[i]}}return o}function z_(e){return K_(e,Vl,[],[e])}function qv(e,t,r){t[r]||delete e[r];for(var n in t)e[n]?ke(e[n])?e[n].push(t[n]):Cn(e[n])?Cn(t[n])?Object.assign(e[n],t[n]):(console.warn("unmergable condition, query is object but condition is "+Fr(t)+", can only overwrite",t,r),e[n]=t[n]):(console.warn("to-merge query is of type "+Fr(e)+", can only overwrite",e,t,r),e[n]=t[n]):e[n]=t[n]}function Vl(e){return V_(e)||G_(e)||fd(e)}function Tn(e){return gs(e)}var dd=function(){function e(){}return e.encode=function(t){var r=new e;return r.encodeUpdate(t)},e.prototype.encodeUpdate=function(t){return Mv(t)?this.encodeUpdateCommand(t):Fr(t)==="object"?this.encodeUpdateObject(t):t},e.prototype.encodeUpdateCommand=function(t){if(t.fieldName===ps)throw new Error("Cannot encode a comparison command with unset field name");switch(t.operator){case me.PUSH:case me.PULL:case me.PULL_ALL:case me.POP:case me.SHIFT:case me.UNSHIFT:case me.ADD_TO_SET:return this.encodeArrayUpdateCommand(t);default:return this.encodeFieldUpdateCommand(t)}},e.prototype.encodeFieldUpdateCommand=function(t){var r,n,o,i,a=xi(t.operator);switch(t.operator){case me.REMOVE:return r={},r[a]=(n={},n[t.fieldName]="",n),r;default:return o={},o[a]=(i={},i[t.fieldName]=t.operands[0],i),o}},e.prototype.encodeArrayUpdateCommand=function(t){var r,n,o,i,a,u,l,s,c,f,d=xi(t.operator);switch(t.operator){case me.PUSH:{var v=void 0;return ke(t.operands)?v={$each:t.operands.map(Tn)}:v=t.operands,r={},r[d]=(n={},n[t.fieldName]=v,n),r}case me.UNSHIFT:{var v={$each:t.operands.map(Tn),$position:0};return o={},o[d]=(i={},i[t.fieldName]=v,i),o}case me.POP:return a={},a[d]=(u={},u[t.fieldName]=1,u),a;case me.SHIFT:return l={},l[d]=(s={},s[t.fieldName]=-1,s),l;default:return c={},c[d]=(f={},f[t.fieldName]=Tn(t.operands),f),c}},e.prototype.encodeUpdateObject=function(t){var r=z_(t);for(var n in r)if(!/^\$/.test(n)){var o=r[n];if(Mv(o)){r[n]=o._setFieldName(n);var i=this.encodeUpdateCommand(r[n]);qv(r,i,n)}else{r[n]=o=Tn(o);var a=new ze(me.SET,[o],n),i=this.encodeUpdateCommand(a);qv(r,i,n)}}return r},e}(),Vc={};function J_(e){if(!vt.wsClientClass)throw new Error("to use realtime you must import realtime module first");var t=e.config.env;return Vc[t]||(Vc[t]=new vt.wsClientClass({context:{appConfig:{docSizeLimit:1e3,realtimePingInterval:1e4,realtimePongWaitTimeout:5e3,request:new vt.reqClass(e.config)}}})),Vc[t]}var ru=function(){return ru=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},ru.apply(this,arguments)},Wv=function(){function e(t,r,n,o){var i=this;o===void 0&&(o={}),this.watch=function(a){var u=J_(i._db);return u.watch(ru(ru({},a),{envId:i._db.config.env,collectionName:i._coll,query:JSON.stringify({_id:i.id})}))},this._db=t,this._coll=r,this.id=n,this.request=new vt.reqClass(this._db.config),this.projection=o}return e.prototype.create=function(t,r){r=r||Qr();var n={collectionName:this._coll,data:gs(t)};return this.id&&(n._id=this.id),this.request.send("database.addDocument",n).then(function(o){o.code?r(0,o):r(0,{id:o.data._id,requestId:o.requestId})}).catch(function(o){r(o)}),r.promise},e.prototype.set=function(t,r){if(r=r||Qr(),!this.id)return Promise.resolve({code:"INVALID_PARAM",message:"docId"});if(!t||typeof t!="object")return Promise.resolve({code:"INVALID_PARAM",message:""});if(t.hasOwnProperty("_id"))return Promise.resolve({code:"INVALID_PARAM",message:"_id"});var n=!1,o=function(u){if(typeof u=="object")for(var l in u)u[l]instanceof ze?n=!0:typeof u[l]=="object"&&o(u[l])};if(o(t),n)return Promise.resolve({code:"DATABASE_REQUEST_FAILED",message:"update operator complicit"});var i=!1,a={collectionName:this._coll,queryType:Lr.DOC,data:gs(t),multi:!1,merge:i,upsert:!0};return this.id&&(a.query={_id:this.id}),this.request.send("database.updateDocument",a).then(function(u){u.code?r(0,u):r(0,{updated:u.data.updated,upsertedId:u.data.upserted_id,requestId:u.requestId})}).catch(function(u){r(u)}),r.promise},e.prototype.update=function(t,r){if(r=r||Qr(),!t||typeof t!="object")return Promise.resolve({code:"INVALID_PARAM",message:""});if(t.hasOwnProperty("_id"))return Promise.resolve({code:"INVALID_PARAM",message:"_id"});var n={_id:this.id},o=!0,i={collectionName:this._coll,data:dd.encode(t),query:n,queryType:Lr.DOC,multi:!1,merge:o,upsert:!1};return this.request.send("database.updateDocument",i).then(function(a){a.code?r(0,a):r(0,{updated:a.data.updated,upsertedId:a.data.upserted_id,requestId:a.requestId})}).catch(function(a){r(a)}),r.promise},e.prototype.remove=function(t){t=t||Qr();var r={_id:this.id},n={collectionName:this._coll,query:r,queryType:Lr.DOC,multi:!1};return this.request.send("database.deleteDocument",n).then(function(o){o.code?t(0,o):t(0,{deleted:o.data.deleted,requestId:o.requestId})}).catch(function(o){t(o)}),t.promise},e.prototype.get=function(t){t=t||Qr();var r={_id:this.id},n={collectionName:this._coll,query:r,queryType:Lr.DOC,multi:!1,projection:this.projection};return this.request.send("database.queryDocument",n).then(function(o){if(o.code)t(0,o);else{var i=qu.formatResDocumentData(o.data.list);t(0,{data:i,requestId:o.requestId})}}).catch(function(o){t(o)}),t.promise},e.prototype.field=function(t){for(var r in t)t[r]?t[r]=1:t[r]=0;return new e(this._db,this._coll,this.id,t)},e}(),nu=function(){function e(){}return e.encode=function(t){var r=new gF;return r.encodeQuery(t)},e}(),gF=function(){function e(){}return e.prototype.encodeQuery=function(t,r){var n;return Vl(t)?eu(t)?this.encodeLogicCommand(t):tu(t)?this.encodeQueryCommand(t):(n={},n[r]=this.encodeQueryObject(t),n):Cn(t)?this.encodeQueryObject(t):t},e.prototype.encodeRegExp=function(t){return{$regex:t.source,$options:t.flags}},e.prototype.encodeLogicCommand=function(t){var r,n,o,i,a,u,l,s=this;switch(t.operator){case Bt.NOR:case Bt.AND:case Bt.OR:{var c=xi(t.operator),f=t.operands.map(function(m){return s.encodeQuery(m,t.fieldName)});return r={},r[c]=f,r}case Bt.NOT:{var c=xi(t.operator),d=t.operands[0];if(fd(d))return n={},n[t.fieldName]=(o={},o[c]=this.encodeRegExp(d),o),n;var f=this.encodeQuery(d)[t.fieldName];return i={},i[t.fieldName]=(a={},a[c]=f,a),i}default:{var c=xi(t.operator);if(t.operands.length===1){var v=this.encodeQuery(t.operands[0]);return u={},u[c]=v,u}else{var f=t.operands.map(this.encodeQuery.bind(this));return l={},l[c]=f,l}}}},e.prototype.encodeQueryCommand=function(t){return Bv(t)?this.encodeComparisonCommand(t):this.encodeComparisonCommand(t)},e.prototype.encodeComparisonCommand=function(t){var r,n,o,i,a,u,l,s,c;if(t.fieldName===ps)throw new Error("Cannot encode a comparison command with unset field name");var f=xi(t.operator);switch(t.operator){case ie.EQ:case ie.NEQ:case ie.LT:case ie.LTE:case ie.GT:case ie.GTE:case ie.ELEM_MATCH:case ie.EXISTS:case ie.SIZE:case ie.MOD:return r={},r[t.fieldName]=(n={},n[f]=Tn(t.operands[0]),n),r;case ie.IN:case ie.NIN:case ie.ALL:return o={},o[t.fieldName]=(i={},i[f]=Tn(t.operands),i),o;case ie.GEO_NEAR:{var d=t.operands[0];return a={},a[t.fieldName]={$nearSphere:{$geometry:d.geometry.toJSON(),$maxDistance:d.maxDistance,$minDistance:d.minDistance}},a}case ie.GEO_WITHIN:{var d=t.operands[0];return u={},u[t.fieldName]={$geoWithin:{$geometry:d.geometry.toJSON()}},u}case ie.GEO_INTERSECTS:{var d=t.operands[0];return l={},l[t.fieldName]={$geoIntersects:{$geometry:d.geometry.toJSON()}},l}default:return s={},s[t.fieldName]=(c={},c[f]=Tn(t.operands[0]),c),s}},e.prototype.encodeQueryObject=function(t){var r=z_(t);for(var n in r){var o=r[n];if(eu(o)){r[n]=o._setFieldName(n);var i=this.encodeLogicCommand(r[n]);this.mergeConditionAfterEncode(r,i,n)}else if(Bv(o)){r[n]=o._setFieldName(n);var i=this.encodeComparisonCommand(r[n]);this.mergeConditionAfterEncode(r,i,n)}else Vl(o)&&(r[n]=Tn(o))}return r},e.prototype.mergeConditionAfterEncode=function(t,r,n){r[n]||delete t[n];for(var o in r)t[o]?ke(t[o])?t[o]=t[o].concat(r[o]):Cn(t[o])?Cn(r[o])?Object.assign(t,r):(console.warn("unmergable condition, query is object but condition is "+Fr(r)+", can only overwrite",r,n),t[o]=r[o]):(console.warn("to-merge query is of type "+Fr(t)+", can only overwrite",t,r,n),t[o]=r[o]):t[o]=r[o]},e}(),Qn=function(){return Qn=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Qn.apply(this,arguments)},mF=function(){function e(t,r,n,o,i){var a=this;this.watch=function(u){var l=J_(a._db);return l.watch(Qn(Qn({},u),{envId:a._db.config.env,collectionName:a._coll,query:JSON.stringify(a._fieldFilters||{}),limit:a._queryOptions.limit,orderBy:a._fieldOrders?a._fieldOrders.reduce(function(s,c){return s[c.field]=c.direction,s},{}):void 0}))},this._db=t,this._coll=r,this._fieldFilters=n,this._fieldOrders=o||[],this._queryOptions=i||{},this._request=new vt.reqClass(this._db.config)}return e.prototype.get=function(t){t=t||Qr();var r=[];this._fieldOrders&&this._fieldOrders.forEach(function(o){r.push(o)});var n={collectionName:this._coll,queryType:Lr.WHERE};return this._fieldFilters&&(n.query=this._fieldFilters),r.length>0&&(n.order=r),this._queryOptions.offset&&(n.offset=this._queryOptions.offset),this._queryOptions.limit?n.limit=this._queryOptions.limit<1e3?this._queryOptions.limit:1e3:n.limit=100,this._queryOptions.projection&&(n.projection=this._queryOptions.projection),this._request.send("database.queryDocument",n).then(function(o){if(o.code)t(0,o);else{var i=qu.formatResDocumentData(o.data.list),a={data:i,requestId:o.requestId};o.total&&(a.total=o.total),o.limit&&(a.limit=o.limit),o.offset&&(a.offset=o.offset),t(0,a)}}).catch(function(o){t(o)}),t.promise},e.prototype.count=function(t){t=t||Qr();var r={collectionName:this._coll,queryType:Lr.WHERE};return this._fieldFilters&&(r.query=this._fieldFilters),this._request.send("database.countDocument",r).then(function(n){n.code?t(0,n):t(0,{requestId:n.requestId,total:n.data.total})}).catch(function(n){t(n)}),t.promise},e.prototype.where=function(t){if(Object.prototype.toString.call(t).slice(8,-1)!=="Object")throw Error(Yr.QueryParamTypeError);var r=Object.keys(t),n=r.some(function(o){return t[o]!==void 0});if(r.length&&!n)throw Error(Yr.QueryParamValueError);return new e(this._db,this._coll,nu.encode(t),this._fieldOrders,this._queryOptions)},e.prototype.orderBy=function(t,r){In.isFieldPath(t),In.isFieldOrder(r);var n={field:t,direction:r},o=this._fieldOrders.concat(n);return new e(this._db,this._coll,this._fieldFilters,o,this._queryOptions)},e.prototype.limit=function(t){In.isInteger("limit",t);var r=Qn({},this._queryOptions);return r.limit=t,new e(this._db,this._coll,this._fieldFilters,this._fieldOrders,r)},e.prototype.skip=function(t){In.isInteger("offset",t);var r=Qn({},this._queryOptions);return r.offset=t,new e(this._db,this._coll,this._fieldFilters,this._fieldOrders,r)},e.prototype.update=function(t,r){if(r=r||Qr(),!t||typeof t!="object")return Promise.resolve({code:"INVALID_PARAM",message:""});if(t.hasOwnProperty("_id"))return Promise.resolve({code:"INVALID_PARAM",message:"_id"});var n={collectionName:this._coll,query:this._fieldFilters,queryType:Lr.WHERE,multi:!0,merge:!0,upsert:!1,data:dd.encode(t)};return this._request.send("database.updateDocument",n).then(function(o){o.code?r(0,o):r(0,{requestId:o.requestId,updated:o.data.updated,upsertId:o.data.upsert_id})}).catch(function(o){r(o)}),r.promise},e.prototype.field=function(t){for(var r in t)t[r]?typeof t[r]!="object"&&(t[r]=1):t[r]=0;var n=Qn({},this._queryOptions);return n.projection=t,new e(this._db,this._coll,this._fieldFilters,this._fieldOrders,n)},e.prototype.remove=function(t){t=t||Qr(),Object.keys(this._queryOptions).length>0&&console.warn("`offset`, `limit` and `projection` are not supported in remove() operation"),this._fieldOrders.length>0&&console.warn("`orderBy` is not supported in remove() operation");var r={collectionName:this._coll,query:nu.encode(this._fieldFilters),queryType:Lr.WHERE,multi:!0};return this._request.send("database.deleteDocument",r).then(function(n){n.code?t(0,n):t(0,{requestId:n.requestId,deleted:n.data.deleted})}).catch(function(n){t(n)}),t.promise},e}();function yF(e,t){return t={exports:{}},e(t,t.exports),t.exports}var _F=IF,bF=OF,wF=CF,xr=[],Kt=[],EF=typeof Uint8Array<"u"?Uint8Array:Array,Kc="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var bi=0,SF=Kc.length;bi<SF;++bi)xr[bi]=Kc[bi],Kt[Kc.charCodeAt(bi)]=bi;Kt[45]=62;Kt[95]=63;function Y_(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");r===-1&&(r=t);var n=r===t?0:4-r%4;return[r,n]}function IF(e){var t=Y_(e),r=t[0],n=t[1];return(r+n)*3/4-n}function TF(e,t,r){return(t+r)*3/4-r}function OF(e){var t,r=Y_(e),n=r[0],o=r[1],i=new EF(TF(e,n,o)),a=0,u=o>0?n-4:n,l;for(l=0;l<u;l+=4)t=Kt[e.charCodeAt(l)]<<18|Kt[e.charCodeAt(l+1)]<<12|Kt[e.charCodeAt(l+2)]<<6|Kt[e.charCodeAt(l+3)],i[a++]=t>>16&255,i[a++]=t>>8&255,i[a++]=t&255;return o===2&&(t=Kt[e.charCodeAt(l)]<<2|Kt[e.charCodeAt(l+1)]>>4,i[a++]=t&255),o===1&&(t=Kt[e.charCodeAt(l)]<<10|Kt[e.charCodeAt(l+1)]<<4|Kt[e.charCodeAt(l+2)]>>2,i[a++]=t>>8&255,i[a++]=t&255),i}function AF(e){return xr[e>>18&63]+xr[e>>12&63]+xr[e>>6&63]+xr[e&63]}function RF(e,t,r){for(var n,o=[],i=t;i<r;i+=3)n=(e[i]<<16&16711680)+(e[i+1]<<8&65280)+(e[i+2]&255),o.push(AF(n));return o.join("")}function CF(e){for(var t,r=e.length,n=r%3,o=[],i=16383,a=0,u=r-n;a<u;a+=i)o.push(RF(e,a,a+i>u?u:a+i));return n===1?(t=e[r-1],o.push(xr[t>>2]+xr[t<<4&63]+"==")):n===2&&(t=(e[r-2]<<8)+e[r-1],o.push(xr[t>>10]+xr[t>>4&63]+xr[t<<2&63]+"=")),o.join("")}var zc={byteLength:_F,toByteArray:bF,fromByteArray:wF};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */var xF=function(t,r,n,o,i){var a,u,l=i*8-o-1,s=(1<<l)-1,c=s>>1,f=-7,d=n?i-1:0,v=n?-1:1,m=t[r+d];for(d+=v,a=m&(1<<-f)-1,m>>=-f,f+=l;f>0;a=a*256+t[r+d],d+=v,f-=8);for(u=a&(1<<-f)-1,a>>=-f,f+=o;f>0;u=u*256+t[r+d],d+=v,f-=8);if(a===0)a=1-c;else{if(a===s)return u?NaN:(m?-1:1)*(1/0);u=u+Math.pow(2,o),a=a-c}return(m?-1:1)*u*Math.pow(2,a-o)},PF=function(t,r,n,o,i,a){var u,l,s,c=a*8-i-1,f=(1<<c)-1,d=f>>1,v=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,m=o?0:a-1,b=o?1:-1,w=r<0||r===0&&1/r<0?1:0;for(r=Math.abs(r),isNaN(r)||r===1/0?(l=isNaN(r)?1:0,u=f):(u=Math.floor(Math.log(r)/Math.LN2),r*(s=Math.pow(2,-u))<1&&(u--,s*=2),u+d>=1?r+=v/s:r+=v*Math.pow(2,1-d),r*s>=2&&(u++,s/=2),u+d>=f?(l=0,u=f):u+d>=1?(l=(r*s-1)*Math.pow(2,i),u=u+d):(l=r*Math.pow(2,d-1)*Math.pow(2,i),u=0));i>=8;t[n+m]=l&255,m+=b,l/=256,i-=8);for(u=u<<i|l,c+=i;c>0;t[n+m]=u&255,m+=b,u/=256,c-=8);t[n+m-b]|=w*128},wi={read:xF,write:PF},Wu=yF(function(e,t){var r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=a,t.SlowBuffer=_,t.INSPECT_MAX_BYTES=50;var n=2147483647;t.kMaxLength=n,a.TYPED_ARRAY_SUPPORT=o(),!a.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function o(){try{var g=new Uint8Array(1),h={foo:function(){return 42}};return Object.setPrototypeOf(h,Uint8Array.prototype),Object.setPrototypeOf(g,h),g.foo()===42}catch{return!1}}Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}});function i(g){if(g>n)throw new RangeError('The value "'+g+'" is invalid for option "size"');var h=new Uint8Array(g);return Object.setPrototypeOf(h,a.prototype),h}function a(g,h,p){if(typeof g=="number"){if(typeof h=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return c(g)}return u(g,h,p)}a.poolSize=8192;function u(g,h,p){if(typeof g=="string")return f(g,h);if(ArrayBuffer.isView(g))return v(g);if(g==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+babelHelpers.typeof(g));if(S(g,ArrayBuffer)||g&&S(g.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(S(g,SharedArrayBuffer)||g&&S(g.buffer,SharedArrayBuffer)))return m(g,h,p);if(typeof g=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var y=g.valueOf&&g.valueOf();if(y!=null&&y!==g)return a.from(y,h,p);var T=b(g);if(T)return T;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof g[Symbol.toPrimitive]=="function")return a.from(g[Symbol.toPrimitive]("string"),h,p);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+babelHelpers.typeof(g))}a.from=function(g,h,p){return u(g,h,p)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array);function l(g){if(typeof g!="number")throw new TypeError('"size" argument must be of type number');if(g<0)throw new RangeError('The value "'+g+'" is invalid for option "size"')}function s(g,h,p){return l(g),g<=0?i(g):h!==void 0?typeof p=="string"?i(g).fill(h,p):i(g).fill(h):i(g)}a.alloc=function(g,h,p){return s(g,h,p)};function c(g){return l(g),i(g<0?0:w(g)|0)}a.allocUnsafe=function(g){return c(g)},a.allocUnsafeSlow=function(g){return c(g)};function f(g,h){if((typeof h!="string"||h==="")&&(h="utf8"),!a.isEncoding(h))throw new TypeError("Unknown encoding: "+h);var p=E(g,h)|0,y=i(p),T=y.write(g,h);return T!==p&&(y=y.slice(0,T)),y}function d(g){for(var h=g.length<0?0:w(g.length)|0,p=i(h),y=0;y<h;y+=1)p[y]=g[y]&255;return p}function v(g){if(S(g,Uint8Array)){var h=new Uint8Array(g);return m(h.buffer,h.byteOffset,h.byteLength)}return d(g)}function m(g,h,p){if(h<0||g.byteLength<h)throw new RangeError('"offset" is outside of buffer bounds');if(g.byteLength<h+(p||0))throw new RangeError('"length" is outside of buffer bounds');var y;return h===void 0&&p===void 0?y=new Uint8Array(g):p===void 0?y=new Uint8Array(g,h):y=new Uint8Array(g,h,p),Object.setPrototypeOf(y,a.prototype),y}function b(g){if(a.isBuffer(g)){var h=w(g.length)|0,p=i(h);return p.length===0||g.copy(p,0,0,h),p}if(g.length!==void 0)return typeof g.length!="number"||O(g.length)?i(0):d(g);if(g.type==="Buffer"&&Array.isArray(g.data))return d(g.data)}function w(g){if(g>=n)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+n.toString(16)+" bytes");return g|0}function _(g){return+g!=g&&(g=0),a.alloc(+g)}a.isBuffer=function(h){return h!=null&&h._isBuffer===!0&&h!==a.prototype},a.compare=function(h,p){if(S(h,Uint8Array)&&(h=a.from(h,h.offset,h.byteLength)),S(p,Uint8Array)&&(p=a.from(p,p.offset,p.byteLength)),!a.isBuffer(h)||!a.isBuffer(p))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(h===p)return 0;for(var y=h.length,T=p.length,x=0,C=Math.min(y,T);x<C;++x)if(h[x]!==p[x]){y=h[x],T=p[x];break}return y<T?-1:T<y?1:0},a.isEncoding=function(h){switch(String(h).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(h,p){if(!Array.isArray(h))throw new TypeError('"list" argument must be an Array of Buffers');if(h.length===0)return a.alloc(0);var y;if(p===void 0)for(p=0,y=0;y<h.length;++y)p+=h[y].length;var T=a.allocUnsafe(p),x=0;for(y=0;y<h.length;++y){var C=h[y];if(S(C,Uint8Array))x+C.length>T.length?a.from(C).copy(T,x):Uint8Array.prototype.set.call(T,C,x);else if(a.isBuffer(C))C.copy(T,x);else throw new TypeError('"list" argument must be an Array of Buffers');x+=C.length}return T};function E(g,h){if(a.isBuffer(g))return g.length;if(ArrayBuffer.isView(g)||S(g,ArrayBuffer))return g.byteLength;if(typeof g!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+babelHelpers.typeof(g));var p=g.length,y=arguments.length>2&&arguments[2]===!0;if(!y&&p===0)return 0;for(var T=!1;;)switch(h){case"ascii":case"latin1":case"binary":return p;case"utf8":case"utf-8":return $(g).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return p*2;case"hex":return p>>>1;case"base64":return V(g).length;default:if(T)return y?-1:$(g).length;h=(""+h).toLowerCase(),T=!0}}a.byteLength=E;function A(g,h,p){var y=!1;if((h===void 0||h<0)&&(h=0),h>this.length||((p===void 0||p>this.length)&&(p=this.length),p<=0)||(p>>>=0,h>>>=0,p<=h))return"";for(g||(g="utf8");;)switch(g){case"hex":return ce(this,h,p);case"utf8":case"utf-8":return oe(this,h,p);case"ascii":return ge(this,h,p);case"latin1":case"binary":return K(this,h,p);case"base64":return Q(this,h,p);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return se(this,h,p);default:if(y)throw new TypeError("Unknown encoding: "+g);g=(g+"").toLowerCase(),y=!0}}a.prototype._isBuffer=!0;function I(g,h,p){var y=g[h];g[h]=g[p],g[p]=y}a.prototype.swap16=function(){var h=this.length;if(h%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var p=0;p<h;p+=2)I(this,p,p+1);return this},a.prototype.swap32=function(){var h=this.length;if(h%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var p=0;p<h;p+=4)I(this,p,p+3),I(this,p+1,p+2);return this},a.prototype.swap64=function(){var h=this.length;if(h%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var p=0;p<h;p+=8)I(this,p,p+7),I(this,p+1,p+6),I(this,p+2,p+5),I(this,p+3,p+4);return this},a.prototype.toString=function(){var h=this.length;return h===0?"":arguments.length===0?oe(this,0,h):A.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(h){if(!a.isBuffer(h))throw new TypeError("Argument must be a Buffer");return this===h?!0:a.compare(this,h)===0},a.prototype.inspect=function(){var h="",p=t.INSPECT_MAX_BYTES;return h=this.toString("hex",0,p).replace(/(.{2})/g,"$1 ").trim(),this.length>p&&(h+=" ... "),"<Buffer "+h+">"},r&&(a.prototype[r]=a.prototype.inspect),a.prototype.compare=function(h,p,y,T,x){if(S(h,Uint8Array)&&(h=a.from(h,h.offset,h.byteLength)),!a.isBuffer(h))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+babelHelpers.typeof(h));if(p===void 0&&(p=0),y===void 0&&(y=h?h.length:0),T===void 0&&(T=0),x===void 0&&(x=this.length),p<0||y>h.length||T<0||x>this.length)throw new RangeError("out of range index");if(T>=x&&p>=y)return 0;if(T>=x)return-1;if(p>=y)return 1;if(p>>>=0,y>>>=0,T>>>=0,x>>>=0,this===h)return 0;for(var C=x-T,q=y-p,F=Math.min(C,q),G=this.slice(T,x),X=h.slice(p,y),ee=0;ee<F;++ee)if(G[ee]!==X[ee]){C=G[ee],q=X[ee];break}return C<q?-1:q<C?1:0};function R(g,h,p,y,T){if(g.length===0)return-1;if(typeof p=="string"?(y=p,p=0):p>2147483647?p=2147483647:p<-2147483648&&(p=-2147483648),p=+p,O(p)&&(p=T?0:g.length-1),p<0&&(p=g.length+p),p>=g.length){if(T)return-1;p=g.length-1}else if(p<0)if(T)p=0;else return-1;if(typeof h=="string"&&(h=a.from(h,y)),a.isBuffer(h))return h.length===0?-1:L(g,h,p,y,T);if(typeof h=="number")return h=h&255,typeof Uint8Array.prototype.indexOf=="function"?T?Uint8Array.prototype.indexOf.call(g,h,p):Uint8Array.prototype.lastIndexOf.call(g,h,p):L(g,[h],p,y,T);throw new TypeError("val must be string, number or Buffer")}function L(g,h,p,y,T){var x=1,C=g.length,q=h.length;if(y!==void 0&&(y=String(y).toLowerCase(),y==="ucs2"||y==="ucs-2"||y==="utf16le"||y==="utf-16le")){if(g.length<2||h.length<2)return-1;x=2,C/=2,q/=2,p/=2}function F(be,et){return x===1?be[et]:be.readUInt16BE(et*x)}var G;if(T){var X=-1;for(G=p;G<C;G++)if(F(g,G)===F(h,X===-1?0:G-X)){if(X===-1&&(X=G),G-X+1===q)return X*x}else X!==-1&&(G-=G-X),X=-1}else for(p+q>C&&(p=C-q),G=p;G>=0;G--){for(var ee=!0,Se=0;Se<q;Se++)if(F(g,G+Se)!==F(h,Se)){ee=!1;break}if(ee)return G}return-1}a.prototype.includes=function(h,p,y){return this.indexOf(h,p,y)!==-1},a.prototype.indexOf=function(h,p,y){return R(this,h,p,y,!0)},a.prototype.lastIndexOf=function(h,p,y){return R(this,h,p,y,!1)};function U(g,h,p,y){p=Number(p)||0;var T=g.length-p;y?(y=Number(y),y>T&&(y=T)):y=T;var x=h.length;y>x/2&&(y=x/2);for(var C=0;C<y;++C){var q=parseInt(h.substr(C*2,2),16);if(O(q))return C;g[p+C]=q}return C}function N(g,h,p,y){return fe($(h,g.length-p),g,p,y)}function D(g,h,p,y){return fe(W(h),g,p,y)}function k(g,h,p,y){return fe(V(h),g,p,y)}function M(g,h,p,y){return fe(j(h,g.length-p),g,p,y)}a.prototype.write=function(h,p,y,T){if(p===void 0)T="utf8",y=this.length,p=0;else if(y===void 0&&typeof p=="string")T=p,y=this.length,p=0;else if(isFinite(p))p=p>>>0,isFinite(y)?(y=y>>>0,T===void 0&&(T="utf8")):(T=y,y=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var x=this.length-p;if((y===void 0||y>x)&&(y=x),h.length>0&&(y<0||p<0)||p>this.length)throw new RangeError("Attempt to write outside buffer bounds");T||(T="utf8");for(var C=!1;;)switch(T){case"hex":return U(this,h,p,y);case"utf8":case"utf-8":return N(this,h,p,y);case"ascii":case"latin1":case"binary":return D(this,h,p,y);case"base64":return k(this,h,p,y);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return M(this,h,p,y);default:if(C)throw new TypeError("Unknown encoding: "+T);T=(""+T).toLowerCase(),C=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Q(g,h,p){return h===0&&p===g.length?zc.fromByteArray(g):zc.fromByteArray(g.slice(h,p))}function oe(g,h,p){p=Math.min(g.length,p);for(var y=[],T=h;T<p;){var x=g[T],C=null,q=x>239?4:x>223?3:x>191?2:1;if(T+q<=p){var F,G,X,ee;switch(q){case 1:x<128&&(C=x);break;case 2:F=g[T+1],(F&192)===128&&(ee=(x&31)<<6|F&63,ee>127&&(C=ee));break;case 3:F=g[T+1],G=g[T+2],(F&192)===128&&(G&192)===128&&(ee=(x&15)<<12|(F&63)<<6|G&63,ee>2047&&(ee<55296||ee>57343)&&(C=ee));break;case 4:F=g[T+1],G=g[T+2],X=g[T+3],(F&192)===128&&(G&192)===128&&(X&192)===128&&(ee=(x&15)<<18|(F&63)<<12|(G&63)<<6|X&63,ee>65535&&ee<1114112&&(C=ee))}}C===null?(C=65533,q=1):C>65535&&(C-=65536,y.push(C>>>10&1023|55296),C=56320|C&1023),y.push(C),T+=q}return Ae(y)}var Y=4096;function Ae(g){var h=g.length;if(h<=Y)return String.fromCharCode.apply(String,g);for(var p="",y=0;y<h;)p+=String.fromCharCode.apply(String,g.slice(y,y+=Y));return p}function ge(g,h,p){var y="";p=Math.min(g.length,p);for(var T=h;T<p;++T)y+=String.fromCharCode(g[T]&127);return y}function K(g,h,p){var y="";p=Math.min(g.length,p);for(var T=h;T<p;++T)y+=String.fromCharCode(g[T]);return y}function ce(g,h,p){var y=g.length;(!h||h<0)&&(h=0),(!p||p<0||p>y)&&(p=y);for(var T="",x=h;x<p;++x)T+=P[g[x]];return T}function se(g,h,p){for(var y=g.slice(h,p),T="",x=0;x<y.length-1;x+=2)T+=String.fromCharCode(y[x]+y[x+1]*256);return T}a.prototype.slice=function(h,p){var y=this.length;h=~~h,p=p===void 0?y:~~p,h<0?(h+=y,h<0&&(h=0)):h>y&&(h=y),p<0?(p+=y,p<0&&(p=0)):p>y&&(p=y),p<h&&(p=h);var T=this.subarray(h,p);return Object.setPrototypeOf(T,a.prototype),T};function ae(g,h,p){if(g%1!==0||g<0)throw new RangeError("offset is not uint");if(g+h>p)throw new RangeError("Trying to access beyond buffer length")}a.prototype.readUintLE=a.prototype.readUIntLE=function(h,p,y){h=h>>>0,p=p>>>0,y||ae(h,p,this.length);for(var T=this[h],x=1,C=0;++C<p&&(x*=256);)T+=this[h+C]*x;return T},a.prototype.readUintBE=a.prototype.readUIntBE=function(h,p,y){h=h>>>0,p=p>>>0,y||ae(h,p,this.length);for(var T=this[h+--p],x=1;p>0&&(x*=256);)T+=this[h+--p]*x;return T},a.prototype.readUint8=a.prototype.readUInt8=function(h,p){return h=h>>>0,p||ae(h,1,this.length),this[h]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(h,p){return h=h>>>0,p||ae(h,2,this.length),this[h]|this[h+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(h,p){return h=h>>>0,p||ae(h,2,this.length),this[h]<<8|this[h+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(h,p){return h=h>>>0,p||ae(h,4,this.length),(this[h]|this[h+1]<<8|this[h+2]<<16)+this[h+3]*16777216},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(h,p){return h=h>>>0,p||ae(h,4,this.length),this[h]*16777216+(this[h+1]<<16|this[h+2]<<8|this[h+3])},a.prototype.readIntLE=function(h,p,y){h=h>>>0,p=p>>>0,y||ae(h,p,this.length);for(var T=this[h],x=1,C=0;++C<p&&(x*=256);)T+=this[h+C]*x;return x*=128,T>=x&&(T-=Math.pow(2,8*p)),T},a.prototype.readIntBE=function(h,p,y){h=h>>>0,p=p>>>0,y||ae(h,p,this.length);for(var T=p,x=1,C=this[h+--T];T>0&&(x*=256);)C+=this[h+--T]*x;return x*=128,C>=x&&(C-=Math.pow(2,8*p)),C},a.prototype.readInt8=function(h,p){return h=h>>>0,p||ae(h,1,this.length),this[h]&128?(255-this[h]+1)*-1:this[h]},a.prototype.readInt16LE=function(h,p){h=h>>>0,p||ae(h,2,this.length);var y=this[h]|this[h+1]<<8;return y&32768?y|4294901760:y},a.prototype.readInt16BE=function(h,p){h=h>>>0,p||ae(h,2,this.length);var y=this[h+1]|this[h]<<8;return y&32768?y|4294901760:y},a.prototype.readInt32LE=function(h,p){return h=h>>>0,p||ae(h,4,this.length),this[h]|this[h+1]<<8|this[h+2]<<16|this[h+3]<<24},a.prototype.readInt32BE=function(h,p){return h=h>>>0,p||ae(h,4,this.length),this[h]<<24|this[h+1]<<16|this[h+2]<<8|this[h+3]},a.prototype.readFloatLE=function(h,p){return h=h>>>0,p||ae(h,4,this.length),wi.read(this,h,!0,23,4)},a.prototype.readFloatBE=function(h,p){return h=h>>>0,p||ae(h,4,this.length),wi.read(this,h,!1,23,4)},a.prototype.readDoubleLE=function(h,p){return h=h>>>0,p||ae(h,8,this.length),wi.read(this,h,!0,52,8)},a.prototype.readDoubleBE=function(h,p){return h=h>>>0,p||ae(h,8,this.length),wi.read(this,h,!1,52,8)};function Re(g,h,p,y,T,x){if(!a.isBuffer(g))throw new TypeError('"buffer" argument must be a Buffer instance');if(h>T||h<x)throw new RangeError('"value" argument is out of bounds');if(p+y>g.length)throw new RangeError("Index out of range")}a.prototype.writeUintLE=a.prototype.writeUIntLE=function(h,p,y,T){if(h=+h,p=p>>>0,y=y>>>0,!T){var x=Math.pow(2,8*y)-1;Re(this,h,p,y,x,0)}var C=1,q=0;for(this[p]=h&255;++q<y&&(C*=256);)this[p+q]=h/C&255;return p+y},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(h,p,y,T){if(h=+h,p=p>>>0,y=y>>>0,!T){var x=Math.pow(2,8*y)-1;Re(this,h,p,y,x,0)}var C=y-1,q=1;for(this[p+C]=h&255;--C>=0&&(q*=256);)this[p+C]=h/q&255;return p+y},a.prototype.writeUint8=a.prototype.writeUInt8=function(h,p,y){return h=+h,p=p>>>0,y||Re(this,h,p,1,255,0),this[p]=h&255,p+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(h,p,y){return h=+h,p=p>>>0,y||Re(this,h,p,2,65535,0),this[p]=h&255,this[p+1]=h>>>8,p+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(h,p,y){return h=+h,p=p>>>0,y||Re(this,h,p,2,65535,0),this[p]=h>>>8,this[p+1]=h&255,p+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(h,p,y){return h=+h,p=p>>>0,y||Re(this,h,p,4,4294967295,0),this[p+3]=h>>>24,this[p+2]=h>>>16,this[p+1]=h>>>8,this[p]=h&255,p+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(h,p,y){return h=+h,p=p>>>0,y||Re(this,h,p,4,4294967295,0),this[p]=h>>>24,this[p+1]=h>>>16,this[p+2]=h>>>8,this[p+3]=h&255,p+4},a.prototype.writeIntLE=function(h,p,y,T){if(h=+h,p=p>>>0,!T){var x=Math.pow(2,8*y-1);Re(this,h,p,y,x-1,-x)}var C=0,q=1,F=0;for(this[p]=h&255;++C<y&&(q*=256);)h<0&&F===0&&this[p+C-1]!==0&&(F=1),this[p+C]=(h/q>>0)-F&255;return p+y},a.prototype.writeIntBE=function(h,p,y,T){if(h=+h,p=p>>>0,!T){var x=Math.pow(2,8*y-1);Re(this,h,p,y,x-1,-x)}var C=y-1,q=1,F=0;for(this[p+C]=h&255;--C>=0&&(q*=256);)h<0&&F===0&&this[p+C+1]!==0&&(F=1),this[p+C]=(h/q>>0)-F&255;return p+y},a.prototype.writeInt8=function(h,p,y){return h=+h,p=p>>>0,y||Re(this,h,p,1,127,-128),h<0&&(h=255+h+1),this[p]=h&255,p+1},a.prototype.writeInt16LE=function(h,p,y){return h=+h,p=p>>>0,y||Re(this,h,p,2,32767,-32768),this[p]=h&255,this[p+1]=h>>>8,p+2},a.prototype.writeInt16BE=function(h,p,y){return h=+h,p=p>>>0,y||Re(this,h,p,2,32767,-32768),this[p]=h>>>8,this[p+1]=h&255,p+2},a.prototype.writeInt32LE=function(h,p,y){return h=+h,p=p>>>0,y||Re(this,h,p,4,2147483647,-2147483648),this[p]=h&255,this[p+1]=h>>>8,this[p+2]=h>>>16,this[p+3]=h>>>24,p+4},a.prototype.writeInt32BE=function(h,p,y){return h=+h,p=p>>>0,y||Re(this,h,p,4,2147483647,-2147483648),h<0&&(h=4294967295+h+1),this[p]=h>>>24,this[p+1]=h>>>16,this[p+2]=h>>>8,this[p+3]=h&255,p+4};function We(g,h,p,y,T,x){if(p+y>g.length)throw new RangeError("Index out of range");if(p<0)throw new RangeError("Index out of range")}function Wt(g,h,p,y,T){return h=+h,p=p>>>0,T||We(g,h,p,4),wi.write(g,h,p,y,23,4),p+4}a.prototype.writeFloatLE=function(h,p,y){return Wt(this,h,p,!0,y)},a.prototype.writeFloatBE=function(h,p,y){return Wt(this,h,p,!1,y)};function rr(g,h,p,y,T){return h=+h,p=p>>>0,T||We(g,h,p,8),wi.write(g,h,p,y,52,8),p+8}a.prototype.writeDoubleLE=function(h,p,y){return rr(this,h,p,!0,y)},a.prototype.writeDoubleBE=function(h,p,y){return rr(this,h,p,!1,y)},a.prototype.copy=function(h,p,y,T){if(!a.isBuffer(h))throw new TypeError("argument should be a Buffer");if(y||(y=0),!T&&T!==0&&(T=this.length),p>=h.length&&(p=h.length),p||(p=0),T>0&&T<y&&(T=y),T===y||h.length===0||this.length===0)return 0;if(p<0)throw new RangeError("targetStart out of bounds");if(y<0||y>=this.length)throw new RangeError("Index out of range");if(T<0)throw new RangeError("sourceEnd out of bounds");T>this.length&&(T=this.length),h.length-p<T-y&&(T=h.length-p+y);var x=T-y;return this===h&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(p,y,T):Uint8Array.prototype.set.call(h,this.subarray(y,T),p),x},a.prototype.fill=function(h,p,y,T){if(typeof h=="string"){if(typeof p=="string"?(T=p,p=0,y=this.length):typeof y=="string"&&(T=y,y=this.length),T!==void 0&&typeof T!="string")throw new TypeError("encoding must be a string");if(typeof T=="string"&&!a.isEncoding(T))throw new TypeError("Unknown encoding: "+T);if(h.length===1){var x=h.charCodeAt(0);(T==="utf8"&&x<128||T==="latin1")&&(h=x)}}else typeof h=="number"?h=h&255:typeof h=="boolean"&&(h=Number(h));if(p<0||this.length<p||this.length<y)throw new RangeError("Out of range index");if(y<=p)return this;p=p>>>0,y=y===void 0?this.length:y>>>0,h||(h=0);var C;if(typeof h=="number")for(C=p;C<y;++C)this[C]=h;else{var q=a.isBuffer(h)?h:a.from(h,T),F=q.length;if(F===0)throw new TypeError('The value "'+h+'" is invalid for argument "value"');for(C=0;C<y-p;++C)this[C+p]=q[C%F]}return this};var Ke=/[^+/0-9A-Za-z-_]/g;function ne(g){if(g=g.split("=")[0],g=g.trim().replace(Ke,""),g.length<2)return"";for(;g.length%4!==0;)g=g+"=";return g}function $(g,h){h=h||1/0;for(var p,y=g.length,T=null,x=[],C=0;C<y;++C){if(p=g.charCodeAt(C),p>55295&&p<57344){if(!T){if(p>56319){(h-=3)>-1&&x.push(239,191,189);continue}else if(C+1===y){(h-=3)>-1&&x.push(239,191,189);continue}T=p;continue}if(p<56320){(h-=3)>-1&&x.push(239,191,189),T=p;continue}p=(T-55296<<10|p-56320)+65536}else T&&(h-=3)>-1&&x.push(239,191,189);if(T=null,p<128){if((h-=1)<0)break;x.push(p)}else if(p<2048){if((h-=2)<0)break;x.push(p>>6|192,p&63|128)}else if(p<65536){if((h-=3)<0)break;x.push(p>>12|224,p>>6&63|128,p&63|128)}else if(p<1114112){if((h-=4)<0)break;x.push(p>>18|240,p>>12&63|128,p>>6&63|128,p&63|128)}else throw new Error("Invalid code point")}return x}function W(g){for(var h=[],p=0;p<g.length;++p)h.push(g.charCodeAt(p)&255);return h}function j(g,h){for(var p,y,T,x=[],C=0;C<g.length&&!((h-=2)<0);++C)p=g.charCodeAt(C),y=p>>8,T=p%256,x.push(T),x.push(y);return x}function V(g){return zc.toByteArray(ne(g))}function fe(g,h,p,y){for(var T=0;T<y&&!(T+p>=h.length||T>=g.length);++T)h[T+p]=g[T];return T}function S(g,h){return g instanceof h||g!=null&&g.constructor!=null&&g.constructor.name!=null&&g.constructor.name===h.name}function O(g){return g!==g}var P=function(){for(var g="0123456789abcdef",h=new Array(256),p=0;p<16;++p)for(var y=p*16,T=0;T<16;++T)h[y+T]=g[p]+g[T];return h}()}),Ie=Wu.Buffer;Wu.SlowBuffer;Wu.INSPECT_MAX_BYTES;Wu.kMaxLength;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Kl=function(t,r){return Kl=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)o.hasOwnProperty(i)&&(n[i]=o[i])},Kl(t,r)};function Hu(e,t){Kl(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var oi=function(e){Hu(t,e);function t(r){var n=e.call(this,r)||this;return Object.setPrototypeOf(n,t.prototype),n}return Object.defineProperty(t.prototype,"name",{get:function(){return"BSONError"},enumerable:!1,configurable:!0}),t}(Error),je=function(e){Hu(t,e);function t(r){var n=e.call(this,r)||this;return Object.setPrototypeOf(n,t.prototype),n}return Object.defineProperty(t.prototype,"name",{get:function(){return"BSONTypeError"},enumerable:!1,configurable:!0}),t}(TypeError);function zs(e){return e&&e.Math==Math&&e}function Q_(){return zs(typeof globalThis=="object"&&globalThis)||zs(typeof window=="object"&&window)||zs(typeof self=="object"&&self)||zs(typeof global=="object"&&global)||Function("return this")()}function NF(){var e=Q_();return typeof e.navigator=="object"&&e.navigator.product==="ReactNative"}var LF=function(t){var r=NF()?"BSON: For React Native please polyfill crypto.getRandomValues, e.g. using: https://www.npmjs.com/package/react-native-get-random-values.":"BSON: No cryptographic implementation for random bytes present, falling back to a less secure implementation.";console.warn(r);for(var n=Ie.alloc(t),o=0;o<t;++o)n[o]=Math.floor(Math.random()*256);return n},DF=function(){{if(typeof window<"u"){var e=window.crypto||window.msCrypto;if(e&&e.getRandomValues)return function(t){return e.getRandomValues(Ie.alloc(t))}}return typeof global<"u"&&global.crypto&&global.crypto.getRandomValues?function(t){return global.crypto.getRandomValues(Ie.alloc(t))}:LF}},X_=DF();function UF(e){return["[object ArrayBuffer]","[object SharedArrayBuffer]"].includes(Object.prototype.toString.call(e))}function hd(e){return Object.prototype.toString.call(e)==="[object Uint8Array]"}function $F(e){return Object.prototype.toString.call(e)==="[object RegExp]"}function FF(e){return Ts(e)&&Object.prototype.toString.call(e)==="[object Date]"}function Ts(e){return typeof e=="object"&&e!==null}function Gu(e,t){var r=!1;function n(){for(var o=[],i=0;i<arguments.length;i++)o[i]=arguments[i];return r||(console.warn(t),r=!0),e.apply(this,o)}return n}function iu(e){if(ArrayBuffer.isView(e))return Ie.from(e.buffer,e.byteOffset,e.byteLength);if(UF(e))return Ie.from(e);throw new je("Must use either Buffer or TypedArray")}var MF=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|[0-9a-f]{12}4[0-9a-f]{3}[89ab][0-9a-f]{15})$/i,Z_=function(e){return typeof e=="string"&&MF.test(e)},zl=function(e){if(!Z_(e))throw new je('UUID string representations must be a 32 or 36 character hex string (dashes excluded/included). Format: "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx" or "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx".');var t=e.replace(/-/g,"");return Ie.from(t,"hex")},Hv=function(e,t){return t===void 0&&(t=!0),t?e.toString("hex",0,4)+"-"+e.toString("hex",4,6)+"-"+e.toString("hex",6,8)+"-"+e.toString("hex",8,10)+"-"+e.toString("hex",10,16):e.toString("hex")},BF=Math.pow(2,53),jF=-Math.pow(2,53),eb=4,si=function(){function e(t,r){if(!(this instanceof e))return new e(t,r);if(t!=null&&typeof t!="string"&&!ArrayBuffer.isView(t)&&!(t instanceof ArrayBuffer)&&!Array.isArray(t))throw new je("Binary can only be constructed from string, Buffer, TypedArray, or Array<number>");this.sub_type=r??e.BSON_BINARY_SUBTYPE_DEFAULT,t==null?(this.buffer=Ie.alloc(e.BUFFER_SIZE),this.position=0):(typeof t=="string"?this.buffer=Ie.from(t,"binary"):Array.isArray(t)?this.buffer=Ie.from(t):this.buffer=iu(t),this.position=this.buffer.byteLength)}return e.prototype.put=function(t){if(typeof t=="string"&&t.length!==1)throw new je("only accepts single character String");if(typeof t!="number"&&t.length!==1)throw new je("only accepts single character Uint8Array or Array");var r;if(typeof t=="string"?r=t.charCodeAt(0):typeof t=="number"?r=t:r=t[0],r<0||r>255)throw new je("only accepts number in a valid unsigned byte range 0-255");if(this.buffer.length>this.position)this.buffer[this.position++]=r;else{var n=Ie.alloc(e.BUFFER_SIZE+this.buffer.length);this.buffer.copy(n,0,0,this.buffer.length),this.buffer=n,this.buffer[this.position++]=r}},e.prototype.write=function(t,r){if(r=typeof r=="number"?r:this.position,this.buffer.length<r+t.length){var n=Ie.alloc(this.buffer.length+t.length);this.buffer.copy(n,0,0,this.buffer.length),this.buffer=n}ArrayBuffer.isView(t)?(this.buffer.set(iu(t),r),this.position=r+t.byteLength>this.position?r+t.length:this.position):typeof t=="string"&&(this.buffer.write(t,r,t.length,"binary"),this.position=r+t.length>this.position?r+t.length:this.position)},e.prototype.read=function(t,r){return r=r&&r>0?r:this.position,this.buffer.slice(t,t+r)},e.prototype.value=function(t){return t=!!t,t&&this.buffer.length===this.position?this.buffer:t?this.buffer.slice(0,this.position):this.buffer.toString("binary",0,this.position)},e.prototype.length=function(){return this.position},e.prototype.toJSON=function(){return this.buffer.toString("base64")},e.prototype.toString=function(t){return this.buffer.toString(t)},e.prototype.toExtendedJSON=function(t){t=t||{};var r=this.buffer.toString("base64"),n=Number(this.sub_type).toString(16);return t.legacy?{$binary:r,$type:n.length===1?"0"+n:n}:{$binary:{base64:r,subType:n.length===1?"0"+n:n}}},e.prototype.toUUID=function(){if(this.sub_type===e.SUBTYPE_UUID)return new Gv(this.buffer.slice(0,this.position));throw new oi('Binary sub_type "'.concat(this.sub_type,'" is not supported for converting to UUID. Only "').concat(e.SUBTYPE_UUID,'" is currently supported.'))},e.fromExtendedJSON=function(t,r){r=r||{};var n,o;if("$binary"in t?r.legacy&&typeof t.$binary=="string"&&"$type"in t?(o=t.$type?parseInt(t.$type,16):0,n=Ie.from(t.$binary,"base64")):typeof t.$binary!="string"&&(o=t.$binary.subType?parseInt(t.$binary.subType,16):0,n=Ie.from(t.$binary.base64,"base64")):"$uuid"in t&&(o=4,n=zl(t.$uuid)),!n)throw new je("Unexpected Binary Extended JSON format ".concat(JSON.stringify(t)));return o===eb?new Gv(n):new e(n,o)},e.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},e.prototype.inspect=function(){var t=this.value(!0);return'new Binary(Buffer.from("'.concat(t.toString("hex"),'", "hex"), ').concat(this.sub_type,")")},e.BSON_BINARY_SUBTYPE_DEFAULT=0,e.BUFFER_SIZE=256,e.SUBTYPE_DEFAULT=0,e.SUBTYPE_FUNCTION=1,e.SUBTYPE_BYTE_ARRAY=2,e.SUBTYPE_UUID_OLD=3,e.SUBTYPE_UUID=4,e.SUBTYPE_MD5=5,e.SUBTYPE_ENCRYPTED=6,e.SUBTYPE_COLUMN=7,e.SUBTYPE_USER_DEFINED=128,e}();Object.defineProperty(si.prototype,"_bsontype",{value:"Binary"});var Jc=16,Gv=function(e){Hu(t,e);function t(r){var n=this,o,i;if(r==null)o=t.generate();else if(r instanceof t)o=Ie.from(r.buffer),i=r.__id;else if(ArrayBuffer.isView(r)&&r.byteLength===Jc)o=iu(r);else if(typeof r=="string")o=zl(r);else throw new je("Argument passed in UUID constructor must be a UUID, a 16 byte Buffer or a 32/36 character hex string (dashes excluded/included, format: xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx).");return n=e.call(this,o,eb)||this,n.__id=i,n}return Object.defineProperty(t.prototype,"id",{get:function(){return this.buffer},set:function(r){this.buffer=r,t.cacheHexString&&(this.__id=Hv(r))},enumerable:!1,configurable:!0}),t.prototype.toHexString=function(r){if(r===void 0&&(r=!0),t.cacheHexString&&this.__id)return this.__id;var n=Hv(this.id,r);return t.cacheHexString&&(this.__id=n),n},t.prototype.toString=function(r){return r?this.id.toString(r):this.toHexString()},t.prototype.toJSON=function(){return this.toHexString()},t.prototype.equals=function(r){if(!r)return!1;if(r instanceof t)return r.id.equals(this.id);try{return new t(r).id.equals(this.id)}catch{return!1}},t.prototype.toBinary=function(){return new si(this.id,si.SUBTYPE_UUID)},t.generate=function(){var r=X_(Jc);return r[6]=r[6]&15|64,r[8]=r[8]&63|128,Ie.from(r)},t.isValid=function(r){return r?r instanceof t?!0:typeof r=="string"?Z_(r):hd(r)?r.length!==Jc?!1:(r[6]&240)===64&&(r[8]&128)===128:!1:!1},t.createFromHexString=function(r){var n=zl(r);return new t(n)},t.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},t.prototype.inspect=function(){return'new UUID("'.concat(this.toHexString(),'")')},t}(si),Vu=function(){function e(t,r){if(!(this instanceof e))return new e(t,r);this.code=t,this.scope=r}return e.prototype.toJSON=function(){return{code:this.code,scope:this.scope}},e.prototype.toExtendedJSON=function(){return this.scope?{$code:this.code,$scope:this.scope}:{$code:this.code}},e.fromExtendedJSON=function(t){return new e(t.$code,t.$scope)},e.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},e.prototype.inspect=function(){var t=this.toJSON();return'new Code("'.concat(String(t.code),'"').concat(t.scope?", ".concat(JSON.stringify(t.scope)):"",")")},e}();Object.defineProperty(Vu.prototype,"_bsontype",{value:"Code"});function kF(e){return Ts(e)&&e.$id!=null&&typeof e.$ref=="string"&&(e.$db==null||typeof e.$db=="string")}var ms=function(){function e(t,r,n,o){if(!(this instanceof e))return new e(t,r,n,o);var i=t.split(".");i.length===2&&(n=i.shift(),t=i.shift()),this.collection=t,this.oid=r,this.db=n,this.fields=o||{}}return Object.defineProperty(e.prototype,"namespace",{get:function(){return this.collection},set:function(t){this.collection=t},enumerable:!1,configurable:!0}),e.prototype.toJSON=function(){var t=Object.assign({$ref:this.collection,$id:this.oid},this.fields);return this.db!=null&&(t.$db=this.db),t},e.prototype.toExtendedJSON=function(t){t=t||{};var r={$ref:this.collection,$id:this.oid};return t.legacy||(this.db&&(r.$db=this.db),r=Object.assign(r,this.fields)),r},e.fromExtendedJSON=function(t){var r=Object.assign({},t);return delete r.$ref,delete r.$id,delete r.$db,new e(t.$ref,t.$id,t.$db,r)},e.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},e.prototype.inspect=function(){var t=this.oid===void 0||this.oid.toString===void 0?this.oid:this.oid.toString();return'new DBRef("'.concat(this.namespace,'", new ObjectId("').concat(String(t),'")').concat(this.db?', "'.concat(this.db,'"'):"",")")},e}();Object.defineProperty(ms.prototype,"_bsontype",{value:"DBRef"});var Ht=void 0;try{Ht=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}var Vv=65536,qF=1<<24,Pi=Vv*Vv,tb=Pi*Pi,Kv=tb/2,zv={},Jv={},te=function(){function e(t,r,n){if(t===void 0&&(t=0),!(this instanceof e))return new e(t,r,n);typeof t=="bigint"?Object.assign(this,e.fromBigInt(t,!!r)):typeof t=="string"?Object.assign(this,e.fromString(t,!!r)):(this.low=t|0,this.high=r|0,this.unsigned=!!n),Object.defineProperty(this,"__isLong__",{value:!0,configurable:!1,writable:!1,enumerable:!1})}return e.fromBits=function(t,r,n){return new e(t,r,n)},e.fromInt=function(t,r){var n,o,i;return r?(t>>>=0,(i=0<=t&&t<256)&&(o=Jv[t],o)?o:(n=e.fromBits(t,(t|0)<0?-1:0,!0),i&&(Jv[t]=n),n)):(t|=0,(i=-128<=t&&t<128)&&(o=zv[t],o)?o:(n=e.fromBits(t,t<0?-1:0,!1),i&&(zv[t]=n),n))},e.fromNumber=function(t,r){if(isNaN(t))return r?e.UZERO:e.ZERO;if(r){if(t<0)return e.UZERO;if(t>=tb)return e.MAX_UNSIGNED_VALUE}else{if(t<=-Kv)return e.MIN_VALUE;if(t+1>=Kv)return e.MAX_VALUE}return t<0?e.fromNumber(-t,r).neg():e.fromBits(t%Pi|0,t/Pi|0,r)},e.fromBigInt=function(t,r){return e.fromString(t.toString(),r)},e.fromString=function(t,r,n){if(t.length===0)throw Error("empty string");if(t==="NaN"||t==="Infinity"||t==="+Infinity"||t==="-Infinity")return e.ZERO;if(typeof r=="number"?(n=r,r=!1):r=!!r,n=n||10,n<2||36<n)throw RangeError("radix");var o;if((o=t.indexOf("-"))>0)throw Error("interior hyphen");if(o===0)return e.fromString(t.substring(1),r,n).neg();for(var i=e.fromNumber(Math.pow(n,8)),a=e.ZERO,u=0;u<t.length;u+=8){var l=Math.min(8,t.length-u),s=parseInt(t.substring(u,u+l),n);if(l<8){var c=e.fromNumber(Math.pow(n,l));a=a.mul(c).add(e.fromNumber(s))}else a=a.mul(i),a=a.add(e.fromNumber(s))}return a.unsigned=r,a},e.fromBytes=function(t,r,n){return n?e.fromBytesLE(t,r):e.fromBytesBE(t,r)},e.fromBytesLE=function(t,r){return new e(t[0]|t[1]<<8|t[2]<<16|t[3]<<24,t[4]|t[5]<<8|t[6]<<16|t[7]<<24,r)},e.fromBytesBE=function(t,r){return new e(t[4]<<24|t[5]<<16|t[6]<<8|t[7],t[0]<<24|t[1]<<16|t[2]<<8|t[3],r)},e.isLong=function(t){return Ts(t)&&t.__isLong__===!0},e.fromValue=function(t,r){return typeof t=="number"?e.fromNumber(t,r):typeof t=="string"?e.fromString(t,r):e.fromBits(t.low,t.high,typeof r=="boolean"?r:t.unsigned)},e.prototype.add=function(t){e.isLong(t)||(t=e.fromValue(t));var r=this.high>>>16,n=this.high&65535,o=this.low>>>16,i=this.low&65535,a=t.high>>>16,u=t.high&65535,l=t.low>>>16,s=t.low&65535,c=0,f=0,d=0,v=0;return v+=i+s,d+=v>>>16,v&=65535,d+=o+l,f+=d>>>16,d&=65535,f+=n+u,c+=f>>>16,f&=65535,c+=r+a,c&=65535,e.fromBits(d<<16|v,c<<16|f,this.unsigned)},e.prototype.and=function(t){return e.isLong(t)||(t=e.fromValue(t)),e.fromBits(this.low&t.low,this.high&t.high,this.unsigned)},e.prototype.compare=function(t){if(e.isLong(t)||(t=e.fromValue(t)),this.eq(t))return 0;var r=this.isNegative(),n=t.isNegative();return r&&!n?-1:!r&&n?1:this.unsigned?t.high>>>0>this.high>>>0||t.high===this.high&&t.low>>>0>this.low>>>0?-1:1:this.sub(t).isNegative()?-1:1},e.prototype.comp=function(t){return this.compare(t)},e.prototype.divide=function(t){if(e.isLong(t)||(t=e.fromValue(t)),t.isZero())throw Error("division by zero");if(Ht){if(!this.unsigned&&this.high===-2147483648&&t.low===-1&&t.high===-1)return this;var r=(this.unsigned?Ht.div_u:Ht.div_s)(this.low,this.high,t.low,t.high);return e.fromBits(r,Ht.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?e.UZERO:e.ZERO;var n,o,i;if(this.unsigned){if(t.unsigned||(t=t.toUnsigned()),t.gt(this))return e.UZERO;if(t.gt(this.shru(1)))return e.UONE;i=e.UZERO}else{if(this.eq(e.MIN_VALUE)){if(t.eq(e.ONE)||t.eq(e.NEG_ONE))return e.MIN_VALUE;if(t.eq(e.MIN_VALUE))return e.ONE;var a=this.shr(1);return n=a.div(t).shl(1),n.eq(e.ZERO)?t.isNegative()?e.ONE:e.NEG_ONE:(o=this.sub(t.mul(n)),i=n.add(o.div(t)),i)}else if(t.eq(e.MIN_VALUE))return this.unsigned?e.UZERO:e.ZERO;if(this.isNegative())return t.isNegative()?this.neg().div(t.neg()):this.neg().div(t).neg();if(t.isNegative())return this.div(t.neg()).neg();i=e.ZERO}for(o=this;o.gte(t);){n=Math.max(1,Math.floor(o.toNumber()/t.toNumber()));for(var u=Math.ceil(Math.log(n)/Math.LN2),l=u<=48?1:Math.pow(2,u-48),s=e.fromNumber(n),c=s.mul(t);c.isNegative()||c.gt(o);)n-=l,s=e.fromNumber(n,this.unsigned),c=s.mul(t);s.isZero()&&(s=e.ONE),i=i.add(s),o=o.sub(c)}return i},e.prototype.div=function(t){return this.divide(t)},e.prototype.equals=function(t){return e.isLong(t)||(t=e.fromValue(t)),this.unsigned!==t.unsigned&&this.high>>>31===1&&t.high>>>31===1?!1:this.high===t.high&&this.low===t.low},e.prototype.eq=function(t){return this.equals(t)},e.prototype.getHighBits=function(){return this.high},e.prototype.getHighBitsUnsigned=function(){return this.high>>>0},e.prototype.getLowBits=function(){return this.low},e.prototype.getLowBitsUnsigned=function(){return this.low>>>0},e.prototype.getNumBitsAbs=function(){if(this.isNegative())return this.eq(e.MIN_VALUE)?64:this.neg().getNumBitsAbs();var t=this.high!==0?this.high:this.low,r;for(r=31;r>0&&!(t&1<<r);r--);return this.high!==0?r+33:r+1},e.prototype.greaterThan=function(t){return this.comp(t)>0},e.prototype.gt=function(t){return this.greaterThan(t)},e.prototype.greaterThanOrEqual=function(t){return this.comp(t)>=0},e.prototype.gte=function(t){return this.greaterThanOrEqual(t)},e.prototype.ge=function(t){return this.greaterThanOrEqual(t)},e.prototype.isEven=function(){return(this.low&1)===0},e.prototype.isNegative=function(){return!this.unsigned&&this.high<0},e.prototype.isOdd=function(){return(this.low&1)===1},e.prototype.isPositive=function(){return this.unsigned||this.high>=0},e.prototype.isZero=function(){return this.high===0&&this.low===0},e.prototype.lessThan=function(t){return this.comp(t)<0},e.prototype.lt=function(t){return this.lessThan(t)},e.prototype.lessThanOrEqual=function(t){return this.comp(t)<=0},e.prototype.lte=function(t){return this.lessThanOrEqual(t)},e.prototype.modulo=function(t){if(e.isLong(t)||(t=e.fromValue(t)),Ht){var r=(this.unsigned?Ht.rem_u:Ht.rem_s)(this.low,this.high,t.low,t.high);return e.fromBits(r,Ht.get_high(),this.unsigned)}return this.sub(this.div(t).mul(t))},e.prototype.mod=function(t){return this.modulo(t)},e.prototype.rem=function(t){return this.modulo(t)},e.prototype.multiply=function(t){if(this.isZero())return e.ZERO;if(e.isLong(t)||(t=e.fromValue(t)),Ht){var r=Ht.mul(this.low,this.high,t.low,t.high);return e.fromBits(r,Ht.get_high(),this.unsigned)}if(t.isZero())return e.ZERO;if(this.eq(e.MIN_VALUE))return t.isOdd()?e.MIN_VALUE:e.ZERO;if(t.eq(e.MIN_VALUE))return this.isOdd()?e.MIN_VALUE:e.ZERO;if(this.isNegative())return t.isNegative()?this.neg().mul(t.neg()):this.neg().mul(t).neg();if(t.isNegative())return this.mul(t.neg()).neg();if(this.lt(e.TWO_PWR_24)&&t.lt(e.TWO_PWR_24))return e.fromNumber(this.toNumber()*t.toNumber(),this.unsigned);var n=this.high>>>16,o=this.high&65535,i=this.low>>>16,a=this.low&65535,u=t.high>>>16,l=t.high&65535,s=t.low>>>16,c=t.low&65535,f=0,d=0,v=0,m=0;return m+=a*c,v+=m>>>16,m&=65535,v+=i*c,d+=v>>>16,v&=65535,v+=a*s,d+=v>>>16,v&=65535,d+=o*c,f+=d>>>16,d&=65535,d+=i*s,f+=d>>>16,d&=65535,d+=a*l,f+=d>>>16,d&=65535,f+=n*c+o*s+i*l+a*u,f&=65535,e.fromBits(v<<16|m,f<<16|d,this.unsigned)},e.prototype.mul=function(t){return this.multiply(t)},e.prototype.negate=function(){return!this.unsigned&&this.eq(e.MIN_VALUE)?e.MIN_VALUE:this.not().add(e.ONE)},e.prototype.neg=function(){return this.negate()},e.prototype.not=function(){return e.fromBits(~this.low,~this.high,this.unsigned)},e.prototype.notEquals=function(t){return!this.equals(t)},e.prototype.neq=function(t){return this.notEquals(t)},e.prototype.ne=function(t){return this.notEquals(t)},e.prototype.or=function(t){return e.isLong(t)||(t=e.fromValue(t)),e.fromBits(this.low|t.low,this.high|t.high,this.unsigned)},e.prototype.shiftLeft=function(t){return e.isLong(t)&&(t=t.toInt()),(t&=63)===0?this:t<32?e.fromBits(this.low<<t,this.high<<t|this.low>>>32-t,this.unsigned):e.fromBits(0,this.low<<t-32,this.unsigned)},e.prototype.shl=function(t){return this.shiftLeft(t)},e.prototype.shiftRight=function(t){return e.isLong(t)&&(t=t.toInt()),(t&=63)===0?this:t<32?e.fromBits(this.low>>>t|this.high<<32-t,this.high>>t,this.unsigned):e.fromBits(this.high>>t-32,this.high>=0?0:-1,this.unsigned)},e.prototype.shr=function(t){return this.shiftRight(t)},e.prototype.shiftRightUnsigned=function(t){if(e.isLong(t)&&(t=t.toInt()),t&=63,t===0)return this;var r=this.high;if(t<32){var n=this.low;return e.fromBits(n>>>t|r<<32-t,r>>>t,this.unsigned)}else return t===32?e.fromBits(r,0,this.unsigned):e.fromBits(r>>>t-32,0,this.unsigned)},e.prototype.shr_u=function(t){return this.shiftRightUnsigned(t)},e.prototype.shru=function(t){return this.shiftRightUnsigned(t)},e.prototype.subtract=function(t){return e.isLong(t)||(t=e.fromValue(t)),this.add(t.neg())},e.prototype.sub=function(t){return this.subtract(t)},e.prototype.toInt=function(){return this.unsigned?this.low>>>0:this.low},e.prototype.toNumber=function(){return this.unsigned?(this.high>>>0)*Pi+(this.low>>>0):this.high*Pi+(this.low>>>0)},e.prototype.toBigInt=function(){return BigInt(this.toString())},e.prototype.toBytes=function(t){return t?this.toBytesLE():this.toBytesBE()},e.prototype.toBytesLE=function(){var t=this.high,r=this.low;return[r&255,r>>>8&255,r>>>16&255,r>>>24,t&255,t>>>8&255,t>>>16&255,t>>>24]},e.prototype.toBytesBE=function(){var t=this.high,r=this.low;return[t>>>24,t>>>16&255,t>>>8&255,t&255,r>>>24,r>>>16&255,r>>>8&255,r&255]},e.prototype.toSigned=function(){return this.unsigned?e.fromBits(this.low,this.high,!1):this},e.prototype.toString=function(t){if(t=t||10,t<2||36<t)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(e.MIN_VALUE)){var r=e.fromNumber(t),n=this.div(r),o=n.mul(r).sub(this);return n.toString(t)+o.toInt().toString(t)}else return"-"+this.neg().toString(t);for(var i=e.fromNumber(Math.pow(t,6),this.unsigned),a=this,u="";;){var l=a.div(i),s=a.sub(l.mul(i)).toInt()>>>0,c=s.toString(t);if(a=l,a.isZero())return c+u;for(;c.length<6;)c="0"+c;u=""+c+u}},e.prototype.toUnsigned=function(){return this.unsigned?this:e.fromBits(this.low,this.high,!0)},e.prototype.xor=function(t){return e.isLong(t)||(t=e.fromValue(t)),e.fromBits(this.low^t.low,this.high^t.high,this.unsigned)},e.prototype.eqz=function(){return this.isZero()},e.prototype.le=function(t){return this.lessThanOrEqual(t)},e.prototype.toExtendedJSON=function(t){return t&&t.relaxed?this.toNumber():{$numberLong:this.toString()}},e.fromExtendedJSON=function(t,r){var n=e.fromString(t.$numberLong);return r&&r.relaxed?n.toNumber():n},e.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},e.prototype.inspect=function(){return'new Long("'.concat(this.toString(),'"').concat(this.unsigned?", true":"",")")},e.TWO_PWR_24=e.fromInt(qF),e.MAX_UNSIGNED_VALUE=e.fromBits(-1,-1,!0),e.ZERO=e.fromInt(0),e.UZERO=e.fromInt(0,!0),e.ONE=e.fromInt(1),e.UONE=e.fromInt(1,!0),e.NEG_ONE=e.fromInt(-1),e.MAX_VALUE=e.fromBits(-1,2147483647,!1),e.MIN_VALUE=e.fromBits(0,-2147483648,!1),e}();Object.defineProperty(te.prototype,"__isLong__",{value:!0});Object.defineProperty(te.prototype,"_bsontype",{value:"Long"});var WF=/^(\+|-)?(\d+|(\d*\.\d*))?(E|e)?([-+])?(\d+)?$/,HF=/^(\+|-)?(Infinity|inf)$/i,GF=/^(\+|-)?NaN$/i,Oo=6111,Yc=-6176,Yv=6176,VF=34,Qc=[124,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse(),Qv=[248,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse(),Xv=[120,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse(),KF=/^([-+])?(\d+)?$/,zF=31,Zv=16383,JF=30,YF=31;function eg(e){return!isNaN(parseInt(e,10))}function QF(e){var t=te.fromNumber(1e9),r=te.fromNumber(0);if(!e.parts[0]&&!e.parts[1]&&!e.parts[2]&&!e.parts[3])return{quotient:e,rem:r};for(var n=0;n<=3;n++)r=r.shiftLeft(32),r=r.add(new te(e.parts[n],0)),e.parts[n]=r.div(t).low,r=r.modulo(t);return{quotient:e,rem:r}}function XF(e,t){if(!e&&!t)return{high:te.fromNumber(0),low:te.fromNumber(0)};var r=e.shiftRightUnsigned(32),n=new te(e.getLowBits(),0),o=t.shiftRightUnsigned(32),i=new te(t.getLowBits(),0),a=r.multiply(o),u=r.multiply(i),l=n.multiply(o),s=n.multiply(i);return a=a.add(u.shiftRightUnsigned(32)),u=new te(u.getLowBits(),0).add(l).add(s.shiftRightUnsigned(32)),a=a.add(u.shiftRightUnsigned(32)),s=u.shiftLeft(32).add(new te(s.getLowBits(),0)),{high:a,low:s}}function ZF(e,t){var r=e.high>>>0,n=t.high>>>0;if(r<n)return!0;if(r===n){var o=e.low>>>0,i=t.low>>>0;if(o<i)return!0}return!1}function Ei(e,t){throw new je('"'.concat(e,'" is not a valid Decimal128 string - ').concat(t))}var pd=function(){function e(t){if(!(this instanceof e))return new e(t);if(typeof t=="string")this.bytes=e.fromString(t).bytes;else if(hd(t)){if(t.byteLength!==16)throw new je("Decimal128 must take a Buffer of 16 bytes");this.bytes=t}else throw new je("Decimal128 must take a Buffer or string")}return e.fromString=function(t){var r=!1,n=!1,o=!1,i=0,a=0,u=0,l=0,s=0,c=[0],f=0,d=0,v=0,m=0,b=0,w=0,_=new te(0,0),E=new te(0,0),A=0,I=0;if(t.length>=7e3)throw new je(""+t+" not a valid Decimal128 string");var R=t.match(WF),L=t.match(HF),U=t.match(GF);if(!R&&!L&&!U||t.length===0)throw new je(""+t+" not a valid Decimal128 string");if(R){var N=R[2],D=R[4],k=R[5],M=R[6];D&&M===void 0&&Ei(t,"missing exponent power"),D&&N===void 0&&Ei(t,"missing exponent base"),D===void 0&&(k||M)&&Ei(t,"missing e before exponent")}if((t[I]==="+"||t[I]==="-")&&(r=t[I++]==="-"),!eg(t[I])&&t[I]!=="."){if(t[I]==="i"||t[I]==="I")return new e(Ie.from(r?Qv:Xv));if(t[I]==="N")return new e(Ie.from(Qc))}for(;eg(t[I])||t[I]===".";){if(t[I]==="."){n&&Ei(t,"contains multiple periods"),n=!0,I=I+1;continue}f<34&&(t[I]!=="0"||o)&&(o||(s=a),o=!0,c[d++]=parseInt(t[I],10),f=f+1),o&&(u=u+1),n&&(l=l+1),a=a+1,I=I+1}if(n&&!a)throw new je(""+t+" not a valid Decimal128 string");if(t[I]==="e"||t[I]==="E"){var Q=t.substr(++I).match(KF);if(!Q||!Q[2])return new e(Ie.from(Qc));b=parseInt(Q[0],10),I=I+Q[0].length}if(t[I])return new e(Ie.from(Qc));if(v=0,!f)v=0,m=0,c[0]=0,u=1,f=1,i=0;else if(m=f-1,i=u,i!==1)for(;c[s+i-1]===0;)i=i-1;for(b<=l&&l-b>16384?b=Yc:b=b-l;b>Oo;){if(m=m+1,m-v>VF){var oe=c.join("");if(oe.match(/^0+$/)){b=Oo;break}Ei(t,"overflow")}b=b-1}for(;b<Yc||f<u;){if(m===0&&i<f){b=Yc,i=0;break}if(f<u?u=u-1:m=m-1,b<Oo)b=b+1;else{var oe=c.join("");if(oe.match(/^0+$/)){b=Oo;break}Ei(t,"overflow")}}if(m-v+1<i){var Y=a;n&&(s=s+1,Y=Y+1),r&&(s=s+1,Y=Y+1);var Ae=parseInt(t[s+m+1],10),ge=0;if(Ae>=5&&(ge=1,Ae===5)){for(ge=c[m]%2===1?1:0,w=s+m+2;w<Y;w++)if(parseInt(t[w],10)){ge=1;break}}if(ge){for(var K=m;K>=0;K--)if(++c[K]>9&&(c[K]=0,K===0))if(b<Oo)b=b+1,c[K]=1;else return new e(Ie.from(r?Qv:Xv))}}if(_=te.fromNumber(0),E=te.fromNumber(0),i===0)_=te.fromNumber(0),E=te.fromNumber(0);else if(m-v<17){var K=v;for(E=te.fromNumber(c[K++]),_=new te(0,0);K<=m;K++)E=E.multiply(te.fromNumber(10)),E=E.add(te.fromNumber(c[K]))}else{var K=v;for(_=te.fromNumber(c[K++]);K<=m-17;K++)_=_.multiply(te.fromNumber(10)),_=_.add(te.fromNumber(c[K]));for(E=te.fromNumber(c[K++]);K<=m;K++)E=E.multiply(te.fromNumber(10)),E=E.add(te.fromNumber(c[K]))}var ce=XF(_,te.fromString("100000000000000000"));ce.low=ce.low.add(E),ZF(ce.low,E)&&(ce.high=ce.high.add(te.fromNumber(1))),A=b+Yv;var se={low:te.fromNumber(0),high:te.fromNumber(0)};ce.high.shiftRightUnsigned(49).and(te.fromNumber(1)).equals(te.fromNumber(1))?(se.high=se.high.or(te.fromNumber(3).shiftLeft(61)),se.high=se.high.or(te.fromNumber(A).and(te.fromNumber(16383).shiftLeft(47))),se.high=se.high.or(ce.high.and(te.fromNumber(0x7fffffffffff)))):(se.high=se.high.or(te.fromNumber(A&16383).shiftLeft(49)),se.high=se.high.or(ce.high.and(te.fromNumber(562949953421311)))),se.low=ce.low,r&&(se.high=se.high.or(te.fromString("9223372036854775808")));var ae=Ie.alloc(16);return I=0,ae[I++]=se.low.low&255,ae[I++]=se.low.low>>8&255,ae[I++]=se.low.low>>16&255,ae[I++]=se.low.low>>24&255,ae[I++]=se.low.high&255,ae[I++]=se.low.high>>8&255,ae[I++]=se.low.high>>16&255,ae[I++]=se.low.high>>24&255,ae[I++]=se.high.low&255,ae[I++]=se.high.low>>8&255,ae[I++]=se.high.low>>16&255,ae[I++]=se.high.low>>24&255,ae[I++]=se.high.high&255,ae[I++]=se.high.high>>8&255,ae[I++]=se.high.high>>16&255,ae[I++]=se.high.high>>24&255,new e(ae)},e.prototype.toString=function(){for(var t,r=0,n=new Array(36),o=0;o<n.length;o++)n[o]=0;var i=0,a=!1,u,l={parts:[0,0,0,0]},s,c,f=[];i=0;var d=this.bytes,v=d[i++]|d[i++]<<8|d[i++]<<16|d[i++]<<24,m=d[i++]|d[i++]<<8|d[i++]<<16|d[i++]<<24,b=d[i++]|d[i++]<<8|d[i++]<<16|d[i++]<<24,w=d[i++]|d[i++]<<8|d[i++]<<16|d[i++]<<24;i=0;var _={low:new te(v,m),high:new te(b,w)};_.high.lessThan(te.ZERO)&&f.push("-");var E=w>>26&zF;if(E>>3===3){if(E===JF)return f.join("")+"Infinity";if(E===YF)return"NaN";t=w>>15&Zv,u=8+(w>>14&1)}else u=w>>14&7,t=w>>17&Zv;var A=t-Yv;if(l.parts[0]=(w&16383)+((u&15)<<14),l.parts[1]=b,l.parts[2]=m,l.parts[3]=v,l.parts[0]===0&&l.parts[1]===0&&l.parts[2]===0&&l.parts[3]===0)a=!0;else for(c=3;c>=0;c--){var I=0,R=QF(l);if(l=R.quotient,I=R.rem.low,!!I)for(s=8;s>=0;s--)n[c*9+s]=I%10,I=Math.floor(I/10)}if(a)r=1,n[i]=0;else for(r=36;!n[i];)r=r-1,i=i+1;var L=r-1+A;if(L>=34||L<=-7||A>0){if(r>34)return f.push("".concat(0)),A>0?f.push("E+".concat(A)):A<0&&f.push("E".concat(A)),f.join("");f.push("".concat(n[i++])),r=r-1,r&&f.push(".");for(var o=0;o<r;o++)f.push("".concat(n[i++]));f.push("E"),L>0?f.push("+".concat(L)):f.push("".concat(L))}else if(A>=0)for(var o=0;o<r;o++)f.push("".concat(n[i++]));else{var U=r+A;if(U>0)for(var o=0;o<U;o++)f.push("".concat(n[i++]));else f.push("0");for(f.push(".");U++<0;)f.push("0");for(var o=0;o<r-Math.max(U-1,0);o++)f.push("".concat(n[i++]))}return f.join("")},e.prototype.toJSON=function(){return{$numberDecimal:this.toString()}},e.prototype.toExtendedJSON=function(){return{$numberDecimal:this.toString()}},e.fromExtendedJSON=function(t){return e.fromString(t.$numberDecimal)},e.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},e.prototype.inspect=function(){return'new Decimal128("'.concat(this.toString(),'")')},e}();Object.defineProperty(pd.prototype,"_bsontype",{value:"Decimal128"});var Ku=function(){function e(t){if(!(this instanceof e))return new e(t);t instanceof Number&&(t=t.valueOf()),this.value=+t}return e.prototype.valueOf=function(){return this.value},e.prototype.toJSON=function(){return this.value},e.prototype.toString=function(t){return this.value.toString(t)},e.prototype.toExtendedJSON=function(t){return t&&(t.legacy||t.relaxed&&isFinite(this.value))?this.value:Object.is(Math.sign(this.value),-0)?{$numberDouble:"-".concat(this.value.toFixed(1))}:{$numberDouble:Number.isInteger(this.value)?this.value.toFixed(1):this.value.toString()}},e.fromExtendedJSON=function(t,r){var n=parseFloat(t.$numberDouble);return r&&r.relaxed?n:new e(n)},e.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},e.prototype.inspect=function(){var t=this.toExtendedJSON();return"new Double(".concat(t.$numberDouble,")")},e}();Object.defineProperty(Ku.prototype,"_bsontype",{value:"Double"});var zu=function(){function e(t){if(!(this instanceof e))return new e(t);t instanceof Number&&(t=t.valueOf()),this.value=+t|0}return e.prototype.valueOf=function(){return this.value},e.prototype.toString=function(t){return this.value.toString(t)},e.prototype.toJSON=function(){return this.value},e.prototype.toExtendedJSON=function(t){return t&&(t.relaxed||t.legacy)?this.value:{$numberInt:this.value.toString()}},e.fromExtendedJSON=function(t,r){return r&&r.relaxed?parseInt(t.$numberInt,10):new e(t.$numberInt)},e.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},e.prototype.inspect=function(){return"new Int32(".concat(this.valueOf(),")")},e}();Object.defineProperty(zu.prototype,"_bsontype",{value:"Int32"});var vd=function(){function e(){if(!(this instanceof e))return new e}return e.prototype.toExtendedJSON=function(){return{$maxKey:1}},e.fromExtendedJSON=function(){return new e},e.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},e.prototype.inspect=function(){return"new MaxKey()"},e}();Object.defineProperty(vd.prototype,"_bsontype",{value:"MaxKey"});var gd=function(){function e(){if(!(this instanceof e))return new e}return e.prototype.toExtendedJSON=function(){return{$minKey:1}},e.fromExtendedJSON=function(){return new e},e.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},e.prototype.inspect=function(){return"new MinKey()"},e}();Object.defineProperty(gd.prototype,"_bsontype",{value:"MinKey"});var eM=new RegExp("^[0-9a-fA-F]{24}$"),qn=null,Er=Symbol("id"),Xt=function(){function e(t){if(!(this instanceof e))return new e(t);var r;if(typeof t=="object"&&t&&"id"in t){if(typeof t.id!="string"&&!ArrayBuffer.isView(t.id))throw new je("Argument passed in must have an id that is of type string or Buffer");"toHexString"in t&&typeof t.toHexString=="function"?r=Ie.from(t.toHexString(),"hex"):r=t.id}else r=t;if(r==null||typeof r=="number")this[Er]=e.generate(typeof r=="number"?r:void 0);else if(ArrayBuffer.isView(r)&&r.byteLength===12)this[Er]=r instanceof Ie?r:iu(r);else if(typeof r=="string")if(r.length===12){var n=Ie.from(r);if(n.byteLength===12)this[Er]=n;else throw new je("Argument passed in must be a string of 12 bytes")}else if(r.length===24&&eM.test(r))this[Er]=Ie.from(r,"hex");else throw new je("Argument passed in must be a string of 12 bytes or a string of 24 hex characters or an integer");else throw new je("Argument passed in does not match the accepted types");e.cacheHexString&&(this.__id=this.id.toString("hex"))}return Object.defineProperty(e.prototype,"id",{get:function(){return this[Er]},set:function(t){this[Er]=t,e.cacheHexString&&(this.__id=t.toString("hex"))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"generationTime",{get:function(){return this.id.readInt32BE(0)},set:function(t){this.id.writeUInt32BE(t,0)},enumerable:!1,configurable:!0}),e.prototype.toHexString=function(){if(e.cacheHexString&&this.__id)return this.__id;var t=this.id.toString("hex");return e.cacheHexString&&!this.__id&&(this.__id=t),t},e.getInc=function(){return e.index=(e.index+1)%16777215},e.generate=function(t){typeof t!="number"&&(t=Math.floor(Date.now()/1e3));var r=e.getInc(),n=Ie.alloc(12);return n.writeUInt32BE(t,0),qn===null&&(qn=X_(5)),n[4]=qn[0],n[5]=qn[1],n[6]=qn[2],n[7]=qn[3],n[8]=qn[4],n[11]=r&255,n[10]=r>>8&255,n[9]=r>>16&255,n},e.prototype.toString=function(t){return t?this.id.toString(t):this.toHexString()},e.prototype.toJSON=function(){return this.toHexString()},e.prototype.equals=function(t){if(t==null)return!1;if(t instanceof e)return this[Er][11]===t[Er][11]&&this[Er].equals(t[Er]);if(typeof t=="string"&&e.isValid(t)&&t.length===12&&hd(this.id))return t===Ie.prototype.toString.call(this.id,"latin1");if(typeof t=="string"&&e.isValid(t)&&t.length===24)return t.toLowerCase()===this.toHexString();if(typeof t=="string"&&e.isValid(t)&&t.length===12)return Ie.from(t).equals(this.id);if(typeof t=="object"&&"toHexString"in t&&typeof t.toHexString=="function"){var r=t.toHexString(),n=this.toHexString().toLowerCase();return typeof r=="string"&&r.toLowerCase()===n}return!1},e.prototype.getTimestamp=function(){var t=new Date,r=this.id.readUInt32BE(0);return t.setTime(Math.floor(r)*1e3),t},e.createPk=function(){return new e},e.createFromTime=function(t){var r=Ie.from([0,0,0,0,0,0,0,0,0,0,0,0]);return r.writeUInt32BE(t,0),new e(r)},e.createFromHexString=function(t){if(typeof t>"u"||t!=null&&t.length!==24)throw new je("Argument passed in must be a single String of 12 bytes or a string of 24 hex characters");return new e(Ie.from(t,"hex"))},e.isValid=function(t){if(t==null)return!1;try{return new e(t),!0}catch{return!1}},e.prototype.toExtendedJSON=function(){return this.toHexString?{$oid:this.toHexString()}:{$oid:this.toString("hex")}},e.fromExtendedJSON=function(t){return new e(t.$oid)},e.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},e.prototype.inspect=function(){return'new ObjectId("'.concat(this.toHexString(),'")')},e.index=Math.floor(Math.random()*16777215),e}();Object.defineProperty(Xt.prototype,"generate",{value:Gu(function(e){return Xt.generate(e)},"Please use the static `ObjectId.generate(time)` instead")});Object.defineProperty(Xt.prototype,"getInc",{value:Gu(function(){return Xt.getInc()},"Please use the static `ObjectId.getInc()` instead")});Object.defineProperty(Xt.prototype,"get_inc",{value:Gu(function(){return Xt.getInc()},"Please use the static `ObjectId.getInc()` instead")});Object.defineProperty(Xt,"get_inc",{value:Gu(function(){return Xt.getInc()},"Please use the static `ObjectId.getInc()` instead")});Object.defineProperty(Xt.prototype,"_bsontype",{value:"ObjectID"});function tM(e){return e.split("").sort().join("")}var ys=function(){function e(t,r){if(!(this instanceof e))return new e(t,r);if(this.pattern=t,this.options=tM(r??""),this.pattern.indexOf("\0")!==-1)throw new oi("BSON Regex patterns cannot contain null bytes, found: ".concat(JSON.stringify(this.pattern)));if(this.options.indexOf("\0")!==-1)throw new oi("BSON Regex options cannot contain null bytes, found: ".concat(JSON.stringify(this.options)));for(var n=0;n<this.options.length;n++)if(!(this.options[n]==="i"||this.options[n]==="m"||this.options[n]==="x"||this.options[n]==="l"||this.options[n]==="s"||this.options[n]==="u"))throw new oi("The regular expression option [".concat(this.options[n],"] is not supported"))}return e.parseOptions=function(t){return t?t.split("").sort().join(""):""},e.prototype.toExtendedJSON=function(t){return t=t||{},t.legacy?{$regex:this.pattern,$options:this.options}:{$regularExpression:{pattern:this.pattern,options:this.options}}},e.fromExtendedJSON=function(t){if("$regex"in t)if(typeof t.$regex!="string"){if(t.$regex._bsontype==="BSONRegExp")return t}else return new e(t.$regex,e.parseOptions(t.$options));if("$regularExpression"in t)return new e(t.$regularExpression.pattern,e.parseOptions(t.$regularExpression.options));throw new je("Unexpected BSONRegExp EJSON object form: ".concat(JSON.stringify(t)))},e}();Object.defineProperty(ys.prototype,"_bsontype",{value:"BSONRegExp"});var md=function(){function e(t){if(!(this instanceof e))return new e(t);this.value=t}return e.prototype.valueOf=function(){return this.value},e.prototype.toString=function(){return this.value},e.prototype.inspect=function(){return'new BSONSymbol("'.concat(this.value,'")')},e.prototype.toJSON=function(){return this.value},e.prototype.toExtendedJSON=function(){return{$symbol:this.value}},e.fromExtendedJSON=function(t){return new e(t.$symbol)},e.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},e}();Object.defineProperty(md.prototype,"_bsontype",{value:"Symbol"});var rM=te,rb=function(e){Hu(t,e);function t(r,n){var o=this;return o instanceof t?(te.isLong(r)?o=e.call(this,r.low,r.high,!0)||this:Ts(r)&&typeof r.t<"u"&&typeof r.i<"u"?o=e.call(this,r.i,r.t,!0)||this:o=e.call(this,r,n,!0)||this,Object.defineProperty(o,"_bsontype",{value:"Timestamp",writable:!1,configurable:!1,enumerable:!1}),o):new t(r,n)}return t.prototype.toJSON=function(){return{$timestamp:this.toString()}},t.fromInt=function(r){return new t(te.fromInt(r,!0))},t.fromNumber=function(r){return new t(te.fromNumber(r,!0))},t.fromBits=function(r,n){return new t(r,n)},t.fromString=function(r,n){return new t(te.fromString(r,!0,n))},t.prototype.toExtendedJSON=function(){return{$timestamp:{t:this.high>>>0,i:this.low>>>0}}},t.fromExtendedJSON=function(r){return new t(r.$timestamp)},t.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},t.prototype.inspect=function(){return"new Timestamp({ t: ".concat(this.getHighBits(),", i: ").concat(this.getLowBits()," })")},t.MAX_VALUE=te.MAX_UNSIGNED_VALUE,t}(rM);function nM(e){return Ts(e)&&Reflect.has(e,"_bsontype")&&typeof e._bsontype=="string"}var nb=2147483647,ib=-2147483648,ob=9223372036854776e3,sb=-9223372036854776e3,iM={$oid:Xt,$binary:si,$uuid:si,$symbol:md,$numberInt:zu,$numberDecimal:pd,$numberDouble:Ku,$numberLong:te,$minKey:gd,$maxKey:vd,$regex:ys,$regularExpression:ys,$timestamp:rb};function ab(e,t){if(t===void 0&&(t={}),typeof e=="number"){if(t.relaxed||t.legacy)return e;if(Math.floor(e)===e){if(e>=ib&&e<=nb)return new zu(e);if(e>=sb&&e<=ob)return te.fromNumber(e)}return new Ku(e)}if(e==null||typeof e!="object")return e;if(e.$undefined)return null;for(var r=Object.keys(e).filter(function(f){return f.startsWith("$")&&e[f]!=null}),n=0;n<r.length;n++){var o=iM[r[n]];if(o)return o.fromExtendedJSON(e,t)}if(e.$date!=null){var i=e.$date,a=new Date;return t.legacy?typeof i=="number"?a.setTime(i):typeof i=="string"&&a.setTime(Date.parse(i)):typeof i=="string"?a.setTime(Date.parse(i)):te.isLong(i)?a.setTime(i.toNumber()):typeof i=="number"&&t.relaxed&&a.setTime(i),a}if(e.$code!=null){var u=Object.assign({},e);return e.$scope&&(u.$scope=ab(e.$scope)),Vu.fromExtendedJSON(e)}if(kF(e)||e.$dbPointer){var l=e.$ref?e:e.$dbPointer;if(l instanceof ms)return l;var s=Object.keys(l).filter(function(f){return f.startsWith("$")}),c=!0;if(s.forEach(function(f){["$ref","$id","$db"].indexOf(f)===-1&&(c=!1)}),c)return ms.fromExtendedJSON(l)}return e}function oM(e,t){return e.map(function(r,n){t.seenObjects.push({propertyName:"index ".concat(n),obj:null});try{return mn(r,t)}finally{t.seenObjects.pop()}})}function tg(e){var t=e.toISOString();return e.getUTCMilliseconds()!==0?t:t.slice(0,-5)+"Z"}function mn(e,t){if((typeof e=="object"||typeof e=="function")&&e!==null){var r=t.seenObjects.findIndex(function(_){return _.obj===e});if(r!==-1){var n=t.seenObjects.map(function(_){return _.propertyName}),o=n.slice(0,r).map(function(_){return"".concat(_," -> ")}).join(""),i=n[r],a=" -> "+n.slice(r+1,n.length-1).map(function(_){return"".concat(_," -> ")}).join(""),u=n[n.length-1],l=" ".repeat(o.length+i.length/2),s="-".repeat(a.length+(i.length+u.length)/2-1);throw new je(`Converting circular structure to EJSON:
`+"    ".concat(o).concat(i).concat(a).concat(u,`
`)+"    ".concat(l,"\\").concat(s,"/"))}t.seenObjects[t.seenObjects.length-1].obj=e}if(Array.isArray(e))return oM(e,t);if(e===void 0)return null;if(e instanceof Date||FF(e)){var c=e.getTime(),f=c>-1&&c<2534023188e5;return t.legacy?t.relaxed&&f?{$date:e.getTime()}:{$date:tg(e)}:t.relaxed&&f?{$date:tg(e)}:{$date:{$numberLong:e.getTime().toString()}}}if(typeof e=="number"&&(!t.relaxed||!isFinite(e))){if(Math.floor(e)===e){var d=e>=ib&&e<=nb,v=e>=sb&&e<=ob;if(d)return{$numberInt:e.toString()};if(v)return{$numberLong:e.toString()}}return{$numberDouble:e.toString()}}if(e instanceof RegExp||$F(e)){var m=e.flags;if(m===void 0){var b=e.toString().match(/[gimuy]*$/);b&&(m=b[0])}var w=new ys(e.source,m);return w.toExtendedJSON(t)}return e!=null&&typeof e=="object"?aM(e,t):e}var sM={Binary:function(e){return new si(e.value(),e.sub_type)},Code:function(e){return new Vu(e.code,e.scope)},DBRef:function(e){return new ms(e.collection||e.namespace,e.oid,e.db,e.fields)},Decimal128:function(e){return new pd(e.bytes)},Double:function(e){return new Ku(e.value)},Int32:function(e){return new zu(e.value)},Long:function(e){return te.fromBits(e.low!=null?e.low:e.low_,e.low!=null?e.high:e.high_,e.low!=null?e.unsigned:e.unsigned_)},MaxKey:function(){return new vd},MinKey:function(){return new gd},ObjectID:function(e){return new Xt(e)},ObjectId:function(e){return new Xt(e)},BSONRegExp:function(e){return new ys(e.pattern,e.options)},Symbol:function(e){return new md(e.value)},Timestamp:function(e){return rb.fromBits(e.low,e.high)}};function aM(e,t){if(e==null||typeof e!="object")throw new oi("not an object instance");var r=e._bsontype;if(typeof r>"u"){var n={};for(var o in e){t.seenObjects.push({propertyName:o,obj:null});try{var i=mn(e[o],t);o==="__proto__"?Object.defineProperty(n,o,{value:i,writable:!0,enumerable:!0,configurable:!0}):n[o]=i}finally{t.seenObjects.pop()}}return n}else if(nM(e)){var a=e;if(typeof a.toExtendedJSON!="function"){var u=sM[e._bsontype];if(!u)throw new je("Unrecognized or invalid _bsontype: "+e._bsontype);a=u(a)}return r==="Code"&&a.scope?a=new Vu(a.code,mn(a.scope,t)):r==="DBRef"&&a.oid&&(a=new ms(mn(a.collection,t),mn(a.oid,t),mn(a.db,t),mn(a.fields,t))),a.toExtendedJSON(t)}else throw new oi("_bsontype must be a string, but was: "+typeof r)}var Ut;(function(e){function t(i,a){var u=Object.assign({},{relaxed:!0,legacy:!1},a);return typeof u.relaxed=="boolean"&&(u.strict=!u.relaxed),typeof u.strict=="boolean"&&(u.relaxed=!u.strict),JSON.parse(i,function(l,s){if(l.indexOf("\0")!==-1)throw new oi("BSON Document field names cannot contain null bytes, found: ".concat(JSON.stringify(l)));return ab(s,u)})}e.parse=t;function r(i,a,u,l){u!=null&&typeof u=="object"&&(l=u,u=0),a!=null&&typeof a=="object"&&!Array.isArray(a)&&(l=a,a=void 0,u=0);var s=Object.assign({relaxed:!0,legacy:!1},l,{seenObjects:[{propertyName:"(root)",obj:null}]}),c=mn(i,s);return JSON.stringify(c,a,u)}e.stringify=r;function n(i,a){return a=a||{},JSON.parse(r(i,a))}e.serialize=n;function o(i,a){return a=a||{},t(JSON.stringify(i),a)}e.deserialize=o})(Ut||(Ut={}));var rg=Q_();rg.Map?rg.Map:function(){function e(t){t===void 0&&(t=[]),this._keys=[],this._values={};for(var r=0;r<t.length;r++)if(t[r]!=null){var n=t[r],o=n[0],i=n[1];this._keys.push(o),this._values[o]={v:i,i:this._keys.length-1}}}return e.prototype.clear=function(){this._keys=[],this._values={}},e.prototype.delete=function(t){var r=this._values[t];return r==null?!1:(delete this._values[t],this._keys.splice(r.i,1),!0)},e.prototype.entries=function(){var t=this,r=0;return{next:function(){var n=t._keys[r++];return{value:n!==void 0?[n,t._values[n].v]:void 0,done:n===void 0}}}},e.prototype.forEach=function(t,r){r=r||this;for(var n=0;n<this._keys.length;n++){var o=this._keys[n];t.call(r,this._values[o].v,o,r)}},e.prototype.get=function(t){return this._values[t]?this._values[t].v:void 0},e.prototype.has=function(t){return this._values[t]!=null},e.prototype.keys=function(){var t=this,r=0;return{next:function(){var n=t._keys[r++];return{value:n!==void 0?n:void 0,done:n===void 0}}}},e.prototype.set=function(t,r){return this._values[t]?(this._values[t].v=r,this):(this._keys.push(t),this._values[t]={v:r,i:this._keys.length-1},this)},e.prototype.values=function(){var t=this,r=0;return{next:function(){var n=t._keys[r++];return{value:n!==void 0?t._values[n].v:void 0,done:n===void 0}}}},Object.defineProperty(e.prototype,"size",{get:function(){return this._keys.length},enumerable:!1,configurable:!0}),e}();te.fromNumber(BF);te.fromNumber(jF);var Xc=new Uint8Array(8);new DataView(Xc.buffer,Xc.byteOffset,Xc.byteLength);var uM=1024*1024*17;Ie.alloc(uM);var cM=function(e,t,r,n){function o(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function u(c){try{s(n.next(c))}catch(f){a(f)}}function l(c){try{s(n.throw(c))}catch(f){a(f)}}function s(c){c.done?i(c.value):o(c.value).then(u,l)}s((n=n.apply(e,t||[])).next())})},lM=function(e,t){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function u(s){return function(c){return l([s,c])}}function l(s){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(i=s[0]&2?o.return:s[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,s[1])).done)return i;switch(o=0,i&&(s=[s[0]&2,i.value]),s[0]){case 0:case 1:i=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,o=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(s[0]===6||s[0]===2)){r=0;continue}if(s[0]===3&&(!i||s[1]>i[0]&&s[1]<i[3])){r.label=s[1];break}if(s[0]===6&&r.label<i[1]){r.label=i[1],i=s;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(s);break}i[2]&&r.ops.pop(),r.trys.pop();continue}s=t.call(e,r)}catch(c){s=[6,c],o=0}finally{n=i=0}if(s[0]&5)throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}},ub=function(){function e(t,r){this._stages=[],t&&r&&(this._db=t,this._request=new vt.reqClass(this._db.config),this._collectionName=r)}return e.prototype.end=function(){return cM(this,void 0,void 0,function(){var t;return lM(this,function(r){switch(r.label){case 0:if(!this._collectionName||!this._db)throw new Error("Aggregation pipeline cannot send request");return[4,this._request.send("database.aggregate",{collectionName:this._collectionName,stages:this._stages})];case 1:return t=r.sent(),t&&t.data&&t.data.list?[2,{requestId:t.requestId,data:JSON.parse(t.data.list).map(Ut.parse)}]:[2,t]}})})},e.prototype.unwrap=function(){return this._stages},e.prototype.done=function(){return this._stages.map(function(t){var r,n=t.stageKey,o=t.stageValue;return r={},r[n]=JSON.parse(o),r})},e.prototype._pipe=function(t,r){return this._stages.push({stageKey:"$"+t,stageValue:JSON.stringify(r)}),this},e.prototype.addFields=function(t){return this._pipe("addFields",t)},e.prototype.bucket=function(t){return this._pipe("bucket",t)},e.prototype.bucketAuto=function(t){return this._pipe("bucketAuto",t)},e.prototype.count=function(t){return this._pipe("count",t)},e.prototype.geoNear=function(t){return t.query&&(t.query=nu.encode(t.query)),t.distanceMultiplier&&typeof t.distanceMultiplier=="number"&&(t.distanceMultiplier=t.distanceMultiplier),t.near&&(t.near=new Rt(t.near.longitude,t.near.latitude).toJSON()),this._pipe("geoNear",t)},e.prototype.group=function(t){return this._pipe("group",t)},e.prototype.limit=function(t){return this._pipe("limit",t)},e.prototype.match=function(t){return this._pipe("match",nu.encode(t))},e.prototype.project=function(t){return this._pipe("project",t)},e.prototype.lookup=function(t){return this._pipe("lookup",t)},e.prototype.replaceRoot=function(t){return this._pipe("replaceRoot",t)},e.prototype.sample=function(t){return this._pipe("sample",t)},e.prototype.skip=function(t){return this._pipe("skip",t)},e.prototype.sort=function(t){return this._pipe("sort",t)},e.prototype.sortByCount=function(t){return this._pipe("sortByCount",t)},e.prototype.unwind=function(t){return this._pipe("unwind",t)},e}(),fM=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)o.hasOwnProperty(i)&&(n[i]=o[i])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),dM=function(e){fM(t,e);function t(r,n){return e.call(this,r,n)||this}return Object.defineProperty(t.prototype,"name",{get:function(){return this._coll},enumerable:!0,configurable:!0}),t.prototype.doc=function(r){if(typeof r!="string"&&typeof r!="number")throw new Error("docId");return new Wv(this._db,this._coll,r)},t.prototype.add=function(r,n){var o=new Wv(this._db,this._coll,void 0);return o.create(r,n)},t.prototype.aggregate=function(){return new ub(this._db,this._coll)},t}(mF),hM={eq:function(e){return new Ye(ie.EQ,[e])},neq:function(e){return new Ye(ie.NEQ,[e])},lt:function(e){return new Ye(ie.LT,[e])},lte:function(e){return new Ye(ie.LTE,[e])},gt:function(e){return new Ye(ie.GT,[e])},gte:function(e){return new Ye(ie.GTE,[e])},in:function(e){return new Ye(ie.IN,e)},nin:function(e){return new Ye(ie.NIN,e)},all:function(e){return new Ye(ie.ALL,e)},elemMatch:function(e){return new Ye(ie.ELEM_MATCH,[e])},exists:function(e){return new Ye(ie.EXISTS,[e])},size:function(e){return new Ye(ie.SIZE,[e])},mod:function(e){return new Ye(ie.MOD,[e])},geoNear:function(e){return new Ye(ie.GEO_NEAR,[e])},geoWithin:function(e){return new Ye(ie.GEO_WITHIN,[e])},geoIntersects:function(e){return new Ye(ie.GEO_INTERSECTS,[e])},and:function(){var e=ke(arguments[0])?arguments[0]:Array.from(arguments);return new ei(Bt.AND,e)},nor:function(){var e=ke(arguments[0])?arguments[0]:Array.from(arguments);return new ei(Bt.NOR,e)},or:function(){var e=ke(arguments[0])?arguments[0]:Array.from(arguments);return new ei(Bt.OR,e)},not:function(){var e=ke(arguments[0])?arguments[0]:Array.from(arguments);return new ei(Bt.NOT,e)},set:function(e){return new ze(me.SET,[e])},remove:function(){return new ze(me.REMOVE,[])},inc:function(e){return new ze(me.INC,[e])},mul:function(e){return new ze(me.MUL,[e])},push:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r;if(Cn(e[0])&&e[0].hasOwnProperty("each")){var n=e[0];r={$each:n.each,$position:n.position,$sort:n.sort,$slice:n.slice}}else ke(e[0])?r=e[0]:r=Array.from(e);return new ze(me.PUSH,r)},pull:function(e){return new ze(me.PULL,e)},pullAll:function(e){return new ze(me.PULL_ALL,e)},pop:function(){return new ze(me.POP,[])},shift:function(){return new ze(me.SHIFT,[])},unshift:function(){var e=ke(arguments[0])?arguments[0]:Array.from(arguments);return new ze(me.UNSHIFT,e)},addToSet:function(e){return new ze(me.ADD_TO_SET,e)},rename:function(e){return new ze(me.RENAME,[e])},bit:function(e){return new ze(me.BIT,[e])},max:function(e){return new ze(me.MAX,[e])},min:function(e){return new ze(me.MIN,[e])},expr:function(e){return{$expr:e}},jsonSchema:function(e){return{$jsonSchema:e}},text:function(e){return cF(e)?{$search:e.search}:{$search:e.search,$language:e.language,$caseSensitive:e.caseSensitive,$diacriticSensitive:e.diacriticSensitive}},aggregate:{pipeline:function(){return new ub},abs:function(e){return new B("abs",e)},add:function(e){return new B("add",e)},ceil:function(e){return new B("ceil",e)},divide:function(e){return new B("divide",e)},exp:function(e){return new B("exp",e)},floor:function(e){return new B("floor",e)},ln:function(e){return new B("ln",e)},log:function(e){return new B("log",e)},log10:function(e){return new B("log10",e)},mod:function(e){return new B("mod",e)},multiply:function(e){return new B("multiply",e)},pow:function(e){return new B("pow",e)},sqrt:function(e){return new B("sqrt",e)},subtract:function(e){return new B("subtract",e)},trunc:function(e){return new B("trunc",e)},arrayElemAt:function(e){return new B("arrayElemAt",e)},arrayToObject:function(e){return new B("arrayToObject",e)},concatArrays:function(e){return new B("concatArrays",e)},filter:function(e){return new B("filter",e)},in:function(e){return new B("in",e)},indexOfArray:function(e){return new B("indexOfArray",e)},isArray:function(e){return new B("isArray",e)},map:function(e){return new B("map",e)},range:function(e){return new B("range",e)},reduce:function(e){return new B("reduce",e)},reverseArray:function(e){return new B("reverseArray",e)},size:function(e){return new B("size",e)},slice:function(e){return new B("slice",e)},zip:function(e){return new B("zip",e)},and:function(e){return new B("and",e)},not:function(e){return new B("not",e)},or:function(e){return new B("or",e)},cmp:function(e){return new B("cmp",e)},eq:function(e){return new B("eq",e)},gt:function(e){return new B("gt",e)},gte:function(e){return new B("gte",e)},lt:function(e){return new B("lt",e)},lte:function(e){return new B("lte",e)},neq:function(e){return new B("ne",e)},cond:function(e){return new B("cond",e)},ifNull:function(e){return new B("ifNull",e)},switch:function(e){return new B("switch",e)},dateFromParts:function(e){return new B("dateFromParts",e)},dateFromString:function(e){return new B("dateFromString",e)},dayOfMonth:function(e){return new B("dayOfMonth",e)},dayOfWeek:function(e){return new B("dayOfWeek",e)},dayOfYear:function(e){return new B("dayOfYear",e)},isoDayOfWeek:function(e){return new B("isoDayOfWeek",e)},isoWeek:function(e){return new B("isoWeek",e)},isoWeekYear:function(e){return new B("isoWeekYear",e)},millisecond:function(e){return new B("millisecond",e)},minute:function(e){return new B("minute",e)},month:function(e){return new B("month",e)},second:function(e){return new B("second",e)},hour:function(e){return new B("hour",e)},week:function(e){return new B("week",e)},year:function(e){return new B("year",e)},literal:function(e){return new B("literal",e)},mergeObjects:function(e){return new B("mergeObjects",e)},objectToArray:function(e){return new B("objectToArray",e)},allElementsTrue:function(e){return new B("allElementsTrue",e)},anyElementTrue:function(e){return new B("anyElementTrue",e)},setDifference:function(e){return new B("setDifference",e)},setEquals:function(e){return new B("setEquals",e)},setIntersection:function(e){return new B("setIntersection",e)},setIsSubset:function(e){return new B("setIsSubset",e)},setUnion:function(e){return new B("setUnion",e)},concat:function(e){return new B("concat",e)},dateToString:function(e){return new B("dateToString",e)},indexOfBytes:function(e){return new B("indexOfBytes",e)},indexOfCP:function(e){return new B("indexOfCP",e)},split:function(e){return new B("split",e)},strLenBytes:function(e){return new B("strLenBytes",e)},strLenCP:function(e){return new B("strLenCP",e)},strcasecmp:function(e){return new B("strcasecmp",e)},substr:function(e){return new B("substr",e)},substrBytes:function(e){return new B("substrBytes",e)},substrCP:function(e){return new B("substrCP",e)},toLower:function(e){return new B("toLower",e)},toUpper:function(e){return new B("toUpper",e)},meta:function(e){return new B("meta",e)},addToSet:function(e){return new B("addToSet",e)},avg:function(e){return new B("avg",e)},first:function(e){return new B("first",e)},last:function(e){return new B("last",e)},max:function(e){return new B("max",e)},min:function(e){return new B("min",e)},push:function(e){return new B("push",e)},stdDevPop:function(e){return new B("stdDevPop",e)},stdDevSamp:function(e){return new B("stdDevSamp",e)},sum:function(e){return new B("sum",e)},let:function(e){return new B("let",e)}},project:{slice:function(e){return new ng("slice",e)},elemMatch:function(e){return new ng("elemMatch",e)}}},B=function(){function e(t,r){this["$"+t]=r}return e}(),ng=function(){function e(t,r){this["$"+t]=r}return e}(),pM=function(){function e(t){var r=t.regexp,n=t.options;if(!r)throw new TypeError("regexp must be a string");this.$regex=r,this.$options=n}return e.prototype.parse=function(){return{$regex:this.$regex,$options:this.$options}},Object.defineProperty(e.prototype,"_internalType",{get:function(){return W_},enumerable:!0,configurable:!0}),e}();function vM(e){return new pM(e)}var cb={INSERT_DOC_FAIL:{message:"insert document failed"},DATABASE_TRANSACTION_CONFLICT:{code:"DATABASE_TRANSACTION_CONFLICT"}},Ar=function(){return Ar=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Ar.apply(this,arguments)},Ao=function(e,t,r,n){function o(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function u(c){try{s(n.next(c))}catch(f){a(f)}}function l(c){try{s(n.throw(c))}catch(f){a(f)}}function s(c){c.done?i(c.value):o(c.value).then(u,l)}s((n=n.apply(e,t||[])).next())})},Ro=function(e,t){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function u(s){return function(c){return l([s,c])}}function l(s){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(i=s[0]&2?o.return:s[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,s[1])).done)return i;switch(o=0,i&&(s=[s[0]&2,i.value]),s[0]){case 0:case 1:i=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,o=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(s[0]===6||s[0]===2)){r=0;continue}if(s[0]===3&&(!i||s[1]>i[0]&&s[1]<i[3])){r.label=s[1];break}if(s[0]===6&&r.label<i[1]){r.label=i[1],i=s;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(s);break}i[2]&&r.ops.pop(),r.trys.pop();continue}s=t.call(e,r)}catch(c){s=[6,c],o=0}finally{n=i=0}if(s[0]&5)throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}},gM="database.getInTransaction",ig="database.updateDocInTransaction",mM="database.deleteDocInTransaction",yM="database.insertDocInTransaction",og=function(){function e(t,r,n){this._coll=r,this.id=n,this._transaction=t,this._request=this._transaction.getRequestMethod(),this._transactionId=this._transaction.getTransactionId()}return e.prototype.create=function(t){return Ao(this,void 0,void 0,function(){var r,n,o,i;return Ro(this,function(a){switch(a.label){case 0:return r={collectionName:this._coll,transactionId:this._transactionId,data:Ut.stringify(gs(t),{relaxed:!1})},this.id&&(r._id=this.id),[4,this._request.send(yM,r)];case 1:if(n=a.sent(),n.code)throw n;if(o=Ut.parse(n.inserted),i=Ut.parse(n.ok),i==1&&o==1)return[2,Ar(Ar({},n),{ok:i,inserted:o})];throw new Error(cb.INSERT_DOC_FAIL.message)}})})},e.prototype.get=function(){return Ao(this,void 0,void 0,function(){var t,r;return Ro(this,function(n){switch(n.label){case 0:return t={collectionName:this._coll,transactionId:this._transactionId,query:{_id:{$eq:this.id}}},[4,this._request.send(gM,t)];case 1:if(r=n.sent(),r.code)throw r;return[2,{data:r.data!=="null"?qu.formatField(Ut.parse(r.data)):Ut.parse(r.data),requestId:r.requestId}]}})})},e.prototype.set=function(t){return Ao(this,void 0,void 0,function(){var r,n;return Ro(this,function(o){switch(o.label){case 0:return r={collectionName:this._coll,transactionId:this._transactionId,query:{_id:{$eq:this.id}},data:Ut.stringify(gs(t),{relaxed:!1}),upsert:!0},[4,this._request.send(ig,r)];case 1:if(n=o.sent(),n.code)throw n;return[2,Ar(Ar({},n),{updated:Ut.parse(n.updated),upserted:n.upserted?JSON.parse(n.upserted):null})]}})})},e.prototype.update=function(t){return Ao(this,void 0,void 0,function(){var r,n;return Ro(this,function(o){switch(o.label){case 0:return r={collectionName:this._coll,transactionId:this._transactionId,query:{_id:{$eq:this.id}},data:Ut.stringify(dd.encode(t),{relaxed:!1})},[4,this._request.send(ig,r)];case 1:if(n=o.sent(),n.code)throw n;return[2,Ar(Ar({},n),{updated:Ut.parse(n.updated)})]}})})},e.prototype.delete=function(){return Ao(this,void 0,void 0,function(){var t,r;return Ro(this,function(n){switch(n.label){case 0:return t={collectionName:this._coll,transactionId:this._transactionId,query:{_id:{$eq:this.id}}},[4,this._request.send(mM,t)];case 1:if(r=n.sent(),r.code)throw r;return[2,Ar(Ar({},r),{deleted:Ut.parse(r.deleted)})]}})})},e}(),_M=function(){function e(t,r){this._coll=r,this._transaction=t}return e}(),bM=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)o.hasOwnProperty(i)&&(n[i]=o[i])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),wM=function(e){bM(t,e);function t(r,n){return e.call(this,r,n)||this}return Object.defineProperty(t.prototype,"name",{get:function(){return this._coll},enumerable:!0,configurable:!0}),t.prototype.doc=function(r){if(typeof r!="string"&&typeof r!="number")throw new Error("docId");return new og(this._transaction,this._coll,r)},t.prototype.add=function(r){var n;r._id!==void 0&&(n=r._id);var o=new og(this._transaction,this._coll,n);return o.create(r)},t}(_M),ki=function(e,t,r,n){function o(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function u(c){try{s(n.next(c))}catch(f){a(f)}}function l(c){try{s(n.throw(c))}catch(f){a(f)}}function s(c){c.done?i(c.value):o(c.value).then(u,l)}s((n=n.apply(e,t||[])).next())})},qi=function(e,t){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function u(s){return function(c){return l([s,c])}}function l(s){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(i=s[0]&2?o.return:s[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,s[1])).done)return i;switch(o=0,i&&(s=[s[0]&2,i.value]),s[0]){case 0:case 1:i=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,o=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(s[0]===6||s[0]===2)){r=0;continue}if(s[0]===3&&(!i||s[1]>i[0]&&s[1]<i[3])){r.label=s[1];break}if(s[0]===6&&r.label<i[1]){r.label=i[1],i=s;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(s);break}i[2]&&r.ops.pop(),r.trys.pop();continue}s=t.call(e,r)}catch(c){s=[6,c],o=0}finally{n=i=0}if(s[0]&5)throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}},EM="database.startTransaction",SM="database.commitTransaction",IM="database.abortTransaction",lb=function(){function e(t){this._db=t,this._request=new vt.reqClass(this._db.config),this.aborted=!1,this.commited=!1,this.inited=!1}return e.prototype.init=function(){return ki(this,void 0,void 0,function(){var t;return qi(this,function(r){switch(r.label){case 0:return[4,this._request.send(EM)];case 1:if(t=r.sent(),t.code)throw t;return this.inited=!0,this._id=t.transactionId,[2]}})})},e.prototype.collection=function(t){if(!t)throw new Error("Collection name is required");return new wM(this,t)},e.prototype.getTransactionId=function(){return this._id},e.prototype.getRequestMethod=function(){return this._request},e.prototype.commit=function(){return ki(this,void 0,void 0,function(){var t,r;return qi(this,function(n){switch(n.label){case 0:return t={transactionId:this._id},[4,this._request.send(SM,t)];case 1:if(r=n.sent(),r.code)throw r;return this.commited=!0,[2,r]}})})},e.prototype.rollback=function(t){return ki(this,void 0,void 0,function(){var r,n;return qi(this,function(o){switch(o.label){case 0:return r={transactionId:this._id},[4,this._request.send(IM,r)];case 1:if(n=o.sent(),n.code)throw n;return this.aborted=!0,this.abortReason=t,[2,n]}})})},e}();function TM(){return ki(this,void 0,void 0,function(){var e;return qi(this,function(t){switch(t.label){case 0:return e=new lb(this),[4,e.init()];case 1:return t.sent(),[2,e]}})})}function fb(e,t){return t===void 0&&(t=3),ki(this,void 0,void 0,function(){var r,n,o,i,a=this;return qi(this,function(u){switch(u.label){case 0:return u.trys.push([0,4,,10]),r=new lb(this),[4,r.init()];case 1:return u.sent(),[4,e(r)];case 2:if(n=u.sent(),r.aborted===!0)throw r.abortReason;return[4,r.commit()];case 3:return u.sent(),[2,n];case 4:if(o=u.sent(),r.inited===!1)throw o;return i=function(l){return ki(a,void 0,void 0,function(){return qi(this,function(s){switch(s.label){case 0:if(!(!r.aborted&&!r.commited))return[3,5];s.label=1;case 1:return s.trys.push([1,3,,4]),[4,r.rollback()];case 2:return s.sent(),[3,4];case 3:return s.sent(),[3,4];case 4:throw l;case 5:throw r.aborted===!0?r.abortReason:l}})})},t<=0?[4,i(o)]:[3,6];case 5:u.sent(),u.label=6;case 6:return o&&o.code===cb.DATABASE_TRANSACTION_CONFLICT.code?[4,fb.bind(this)(e,--t)]:[3,8];case 7:return[2,u.sent()];case 8:return[4,i(o)];case 9:return u.sent(),[3,10];case 10:return[2]}})})}var vt=function(){function e(t){this.config=t,this.Geo=dF,this.serverDate=uF,this.command=hM,this.RegExp=vM,this.startTransaction=TM,this.runTransaction=fb,this.logicCommand=ei,this.updateCommand=ze,this.queryCommand=Ye}return e.prototype.collection=function(t){if(!t)throw new Error("Collection name is required");return new dM(this,t)},e.prototype.createCollection=function(t){var r=new e.reqClass(this.config),n={collectionName:t};return r.send("database.addCollection",n)},e}(),Qo=function(){return Qo=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Qo.apply(this,arguments)},OM="database";function AM(e){var t=this.platform,r=t.adapter,n=t.runtime;return vt.reqClass=this.request.constructor,vt.getAccessToken=this.authInstance?this.authInstance.getAccessToken.bind(this.authInstance):function(){return""},vt.runtime=n,this.wsClientClass&&(vt.wsClass=r.wsClass,vt.wsClientClass=this.wsClientClass),vt.ws||(vt.ws=null),new vt(Qo(Qo(Qo({},this.config),{_fromApp:this}),e))}var db={name:OM,entity:{database:AM}};try{cloudbase.registerComponent(db)}catch{}function RM(e){try{e.registerComponent(db)}catch(t){console.warn(t)}}const CM="2.20.2",xM={version:CM};var PM=xM.version;$t.registerVersion(PM);try{gA($t),RA($t),NA($t),RM($t),zU($t),o$($t),b$($t),X$($t),_A($t)}catch{}try{window.cloudbase=$t}catch{}class NM{constructor(){this.app=null,this.auth=null,this.database=null,this.storage=null,this.initialized=!1}init(t){if(this.initialized){console.warn("CloudBase already initialized");return}try{this.app=$t.init({env:t.env}),this.auth=this.app.auth({persistence:"local"}),this.database=this.app.database(),this.storage=this.app.uploadFile(),this.initialized=!0,console.log(" CloudBase initialized successfully")}catch(r){throw console.error("CloudBase initialization failed:",r),r}}isLoggedIn(){return this.auth?this.auth.hasLoginState():!1}getCurrentUser(){return this.auth?this.auth.currentUser:null}async signInAnonymously(){try{const t=await this.auth.anonymousAuthProvider().signIn();return console.log("Anonymous login successful:",t),t}catch(t){throw console.error("Anonymous login failed:",t),t}}async signInWithWechat(){try{const t=await this.auth.weixinAuthProvider().signIn();return console.log("Wechat login successful:",t),t}catch(t){throw console.error("Wechat login failed:",t),t}}async signOut(){try{await this.auth.signOut(),console.log("User signed out successfully")}catch(t){throw console.error("Sign out failed:",t),t}}async uploadImage(t,r){if(!this.storage)throw new Error("CloudBase not initialized");try{const n=await this.app.uploadFile({cloudPath:r,filePath:t});return console.log("Image uploaded successfully:",n),n}catch(n){throw console.error("Image upload failed:",n),n}}async getDownloadURL(t){try{const r=await this.app.getTempFileURL({fileList:[t]});if(r.fileList&&r.fileList.length>0)return r.fileList[0].tempFileURL;throw new Error("Failed to get download URL")}catch(r){throw console.error("Get download URL failed:",r),r}}async deleteFile(t){try{const r=await this.app.deleteFile({fileList:[t]});return console.log("File deleted successfully:",r),r}catch(r){throw console.error("Delete file failed:",r),r}}async createRecord(t,r){try{const n=await this.database.collection(t).add(r);return console.log("Record created successfully:",n),n}catch(n){throw console.error("Create record failed:",n),n}}async queryRecords(t,r={}){try{let n=this.database.collection(t);return Object.keys(r).length>0&&(n=n.where(r)),(await n.get()).data}catch(n){throw console.error("Query records failed:",n),n}}async updateRecord(t,r,n){try{const o=await this.database.collection(t).doc(r).update(n);return console.log("Record updated successfully:",o),o}catch(o){throw console.error("Update record failed:",o),o}}async deleteRecord(t,r){try{const n=await this.database.collection(t).doc(r).remove();return console.log("Record deleted successfully:",n),n}catch(n){throw console.error("Delete record failed:",n),n}}onAuthStateChanged(t){this.auth&&this.auth.onLoginStateChanged(r=>{t(r)})}}const jM=new NM,Ju=PE(nI);Ju.use(DE());Ju.use(bu);Ju.use(N1());const LM=()=>{try{const e="your-env-id";e&&e!=="your-env-id"||console.warn(" CloudBase ID .env  VITE_CLOUDBASE_ENV")}catch(e){console.error("CloudBase :",e)}};async function DM(){LM(),Ju.mount("#app")}DM();export{MS as A,Kr as F,YS as _,gu as a,pe as b,Ct as c,pm as d,Yw as e,Rn as f,UM as g,Hm as h,Wi as i,dm as j,Ne as k,ff as l,Tr as m,$M as n,Vg as o,FS as p,Ui as q,Ur as r,FM as s,dg as t,yf as u,jE as v,ar as w,jM as x,yn as y,Zl as z};
