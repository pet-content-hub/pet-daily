import{_ as w,r as $,c as g,s as R,u as B,q as b,o as x,a,b as t,e as N,t as c,m as v,F as k,g as f,k as U,w as A,l as D,h as I,i as s,j as L}from"./main-CcXaIEdh.js";import{u as T,_ as V}from"./ArticleCard-W4_svnRl.js";const S={class:"category-page"},j={class:"page-header"},F={class:"category-stats"},M={class:"stat"},q={key:0,class:"loading-container"},E={key:1,class:"articles-section"},H={class:"articles-grid"},O={key:2,class:"empty-state"},z={key:3,class:"other-categories"},G={class:"categories-grid"},J=["onClick"],K={class:"category-info"},P={__name:"Category",setup(Q){const m=R(),h=I(),u=T(),p=$(!0),o=g(()=>decodeURIComponent(m.params.category||"")),d=g(()=>u.getArticlesByCategory(o.value)),y=g(()=>Object.entries(u.articlesByCategory).filter(([e])=>e!==o.value).map(([e,i])=>({name:e,count:i.length})).sort((e,i)=>i.count-e.count).slice(0,6)),r=g(()=>({title:`åˆ†ç±»ï¼š${o.value}`,description:`æµè§ˆ${o.value}åˆ†ç±»ä¸‹çš„æ‰€æœ‰ä¸“ä¸šå…»çŒ«æ–‡ç« ï¼Œå…±${d.value.length}ç¯‡å†…å®¹`,keywords:`${o.value},çŒ«å’ª,å…»çŒ«,å® ç‰©æŠ¤ç†,çŒ«å’ªçŸ¥è¯†`,ogTitle:`${o.value}åˆ†ç±»æ–‡ç«  - çŒ«å’ªä¸–ç•Œ`,ogDescription:`æµè§ˆ${o.value}åˆ†ç±»ä¸‹çš„æ‰€æœ‰ä¸“ä¸šå…»çŒ«æ–‡ç« `,ogUrl:`https://www.mao.com.cn/categories/${encodeURIComponent(o.value)}`}));B(()=>({title:r.value.title,meta:[{name:"description",content:r.value.description},{name:"keywords",content:r.value.keywords},{property:"og:title",content:r.value.ogTitle},{property:"og:description",content:r.value.ogDescription},{property:"og:type",content:"website"},{property:"og:url",content:r.value.ogUrl}]}));async function _(){p.value=!0;try{u.articles.length===0&&await u.loadArticles()}catch(l){console.error("åŠ è½½åˆ†ç±»æ•°æ®å¤±è´¥:",l)}finally{p.value=!1}}function C(l){h.push(`/categories/${encodeURIComponent(l)}`)}return b(()=>m.params.category,()=>{_()},{immediate:!0}),x(()=>{_()}),(l,e)=>{const i=D("RouterLink");return s(),a("div",S,[t("header",j,[t("h1",null,"åˆ†ç±»ï¼š"+c(o.value),1),t("p",null,[e[0]||(e[0]=v("æµè§ˆ ",-1)),t("strong",null,c(o.value),1),e[1]||(e[1]=v(" ç›¸å…³çš„æ‰€æœ‰æ–‡ç« ",-1))]),t("div",F,[t("span",M," ðŸ“š å…± "+c(d.value.length)+" ç¯‡æ–‡ç«  ",1)])]),p.value?(s(),a("div",q,e[2]||(e[2]=[t("div",{class:"loading-spinner"},null,-1),t("p",null,"åŠ è½½åˆ†ç±»æ–‡ç« ä¸­...",-1)]))):d.value.length>0?(s(),a("section",E,[t("div",H,[(s(!0),a(k,null,f(d.value,n=>(s(),L(V,{key:n.slug,article:n},null,8,["article"]))),128))])])):(s(),a("div",O,[e[4]||(e[4]=t("div",{class:"empty-icon"},"ðŸ“",-1)),e[5]||(e[5]=t("h3",null,"æš‚æ— æ–‡ç« ",-1)),e[6]||(e[6]=t("p",null,"è¯¥åˆ†ç±»ä¸‹æš‚æ—¶æ²¡æœ‰æ–‡ç« ï¼Œæˆ‘ä»¬ä¼šæŒç»­æ›´æ–°å†…å®¹ã€‚",-1)),U(i,{to:"/",class:"back-btn"},{default:A(()=>e[3]||(e[3]=[v(" ðŸ  è¿”å›žé¦–é¡µæµè§ˆå…¶ä»–å†…å®¹ ",-1)])),_:1,__:[3]})])),y.value.length>0?(s(),a("section",z,[e[8]||(e[8]=t("h3",null,"å…¶ä»–åˆ†ç±»",-1)),t("div",G,[(s(!0),a(k,null,f(y.value,n=>(s(),a("div",{key:n.name,class:"category-card",onClick:W=>C(n.name)},[t("div",K,[t("h4",null,c(n.name),1),t("p",null,c(n.count)+" ç¯‡æ–‡ç« ",1)]),e[7]||(e[7]=t("div",{class:"category-arrow"},"â†’",-1))],8,J))),128))])])):N("",!0)])}}},Z=w(P,[["__scopeId","data-v-3ef3f0ea"]]);export{Z as default};
